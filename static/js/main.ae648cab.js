/*! For license information please see main.ae648cab.js.LICENSE.txt */
(()=>{var e={110:(e,t,n)=>{"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,d=Object.getOwnPropertySymbols,h=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);d&&(o=o.concat(d(n)));for(var a=l(t),m=l(n),g=0;g<o.length;++g){var v=o[g];if(!s[v]&&(!r||!r[v])&&(!m||!m[v])&&(!a||!a[v])){var y=h(n,v);try{c(t,v,y)}catch(w){}}}}return t}},746:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,d=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case d:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case h:case g:case m:case l:return e;default:return t}}case i:return t}}}function I(e){return _(e)===d}t.AsyncMode=u,t.ConcurrentMode=d,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=h,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return I(e)||_(e)===u},t.isConcurrentMode=I,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===h},t.isFragment=function(e){return _(e)===s},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===d||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===h||e.$$typeof===y||e.$$typeof===w||e.$$typeof===b||e.$$typeof===v)},t.typeOf=_},309:(e,t,n)=>{"use strict";e.exports=n(746)},463:(e,t,n)=>{"use strict";var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),I=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),x=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function z(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case I:return"Portal";case S:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){J(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function se(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ie=null,Ee=null,Te=null;function Se(e){if(e=wi(e)){if("function"!==typeof Ie)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ie(e.stateNode,e.type,t))}}function ke(e){Ee?Te?Te.push(e):Te=[e]:Ee=e}function xe(){if(Ee){var e=Ee,t=Te;if(Te=Ee=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==Ee||null!==Te)&&(Ae(),xe())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,Ve=null,ze={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(ze,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(je(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=dt(a):0!==(s&=o)&&(r=dt(s))}else 0!==(o=n&~i)?r=dt(o):0!==s&&(r=dt(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,It,Et,Tt,St,kt=!1,xt=[],Ct=null,At=null,Nt=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&It(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){Et(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&It(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function zt(){kt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Rt.forEach(Vt),Pt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function jt(e){function t(t){return Bt(t,e)}if(0<xt.length){Bt(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Kt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Kt(e,t,n,r)}finally{wt=i,qt.transition=s}}function Kt(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Gr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=F({},cn,{view:0,detail:0}),hn=sn(dn),fn=F({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},dn,{relatedTarget:0})),vn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},In={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Sn(){return Tn}var kn=F({},dn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?In[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=sn(kn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Nn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Rn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){ke(r),0<(t=Hr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Kn=null;function Qn(e){Ur(e,0)}function Yn(e){if(K(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Kn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Kn)){var t=[];Wn(t,Kn,e,_e(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Kn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Hr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ir={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Er={},Tr={};function Sr(e){if(Er[e])return Er[e];if(!Ir[e])return e;var t,n=Ir[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Er[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Ir.animationend.animation,delete Ir.animationiteration.animation,delete Ir.animationstart.animation),"TransitionEvent"in window||delete Ir.transitionend.transition);var kr=Sr("animationend"),xr=Sr("animationiteration"),Cr=Sr("animationstart"),Ar=Sr("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(kr,"onAnimationEnd"),Pr(xr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Ht;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=_e(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=xn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case kr:case xr:case Cr:l=vn;break;case Ar:l=Nn;break;case"scroll":l=hn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Pe(p,h))&&u.push(Wr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(d=je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=d,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(h,p+"enter",c,n,i)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=h;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==d&&Qr(o,d,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Gn(a))if(Jn)g=or;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else jn?zn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==w?"onCompositionEnd"===w&&jn&&(y=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,jn=!0)),0<(v=Hr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=Bn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),Zt=Xt=Jt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,fi="__reactProps$"+di,pi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,vi="__reactHandles$"+di;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[hi])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ii=[],Ei=-1;function Ti(e){return{current:e}}function Si(e){0>Ei||(e.current=Ii[Ei],Ii[Ei]=null,Ei--)}function ki(e,t){Ei++,Ii[Ei]=e.current,e.current=t}var xi={},Ci=Ti(xi),Ai=Ti(!1),Ni=xi;function Ri(e,t){var n=e.type.contextTypes;if(!n)return xi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Si(Ai),Si(Ci)}function Oi(e,t,n){if(Ci.current!==xi)throw Error(s(168));ki(Ci,t),ki(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xi,Ni=Ci.current,ki(Ci,e),ki(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Si(Ai),Si(Ci),ki(Ci,e)):Si(Ai),ki(Ai,n)}var Ui=null,Vi=!1,zi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function ji(){if(!zi&&null!==Ui){zi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke(Ze,ji),i}finally{wt=t,zi=!1}}return null}var qi=[],Gi=0,Wi=null,Hi=0,Ki=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){qi[Gi++]=Hi,qi[Gi++]=Wi,Wi=e,Hi=t}function Zi(e,t,n){Ki[Qi++]=$i,Ki[Qi++]=Ji,Ki[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else $i=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=qi[--Gi],qi[Gi]=null,Hi=qi[--Gi],qi[Gi]=null;for(;e===Yi;)Yi=Ki[--Qi],Ki[Qi]=null,Ji=Ki[--Qi],Ki[Qi]=null,$i=Ki[--Qi],Ki[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function ds(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=Ti(null),ys=null,ws=null,bs=null;function _s(){bs=ws=ys=null}function Is(e){var t=vs.current;Si(vs),e._currentValue=t}function Es(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ts(e,t){ys=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ss(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===ys)throw Error(s(308));ws=e,ys.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var ks=null;function xs(e){null===ks?ks=[e]:ks.push(e)}function Cs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,xs(t)):(n.next=i.next,i.next=n),t.interleaved=n,As(e,r)}function As(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ns=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,As(e,n)}return null===(i=r.interleaved)?(t.next=t,xs(r)):(t.next=i.next,i.next=t),r.interleaved=t,As(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var d=i.baseState;for(o=0,u=c=l=null,a=s;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=F({},d,h);break e;case 2:Ns=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(h=a).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===u&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=d}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Vs=(new r.Component).refs;function zs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ds(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ds(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ds(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rc(t,e,r,n),Ls(t,e,r))}};function js(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=xi,s=t.contextType;return"object"===typeof s&&null!==s?s=Ss(s):(i=Pi(t)?Ni:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):xi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Gs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Vs,Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ss(s):(s=Pi(t)?Ni:Ci.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(zs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Hs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Vs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Ks(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===E?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Hs(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Hs(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function d(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Hs(e,null,t),n.return=e,n;case I:return(t=Vc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Ks(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case I:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:d(e,t,n,r,null);Ks(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case I:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return d(t,e=e.get(n)||null,r,i,null);Ks(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,d=s,m=s=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var v=f(i,d,a[m],l);if(null===v){null===d&&(d=g);break}e&&d&&null===v.alternate&&t(i,d),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,d=g}if(m===a.length)return n(i,d),is&&Xi(i,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(i,a[m],l))&&(s=o(d,s,m),null===u?c=d:u.sibling=d,u=d);return is&&Xi(i,m),c}for(d=r(i,d);m<a.length;m++)null!==(g=p(d,i,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var d=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,c);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===d?u=w:d.sibling=w,d=w,m=v}if(y.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return is&&Xi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===d?u=y:d.sibling=y,d=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===E){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Hs(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((s=Mc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lc(o.type,o.key,o.props,null,r.mode,l)).ref=Hs(r,s,o),l.return=r,r=l)}return a(r);case I:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vc(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);Ks(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var $s=Ys(!0),Js=Ys(!1),Xs={},Zs=Ti(Xs),eo=Ti(Xs),to=Ti(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Zs),ki(Zs,t)}function io(){Si(Zs),Si(eo),Si(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Si(Zs),Si(eo))}var ao=Ti(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,vo=null,yo=!1,wo=!1,bo=0,_o=0;function Io(){throw Error(s(321))}function Eo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function To(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,vo=go=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,vo=go=mo=null,yo=!1,t)throw Error(s(300));return e}function So(){var e=0!==bo;return bo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?mo.memoizedState=vo=e:vo=vo.next=e,vo}function xo(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===vo?mo.memoizedState:vo.next;if(null!==t)vo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===vo?mo.memoizedState=vo=e:vo=vo.next=e}return vo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((po&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,mo.lanes|=d,Fl|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=mo,r=xo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=As(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return xo().memoizedState}function Bo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=xo();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Eo(r,o.deps))return void(i.memoizedState=Vo(t,n,s,r))}mo.flags|=e,i.memoizedState=Vo(1|t,n,s,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Go(e,t){return jo(2048,8,e,t)}function Wo(e,t){return jo(4,2,e,t)}function Ho(e,t){return jo(4,4,e,t)}function Ko(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Ko.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Eo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return xo().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Cs(e,t,n,r))){rc(n,e,r,tc()),sa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,xs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Cs(e,t,i,r))&&(rc(n,e,r,i=tc()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:Ss,useCallback:Io,useContext:Io,useEffect:Io,useImperativeHandle:Io,useInsertionEffect:Io,useLayoutEffect:Io,useMemo:Io,useReducer:Io,useRef:Io,useState:Io,useDebugValue:Io,useDeferredValue:Io,useTransition:Io,useMutableSource:Io,useSyncExternalStore:Io,useId:Io,unstable_isNewReconciler:!1},aa={readContext:Ss,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ss,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ko.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Nl.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ss,useCallback:$o,useContext:Ss,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Jo,useReducer:Ao,useRef:zo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(xo(),go.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],xo().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Ss,useCallback:$o,useContext:Ss,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ho,useMemo:Jo,useReducer:No,useRef:zo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=xo();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[No(Co)[0],xo().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function da(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ds(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=r),ha(0,t)},n}function ma(e,t,n){(n=Ds(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ds(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Js(t,null,n,r):$s(t,e.child,n,r)}function Ia(e,t,n,r,i){n=n.render;var s=t.ref;return Ts(t,i),r=To(e,t,n,r,s,i),n=So(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ea(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ta(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ta(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return xa(e,t,n,r,i)}function Sa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Ol,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Ol,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Ol,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Ol,Dl),Dl|=r;return _a(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xa(e,t,n,r,i){var s=Pi(n)?Ni:Ci.current;return s=Ri(t,s),Ts(t,i),n=To(e,t,n,r,s,i),r=So(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ca(e,t,n,r,i){if(Pi(n)){var s=!0;Mi(t)}else s=!1;if(Ts(t,i),null===t.stateNode)Ga(e,t),qs(t,n,r),Ws(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ss(c):c=Ri(t,c=Pi(n)?Ni:Ci.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Gs(t,o,r,c),Ns=!1;var h=t.memoizedState;o.state=h,Fs(t,r,o,i),l=t.memoizedState,a!==r||h!==l||Ai.current||Ns?("function"===typeof u&&(zs(t,n,u,r),l=t.memoizedState),(a=Ns||js(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ps(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:gs(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ss(l):l=Ri(t,l=Pi(n)?Ni:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&Gs(t,o,r,l),Ns=!1,h=t.memoizedState,o.state=h,Fs(t,r,o,i);var p=t.memoizedState;a!==d||h!==p||Ai.current||Ns?("function"===typeof f&&(zs(t,n,f,r),p=t.memoizedState),(c=Ns||js(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,s,i)}function Aa(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wa(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$s(t,e.child,null,s),t.child=$s(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ra(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Pa,Da,Oa,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):Va(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=da(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$s(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=da(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,As(e,i),rc(r,e,i,-1))}return gc(),za(e,t,a,r=da(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Qi++]=$i,Ki[Qi++]=Ji,Ki[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=Va(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Va(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&ps(r),$s(t,e.child,null,n),(e=Va(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Es(e.return,t,n)}function ja(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ja(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ja(t,!0,n,null,s);break;case"together":ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ha(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ka(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ka(t),null;case 1:case 17:return Pi(t.type)&&Di(),Ka(t),null;case 3:return r=t.stateNode,io(),Si(Ai),Si(Ci),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Da(e,t),Ka(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ka(t),null}if(e=no(Zs.current),ds(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Vr("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ka(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Ka(t),null;case 13:if(Si(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),fs(),t.flags|=98560,o=!1;else if(o=ds(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[hi]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ka(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ka(t),null);case 4:return io(),Da(e,t),null===e&&jr(t.stateNode.containerInfo),Ka(t),null;case 10:return Is(t.type._context),Ka(t),null;case 19:if(Si(ao),null===(o=t.memoizedState))return Ka(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ha(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ha(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>ql&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ha(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ka(t),null}else 2*Je()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ha(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Ka(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ka(t),6&t.subtreeFlags&&(t.flags|=8192)):Ka(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ai),Si(Ci),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(ao),null;case 4:return io(),null;case 10:return Is(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var dl=null,hl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||el(n,t);case 6:var r=dl,i=hl;dl=null,fl(e,t,n),hl=i,null!==(dl=r)&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(hl?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),jt(e)):li(dl,n.stateNode));break;case 4:r=dl,i=hl,dl=n.stateNode.containerInfo,hl=!0,fl(e,t,n),dl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ja&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Sc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fl(e,t,n),Ja=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,hl=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===dl)throw Error(s(160));pl(o,a,i),dl=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Sc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(i,h):"dangerouslySetInnerHTML"===d?de(i,h):"children"===d?he(i,h):w(i,d,h,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Sc(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Sc(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(jl=Je())),4&r&&ml(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||d,gl(t,e),Ja=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(Za=e,d=e.child;null!==d;){for(h=Za=d;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){Il(h);continue}}null!==p?(p.return=f,Za=p):Il(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{i=h.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Sc(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Sc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=$a;var c=Ja;if($a=o,(Ja=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Za=l):El(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,$a=a,Ja=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_l(e)}}function _l(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&jt(h)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sl(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function Il(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function El(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Sc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Sc(t,o,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Tl,Sl=Math.ceil,kl=b.ReactCurrentDispatcher,xl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Al=0,Nl=null,Rl=null,Pl=0,Dl=0,Ol=Ti(0),Ll=0,Ml=null,Fl=0,Ul=0,Vl=0,zl=null,Bl=null,jl=0,ql=1/0,Gl=null,Wl=!1,Hl=null,Kl=null,Ql=!1,Yl=null,$l=0,Jl=0,Xl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Al)?Je():-1!==Zl?Zl:Zl=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=wt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&Al)&&e===Nl||(e===Nl&&(0===(2&Al)&&(Ul|=n),4===Ll&&lc(e,Pl)),ic(e,r),1===n&&0===Al&&0===(1&t.mode)&&(ql=Je()+500,Vi&&ji()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=ht(e,e===Nl?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&Al)&&ji()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(Ec()&&e.callbackNode!==n)return null;var r=ht(e,e===Nl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Al;Al|=2;var o=mc();for(Nl===e&&Pl===t||(Gl=null,ql=Je()+500,fc(e,t));;)try{wc();break}catch(l){pc(e,l)}_s(),kl.current=o,Al=i,null!==Rl?t=0:(Nl=null,Pl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ml,fc(e,0),lc(e,r),ic(e,Je()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ml,fc(e,0),lc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Ic(e,Bl,Gl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=jl+500-Je())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ic.bind(null,e,Bl,Gl),t);break}Ic(e,Bl,Gl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(Ic.bind(null,e,Bl,Gl),r);break}Ic(e,Bl,Gl);break;default:throw Error(s(329))}}}return ic(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~Vl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Al))throw Error(s(327));Ec();var t=ht(e,0);if(0===(1&t))return ic(e,Je()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,fc(e,0),lc(e,t),ic(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ic(e,Bl,Gl),ic(e,Je()),null}function uc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(ql=Je()+500,Vi&&ji())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&Ec();var t=Al;Al|=1;var n=Cl.transition,r=wt;try{if(Cl.transition=null,wt=1,e)return e()}finally{wt=r,Cl.transition=n,0===(6&(Al=t))&&ji()}}function hc(){Dl=Ol.current,Si(Ol)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Si(Ai),Si(Ci),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(ao);break;case 10:Is(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Nl=e,Rl=e=Oc(e.current,null),Pl=Dl=t,Ll=0,Ml=null,Vl=Ul=Fl=0,Bl=zl=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(_s(),ho.current=oa,yo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,vo=go=mo=null,wo=!1,bo=0,xl.current=null,null===n||null===n.return){Ll=1,Ml=t,Rl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ll&&(Ll=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,c,t));break e;case 1:l=c;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Kl||!Kl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(b){t=b,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function mc(){var e=kl.current;return kl.current=oa,null===e?oa:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Nl||0===(268435455&Fl)&&0===(268435455&Ul)||lc(Nl,Pl)}function vc(e,t){var n=Al;Al|=2;var r=mc();for(Nl===e&&Pl===t||(Gl=null,fc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(_s(),Al=n,kl.current=r,null!==Rl)throw Error(s(261));return Nl=null,Pl=0,Ll}function yc(){for(;null!==Rl;)bc(Rl)}function wc(){for(;null!==Rl&&!Ye();)bc(Rl)}function bc(e){var t=Tl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?_c(e):Rl=t,xl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Dl)))return void(Rl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ll=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Ic(e,t,n){var r=wt,i=Cl.transition;try{Cl.transition=null,wt=1,function(e,t,n,r){do{Ec()}while(null!==Yl);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Rl=Nl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Nc(tt,(function(){return Ec(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=wt;wt=1;var l=Al;Al|=4,xl.current=null,function(e,t){if(ei=Gt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(l=a+i),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Sc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nl,nl=!1}(e,n),vl(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),$e(),Al=l,wt=a,Cl.transition=o}else e.current=n;if(Ql&&(Ql=!1,Yl=e,$l=i),o=e.pendingLanes,0===o&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&$l)&&0!==e.tag&&Ec(),o=e.pendingLanes,0!==(1&o)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,ji()}(e,t,n,r)}finally{Cl.transition=i,wt=r}return null}function Ec(){if(null!==Yl){var e=bt($l),t=Cl.transition,n=wt;try{if(Cl.transition=null,wt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&Al))throw Error(s(331));var i=Al;for(Al|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var d=Za;switch(d.tag){case 0:case 11:case 15:rl(8,d,o)}var h=d.child;if(null!==h)h.return=d,Za=h;else for(;null!==Za;){var f=(d=Za).sibling,p=d.return;if(ol(d),d===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Za=y;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(I){Sc(l,l.return,I)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(Al=i,ji(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(I){}r=!0}return r}finally{wt=n,Cl.transition=t}}return!1}function Tc(e,t,n){e=Os(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Tc(e,e,n);else for(;null!==t;){if(3===t.tag){Tc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Os(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Pl&n)===n&&(4===Ll||3===Ll&&(130023424&Pl)===Pl&&500>Je()-jl?fc(e,0):Vl|=n),ic(e,t)}function xc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=As(e,t))&&(vt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),xc(e,n)}function Nc(e,t){return Ke(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Dc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Mc(n.children,i,o,t);case T:a=8,i|=8;break;case S:return(e=Pc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Pc(19,n,t,i)).elementType=N,e.lanes=o,e;case D:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case x:a=9;break e;case C:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,o,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function jc(e){if(!e)return xi;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,s,o,a,l){return(e=Bc(n,r,!0,e,0,s,0,a,l)).context=jc(null),n=e.current,(s=Ds(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ds(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rc(e,i,o,s),Ls(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Tl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:so(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(ki(ao,1&ao.current),null!==(e=Wa(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ga(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Ts(t,n),i=To(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Rs(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Ws(t,r,e,n),t=Aa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=gs(r,e),i){case 0:t=xa(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=Ia(null,t,r,e,n);break e;case 14:t=Ea(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ps(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wa(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$s(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ia(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(vs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ds(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Es(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Es(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ts(t,n),r=r(i=Ss(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ea(e,t,r,i=gs(r.type,i),n);case 15:return Ta(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ga(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ts(t,n),qs(t,r,i),Ws(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Sa(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wc(o);a.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wc(o);s.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,jr(8===e.nodeType?e.parentNode:e),dc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,jr(8===e.nodeType?e.parentNode:e),dc((function(){Gc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Gc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc((function(){Gc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Je()),0===(6&Al)&&(ql=Je()+500,ji()))}break;case 13:dc((function(){var t=As(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Kc(e,1)}},It=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)rc(t,e,134217728,tc());Kc(e,134217728)}},Et=function(e){if(13===e.tag){var t=nc(e),n=As(e,t);if(null!==n)rc(n,e,t,tc());Kc(e,t)}},Tt=function(){return wt},St=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ie=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));K(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,Ae=dc;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,xe,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:I,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,I=Object.prototype.hasOwnProperty,E={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)I.call(t,i)&&!T.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:E.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(x,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=A(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)I.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,D(I);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function I(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var s=f;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!A());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(_,d.startTime-n),l=!1}return l}finally{h=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,T=!1,S=null,k=-1,x=5,C=-1;function A(){return!(t.unstable_now()-C<x)}function N(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?E():(T=!1,S=null)}}else T=!1}if("function"===typeof w)E=function(){w(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=N,E=function(){P.postMessage(null)}}else E=function(){v(N,0)};function D(e){S=e,T||(T=!0,E())}function O(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(I))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(k),k=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,D(I))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)},318:(e,t,n)=>{var r={"./iwamahina.jpg":327,"./tanakayumi.jpg":267,"./yamadahanako.jpg":611};function i(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=s,e.exports=i,i.id=318},327:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/iwamahina.23675039e2037159d09a.jpg"},267:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/tanakayumi.1cedec100d0b75bcb33b.jpg"},611:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/yamadahanako.e2ec0861f7c3eabfe006.jpg"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".0f8d78ff.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="app:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+s){a=d;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var h=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=h.bind(null,a.onerror),a.onload=h.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/app/",(()=>{var e={179:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkapp=self.webpackChunkapp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>Fn,SDK_VERSION:()=>Br,_DEFAULT_ENTRY_NAME:()=>Ar,_addComponent:()=>Dr,_addOrOverwriteComponent:()=>Or,_apps:()=>Rr,_clearComponents:()=>Ur,_components:()=>Pr,_getProvider:()=>Mr,_registerComponent:()=>Lr,_removeServiceInstance:()=>Fr,deleteApp:()=>Wr,getApp:()=>qr,getApps:()=>Gr,initializeApp:()=>jr,onLog:()=>Kr,registerVersion:()=>Hr,setLogLevel:()=>Qr});var t=n(791),r=n.t(t,2),i=n(250);function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=!!r.useInsertionEffect&&r.useInsertionEffect,a=o||function(e){return e()};o||t.useLayoutEffect;var l={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function c(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var u=/[A-Z]|^ms/g,d=/_EMO_([^_]+?)_([^]*?)_EMO_/g,h=function(e){return 45===e.charCodeAt(1)},f=function(e){return null!=e&&"boolean"!==typeof e},p=c((function(e){return h(e)?e:e.replace(u,"-$&").toLowerCase()})),m=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(d,(function(e,t,n){return v={name:t,styles:n,next:v},t}))}return 1===l[e]||h(e)||"number"!==typeof t||0===t?t:t+"px"};function g(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return v={name:n.name,styles:n.styles,next:v},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)v={name:r.name,styles:r.styles,next:v},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=g(e,t,n[i])+";";else for(var s in n){var o=n[s];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=s+"{"+t[o]+"}":f(o)&&(r+=p(s)+":"+m(s,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var a=g(e,t,o);switch(s){case"animation":case"animationName":r+=p(s)+":"+a+";";break;default:r+=s+"{"+a+"}"}}else for(var l=0;l<o.length;l++)f(o[l])&&(r+=p(s)+":"+m(s,o[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=v,s=n(e);return v=i,g(e,t,s)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var v,y=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var w=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";v=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,i+=g(n,t,s)):i+=s[0];for(var o=1;o<e.length;o++)i+=g(n,t,e[o]),r&&(i+=s[o]);y.lastIndex=0;for(var a,l="";null!==(a=y.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:v}};var b=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(nR){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),_=Math.abs,I=String.fromCharCode,E=Object.assign;function T(e){return e.trim()}function S(e,t,n){return e.replace(t,n)}function k(e,t){return e.indexOf(t)}function x(e,t){return 0|e.charCodeAt(t)}function C(e,t,n){return e.slice(t,n)}function A(e){return e.length}function N(e){return e.length}function R(e,t){return t.push(e),e}var P=1,D=1,O=0,L=0,M=0,F="";function U(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:P,column:D,length:o,return:""}}function V(e,t){return E(U("",null,null,"",null,null,0),e,{length:-e.length},t)}function z(){return M=L>0?x(F,--L):0,D--,10===M&&(D=1,P--),M}function B(){return M=L<O?x(F,L++):0,D++,10===M&&(D=1,P++),M}function j(){return x(F,L)}function q(){return L}function G(e,t){return C(F,e,t)}function W(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function H(e){return P=D=1,O=A(F=e),L=0,[]}function K(e){return F="",e}function Q(e){return T(G(L-1,J(91===e?e+2:40===e?e+1:e)))}function Y(e){for(;(M=j())&&M<33;)B();return W(e)>2||W(M)>3?"":" "}function $(e,t){for(;--t&&B()&&!(M<48||M>102||M>57&&M<65||M>70&&M<97););return G(e,q()+(t<6&&32==j()&&32==B()))}function J(e){for(;B();)switch(M){case e:return L;case 34:case 39:34!==e&&39!==e&&J(M);break;case 40:41===e&&J(e);break;case 92:B()}return L}function X(e,t){for(;B()&&e+M!==57&&(e+M!==84||47!==j()););return"/*"+G(t,L-1)+"*"+I(47===e?e:B())}function Z(e){for(;!W(j());)B();return G(e,L)}var ee="-ms-",te="-moz-",ne="-webkit-",re="comm",ie="rule",se="decl",oe="@keyframes";function ae(e,t){for(var n="",r=N(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function le(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case se:return e.return=e.return||e.value;case re:return"";case oe:return e.return=e.value+"{"+ae(e.children,r)+"}";case ie:e.value=e.props.join(",")}return A(n=ae(e.children,r))?e.return=e.value+"{"+n+"}":""}function ce(e){return K(ue("",null,null,null,[""],e=H(e),0,[0],e))}function ue(e,t,n,r,i,s,o,a,l){for(var c=0,u=0,d=o,h=0,f=0,p=0,m=1,g=1,v=1,y=0,w="",b=i,_=s,E=r,T=w;g;)switch(p=y,y=B()){case 40:if(108!=p&&58==x(T,d-1)){-1!=k(T+=S(Q(y),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:T+=Q(y);break;case 9:case 10:case 13:case 32:T+=Y(p);break;case 92:T+=$(q()-1,7);continue;case 47:switch(j()){case 42:case 47:R(he(X(B(),q()),t,n),l);break;default:T+="/"}break;case 123*m:a[c++]=A(T)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:-1==v&&(T=S(T,/\f/g,"")),f>0&&A(T)-d&&R(f>32?fe(T+";",r,n,d-1):fe(S(T," ","")+";",r,n,d-2),l);break;case 59:T+=";";default:if(R(E=de(T,t,n,c,u,i,a,w,b=[],_=[],d),s),123===y)if(0===u)ue(T,t,E,E,b,s,d,a,_);else switch(99===h&&110===x(T,3)?100:h){case 100:case 108:case 109:case 115:ue(e,E,E,r&&R(de(e,E,E,0,0,i,a,w,i,b=[],d),_),i,_,d,a,r?b:_);break;default:ue(T,E,E,E,[""],_,0,a,_)}}c=u=f=0,m=v=1,w=T="",d=o;break;case 58:d=1+A(T),f=p;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==z())continue;switch(T+=I(y),y*m){case 38:v=u>0?1:(T+="\f",-1);break;case 44:a[c++]=(A(T)-1)*v,v=1;break;case 64:45===j()&&(T+=Q(B())),h=j(),u=d=A(w=T+=Z(q())),y++;break;case 45:45===p&&2==A(T)&&(m=0)}}return s}function de(e,t,n,r,i,s,o,a,l,c,u){for(var d=i-1,h=0===i?s:[""],f=N(h),p=0,m=0,g=0;p<r;++p)for(var v=0,y=C(e,d+1,d=_(m=o[p])),w=e;v<f;++v)(w=T(m>0?h[v]+" "+y:S(y,/&\f/g,h[v])))&&(l[g++]=w);return U(e,t,n,0===i?ie:a,l,c,u)}function he(e,t,n){return U(e,t,n,re,I(M),C(e,2,-2),0)}function fe(e,t,n,r){return U(e,t,n,se,C(e,0,r),C(e,r+1,-1),r)}var pe=function(e,t,n){for(var r=0,i=0;r=i,i=j(),38===r&&12===i&&(t[n]=1),!W(i);)B();return G(e,L)},me=function(e,t){return K(function(e,t){var n=-1,r=44;do{switch(W(r)){case 0:38===r&&12===j()&&(t[n]=1),e[n]+=pe(L-1,t,n);break;case 2:e[n]+=Q(r);break;case 4:if(44===r){e[++n]=58===j()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=I(r)}}while(r=B());return e}(H(e),t))},ge=new WeakMap,ve=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ge.get(n))&&!r){ge.set(e,!0);for(var i=[],s=me(t,i),o=n.props,a=0,l=0;a<s.length;a++)for(var c=0;c<o.length;c++,l++)e.props[l]=i[a]?s[a].replace(/&\f/g,o[c]):o[c]+" "+s[a]}}},ye=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function we(e,t){switch(function(e,t){return 45^x(e,0)?(((t<<2^x(e,0))<<2^x(e,1))<<2^x(e,2))<<2^x(e,3):0}(e,t)){case 5103:return ne+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ne+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ne+e+te+e+ee+e+e;case 6828:case 4268:return ne+e+ee+e+e;case 6165:return ne+e+ee+"flex-"+e+e;case 5187:return ne+e+S(e,/(\w+).+(:[^]+)/,ne+"box-$1$2"+ee+"flex-$1$2")+e;case 5443:return ne+e+ee+"flex-item-"+S(e,/flex-|-self/,"")+e;case 4675:return ne+e+ee+"flex-line-pack"+S(e,/align-content|flex-|-self/,"")+e;case 5548:return ne+e+ee+S(e,"shrink","negative")+e;case 5292:return ne+e+ee+S(e,"basis","preferred-size")+e;case 6060:return ne+"box-"+S(e,"-grow","")+ne+e+ee+S(e,"grow","positive")+e;case 4554:return ne+S(e,/([^-])(transform)/g,"$1"+ne+"$2")+e;case 6187:return S(S(S(e,/(zoom-|grab)/,ne+"$1"),/(image-set)/,ne+"$1"),e,"")+e;case 5495:case 3959:return S(e,/(image-set\([^]*)/,ne+"$1$`$1");case 4968:return S(S(e,/(.+:)(flex-)?(.*)/,ne+"box-pack:$3"+ee+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ne+e+e;case 4095:case 3583:case 4068:case 2532:return S(e,/(.+)-inline(.+)/,ne+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(A(e)-1-t>6)switch(x(e,t+1)){case 109:if(45!==x(e,t+4))break;case 102:return S(e,/(.+:)(.+)-([^]+)/,"$1"+ne+"$2-$3$1"+te+(108==x(e,t+3)?"$3":"$2-$3"))+e;case 115:return~k(e,"stretch")?we(S(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==x(e,t+1))break;case 6444:switch(x(e,A(e)-3-(~k(e,"!important")&&10))){case 107:return S(e,":",":"+ne)+e;case 101:return S(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ne+(45===x(e,14)?"inline-":"")+"box$3$1"+ne+"$2$3$1"+ee+"$2box$3")+e}break;case 5936:switch(x(e,t+11)){case 114:return ne+e+ee+S(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ne+e+ee+S(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ne+e+ee+S(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ne+e+ee+e+e}return e}var be=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case se:e.return=we(e.value,e.length);break;case oe:return ae([V(e,{value:S(e.value,"@","@"+ne)})],r);case ie:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ae([V(e,{props:[S(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return ae([V(e,{props:[S(t,/:(plac\w+)/,":"+ne+"input-$1")]}),V(e,{props:[S(t,/:(plac\w+)/,":-moz-$1")]}),V(e,{props:[S(t,/:(plac\w+)/,ee+"input-$1")]})],r)}return""}))}}],_e=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||be;var i,s,o={},a=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;a.push(e)}));var l,c,u=[le,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],d=function(e){var t=N(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}([ve,ye].concat(r,u));s=function(e,t,n,r){l=n,ae(ce(e?e+"{"+t.styles+"}":t.styles),d),r&&(h.inserted[t.name]=!0)};var h={key:t,sheet:new b({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:s};return h.sheet.hydrate(a),h};n(110);function Ie(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return w(t)}var Ee;function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Te.apply(this,arguments)}(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ee||(Ee={}));const Se="popstate";function ke(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function xe(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(nR){}}}function Ce(e,t){return{usr:e.state,key:e.key,idx:t}}function Ae(e,t,n,r){return void 0===n&&(n=null),Te({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Re(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Ne(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Re(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Pe(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ee.Pop,l=null,c=u();function u(){return(o.state||{idx:null}).idx}function d(){a=Ee.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:f.location,delta:t})}function h(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:Ne(e);return ke(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,o.replaceState(Te({},o.state,{idx:c}),""));let f={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Se,d),l=e,()=>{i.removeEventListener(Se,d),l=null}},createHref:e=>t(i,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a=Ee.Push;let r=Ae(f.location,e,t);n&&n(r,e),c=u()+1;let d=Ce(r,c),h=f.createHref(r);try{o.pushState(d,"",h)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(h)}s&&l&&l({action:a,location:f.location,delta:1})},replace:function(e,t){a=Ee.Replace;let r=Ae(f.location,e,t);n&&n(r,e),c=u();let i=Ce(r,c),d=f.createHref(r);o.replaceState(i,"",d),s&&l&&l({action:a,location:f.location,delta:0})},go:e=>o.go(e)};return f}var De;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(De||(De={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Oe(e,t,n){void 0===n&&(n="/");let r=Qe(("string"===typeof t?Re(t):t).pathname||"/",n);if(null==r)return null;let i=Le(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=We(i[o],Ke(r));return s}function Le(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(ke(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=Ze([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(ke(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),Le(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:Ge(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of Me(e.path))i(e,t,r);else i(e,t)})),t}function Me(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=Me(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const Fe=/^:\w+$/,Ue=3,Ve=2,ze=1,Be=10,je=-2,qe=e=>"*"===e;function Ge(e,t){let n=e.split("/"),r=n.length;return n.some(qe)&&(r+=je),t&&(r+=Ve),n.filter((e=>!qe(e))).reduce(((e,t)=>e+(Fe.test(t)?Ue:""===t?ze:Be)),r)}function We(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=He({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:Ze([i,c.pathname]),pathnameBase:et(Ze([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=Ze([i,c.pathnameBase]))}return s}function He(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);xe("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return xe(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l||"",r),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function Ke(e){try{return decodeURI(e)}catch(t){return xe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Qe(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Ye(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function $e(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function Je(e,t){let n=$e(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function Xe(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=Re(e):(i=Te({},e),ke(!i.pathname||!i.pathname.includes("?"),Ye("?","pathname","search",i)),ke(!i.pathname||!i.pathname.includes("#"),Ye("#","pathname","hash",i)),ke(!i.search||!i.search.includes("#"),Ye("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else if(r){let e=0===t.length?[]:t[t.length-1].replace(/^\//,"").split("/");if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e.pop();i.pathname=t.join("/")}s="/"+e.join("/")}else{let e=t.length-1;if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?Re(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:tt(r),hash:nt(i)}}(i,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const Ze=e=>e.join("/").replace(/\/\/+/g,"/"),et=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tt=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",nt=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function rt(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const it=["post","put","patch","delete"],st=(new Set(it),["get",...it]);new Set(st),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function ot(){return ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ot.apply(this,arguments)}const at=t.createContext(null);const lt=t.createContext(null);const ct=t.createContext(null);const ut=t.createContext(null);const dt=t.createContext({outlet:null,matches:[],isDataRoute:!1});const ht=t.createContext(null);function ft(){return null!=t.useContext(ut)}function pt(){return ft()||ke(!1),t.useContext(ut).location}function mt(e){t.useContext(ct).static||t.useLayoutEffect(e)}function gt(){let{isDataRoute:e}=t.useContext(dt);return e?function(){let{router:e}=Ct(kt.UseNavigateStable),n=Nt(xt.UseNavigateStable),r=t.useRef(!1);mt((()=>{r.current=!0}));let i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,ot({fromRouteId:n},i)))}),[e,n]);return i}():function(){ft()||ke(!1);let e=t.useContext(at),{basename:n,future:r,navigator:i}=t.useContext(ct),{matches:s}=t.useContext(dt),{pathname:o}=pt(),a=JSON.stringify(Je(s,r.v7_relativeSplatPath)),l=t.useRef(!1);return mt((()=>{l.current=!0})),t.useCallback((function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void i.go(t);let s=Xe(t,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==n&&(s.pathname="/"===s.pathname?n:Ze([n,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[n,i,a,o,e])}()}const vt=t.createContext(null);function yt(){let{matches:e}=t.useContext(dt),n=e[e.length-1];return n?n.params:{}}function wt(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(ct),{matches:s}=t.useContext(dt),{pathname:o}=pt(),a=JSON.stringify(Je(s,i.v7_relativeSplatPath));return t.useMemo((()=>Xe(e,JSON.parse(a),o,"path"===r)),[e,a,o,r])}function bt(e,n,r,i){ft()||ke(!1);let{navigator:s}=t.useContext(ct),{matches:o}=t.useContext(dt),a=o[o.length-1],l=a?a.params:{},c=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let u,d=pt();if(n){var h;let e="string"===typeof n?Re(n):n;"/"===c||(null==(h=e.pathname)?void 0:h.startsWith(c))||ke(!1),u=e}else u=d;let f=u.pathname||"/",p=Oe(e,{pathname:"/"===c?f:f.slice(c.length)||"/"});let m=St(p&&p.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Ze([c,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:Ze([c,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,r,i);return n&&m?t.createElement(ut.Provider,{value:{location:ot({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ee.Pop}},m):m}function _t(){let e=function(){var e;let n=t.useContext(ht),r=At(xt.UseRouteError),i=Nt(xt.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=rt(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:s},r):null,null)}const It=t.createElement(_t,null);class Et extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(dt.Provider,{value:this.props.routeContext},t.createElement(ht.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Tt(e){let{routeContext:n,match:r,children:i}=e,s=t.useContext(at);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(dt.Provider,{value:n},i)}function St(e,n,r,i){var s;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var o;if(null==(o=r)||!o.errors)return null;e=r.matches}let a=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||ke(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.loader&&e.route.id&&void 0===r.loaderData[e.route.id]&&(!r.errors||void 0===r.errors[e.route.id])){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}return a.reduceRight(((e,i,s)=>{let o,d=!1,h=null,f=null;var p;r&&(o=l&&i.route.id?l[i.route.id]:void 0,h=i.route.errorElement||It,c&&(u<0&&0===s?(p="route-fallback",!1||Rt[p]||(Rt[p]=!0),d=!0,f=null):u===s&&(d=!0,f=i.route.hydrateFallbackElement||null)));let m=n.concat(a.slice(0,s+1)),g=()=>{let n;return n=o?h:d?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(Tt,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?t.createElement(Et,{location:r.location,revalidation:r.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var kt=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(kt||{}),xt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(xt||{});function Ct(e){let n=t.useContext(at);return n||ke(!1),n}function At(e){let n=t.useContext(lt);return n||ke(!1),n}function Nt(e){let n=function(e){let n=t.useContext(dt);return n||ke(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||ke(!1),r.route.id}const Rt={};r.startTransition;function Pt(e){return function(e){let n=t.useContext(dt).outlet;return n?t.createElement(vt.Provider,{value:e},n):n}(e.context)}function Dt(e){ke(!1)}function Ot(e){let{basename:n="/",children:r=null,location:i,navigationType:s=Ee.Pop,navigator:o,static:a=!1,future:l}=e;ft()&&ke(!1);let c=n.replace(/^\/*/,"/"),u=t.useMemo((()=>({basename:c,navigator:o,static:a,future:ot({v7_relativeSplatPath:!1},l)})),[c,l,o,a]);"string"===typeof i&&(i=Re(i));let{pathname:d="/",search:h="",hash:f="",state:p=null,key:m="default"}=i,g=t.useMemo((()=>{let e=Qe(d,c);return null==e?null:{location:{pathname:e,search:h,hash:f,state:p,key:m},navigationType:s}}),[c,d,h,f,p,m,s]);return null==g?null:t.createElement(ct.Provider,{value:u},t.createElement(ut.Provider,{children:r,value:g}))}function Lt(e){let{children:t,location:n}=e;return bt(Mt(t),n)}new Promise((()=>{}));t.Component;function Mt(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let s=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,Mt(e.props.children,s));e.type!==Dt&&ke(!1),e.props.index&&e.props.children&&ke(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Mt(e.props.children,s)),r.push(o)})),r}var Ft=n(164),Ut=n.t(Ft,2);function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vt.apply(this,arguments)}function zt(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Bt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;const jt=r.startTransition;Ut.flushSync;function qt(e){let{basename:n,children:r,future:i,window:s}=e,o=t.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),Pe((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=Re(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),Ae("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:Ne(t))}),(function(e,t){xe("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),a)));let l=o.current,[c,u]=t.useState({action:l.action,location:l.location}),{v7_startTransition:d}=i||{},h=t.useCallback((e=>{d&&jt?jt((()=>u(e))):u(e)}),[u,d]);return t.useLayoutEffect((()=>l.listen(h)),[l,h]),t.createElement(Ot,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}const Gt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Wt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ht=t.forwardRef((function(e,n){let r,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:d,unstable_viewTransition:h}=e,f=zt(e,Bt),{basename:p}=t.useContext(ct),m=!1;if("string"===typeof u&&Wt.test(u)&&(r=u,Gt))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=Qe(t.pathname,p);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:m=!0}catch(nR){}let g=function(e,n){let{relative:r}=void 0===n?{}:n;ft()||ke(!1);let{basename:i,navigator:s}=t.useContext(ct),{hash:o,pathname:a,search:l}=wt(e,{relative:r}),c=a;return"/"!==i&&(c="/"===a?i:Ze([i,a])),s.createHref({pathname:c,search:l,hash:o})}(u,{relative:s}),v=function(e,n){let{target:r,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===n?{}:n,c=gt(),u=pt(),d=wt(e,{relative:a});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:Ne(u)===Ne(d);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[u,c,d,i,s,r,e,o,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,unstable_viewTransition:h});return t.createElement("a",Vt({},f,{href:r||g,onClick:m||o?i:function(e){i&&i(e),e.defaultPrevented||v(e)},ref:n,target:c}))}));var Kt,Qt;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Kt||(Kt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Qt||(Qt={}));var Yt=n(327),$t=n(184);var Jt=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Xt={}.hasOwnProperty,Zt=t.createContext("undefined"!==typeof HTMLElement?_e({key:"css"}):null);Zt.Provider;var en=function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(Zt);return e(n,i,r)}))};var tn=t.createContext({});var nn="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",rn=function(e,t){var n={};for(var r in t)Xt.call(t,r)&&(n[r]=t[r]);return n[nn]=e,n},sn=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return Jt(t,n,r),a((function(){return function(e,t,n){Jt(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)})),null},on=en((function(e,n,r){var i=e.css;"string"===typeof i&&void 0!==n.registered[i]&&(i=n.registered[i]);var s=e[nn],o=[i],a="";"string"===typeof e.className?a=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}(n.registered,o,e.className):null!=e.className&&(a=e.className+" ");var l=w(o,void 0,t.useContext(tn));a+=n.key+"-"+l.name;var c={};for(var u in e)Xt.call(e,u)&&"css"!==u&&u!==nn&&(c[u]=e[u]);return c.ref=r,c.className=a,t.createElement(t.Fragment,null,t.createElement(sn,{cache:n,serialized:l,isStringTag:"string"===typeof s}),t.createElement(s,c))}));var an,ln,cn,un,dn=on,hn=$t.Fragment;function fn(e,t,n){return Xt.call(t,"css")?$t.jsx(dn,rn(e,t),n):$t.jsx(e,t,n)}function pn(e,t,n){return Xt.call(t,"css")?$t.jsxs(dn,rn(e,t),n):$t.jsxs(e,t,n)}const mn=Ie(an||(an=s(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -60%);\n  z-index: 30;\n  background-color: #fff;\n  height: 40vh;\n  max-width: 500px;\n  width: 80vw;\n  border: 2px solid #333;\n  border-radius: 10px;\n  padding: 30px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),gn=Ie(ln||(ln=s(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n"]))),vn=Ie(cn||(cn=s(["\n  display: flex;\n  gap: 20px;\n  justify-content: space-between;\n  align-items: center;\n  & > label {\n    white-space: nowrap;\n  }\n  & > input {\n    width: 100%;\n    max-width: 300px;\n    border-radius: 10px;\n    border: 1.5px solid #333;\n    padding: 12px 20px;\n  }\n"]))),yn=Ie(un||(un=s(["\n  border: 2px solid #333;\n  border-radius: 100px;\n  width: 40%;\n  padding: 10px;\n  background-color: #333333;\n  color: #fff;\n  margin-right: auto;\n  margin-left: auto;\n"]))),wn=e=>{let{userProfile:n,onSave:r}=e;const[i,s]=(0,t.useState)(n);return pn("div",{css:mn,children:[pn("div",{css:gn,children:[pn("div",{css:vn,children:[fn("label",{htmlFor:"name-input",children:"\u540d\u524d:"}),fn("input",{type:"text",id:"name-input",value:i.name,onChange:e=>{s({...i,name:e.target.value})}})]}),pn("div",{css:vn,children:[fn("label",{htmlFor:"comment-input",children:"\u30b3\u30e1\u30f3\u30c8:"}),fn("input",{type:"text",id:"comment-input",value:i.comment,onChange:e=>{s({...i,comment:e.target.value})}})]})]}),fn("button",{css:yn,onClick:()=>{r(i)},children:"\u4fdd\u5b58"})]})},bn=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},_n={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,s||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(bn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new In;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class In extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const En=function(e){return function(e){const t=bn(e);return _n.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Tn=function(e){try{return _n.decodeString(e,!0)}catch(nR){console.error("base64Decode failed: ",nR)}return null};function Sn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Sn(e[n],t[n]));return e}const kn=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,xn=()=>{try{return kn()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBV2Gy-2ioJyL0xPN01fM1i3NAY5PQ6Qhg",REACT_APP_AUTH_DOMAIN:"chat-580cf.firebaseapp.com",REACT_APP_PROJECT_ID:"chat-580cf",REACT_APP_STORAGE_BUCKET:"chat-580cf.appspot.com",REACT_APP_MESSAGEING_SENDER_ID:"556518847811",REACT_APP_APP_ID:"1:556518847811:web:fd69272bdce0fadfe22bf6"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(nR){return}const t=e&&Tn(e[1]);return t&&JSON.parse(t)})()}catch(nR){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(nR))}},Cn=()=>{var e;return null===(e=xn())||void 0===e?void 0:e.config};class An{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function Nn(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[En(JSON.stringify({alg:"none",type:"JWT"})),En(JSON.stringify(s)),""].join(".")}function Rn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Pn(){var e;const t=null===(e=xn())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(nR){return!1}}function Dn(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function On(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function Ln(){const e=Rn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Mn(){try{return"object"===typeof indexedDB}catch(nR){return!1}}class Fn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Un.prototype.create)}}class Un{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Vn,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Fn(n,s,t)}}const Vn=/\{\$([^}]+)}/g;function zn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Bn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(jn(n)&&jn(s)){if(!Bn(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function jn(e){return null!==e&&"object"===typeof e}function qn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function Gn(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Wn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Hn(e,t){const n=new Kn(e,t);return n.subscribe.bind(n)}class Kn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Qn),void 0===r.error&&(r.error=Qn),void 0===r.complete&&(r.complete=Qn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(nR){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(nR){"undefined"!==typeof console&&console.error&&console.error(nR)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Qn(){}function Yn(e){return e&&e._delegate?e._delegate:e}class $n{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Jn="[DEFAULT]";class Xn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new An;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(nR){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(nR){if(r)return null;throw nR}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Jn})}catch(nR){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(nR){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Zn(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jn;return this.component?this.component.multipleInstances?e:Jn:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Zn(e){return e===Jn?void 0:e}class er{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Xn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const tr=[];var nr;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(nr||(nr={}));const rr={debug:nr.DEBUG,verbose:nr.VERBOSE,info:nr.INFO,warn:nr.WARN,error:nr.ERROR,silent:nr.SILENT},ir=nr.INFO,sr={[nr.DEBUG]:"log",[nr.VERBOSE]:"log",[nr.INFO]:"info",[nr.WARN]:"warn",[nr.ERROR]:"error"},or=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=sr[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class ar{constructor(e){this.name=e,this._logLevel=ir,this._logHandler=or,this._userLogHandler=null,tr.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in nr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?rr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,nr.DEBUG,...t),this._logHandler(this,nr.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,nr.VERBOSE,...t),this._logHandler(this,nr.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,nr.INFO,...t),this._logHandler(this,nr.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,nr.WARN,...t),this._logHandler(this,nr.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,nr.ERROR,...t),this._logHandler(this,nr.ERROR,...t)}}const lr=(e,t)=>t.some((t=>e instanceof t));let cr,ur;const dr=new WeakMap,hr=new WeakMap,fr=new WeakMap,pr=new WeakMap,mr=new WeakMap;let gr={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return hr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||fr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return wr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function vr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ur||(ur=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(br(this),n),wr(dr.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return wr(e.apply(br(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(br(this),t,...r);return fr.set(s,t.sort?t.sort():[t]),wr(s)}}function yr(e){return"function"===typeof e?vr(e):(e instanceof IDBTransaction&&function(e){if(hr.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));hr.set(e,t)}(e),lr(e,cr||(cr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,gr):e)}function wr(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(wr(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&dr.set(t,e)})).catch((()=>{})),mr.set(t,e),t}(e);if(pr.has(e))return pr.get(e);const t=yr(e);return t!==e&&(pr.set(e,t),mr.set(t,e)),t}const br=e=>mr.get(e);const _r=["get","getKey","getAll","getAllKeys","count"],Ir=["put","add","delete","clear"],Er=new Map;function Tr(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Er.get(t))return Er.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ir.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!_r.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Er.set(t,s),s}gr=(e=>({...e,get:(t,n,r)=>Tr(t,n)||e.get(t,n,r),has:(t,n)=>!!Tr(t,n)||e.has(t,n)}))(gr);class Sr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const kr="@firebase/app",xr="0.9.25",Cr=new ar("@firebase/app"),Ar="[DEFAULT]",Nr={[kr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Rr=new Map,Pr=new Map;function Dr(e,t){try{e.container.addComponent(t)}catch(nR){Cr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),nR)}}function Or(e,t){e.container.addOrOverwriteComponent(t)}function Lr(e){const t=e.name;if(Pr.has(t))return Cr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Pr.set(t,e);for(const n of Rr.values())Dr(n,e);return!0}function Mr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Fr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ar;Mr(e,t).clearInstance(n)}function Ur(){Pr.clear()}const Vr=new Un("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class zr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new $n("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}}const Br="10.7.1";function jr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Ar,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Vr.create("bad-app-name",{appName:String(i)});if(n||(n=Cn()),!n)throw Vr.create("no-options");const s=Rr.get(i);if(s){if(Bn(n,s.options)&&Bn(r,s.config))return s;throw Vr.create("duplicate-app",{appName:i})}const o=new er(i);for(const l of Pr.values())o.addComponent(l);const a=new zr(n,r,o);return Rr.set(i,a),a}function qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ar;const t=Rr.get(e);if(!t&&e===Ar&&Cn())return jr();if(!t)throw Vr.create("no-app",{appName:e});return t}function Gr(){return Array.from(Rr.values())}async function Wr(e){const t=e.name;Rr.has(t)&&(Rr.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Hr(e,t,n){var r;let i=null!==(r=Nr[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Cr.warn(e.join(" "))}Lr(new $n("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Kr(e,t){if(null!==e&&"function"!==typeof e)throw Vr.create("invalid-log-argument");!function(e,t){for(const n of tr){let r=null;t&&t.level&&(r=rr[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:nr[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Qr(e){var t;t=e,tr.forEach((e=>{e.setLogLevel(t)}))}const Yr="firebase-heartbeat-database",$r=1,Jr="firebase-heartbeat-store";let Xr=null;function Zr(){return Xr||(Xr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=wr(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(wr(o.result),e.oldVersion,e.newVersion,wr(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Yr,$r,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Jr)}}).catch((e=>{throw Vr.create("idb-open",{originalErrorMessage:e.message})}))),Xr}async function ei(e,t){try{const n=(await Zr()).transaction(Jr,"readwrite"),r=n.objectStore(Jr);await r.put(t,ti(e)),await n.done}catch(nR){if(nR instanceof Fn)Cr.warn(nR.message);else{const t=Vr.create("idb-set",{originalErrorMessage:null===nR||void 0===nR?void 0:nR.message});Cr.warn(t.message)}}}function ti(e){return"".concat(e.name,"!").concat(e.options.appId)}class ni{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ii(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ri();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ri(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),si(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),si(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=En(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ri(){return(new Date).toISOString().substring(0,10)}class ii{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Mn()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Zr();return await t.transaction(Jr).objectStore(Jr).get(ti(e))}catch(nR){if(nR instanceof Fn)Cr.warn(nR.message);else{const t=Vr.create("idb-get",{originalErrorMessage:null===nR||void 0===nR?void 0:nR.message});Cr.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ei(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return ei(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function si(e){return En(JSON.stringify({version:2,heartbeats:e})).length}var oi;oi="",Lr(new $n("platform-logger",(e=>new Sr(e)),"PRIVATE")),Lr(new $n("heartbeat",(e=>new ni(e)),"PRIVATE")),Hr(kr,xr,oi),Hr(kr,xr,"esm2017"),Hr("fire-js","");class ai{constructor(e,t){this._delegate=e,this.firebase=t,Dr(e,new $n("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Wr(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ar;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ar;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Dr(this._delegate,e)}_addOrOverwriteComponent(e){Or(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const li=new Un("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const ci=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=jr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(zn(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Hr,setLogLevel:Qr,onLog:Kr,apps:null,SDK_VERSION:Br,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Lr(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw li.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Sn(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!zn(n,e=e||Ar))throw li.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(ai);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Sn(n,e)},createSubscribe:Hn,ErrorFactory:Un,deepExtend:Sn}),n}(),ui=new ar("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){ui.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ui.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const di=ci;!function(e){Hr("@firebase/app-compat","0.2.25",e)}();di.registerVersion("firebase","10.7.1","app-compat");const hi="firebasestorage.googleapis.com",fi="storageBucket";class pi extends Fn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(vi(e),"Firebase Storage: ".concat(t," (").concat(vi(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vi(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var mi,gi;function vi(e){return"storage/"+e}function yi(){return new pi(mi.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function wi(){return new pi(mi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function bi(){return new pi(mi.CANCELED,"User canceled the upload/download.")}function _i(){return new pi(mi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Ii(e){return new pi(mi.INVALID_ARGUMENT,e)}function Ei(){return new pi(mi.APP_DELETED,"The Firebase app was deleted.")}function Ti(e){return new pi(mi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Si(e,t){return new pi(mi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function ki(e){throw new pi(mi.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(mi||(mi={}));class xi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=xi.makeFromUrl(e,t)}catch(nR){return new xi(e,"")}if(""===n.path)return n;throw r=e,new pi(mi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===hi?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new xi(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new pi(mi.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Ci{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Ai(e){return"string"===typeof e||e instanceof String}function Ni(e){return Ri()&&e instanceof Blob}function Ri(){return"undefined"!==typeof Blob}function Pi(e,t,n,r){if(r<t)throw Ii("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Ii("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Di(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Oi(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Li(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(gi||(gi={}));class Mi{constructor(e,t,n,r,i,s,o,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Fi(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===gi.NO_ERROR,i=n.getStatus();if(!t||Li(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===gi.ABORT;return void e(!1,new Fi(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Fi(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(nR){r(nR)}else if(null!==i){const e=yi();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Ei():bi())}else{r(wi())}};this.canceled_?t(0,new Fi(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function h(){s&&clearTimeout(s)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void u.call(null,e,...n);if(l()||o)return h(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),d(s)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==i?(e||(a=2),clearTimeout(i),d(0)):e||(a=1)))}return d(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Fi{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Ui(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Vi(){const e=Ui();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Ri())return new Blob(n);throw new pi(mi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function zi(e){if("undefined"===typeof atob)throw t="base-64",new pi(mi.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const Bi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ji{constructor(e,t){this.data=e,this.contentType=t||null}}function qi(e,t){switch(e){case Bi.RAW:return new ji(Gi(t));case Bi.BASE64:case Bi.BASE64URL:return new ji(Wi(e,t));case Bi.DATA_URL:return new ji(function(e){const t=new Hi(e);return t.base64?Wi(Bi.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(nR){throw Si(Bi.DATA_URL,"Malformed data URL.")}return Gi(t)}(t.rest)}(t),new Hi(t).contentType)}throw yi()}function Gi(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Wi(e,t){switch(e){case Bi.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Si(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case Bi.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Si(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=zi(t)}catch(nR){if(nR.message.includes("polyfill"))throw nR;throw Si(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Hi{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Si(Bi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Ki{constructor(e,t){let n=0,r="";Ni(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ni(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Ki(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Ki(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Ri()){const e=t.map((e=>e instanceof Ki?e.data_:e));return new Ki(Vi.apply(null,e))}{const e=t.map((e=>Ai(e)?qi(Bi.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Ki(r,!0)}}uploadData(){return this.data_}}function Qi(e){let t;try{t=JSON.parse(e)}catch(nR){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Yi(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function $i(e,t){return t}class Ji{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||$i}}let Xi=null;function Zi(){if(Xi)return Xi;const e=[];e.push(new Ji("bucket")),e.push(new Ji("generation")),e.push(new Ji("metageneration")),e.push(new Ji("name","fullPath",!0));const t=new Ji("name");t.xform=function(e,t){return function(e){return!Ai(e)||e.length<2?e:Yi(e)}(t)},e.push(t);const n=new Ji("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new Ji("timeCreated")),e.push(new Ji("updated")),e.push(new Ji("md5Hash",null,!0)),e.push(new Ji("cacheControl",null,!0)),e.push(new Ji("contentDisposition",null,!0)),e.push(new Ji("contentEncoding",null,!0)),e.push(new Ji("contentLanguage",null,!0)),e.push(new Ji("contentType",null,!0)),e.push(new Ji("metadata","customMetadata",!0)),Xi=e,Xi}function es(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new xi(n,r);return t._makeStorageReference(i)}})}(r,e),r}function ts(e,t,n){const r=Qi(t);if(null===r)return null;return es(e,r,n)}function ns(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const rs="prefixes",is="items";function ss(e,t,n){const r=Qi(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[rs])for(const i of n[rs]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new xi(t,n));r.prefixes.push(s)}if(n[is])for(const i of n[is]){const n=e._makeStorageReference(new xi(t,i.name));r.items.push(n)}return r}(e,t,r)}class os{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function as(e){if(!e)throw yi()}function ls(e,t){return function(n,r){const i=ts(e,r,t);return as(null!==i),i}}function cs(e,t){return function(n,r){const i=ts(e,r,t);return as(null!==i),function(e,t,n,r){const i=Qi(t);if(null===i)return null;if(!Ai(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent,a=s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return Di("/b/"+o(i)+"/o/"+o(s),n,r)+Oi({alt:"media",token:t})}));return a[0]}(i,r,e.host,e._protocol)}}function us(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new pi(mi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new pi(mi.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new pi(mi.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new pi(mi.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function ds(e){const t=us(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new pi(mi.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function hs(e,t,n){const r=Di(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new os(r,"GET",ls(e,n),i);return s.errorHandler=ds(t),s}function fs(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=Di(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new os(o,"GET",function(e,t){return function(n,r){const i=ss(e,t,r);return as(null!==i),i}}(e,t.bucket),a);return l.urlParams=s,l.errorHandler=us(t),l}function ps(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function ms(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=ps(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ns(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",d=Ki.getBlob(c,r,u);if(null===d)throw _i();const h={name:l.fullPath},f=Di(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new os(f,"POST",ls(e,n),p);return m.urlParams=h,m.headers=o,m.body=d.uploadData(),m.errorHandler=us(t),m}class gs{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function vs(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(nR){as(!1)}return as(!!n&&-1!==(t||["active"]).indexOf(n)),n}const ys=262144;function ws(e,t,n,r,i,s,o,a){const l=new gs(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new pi(mi.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const d=l.current,h=d+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},m=r.slice(d,h);if(null===m)throw _i();const g=t.maxUploadRetryTime,v=new os(n,"POST",(function(e,n){const i=vs(e,["active","final"]),o=l.current+u,a=r.size();let c;return c="final"===i?ls(t,s)(e,n):null,new gs(o,a,"final"===i,c)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=us(e),v}const bs={STATE_CHANGED:"state_changed"},_s={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Is(e){switch(e){case"running":case"pausing":case"canceling":return _s.RUNNING;case"paused":return _s.PAUSED;case"success":return _s.SUCCESS;case"canceled":return _s.CANCELED;default:return _s.ERROR}}class Es{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function Ts(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let Ss=null;class ks{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=gi.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=gi.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=gi.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw ki("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ki("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ki("cannot .getStatus() before sending");try{return this.xhr_.status}catch(nR){return-1}}getResponse(){if(!this.sent_)throw ki("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ki("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class xs extends ks{initXhr(){this.xhr_.responseType="text"}}function Cs(){return Ss?Ss():new xs}class As{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Zi(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(mi.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(Li(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=wi()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(mi.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=ps(t,r,i),a={name:o.fullPath},l=Di(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=ns(o,n),d=e.maxUploadRetryTime,h=new os(l,"POST",(function(e){let t;vs(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(nR){as(!1)}return as(Ai(t)),t}),d);return h.urlParams=a,h.headers=c,h.body=u,h.errorHandler=us(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,Cs,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new os(n,"POST",(function(e){const t=vs(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(nR){as(!1)}n||as(!1);const i=Number(n);return as(!isNaN(i)),new gs(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=us(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,Cs,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=ys*this._chunkMultiplier,t=new gs(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=ws(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(nR){return this._error=nR,void this._transition("error")}const o=this._ref.storage._makeRequest(s,Cs,r,i,!1);this._request=o,o.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(ys*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=hs(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,Cs,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=ms(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,Cs,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=bi(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Is(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new Es(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Is(this._state)){case _s.SUCCESS:Ts(this._resolve.bind(null,this.snapshot))();break;case _s.CANCELED:case _s.ERROR:Ts(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Is(this._state)){case _s.RUNNING:case _s.PAUSED:e.next&&Ts(e.next.bind(e,this.snapshot))();break;case _s.SUCCESS:e.complete&&Ts(e.complete.bind(e))();break;default:e.error&&Ts(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Ns{constructor(e,t){this._service=e,this._location=t instanceof xi?t:xi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ns(e,t)}get root(){const e=new xi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Yi(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new xi(this._location.bucket,e);return new Ns(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Ti(e)}}function Rs(e){const t={prefixes:[],items:[]};return Ps(e,t).then((()=>t))}async function Ps(e,t,n){const r={pageToken:n},i=await Ds(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await Ps(e,t,i.nextPageToken)}function Ds(e,t){null!=t&&"number"===typeof t.maxResults&&Pi("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=fs(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Cs)}function Os(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=Di(t.fullServerUrl(),e.host,e._protocol),s=ns(n,r),o=e.maxOperationRetryTime,a=new os(i,"PATCH",ls(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=ds(t),a}(e.storage,e._location,t,Zi());return e.storage.makeRequestWithTokens(n,Cs)}function Ls(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Di(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new os(r,"GET",cs(e,n),i);return s.errorHandler=ds(t),s}(e.storage,e._location,Zi());return e.storage.makeRequestWithTokens(t,Cs).then((e=>{if(null===e)throw new pi(mi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Ms(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=Di(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new os(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=ds(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Cs)}function Fs(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new xi(e._location.bucket,n);return new Ns(e.storage,r)}function Us(e,t){if(e instanceof Bs){const n=e;if(null==n._bucket)throw new pi(mi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+fi+"' property when initializing the app?");const r=new Ns(n,n._bucket);return null!=t?Us(r,t):r}return void 0!==t?Fs(e,t):e}function Vs(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Bs)return new Ns(e,t);throw Ii("To use ref(service, url), the first argument must be a Storage instance.")}return Us(e,t)}function zs(e,t){const n=null===t||void 0===t?void 0:t[fi];return null==n?null:xi.makeFromBucketSpec(n,e)}class Bs{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=hi,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?xi.makeFromBucketSpec(r,this._host):zs(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=xi.makeFromBucketSpec(this._url,e):this._bucket=zs(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Pi("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Pi("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ns(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Ci(Ei());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Oi(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Mi(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const js="@firebase/storage",qs="0.12.0",Gs="storage";function Ws(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new As(e,new Ki(t),n)}(e=Yn(e),t,n)}function Hs(e){return function(e){e._throwIfRoot("getMetadata");const t=hs(e.storage,e._location,Zi());return e.storage.makeRequestWithTokens(t,Cs)}(e=Yn(e))}function Ks(e,t){return Vs(e=Yn(e),t)}function Qs(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:Nn(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function Ys(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new Bs(r,i,s,n,Br)}Lr(new $n(Gs,Ys,"PUBLIC").setMultipleInstances(!0)),Hr(js,qs,""),Hr(js,qs,"esm2017");class $s{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class Js{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new $s(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new $s(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new $s(e,this,this._ref)):{next:t.next?e=>t.next(new $s(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class Xs{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new Zs(e,this._service)))}get items(){return this._delegate.items.map((e=>new Zs(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Zs{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return Fs(e,t)}(this._delegate,e);return new Zs(t,this.storage)}get root(){return new Zs(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Zs(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Js(Ws(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Bi.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=qi(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Js(new As(this._delegate,new Ki(r.data,!0),i),this)}listAll(){return function(e){return Rs(e=Yn(e))}(this._delegate).then((e=>new Xs(e,this.storage)))}list(e){return function(e,t){return Ds(e=Yn(e),t)}(this._delegate,e||void 0).then((e=>new Xs(e,this.storage)))}getMetadata(){return Hs(this._delegate)}updateMetadata(e){return function(e,t){return Os(e=Yn(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return Ls(e=Yn(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return Ms(e=Yn(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Ti(e)}}class eo{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(to(e))throw Ii("ref() expected a child path but got a URL, use refFromURL instead.");return new Zs(Ks(this._delegate,e),this)}refFromURL(e){if(!to(e))throw Ii("refFromURL() expected a full URL but got a child path, use ref() instead.");try{xi.makeFromUrl(e,this._delegate.host)}catch(nR){throw Ii("refFromUrl() expected a valid full URL but got an invalid one.")}return new Zs(Ks(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Qs(this._delegate,e,t,n)}}function to(e){return/^[A-Za-z]+:\/\//.test(e)}function no(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new eo(r,i)}!function(e){const t={TaskState:_s,TaskEvent:bs,StringFormat:Bi,Storage:eo,Reference:Zs};e.INTERNAL.registerComponent(new $n("storage-compat",no,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.3")}(di);function ro(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const io={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},so="EMAIL_SIGNIN",oo="PASSWORD_RESET",ao="RECOVER_EMAIL",lo="REVERT_SECOND_FACTOR_ADDITION",co="VERIFY_AND_CHANGE_EMAIL",uo="VERIFY_EMAIL";function ho(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fo=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},po=ho,mo=new Un("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),go=new ar("@firebase/auth");function vo(e){if(go.logLevel<=nr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];go.error("Auth (".concat(Br,"): ").concat(e),...n)}}function yo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Io(e,...n)}function wo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Io(e,...n)}function bo(e,t,n){const r=Object.assign(Object.assign({},po()),{[t]:n});return new Un("auth","Firebase",r).create(t,{appName:e.name})}function _o(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&yo(e,"argument-error"),bo(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Io(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return mo.create(e,...n)}function Eo(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Io(t,...r)}}function To(e){const t="INTERNAL ASSERTION FAILED: "+e;throw vo(t),new Error(t)}function So(e,t){e||To(t)}function ko(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function xo(){return"http:"===Co()||"https:"===Co()}function Co(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Ao{constructor(e,t){this.shortDelay=e,this.longDelay=t,So(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())||On()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(xo()||Dn()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function No(e,t){So(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Ro{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void To("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void To("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void To("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Po={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Do=new Ao(3e4,6e4);function Oo(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Lo(e,t,n,r){return Mo(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=qn(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Ro.fetch()(Uo(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Mo(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Po),t);try{const t=new zo(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw Bo(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Bo(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw Bo(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw Bo(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw bo(e,a,o);yo(e,a)}}catch(nR){if(nR instanceof Fn)throw nR;yo(e,"network-request-failed",{message:String(nR)})}}async function Fo(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Lo(e,t,n,r,i);return"mfaPendingCredential"in s&&yo(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Uo(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?No(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Vo(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zo{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(wo(this.auth,"network-request-failed"))),Do.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bo(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=wo(e,t,r);return i.customData._tokenResponse=n,i}function jo(e){return void 0!==e&&void 0!==e.getResponse}function qo(e){return void 0!==e&&void 0!==e.enterprise}class Go{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Vo(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Wo(e,t){return Lo(e,"GET","/v2/recaptchaConfig",Oo(e,t))}function Ho(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(nR){}}function Ko(e){return 1e3*Number(e)}function Qo(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return vo("JWT malformed, contained fewer than 3 sections"),null;try{const e=Tn(n);return e?JSON.parse(e):(vo("Failed to decode base64 JWT payload"),null)}catch(nR){return vo("Caught error parsing JWT payload as JSON",null===nR||void 0===nR?void 0:nR.toString()),null}}async function Yo(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(nR){throw nR instanceof Fn&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(nR)&&e.auth.currentUser===e&&await e.auth.signOut(),nR}}class $o{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(nR){return void((null===nR||void 0===nR?void 0:nR.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Jo{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ho(this.lastLoginAt),this.creationTime=Ho(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Xo(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Yo(e,async function(e,t){return Lo(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Eo(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=ro(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Jo(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,d)}class Zo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Eo(e.idToken,"internal-error"),Eo("undefined"!==typeof e.idToken,"internal-error"),Eo("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Qo(e);return Eo(t,"internal-error"),Eo("undefined"!==typeof t.exp,"internal-error"),Eo("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Eo(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Mo(e,{},(async()=>{const n=qn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Uo(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Ro.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Zo;return n&&(Eo("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Eo("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Eo("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Zo,this.toJSON())}_performRefresh(){return To("not implemented")}}function ea(e,t){Eo("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ta{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=ro(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $o(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Jo(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Yo(this,this.stsTokenManager.getToken(this.auth,e));return Eo(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Yn(e),r=await n.getIdToken(t),i=Qo(r);Eo(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Ho(Ko(i.auth_time)),issuedAtTime:Ho(Ko(i.iat)),expirationTime:Ho(Ko(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Yn(e);await Xo(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Eo(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ta(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Eo(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Xo(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Yo(this,async function(e,t){return Lo(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:I}=t;Eo(y&&I,e,"internal-error");const E=Zo.fromJSON(this.name,I);Eo("string"===typeof y,e,"internal-error"),ea(u,e.name),ea(d,e.name),Eo("boolean"===typeof w,e,"internal-error"),Eo("boolean"===typeof b,e,"internal-error"),ea(h,e.name),ea(f,e.name),ea(p,e.name),ea(m,e.name),ea(g,e.name),ea(v,e.name);const T=new ta({uid:y,auth:e,email:d,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:E,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(T.providerData=_.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Zo;r.updateFromServerResponse(t);const i=new ta({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Xo(i),i}}const na=new Map;function ra(e){So(e instanceof Function,"Expected a class definition");let t=na.get(e);return t?(So(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,na.set(e,t),t)}class ia{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ia.type="NONE";const sa=ia;function oa(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class aa{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=oa(this.userKey,r.apiKey,i),this.fullPersistenceKey=oa("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ta._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new aa(ra(sa),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||ra(sa);const s=oa(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=ta._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new aa(i,e,n)):new aa(i,e,n)}}function la(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ha(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ca(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(pa(t))return"Blackberry";if(ma(t))return"Webos";if(ua(t))return"Safari";if((t.includes("chrome/")||da(t))&&!t.includes("edge/"))return"Chrome";if(fa(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function ca(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();return/firefox\//i.test(e)}function ua(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function da(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();return/crios\//i.test(e)}function ha(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();return/iemobile/i.test(e)}function fa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();return/android/i.test(e)}function pa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();return/blackberry/i.test(e)}function ma(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();return/webos/i.test(e)}function ga(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function va(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();return ga(e)||fa(e)||ma(e)||pa(e)||/windows phone/i.test(e)||ha(e)}function ya(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=la(Rn());break;case"Worker":t="".concat(la(Rn()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Br,"/").concat(r)}class wa{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(nR){r(nR)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(nR){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===nR||void 0===nR?void 0:nR.message})}}}class ba{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class _a{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ea(this),this.idTokenSubscription=new Ea(this),this.beforeStateQueue=new wa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=mo,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ra(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await aa.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(nR){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(nR){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(nR)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Eo(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(nR){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xo(e)}catch(nR){if((null===nR||void 0===nR?void 0:nR.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Yn(e):null;return t&&Eo(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Eo(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(ra(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Lo(e,"GET","/v2/passwordPolicy",Oo(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new ba(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Un("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Lo(e,"POST","/v2/accounts:revokeToken",Oo(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&ra(e)||this._popupRedirectResolver;Eo(t,this,"argument-error"),this.redirectPersistenceManager=await aa.create(this,[ra(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Eo(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Eo(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ya(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(go.logLevel<=nr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];go.warn("Auth (".concat(Br,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ia(e){return Yn(e)}class Ea{constructor(e){this.auth=e,this.observer=null,this.addObserver=Hn((e=>this.observer=e))}get next(){return Eo(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ta(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=wo("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Sa(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class ka{constructor(e){this.type="recaptcha-enterprise",this.auth=Ia(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;qo(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Wo(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Go(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&qo(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Ta("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function xa(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new ka(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ca(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await xa(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await xa(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Aa(e,t,n){const r=Ia(e);Eo(r._canInitEmulator,r,"emulator-config-failed"),Eo(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Na(t),{host:o,port:a}=function(e){const t=Na(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Ra(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ra(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Na(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ra(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Pa{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return To("not implemented")}_getIdTokenResponse(e){return To("not implemented")}_linkToIdToken(e,t){return To("not implemented")}_getReauthenticationResolver(e){return To("not implemented")}}async function Da(e,t){return Lo(e,"POST","/v1/accounts:resetPassword",Oo(e,t))}async function Oa(e,t){return Lo(e,"POST","/v1/accounts:signUp",t)}async function La(e,t){return Fo(e,"POST","/v1/accounts:signInWithPassword",Oo(e,t))}async function Ma(e,t){return Lo(e,"POST","/v1/accounts:sendOobCode",Oo(e,t))}async function Fa(e,t){return Ma(e,t)}async function Ua(e,t){return Ma(e,t)}class Va extends Pa{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Va(e,t,"password")}static _fromEmailAndCode(e,t){return new Va(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ca(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",La);case"emailLink":return async function(e,t){return Fo(e,"POST","/v1/accounts:signInWithEmailLink",Oo(e,t))}(e,{email:this._email,oobCode:this._password});default:yo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ca(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Oa);case"emailLink":return async function(e,t){return Fo(e,"POST","/v1/accounts:signInWithEmailLink",Oo(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:yo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function za(e,t){return Fo(e,"POST","/v1/accounts:signInWithIdp",Oo(e,t))}class Ba extends Pa{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ba(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=ro(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new Ba(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return za(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,za(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,za(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=qn(t)}return e}}const ja={USER_NOT_FOUND:"user-not-found"};class qa extends Pa{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new qa({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new qa({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Fo(e,"POST","/v1/accounts:signInWithPhoneNumber",Oo(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Fo(e,"POST","/v1/accounts:signInWithPhoneNumber",Oo(e,t));if(n.temporaryProof)throw Bo(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Fo(e,"POST","/v1/accounts:signInWithPhoneNumber",Oo(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ja)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new qa({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ga{constructor(e){var t,n,r,i,s,o;const a=Gn(Wn(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Eo(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=Gn(Wn(e)).link,n=t?Gn(Wn(t)).deep_link_id:null,r=Gn(Wn(e)).deep_link_id;return(r?Gn(Wn(r)).link:null)||r||n||t||e}(e);try{return new Ga(t)}catch(n){return null}}}class Wa{constructor(){this.providerId=Wa.PROVIDER_ID}static credential(e,t){return Va._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ga.parseLink(t);return Eo(n,"argument-error"),Va._fromEmailAndCode(e,n.code,n.tenantId)}}Wa.PROVIDER_ID="password",Wa.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Wa.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ha{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ka extends Ha{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Qa extends Ka{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Eo("providerId"in t&&"signInMethod"in t,"argument-error"),Ba._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Eo(e.idToken||e.accessToken,"argument-error"),Ba._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Qa.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Qa.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Qa(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(nR){return null}}}class Ya extends Ka{constructor(){super("facebook.com")}static credential(e){return Ba._fromParams({providerId:Ya.PROVIDER_ID,signInMethod:Ya.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ya.credentialFromTaggedObject(e)}static credentialFromError(e){return Ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ya.credential(t.oauthAccessToken)}catch(n){return null}}}Ya.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ya.PROVIDER_ID="facebook.com";class $a extends Ka{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ba._fromParams({providerId:$a.PROVIDER_ID,signInMethod:$a.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return $a.credentialFromTaggedObject(e)}static credentialFromError(e){return $a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return $a.credential(n,r)}catch(i){return null}}}$a.GOOGLE_SIGN_IN_METHOD="google.com",$a.PROVIDER_ID="google.com";class Ja extends Ka{constructor(){super("github.com")}static credential(e){return Ba._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ja.credential(t.oauthAccessToken)}catch(n){return null}}}Ja.GITHUB_SIGN_IN_METHOD="github.com",Ja.PROVIDER_ID="github.com";class Xa extends Pa{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return za(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,za(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,za(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Xa(n,i):null}static _create(e,t){return new Xa(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Za extends Ha{constructor(e){Eo(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Za.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Za.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Xa.fromJSON(e);return Eo(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Xa._create(r,n)}catch(nR){return null}}}class el extends Ka{constructor(){super("twitter.com")}static credential(e,t){return Ba._fromParams({providerId:el.PROVIDER_ID,signInMethod:el.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return el.credentialFromTaggedObject(e)}static credentialFromError(e){return el.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return el.credential(n,r)}catch(i){return null}}}async function tl(e,t){return Fo(e,"POST","/v1/accounts:signUp",Oo(e,t))}el.TWITTER_SIGN_IN_METHOD="twitter.com",el.PROVIDER_ID="twitter.com";class nl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ta._fromIdTokenResponse(e,n,r),s=rl(n);return new nl({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=rl(n);return new nl({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function rl(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class il extends Fn{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,il.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new il(e,t,n,r)}}function sl(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw il._fromErrorAndOperation(e,n,t,r);throw n}))}function ol(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function al(e,t){const n=Yn(e);await cl(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Lo(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=ol(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ll(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Yo(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return nl._forOperation(e,"link",r)}async function cl(e,t,n){await Xo(t);const r=!1===e?"provider-already-linked":"no-such-provider";Eo(ol(t.providerData).has(n)===e,t.auth,r)}async function ul(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Yo(e,sl(r,i,t,e),n);Eo(s.idToken,r,"internal-error");const o=Qo(s.idToken);Eo(o,r,"internal-error");const{sub:a}=o;return Eo(e.uid===a,r,"user-mismatch"),nl._forOperation(e,i,s)}catch(nR){throw(null===nR||void 0===nR?void 0:nR.code)==="auth/".concat("user-not-found")&&yo(r,"user-mismatch"),nR}}async function dl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await sl(e,r,t),s=await nl._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function hl(e,t){return dl(Ia(e),t)}async function fl(e,t){const n=Yn(e);return await cl(!1,n,t.providerId),ll(n,t)}async function pl(e,t){return ul(Yn(e),t)}async function ml(e,t){const n=Ia(e),r=await async function(e,t){return Fo(e,"POST","/v1/accounts:signInWithCustomToken",Oo(e,t))}(n,{token:t,returnSecureToken:!0}),i=await nl._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class gl{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?vl._fromServerResponse(e,t):"totpInfo"in t?yl._fromServerResponse(e,t):yo(e,"internal-error")}}class vl extends gl{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new vl(t)}}class yl extends gl{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new yl(t)}}function wl(e,t,n){var r;Eo((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Eo("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Eo(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Eo(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function bl(e){const t=Ia(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function _l(e,t){await async function(e,t){return Lo(e,"POST","/v1/accounts:update",Oo(e,t))}(Yn(e),{oobCode:t})}async function Il(e,t){const n=Yn(e),r=await Da(n,{oobCode:t}),i=r.requestType;switch(Eo(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Eo(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Eo(r.mfaInfo,n,"internal-error");default:Eo(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=gl._fromServerResponse(Ia(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function El(e,t){const n={identifier:t,continueUri:xo()?ko():"http://localhost"},{signinMethods:r}=await async function(e,t){return Lo(e,"POST","/v1/accounts:createAuthUri",Oo(e,t))}(Yn(e),n);return r||[]}async function Tl(e,t){const n=Yn(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&wl(n.auth,r,t);const{email:i}=await async function(e,t){return Ma(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Sl(e,t,n){const r=Yn(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&wl(r.auth,i,n);const{email:s}=await async function(e,t){return Ma(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function kl(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Yn(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Yo(i,async function(e,t){return Lo(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function xl(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Yo(e,async function(e,t){return Lo(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class Cl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Al extends Cl{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Nl extends Cl{constructor(e,t){super(e,"facebook.com",t)}}class Rl extends Al{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Pl extends Cl{constructor(e,t){super(e,"google.com",t)}}class Dl extends Al{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Ol(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Qo(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Cl(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Nl(s,i);case"github.com":return new Rl(s,i);case"google.com":return new Pl(s,i);case"twitter.com":return new Dl(s,i,e.screenName||null);case"custom":case"anonymous":return new Cl(s,null);default:return new Cl(s,r,i)}}(n)}class Ll{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Ll("enroll",e,t)}static _fromMfaPendingCredential(e){return new Ll("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Ll._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Ll._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Ml{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Ia(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>gl._fromServerResponse(n,e)));Eo(r.mfaPendingCredential,n,"internal-error");const s=Ll._fromMfaPendingCredential(r.mfaPendingCredential);return new Ml(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await nl._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Eo(t.user,n,"internal-error"),nl._forOperation(t.user,t.operationType,o);default:yo(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Fl{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>gl._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Fl(e)}async getSession(){return Ll._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Yo(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Yo(this.user,function(e,t){return Lo(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Oo(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(nR){throw nR}}}const Ul=new WeakMap;const Vl="__sak";class zl{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Vl,"1"),this.storage.removeItem(Vl),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Bl extends zl{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Rn();return ua(e)||ga(e)}()&&function(){try{return!(!window||window===window.top)}catch(nR){return!1}}(),this.fallbackToPolling=va(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);Ln()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Bl.type="LOCAL";const jl=Bl;class ql extends zl{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}ql.type="SESSION";const Gl=ql;class Wl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Wl(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Hl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Wl.receivers=[];class Kl{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Hl("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Ql(){return window}function Yl(){return"undefined"!==typeof Ql().WorkerGlobalScope&&"function"===typeof Ql().importScripts}const $l="firebaseLocalStorageDb",Jl="firebaseLocalStorage",Xl="fbase_key";class Zl{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ec(e,t){return e.transaction([Jl],t?"readwrite":"readonly").objectStore(Jl)}function tc(){const e=indexedDB.open($l,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(Jl,{keyPath:Xl})}catch(nR){n(nR)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(Jl)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase($l);return new Zl(e).toPromise()}(),t(await tc()))}))}))}async function nc(e,t,n){const r=ec(e,!0).put({[Xl]:t,value:n});return new Zl(r).toPromise()}function rc(e,t){const n=ec(e,!0).delete(t);return new Zl(n).toPromise()}class ic{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await tc()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(nR){if(t++>3)throw nR;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yl()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wl._getInstance(Yl()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Kl(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await tc();return await nc(e,Vl,"1"),await rc(e,Vl),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>nc(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ec(e,!1).get(t),r=await new Zl(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>rc(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ec(e,!1).getAll();return new Zl(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ic.type="LOCAL";const sc=ic;const oc=1e12;class ac{constructor(e){this.auth=e,this.counter=oc,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new lc(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||oc;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||oc;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||oc;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class lc{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Eo(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(nR){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(nR){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const cc=Sa("rcb"),uc=new Ao(3e4,6e4);class dc{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Ql().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Eo(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&jo(Ql().grecaptcha)?Promise.resolve(Ql().grecaptcha):new Promise(((n,r)=>{const i=Ql().setTimeout((()=>{r(wo(e,"network-request-failed"))}),uc.get());Ql()[cc]=()=>{Ql().clearTimeout(i),delete Ql()[cc];const s=Ql().grecaptcha;if(!s||!jo(s))return void r(wo(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Ta("".concat("https://www.google.com/recaptcha/api.js?","?").concat(qn({onload:cc,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(wo(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Ql().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class hc{async load(e){return new ac(e)}clearedOneInstance(){}}const fc="recaptcha",pc={theme:"light",type:"image"};class mc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},pc);this.parameters=n,this.type=fc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ia(e),this.isInvisible="invisible"===this.parameters.size,Eo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Eo(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hc:new dc,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(nR){return Promise.reject(nR)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Eo(!this.parameters.sitekey,this.auth,"argument-error"),Eo(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Eo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Ql()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Eo(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Eo(xo()&&!Yl(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Lo(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Eo(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Eo(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class gc{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=qa._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function vc(e,t,n){var r;const i=await n.verify();try{let s;if(Eo("string"===typeof i,e,"argument-error"),Eo(n.type===fc,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Eo("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Lo(e,"POST","/v2/accounts/mfaEnrollment:start",Oo(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Eo("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Eo(n,e,"missing-multi-factor-info");const o=await function(e,t){return Lo(e,"POST","/v2/accounts/mfaSignIn:start",Oo(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Lo(e,"POST","/v1/accounts:sendVerificationCode",Oo(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class yc{constructor(e){this.providerId=yc.PROVIDER_ID,this.auth=Ia(e)}verifyPhoneNumber(e,t){return vc(this.auth,e,Yn(t))}static credential(e,t){return qa._fromVerification(e,t)}static credentialFromResult(e){const t=e;return yc.credentialFromTaggedObject(t)}static credentialFromError(e){return yc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?qa._fromTokenResponse(n,r):null}}function wc(e,t){return t?ra(t):(Eo(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}yc.PROVIDER_ID="phone",yc.PHONE_SIGN_IN_METHOD="phone";class bc extends Pa{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return za(e,this._buildIdpRequest())}_linkToIdToken(e,t){return za(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return za(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function _c(e){return dl(e.auth,new bc(e),e.bypassAuthState)}function Ic(e){const{auth:t,user:n}=e;return Eo(n,t,"internal-error"),ul(n,new bc(e),e.bypassAuthState)}async function Ec(e){const{auth:t,user:n}=e;return Eo(n,t,"internal-error"),ll(n,new bc(e),e.bypassAuthState)}class Tc{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(nR){this.reject(nR)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(nR){this.reject(nR)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return _c;case"linkViaPopup":case"linkViaRedirect":return Ec;case"reauthViaPopup":case"reauthViaRedirect":return Ic;default:yo(this.auth,"internal-error")}}resolve(e){So(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){So(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Sc=new Ao(2e3,1e4);class kc extends Tc{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,kc.currentPopupAction&&kc.currentPopupAction.cancel(),kc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Eo(e,this.auth,"internal-error"),e}async onExecution(){So(1===this.filter.length,"Popup operations only handle one event");const e=Hl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(wo(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(wo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,kc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(wo(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Sc.get())};e()}}kc.currentPopupAction=null;const xc="pendingRedirect",Cc=new Map;class Ac extends Tc{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Cc.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Dc(t),r=Pc(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(nR){e=()=>Promise.reject(nR)}Cc.set(this.auth._key(),e)}return this.bypassAuthState||Cc.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Nc(e,t){return Pc(e)._set(Dc(t),"true")}function Rc(e,t){Cc.set(e._key(),t)}function Pc(e){return ra(e._redirectPersistence)}function Dc(e){return oa(xc,e.config.apiKey,e.name)}function Oc(e,t,n){return async function(e,t,n){const r=Ia(e);_o(e,t,Ha),await r._initializationPromise;const i=wc(r,n);return await Nc(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Lc(e,t,n){return async function(e,t,n){const r=Yn(e);_o(r.auth,t,Ha),await r.auth._initializationPromise;const i=wc(r.auth,n);await Nc(i,r.auth);const s=await Uc(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function Mc(e,t,n){return async function(e,t,n){const r=Yn(e);_o(r.auth,t,Ha),await r.auth._initializationPromise;const i=wc(r.auth,n);await cl(!1,r,t.providerId),await Nc(i,r.auth);const s=await Uc(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function Fc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Ia(e),i=wc(r,t),s=new Ac(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Uc(e){const t=Hl("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Vc{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Bc(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(wo(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(zc(e))}saveEventToCache(e){this.cachedEventUids.add(zc(e)),this.lastProcessedEventTime=Date.now()}}function zc(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Bc(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function jc(e){return Lo(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const qc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gc=/^https?/;function Wc(e){const t=ko(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Gc.test(n))return!1;if(qc.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Hc=new Ao(3e4,6e4);function Kc(){const e=Ql().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Qc=null;function Yc(e){return Qc=Qc||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){Kc(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Kc(),n(wo(e,"network-request-failed"))},timeout:Hc.get()})}if(null===(i=null===(r=Ql().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Ql().gapi)||void 0===s?void 0:s.load)){const t=Sa("iframefcb");return Ql()[t]=()=>{gapi.load?o():n(wo(e,"network-request-failed"))},Ta("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Qc=null,e}))}(e),Qc}const $c=new Ao(5e3,15e3),Jc="__/auth/iframe",Xc="emulator/auth/iframe",Zc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tu(e){const t=e.config;Eo(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?No(t,Xc):"https://".concat(e.config.authDomain,"/").concat(Jc),r={apiKey:t.apiKey,appName:e.name,v:Br},i=eu.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(qn(r).slice(1))}const nu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class ru{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(nR){}}}function iu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},nu),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Rn().toLowerCase();n&&(a=da(c)?"_blank":n),ca(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return ga(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new ru(null);const d=window.open(t||"",a,u);Eo(d,e,"popup-blocked");try{d.focus()}catch(nR){}return new ru(d)}const su="__/auth/handler",ou="emulator/auth/handler",au=encodeURIComponent("fac");async function lu(e,t,n,r,i,s){Eo(e.config.authDomain,e,"auth-domain-config-required"),Eo(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Br,eventId:i};if(t instanceof Ha){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Ka){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(au,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(su);return No(t,ou)}(e),"?").concat(qn(a).slice(1)).concat(c)}const cu="webStorageSupport";const uu=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gl,this._completeRedirectFn=Fc,this._overrideRedirectResult=Rc}async _openPopup(e,t,n,r){var i;So(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return iu(e,await lu(e,t,n,ko(),r),Hl())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ql().location.href=e}(await lu(e,t,n,ko(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(So(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Yc(e),n=Ql().gapi;return Eo(n,e,"internal-error"),t.open({where:document.body,url:tu(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zc,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=wo(e,"network-request-failed"),s=Ql().setTimeout((()=>{r(i)}),$c.get());function o(){Ql().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new Vc(e);return t.register("authEvent",(t=>{Eo(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(cu,{type:cu},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[cu];void 0!==i&&t(!!i),yo(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await jc(e);for(const r of t)try{if(Wc(r))return}catch(n){}yo(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return va()||ua()||ga()}};class du{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return To("unexpected MultiFactorSessionType")}}}class hu extends du{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new hu(e)}_finalizeEnroll(e,t,n){return function(e,t){return Lo(e,"POST","/v2/accounts/mfaEnrollment:finalize",Oo(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Lo(e,"POST","/v2/accounts/mfaSignIn:finalize",Oo(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class fu{constructor(){}static assertion(e){return hu._fromCredential(e)}}fu.FACTOR_ID="phone";var pu="@firebase/auth",mu="1.5.1";class gu{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Eo(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=xn())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var vu;function yu(){return window}vu="Browser",Lr(new $n("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Eo(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:vu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ya(vu)},c=new _a(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(ra);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Lr(new $n("auth-internal",(e=>(e=>new gu(e))(Ia(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Hr(pu,mu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(vu)),Hr(pu,mu,"esm2017");async function wu(e,t,n){var r;const{BuildInfo:i}=yu();So(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(So(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return ga()?o.ibi=i.packageName:fa()?o.apn=i.packageName:yo(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,lu(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function bu(e){const{cordova:t}=yu();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const _u=20;class Iu extends Vc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Eu(e){const t=await ku()._get(xu(e));return t&&await ku()._remove(xu(e)),t}function Tu(e,t){var n,r;const i=function(e){const t=Cu(e),n=t.link?decodeURIComponent(t.link):void 0,r=Cu(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Cu(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Cu(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(nR){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?wo(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Su(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<_u;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function ku(){return ra(jl)}function xu(e){return oa("authEvent",e.config.apiKey,e.name)}function Cu(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Gn(n.join("?"))}const Au=class{constructor(){this._redirectPersistence=Gl,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Fc,this._overrideRedirectResult=Rc}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Iu(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){yo(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const d=yu();Eo("function"===typeof(null===(t=null===d||void 0===d?void 0:d.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Eo("undefined"!==typeof(null===(n=null===d||void 0===d?void 0:d.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Eo("function"===typeof(null===(s=null===(i=null===(r=null===d||void 0===d?void 0:d.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Eo("function"===typeof(null===(l=null===(a=null===(o=null===d||void 0===d?void 0:d.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Eo("function"===typeof(null===(u=null===(c=null===d||void 0===d?void 0:d.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Cc.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Su(),postBody:null,tenantId:e.tenantId,error:wo(e,"no-auth-event")}}(e,n,r);await function(e,t){return ku()._set(xu(e),t)}(e,s);const o=await wu(e,s,t);return async function(e,t,n){const{cordova:r}=yu();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(wo(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),fa()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await bu(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=yu(),n={};ga()?n.iosBundleId=t.packageName:fa()?n.androidPackageName=t.packageName:yo(e,"operation-not-supported-in-this-environment"),await jc(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=yu(),s=setTimeout((async()=>{await Eu(e),t.onEvent(Nu())}),500),o=async n=>{clearTimeout(s);const r=await Eu(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Tu(r,n.url)),t.onEvent(i||Nu())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");yu().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(nR){console.error(nR)}}}};function Nu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:wo("no-auth-event")}}function Ru(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Pu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();return!("file:"!==Ru()&&"ionic:"!==Ru()&&"capacitor:"!==Ru()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Du(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();return Ln()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rn();return/Edge\/\d+/.test(e)}(e)}function Ou(){try{const e=self.localStorage,t=Hl();if(e)return e.setItem(t,"1"),e.removeItem(t),!Du()||Mn()}catch(nR){return Lu()&&Mn()}return!1}function Lu(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Mu(){return("http:"===Ru()||"https:"===Ru()||Dn()||Pu())&&!(On()||Pn())&&Ou()&&!Lu()}function Fu(){return Pu()&&"undefined"!==typeof document}const Uu={LOCAL:"local",NONE:"none",SESSION:"session"},Vu=Eo,zu="persistence";async function Bu(e){await e._initializationPromise;const t=ju(),n=oa(zu,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function ju(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(nR){return null}}const qu=Eo;class Gu{constructor(){this.browserResolver=ra(uu),this.cordovaResolver=ra(Au),this.underlyingResolver=null,this._redirectPersistence=Gl,this._completeRedirectFn=Fc,this._overrideRedirectResult=Rc}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Fu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return qu(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Fu()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Wu(e){return e.unwrap()}function Hu(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new $u(e,function(e,t){var n;const r=Yn(e),i=t;return Eo(t.customData.operationType,r,"argument-error"),Eo(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ml._fromError(r,i)}(e,t))}else if(r){const e=Ku(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Ku(e){const{_tokenResponse:t}=e instanceof Fn?e.customData:e;if(!t)return null;if(!(e instanceof Fn)&&"temporaryProof"in t&&"phoneNumber"in t)return yc.credentialFromResult(e);const n=t.providerId;if(!n||n===io.PASSWORD)return null;let r;switch(n){case io.GOOGLE:r=$a;break;case io.FACEBOOK:r=Ya;break;case io.GITHUB:r=Ja;break;case io.TWITTER:r=el;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Xa._create(n,o):Ba._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Qa(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Fn?r.credentialFromError(e):r.credentialFromResult(e)}function Qu(e,t){return t.catch((t=>{throw t instanceof Fn&&Hu(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Ku(r)),additionalUserInfo:Ol(e),user:Ju.getOrCreate(n)};var r}))}async function Yu(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Qu(e,n.confirm(t))}}class $u{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Qu(Wu(this.auth),this.resolver.resolveSignIn(e))}}class Ju{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Yn(e);return Ul.has(t)||Ul.set(t,Fl._fromUser(t)),Ul.get(t)}(e)}static getOrCreate(e){return Ju.USER_MAP.has(e)||Ju.USER_MAP.set(e,new Ju(e)),Ju.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Qu(this.auth,fl(this._delegate,e))}async linkWithPhoneNumber(e,t){return Yu(this.auth,async function(e,t,n){const r=Yn(e);await cl(!1,r,"phone");const i=await vc(r.auth,t,Yn(n));return new gc(i,(e=>fl(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Qu(this.auth,async function(e,t,n){const r=Yn(e);_o(r.auth,t,Ha);const i=wc(r.auth,n);return new kc(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Gu))}async linkWithRedirect(e){return await Bu(Ia(this.auth)),Mc(this._delegate,e,Gu)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Qu(this.auth,pl(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Yu(this.auth,async function(e,t,n){const r=Yn(e),i=await vc(r.auth,t,Yn(n));return new gc(i,(e=>pl(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Qu(this.auth,async function(e,t,n){const r=Yn(e);_o(r.auth,t,Ha);const i=wc(r.auth,n);return new kc(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,Gu))}async reauthenticateWithRedirect(e){return await Bu(Ia(this.auth)),Lc(this._delegate,e,Gu)}sendEmailVerification(e){return Tl(this._delegate,e)}async unlink(e){return await al(this._delegate,e),this}updateEmail(e){return function(e,t){return xl(Yn(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return xl(Yn(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await ll(Yn(e),t)}(this._delegate,e)}updateProfile(e){return kl(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Sl(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ju.USER_MAP=new WeakMap;const Xu=Eo;class Zu{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Xu(n,"invalid-api-key",{appName:e.name}),Xu(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?Gu:void 0;this._delegate=t.initialize({options:{persistence:td(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(fo),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ju.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Aa(this._delegate,e,t)}applyActionCode(e){return _l(this._delegate,e)}checkActionCode(e){return Il(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Da(Yn(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&bl(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Qu(this._delegate,async function(e,t,n){const r=Ia(e),i=Ca(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tl),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&bl(e),t})),o=await nl._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return El(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Ga.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){Xu(Mu(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Ia(e)._initializationPromise,Fc(e,t,!1)}(this._delegate,Gu);return e?Qu(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Ia(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=ed(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=ed(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=Ia(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Eo(t.handleCodeInApp,r,"argument-error"),t&&wl(r,e,t)}(i,n),await Ca(r,i,"getOobCode",Ua)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=Ia(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&wl(r,i,n),await Ca(r,i,"getOobCode",Fa)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Vu(Object.values(Uu).includes(t),e,"invalid-persistence-type"),On()?Vu(t!==Uu.SESSION,e,"unsupported-persistence-type"):Pn()?Vu(t===Uu.NONE,e,"unsupported-persistence-type"):Lu()?Vu(t===Uu.NONE||t===Uu.LOCAL&&Mn(),e,"unsupported-persistence-type"):Vu(t===Uu.NONE||Ou(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Uu.SESSION:t=Gl;break;case Uu.LOCAL:t=await ra(sc)._isAvailable()?sc:jl;break;case Uu.NONE:t=sa;break;default:return yo("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Qu(this._delegate,async function(e){var t;const n=Ia(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new nl({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await tl(n,{returnSecureToken:!0}),i=await nl._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Qu(this._delegate,hl(this._delegate,e))}signInWithCustomToken(e){return Qu(this._delegate,ml(this._delegate,e))}signInWithEmailAndPassword(e,t){return Qu(this._delegate,function(e,t,n){return hl(Yn(e),Wa.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&bl(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Qu(this._delegate,async function(e,t,n){const r=Yn(e),i=Wa.credentialWithLink(t,n||ko());return Eo(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),hl(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Yu(this._delegate,async function(e,t,n){const r=Ia(e),i=await vc(r,t,Yn(n));return new gc(i,(e=>hl(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return Xu(Mu(),this._delegate,"operation-not-supported-in-this-environment"),Qu(this._delegate,async function(e,t,n){const r=Ia(e);_o(e,t,Ha);const i=wc(r,n);return new kc(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,Gu))}async signInWithRedirect(e){return Xu(Mu(),this._delegate,"operation-not-supported-in-this-environment"),await Bu(this._delegate),Oc(this._delegate,e,Gu)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Il(Yn(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function ed(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&Ju.getOrCreate(e)),error:t,complete:n}}function td(e,t){const n=function(e,t){const n=ju();if(!n)return[];const r=oa(zu,e,t);switch(n.getItem(r)){case Uu.NONE:return[sa];case Uu.LOCAL:return[sc,Gl];case Uu.SESSION:return[Gl];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(sc)||n.push(sc),"undefined"!==typeof window)for(const r of[jl,Gl])n.includes(r)||n.push(r);return n.includes(sa)||n.push(sa),n}Zu.Persistence=Uu;class nd{constructor(){this.providerId="phone",this._delegate=new yc(Wu(di.auth()))}static credential(e,t){return yc.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}nd.PHONE_SIGN_IN_METHOD=yc.PHONE_SIGN_IN_METHOD,nd.PROVIDER_ID=yc.PROVIDER_ID;const rd=Eo;class id{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:di.app();var r;rd(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new mc(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var sd;(sd=di).INTERNAL.registerComponent(new $n("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Zu(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:so,PASSWORD_RESET:oo,RECOVER_EMAIL:ao,REVERT_SECOND_FACTOR_ADDITION:lo,VERIFY_AND_CHANGE_EMAIL:co,VERIFY_EMAIL:uo}},EmailAuthProvider:Wa,FacebookAuthProvider:Ya,GithubAuthProvider:Ja,GoogleAuthProvider:$a,OAuthProvider:Qa,SAMLAuthProvider:Za,PhoneAuthProvider:nd,PhoneMultiFactorGenerator:fu,RecaptchaVerifier:id,TwitterAuthProvider:el,Auth:Zu,AuthCredential:Pa,Error:Fn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),sd.registerVersion("@firebase/auth-compat","0.5.1");var od,ad="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ld={},cd=cd||{},ud=ad||self;function dd(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function hd(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var fd="closure_uid_"+(1e9*Math.random()>>>0),pd=0;function md(e,t,n){return e.call.apply(e.bind,arguments)}function gd(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function vd(e,t,n){return(vd=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?md:gd).apply(null,arguments)}function yd(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function wd(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function bd(){this.s=this.s,this.o=this.o}bd.prototype.s=!1,bd.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,fd)&&e[fd]||(e[fd]=++pd)}(this)},bd.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const _d=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Id(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ed(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(dd(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Td(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Td.prototype.h=function(){this.defaultPrevented=!0};var Sd=function(){if(!ud.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};ud.addEventListener("test",e,t),ud.removeEventListener("test",e,t)}catch(SC){}return e}();function kd(e){return/^[\s\xa0]*$/.test(e)}function xd(){var e=ud.navigator;return e&&(e=e.userAgent)?e:""}function Cd(e){return-1!=xd().indexOf(e)}function Ad(e){return Ad[" "](e),e}Ad[" "]=function(){};var Nd,Rd,Pd=Cd("Opera"),Dd=Cd("Trident")||Cd("MSIE"),Od=Cd("Edge"),Ld=Od||Dd,Md=Cd("Gecko")&&!(-1!=xd().toLowerCase().indexOf("webkit")&&!Cd("Edge"))&&!(Cd("Trident")||Cd("MSIE"))&&!Cd("Edge"),Fd=-1!=xd().toLowerCase().indexOf("webkit")&&!Cd("Edge");function Ud(){var e=ud.document;return e?e.documentMode:void 0}e:{var Vd="",zd=function(){var e=xd();return Md?/rv:([^\);]+)(\)|;)/.exec(e):Od?/Edge\/([\d\.]+)/.exec(e):Dd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Fd?/WebKit\/(\S+)/.exec(e):Pd?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(zd&&(Vd=zd?zd[1]:""),Dd){var Bd=Ud();if(null!=Bd&&Bd>parseFloat(Vd)){Nd=String(Bd);break e}}Nd=Vd}if(ud.document&&Dd){var jd=Ud();Rd=jd||(parseInt(Nd,10)||void 0)}else Rd=void 0;var qd=Rd;function Gd(e,t){if(Td.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Md){e:{try{Ad(t.nodeName);var i=!0;break e}catch(GC){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Wd[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Gd.$.h.call(this)}}wd(Gd,Td);var Wd={2:"touch",3:"pen",4:"mouse"};Gd.prototype.h=function(){Gd.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Hd="closure_listenable_"+(1e6*Math.random()|0),Kd=0;function Qd(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Kd,this.fa=this.ia=!1}function Yd(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function $d(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Jd(e){const t={};for(const n in e)t[n]=e[n];return t}const Xd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zd(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Xd.length;t++)n=Xd[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function eh(e){this.src=e,this.g={},this.h=0}function th(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=_d(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Yd(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function nh(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}eh.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=nh(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Qd(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var rh="closure_lm_"+(1e6*Math.random()|0),ih={};function sh(e,t,n,r,i){if(r&&r.once)return ah(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)sh(e,t[s],n,r,i);return null}return n=ph(n),e&&e[Hd]?e.O(t,n,hd(r)?!!r.capture:!!r,i):oh(e,t,n,!1,r,i)}function oh(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=hd(i)?!!i.capture:!!i,a=hh(e);if(a||(e[rh]=a=new eh(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=dh;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Sd||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(uh(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ah(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ah(e,t[s],n,r,i);return null}return n=ph(n),e&&e[Hd]?e.P(t,n,hd(r)?!!r.capture:!!r,i):oh(e,t,n,!0,r,i)}function lh(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)lh(e,t[s],n,r,i);else r=hd(r)?!!r.capture:!!r,n=ph(n),e&&e[Hd]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=nh(s=e.g[t],n,r,i))&&(Yd(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=hh(e))&&(t=e.g[t.toString()],e=-1,t&&(e=nh(t,n,r,i)),(n=-1<e?t[e]:null)&&ch(n))}function ch(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Hd])th(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(uh(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=hh(t))?(th(n,e),0==n.h&&(n.src=null,t[rh]=null)):Yd(e)}}}function uh(e){return e in ih?ih[e]:ih[e]="on"+e}function dh(e,t){if(e.fa)e=!0;else{t=new Gd(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ch(e),e=n.call(r,t)}return e}function hh(e){return(e=e[rh])instanceof eh?e:null}var fh="__closure_events_fn_"+(1e9*Math.random()>>>0);function ph(e){return"function"===typeof e?e:(e[fh]||(e[fh]=function(t){return e.handleEvent(t)}),e[fh])}function mh(){bd.call(this),this.i=new eh(this),this.S=this,this.J=null}function gh(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Td(t,e);else if(t instanceof Td)t.target=t.target||e;else{var i=t;Zd(t=new Td(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=vh(o,r,!0,t)&&i}if(i=vh(o=t.g=e,r,!0,t)&&i,i=vh(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=vh(o=t.g=n[s],r,!1,t)&&i}function vh(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&th(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}wd(mh,bd),mh.prototype[Hd]=!0,mh.prototype.removeEventListener=function(e,t,n,r){lh(this,e,t,n,r)},mh.prototype.N=function(){if(mh.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Yd(n[r]);delete t.g[e],t.h--}}this.J=null},mh.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},mh.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var yh=ud.JSON.stringify;function wh(){var e=kh;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var bh=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new _h),(e=>e.reset()));class _h{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ih(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Eh(e){ud.setTimeout((()=>{throw e}),0)}let Th,Sh=!1,kh=new class{constructor(){this.h=this.g=null}add(e,t){const n=bh.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},xh=()=>{const e=ud.Promise.resolve(void 0);Th=()=>{e.then(Ch)}};var Ch=()=>{for(var e;e=wh();){try{e.h.call(e.g)}catch(SC){Eh(SC)}var t=bh;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Sh=!1};function Ah(e,t){mh.call(this),this.h=e||1,this.g=t||ud,this.j=vd(this.qb,this),this.l=Date.now()}function Nh(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Rh(e,t,n){if("function"===typeof e)n&&(e=vd(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=vd(e.handleEvent,e)}return 2147483647<Number(t)?-1:ud.setTimeout(e,t||0)}function Ph(e){e.g=Rh((()=>{e.g=null,e.i&&(e.i=!1,Ph(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}wd(Ah,mh),(od=Ah.prototype).ga=!1,od.T=null,od.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),gh(this,"tick"),this.ga&&(Nh(this),this.start()))}},od.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},od.N=function(){Ah.$.N.call(this),Nh(this),delete this.g};class Dh extends bd{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ph(this)}N(){super.N(),this.g&&(ud.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oh(e){bd.call(this),this.h=e,this.g={}}wd(Oh,bd);var Lh=[];function Mh(e,t,n,r){Array.isArray(n)||(n&&(Lh[0]=n.toString()),n=Lh);for(var i=0;i<n.length;i++){var s=sh(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Fh(e){$d(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ch(e)}),e),e.g={}}function Uh(){this.g=!0}function Vh(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return yh(n)}catch(zC){return t}}(e,n)+(r?" "+r:"")}))}Oh.prototype.N=function(){Oh.$.N.call(this),Fh(this)},Oh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Uh.prototype.Ea=function(){this.g=!1},Uh.prototype.info=function(){};var zh={},Bh=null;function jh(){return Bh=Bh||new mh}function qh(e){Td.call(this,zh.Ta,e)}function Gh(e){const t=jh();gh(t,new qh(t))}function Wh(e,t){Td.call(this,zh.STAT_EVENT,e),this.stat=t}function Hh(e){const t=jh();gh(t,new Wh(t,e))}function Kh(e,t){Td.call(this,zh.Ua,e),this.size=t}function Qh(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return ud.setTimeout((function(){e()}),t)}zh.Ta="serverreachability",wd(qh,Td),zh.STAT_EVENT="statevent",wd(Wh,Td),zh.Ua="timingevent",wd(Kh,Td);var Yh={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},$h={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Jh(){}function Xh(e){return e.h||(e.h=e.i())}function Zh(){}Jh.prototype.h=null;var ef,tf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function nf(){Td.call(this,"d")}function rf(){Td.call(this,"c")}function sf(){}function of(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Oh(this),this.P=lf,e=Ld?125:void 0,this.V=new Ah(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new af}function af(){this.i=null,this.g="",this.h=!1}wd(nf,Td),wd(rf,Td),wd(sf,Jh),sf.prototype.g=function(){return new XMLHttpRequest},sf.prototype.i=function(){return{}},ef=new sf;var lf=45e3,cf={},uf={};function df(e,t,n){e.L=1,e.A=Nf(Sf(t)),e.u=n,e.S=!0,hf(e,null)}function hf(e,t){e.G=Date.now(),gf(e),e.B=Sf(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),qf(n.i,"t",r),e.o=0,n=e.l.J,e.h=new af,e.g=qp(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Dh(vd(e.Pa,e,e.g),e.O)),Mh(e.U,e.g,"readystatechange",e.nb),t=e.I?Jd(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Gh(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function ff(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function pf(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=mf(e,n),r==uf){4==t&&(e.s=4,Hh(14),i=!1),Vh(e.j,e.m,null,"[Incomplete Response]");break}if(r==cf){e.s=4,Hh(15),Vh(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Vh(e.j,e.m,r,null),_f(e,r)}ff(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Hh(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Lp(t),t.M=!0,Hh(11))):(Vh(e.j,e.m,n,"[Invalid Chunked Response]"),bf(e),wf(e))}function mf(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?uf:(n=Number(t.substring(n,r)),isNaN(n)?cf:(r+=1)+n>t.length?uf:(t=t.slice(r,r+n),e.o=r+n,t))}function gf(e){e.Y=Date.now()+e.P,vf(e,e.P)}function vf(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Qh(vd(e.lb,e),t)}function yf(e){e.C&&(ud.clearTimeout(e.C),e.C=null)}function wf(e){0==e.l.H||e.J||Up(e.l,e)}function bf(e){yf(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Nh(e.V),Fh(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function _f(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||$f(n.i,e)))if(!e.K&&$f(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Fp(n),xp(n)}Op(n),Hh(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Qh(vd(n.ib,n),6e3));if(1>=Yf(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else zp(n,11)}else if((e.K||n.g==e)&&Fp(n),!kd(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Jf(s,s.h),s.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Af(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=jp(r,r.J?r.pa:null,r.Y),o.K){Xf(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(yf(a),gf(a)),r.g=o}else Dp(r);0<n.j.length&&Ap(n)}else"stop"!=c[0]&&"close"!=c[0]||zp(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?zp(n,7):kp(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Gh()}catch(c){}}function If(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(dd(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(dd(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(dd(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(od=of.prototype).setTimeout=function(e){this.P=e},od.nb=function(e){e=e.target;const t=this.M;t&&3==bp(e)?t.l():this.Pa(e)},od.Pa=function(e){try{if(e==this.g)e:{const u=bp(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Ld||this.g&&(this.h.h||this.g.ja()||_p(this.g)))){this.J||4!=u||7==t||Gh(),yf(this);var n=this.g.da();this.ca=n;t:if(ff(this)){var r=_p(this.g);e="";var i=r.length,s=4==bp(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){bf(this),wf(this);var o="";break t}this.h.i=new ud.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!kd(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,Hh(12),bf(this),wf(this);break e}Vh(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_f(this,n)}this.S?(pf(this,u,o),Ld&&this.i&&3==u&&(Mh(this.U,this.V,"tick",this.mb),this.V.start())):(Vh(this.j,this.m,o,null),_f(this,o)),4==u&&bf(this),this.i&&!this.J&&(4==u?Up(this.l,this):(this.i=!1,gf(this)))}else(function(e){const t={};e=(e.g&&2<=bp(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(kd(e[r]))continue;var n=Ih(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Hh(12)):(this.s=0,Hh(13)),bf(this),wf(this)}}}catch(XC){}},od.mb=function(){if(this.g){var e=bp(this.g),t=this.g.ja();this.o<t.length&&(yf(this),pf(this,e,t),this.i&&4!=e&&gf(this))}},od.cancel=function(){this.J=!0,bf(this)},od.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Gh(),Hh(17)),bf(this),this.s=2,wf(this)):vf(this,this.Y-e)};var Ef=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Tf(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Tf){this.h=e.h,kf(this,e.j),this.s=e.s,this.g=e.g,xf(this,e.m),this.l=e.l;var t=e.i,n=new Vf;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Cf(this,n),this.o=e.o}else e&&(t=String(e).match(Ef))?(this.h=!1,kf(this,t[1]||"",!0),this.s=Rf(t[2]||""),this.g=Rf(t[3]||"",!0),xf(this,t[4]),this.l=Rf(t[5]||"",!0),Cf(this,t[6]||"",!0),this.o=Rf(t[7]||"")):(this.h=!1,this.i=new Vf(null,this.h))}function Sf(e){return new Tf(e)}function kf(e,t,n){e.j=n?Rf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function xf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Cf(e,t,n){t instanceof Vf?(e.i=t,function(e,t){t&&!e.j&&(zf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Bf(this,t),qf(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Pf(t,Ff)),e.i=new Vf(t,e.h))}function Af(e,t,n){e.i.set(t,n)}function Nf(e){return Af(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Rf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Pf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Df),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Df(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Tf.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Pf(t,Of,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Pf(t,Of,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Pf(n,"/"==n.charAt(0)?Mf:Lf,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Pf(n,Uf)),e.join("")};var Of=/[#\/\?@]/g,Lf=/[#\?:]/g,Mf=/[#\?]/g,Ff=/[#\?@]/g,Uf=/#/g;function Vf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function zf(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Bf(e,t){zf(e),t=Gf(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function jf(e,t){return zf(e),t=Gf(e,t),e.g.has(t)}function qf(e,t,n){Bf(e,t),0<n.length&&(e.i=null,e.g.set(Gf(e,t),Id(n)),e.h+=n.length)}function Gf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(od=Vf.prototype).add=function(e,t){zf(this),this.i=null,e=Gf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},od.forEach=function(e,t){zf(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},od.ta=function(){zf(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},od.Z=function(e){zf(this);let t=[];if("string"===typeof e)jf(this,e)&&(t=t.concat(this.g.get(Gf(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},od.set=function(e,t){return zf(this),this.i=null,jf(this,e=Gf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},od.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},od.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Wf=class{constructor(e,t){this.g=e,this.map=t}};function Hf(e){this.l=e||Kf,ud.PerformanceNavigationTiming?e=0<(e=ud.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(ud.g&&ud.g.Ka&&ud.g.Ka()&&ud.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Kf=10;function Qf(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Yf(e){return e.h?1:e.g?e.g.size:0}function $f(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Jf(e,t){e.g?e.g.add(t):e.h=t}function Xf(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Zf(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Id(e.i)}Hf.prototype.cancel=function(){if(this.i=Zf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ep=class{stringify(e){return ud.JSON.stringify(e,void 0)}parse(e){return ud.JSON.parse(e,void 0)}};function tp(){this.g=new ep}function np(e,t,n){const r=n||"";try{If(e,(function(e,n){let i=e;hd(e)&&(i=yh(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(nR){throw t.push(r+"type="+encodeURIComponent("_badmap")),nR}}function rp(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(GC){}}function ip(e){this.l=e.ec||null,this.j=e.ob||!1}function sp(e,t){mh.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=op,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}wd(ip,Jh),ip.prototype.g=function(){return new sp(this.l,this.j)},ip.prototype.i=function(e){return function(){return e}}({}),wd(sp,mh);var op=0;function ap(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function lp(e){e.readyState=4,e.l=null,e.j=null,e.A=null,cp(e)}function cp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(od=sp.prototype).open=function(e,t){if(this.readyState!=op)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,cp(this)},od.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||ud).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},od.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,lp(this)),this.readyState=op},od.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,cp(this)),this.g&&(this.readyState=3,cp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof ud.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ap(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},od.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?lp(this):cp(this),3==this.readyState&&ap(this)}},od.Za=function(e){this.g&&(this.response=this.responseText=e,lp(this))},od.Ya=function(e){this.g&&(this.response=e,lp(this))},od.ka=function(){this.g&&lp(this)},od.setRequestHeader=function(e,t){this.v.append(e,t)},od.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},od.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(sp.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var up=ud.JSON.parse;function dp(e){mh.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=hp,this.L=this.M=!1}wd(dp,mh);var hp="",fp=/^https?$/i,pp=["POST","PUT"];function mp(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,gp(e),yp(e)}function gp(e){e.F||(e.F=!0,gh(e,"complete"),gh(e,"error"))}function vp(e){if(e.h&&"undefined"!=typeof cd&&(!e.C[1]||4!=bp(e)||2!=e.da()))if(e.v&&4==bp(e))Rh(e.La,0,e);else if(gh(e,"readystatechange"),4==bp(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(Ef)[1]||null;!i&&ud.self&&ud.self.location&&(i=ud.self.location.protocol.slice(0,-1)),r=!fp.test(i?i.toLowerCase():"")}n=r}if(n)gh(e,"complete"),gh(e,"success");else{e.m=6;try{var s=2<bp(e)?e.g.statusText:""}catch(zC){s=""}e.j=s+" ["+e.da()+"]",gp(e)}}finally{yp(e)}}}function yp(e,t){if(e.g){wp(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||gh(e,"ready");try{n.onreadystatechange=r}catch(nR){}}}function wp(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(ud.clearTimeout(e.A),e.A=null)}function bp(e){return e.g?e.g.readyState:0}function _p(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case hp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Ip(e){let t="";return $d(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ep(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ip(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Af(e,t,n))}function Tp(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Sp(e){this.Ga=0,this.j=[],this.l=new Uh,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Tp("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Tp("baseRetryDelayMs",5e3,e),this.hb=Tp("retryDelaySeedMs",1e4,e),this.eb=Tp("forwardChannelMaxRetries",2,e),this.xa=Tp("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Hf(e&&e.concurrentRequestLimit),this.Ja=new tp,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function kp(e){if(Cp(e),3==e.H){var t=e.W++,n=Sf(e.I);if(Af(n,"SID",e.K),Af(n,"RID",t),Af(n,"TYPE","terminate"),Rp(e,n),(t=new of(e,e.l,t)).L=2,t.A=Nf(Sf(n)),n=!1,ud.navigator&&ud.navigator.sendBeacon)try{n=ud.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&ud.Image&&((new Image).src=t.A,n=!0),n||(t.g=qp(t.l,null),t.g.ha(t.A)),t.G=Date.now(),gf(t)}Bp(e)}function xp(e){e.g&&(Lp(e),e.g.cancel(),e.g=null)}function Cp(e){xp(e),e.u&&(ud.clearTimeout(e.u),e.u=null),Fp(e),e.i.cancel(),e.m&&("number"===typeof e.m&&ud.clearTimeout(e.m),e.m=null)}function Ap(e){if(!Qf(e.i)&&!e.m){e.m=!0;var t=e.Na;Th||xh(),Sh||(Th(),Sh=!0),kh.add(t,e),e.C=0}}function Np(e,t){var n;n=t?t.m:e.W++;const r=Sf(e.I);Af(r,"SID",e.K),Af(r,"RID",n),Af(r,"AID",e.V),Rp(e,r),e.o&&e.s&&Ep(r,e.o,e.s),n=new of(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Pp(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Jf(e.i,n),df(n,r,t)}function Rp(e,t){e.na&&$d(e.na,(function(e,n){Af(t,n,e)})),e.h&&If({},(function(e,n){Af(t,n,e)}))}function Pp(e,t,n){n=Math.min(e.j.length,n);var r=e.h?vd(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{np(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Dp(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Th||xh(),Sh||(Th(),Sh=!0),kh.add(t,e),e.A=0}}function Op(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Qh(vd(e.Ma,e),Vp(e,e.A)),e.A++,!0)}function Lp(e){null!=e.B&&(ud.clearTimeout(e.B),e.B=null)}function Mp(e){e.g=new of(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Sf(e.wa);Af(t,"RID","rpc"),Af(t,"SID",e.K),Af(t,"AID",e.V),Af(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Af(t,"TO",e.qa),Af(t,"TYPE","xmlhttp"),Rp(e,t),e.o&&e.s&&Ep(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Nf(Sf(t)),n.u=null,n.S=!0,hf(n,e)}function Fp(e){null!=e.v&&(ud.clearTimeout(e.v),e.v=null)}function Up(e,t){var n=null;if(e.g==t){Fp(e),Lp(e),e.g=null;var r=2}else{if(!$f(e.i,t))return;n=t.F,Xf(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;gh(r=jh(),new Kh(r,n)),Ap(e)}else Dp(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Yf(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Qh(vd(e.Na,e,t),Vp(e,e.C)),e.C++,!0))}(e,t)||2==r&&Op(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:zp(e,5);break;case 4:zp(e,10);break;case 3:zp(e,6);break;default:zp(e,2)}}function Vp(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function zp(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=vd(e.pb,e);n||(n=new Tf("//www.google.com/images/cleardot.gif"),ud.location&&"http"==ud.location.protocol||kf(n,"https"),Nf(n)),function(e,t){const n=new Uh;if(ud.Image){const r=new Image;r.onload=yd(rp,n,r,"TestLoadImage: loaded",!0,t),r.onerror=yd(rp,n,r,"TestLoadImage: error",!1,t),r.onabort=yd(rp,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=yd(rp,n,r,"TestLoadImage: timeout",!1,t),ud.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Hh(2);e.H=0,e.h&&e.h.za(t),Bp(e),Cp(e)}function Bp(e){if(e.H=0,e.ma=[],e.h){const t=Zf(e.i);0==t.length&&0==e.j.length||(Ed(e.ma,t),Ed(e.ma,e.j),e.i.i.length=0,Id(e.j),e.j.length=0),e.h.ya()}}function jp(e,t,n){var r=n instanceof Tf?Sf(n):new Tf(n);if(""!=r.g)t&&(r.g=t+"."+r.g),xf(r,r.m);else{var i=ud.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new Tf(null);r&&kf(s,r),t&&(s.g=t),i&&xf(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Af(r,n,t),Af(r,"VER",e.ra),Rp(e,r),r}function qp(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new dp(new ip({ob:n})):new dp(e.va)).Oa(e.J),t}function Gp(){}function Wp(){if(Dd&&!(10<=Number(qd)))throw Error("Environmental error: no available transport.")}function Hp(e,t){mh.call(this),this.g=new Sp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!kd(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!kd(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Yp(this)}function Kp(e){nf.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Qp(){rf.call(this),this.status=1}function Yp(e){this.g=e}function $p(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Jp(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Xp(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(od=dp.prototype).Oa=function(e){this.M=e},od.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ef.g(),this.C=this.u?Xh(this.u):Xh(ef),this.g.onreadystatechange=vd(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(GC){return void mp(this,GC)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=ud.FormData&&e instanceof ud.FormData,!(0<=_d(pp,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wp(this),0<this.B&&((this.L=function(e){return Dd&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=vd(this.ua,this)):this.A=Rh(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(GC){mp(this,GC)}},od.ua=function(){"undefined"!=typeof cd&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gh(this,"timeout"),this.abort(8))},od.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,gh(this,"complete"),gh(this,"abort"),yp(this))},od.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),yp(this,!0)),dp.$.N.call(this)},od.La=function(){this.s||(this.G||this.v||this.l?vp(this):this.kb())},od.kb=function(){vp(this)},od.isActive=function(){return!!this.g},od.da=function(){try{return 2<bp(this)?this.g.status:-1}catch(e){return-1}},od.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},od.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),up(t)}},od.Ia=function(){return this.m},od.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(od=Sp.prototype).ra=8,od.H=1,od.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new of(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Jd(s),Zd(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Pp(this,i,t),Af(n=Sf(this.I),"RID",e),Af(n,"CVER",22),this.F&&Af(n,"X-HTTP-Session-Id",this.F),Rp(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Ip(s)))+"&"+t:this.o&&Ep(n,this.o,s)),Jf(this.i,i),this.bb&&Af(n,"TYPE","init"),this.P?(Af(n,"$req",t),Af(n,"SID","null"),i.aa=!0,df(i,n,null)):df(i,n,t),this.H=2}}else 3==this.H&&(e?Np(this,e):0==this.j.length||Qf(this.i)||Np(this))},od.Ma=function(){if(this.u=null,Mp(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Qh(vd(this.jb,this),e)}},od.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Hh(10),xp(this),Mp(this))},od.ib=function(){null!=this.v&&(this.v=null,xp(this),Op(this),Hh(19))},od.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Hh(2)):(this.l.info("Failed to ping google.com"),Hh(1))},od.isActive=function(){return!!this.h&&this.h.isActive(this)},(od=Gp.prototype).Ba=function(){},od.Aa=function(){},od.za=function(){},od.ya=function(){},od.isActive=function(){return!0},od.Va=function(){},Wp.prototype.g=function(e,t){return new Hp(e,t)},wd(Hp,mh),Hp.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Hh(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=jp(e,null,e.Y),Ap(e)},Hp.prototype.close=function(){kp(this.g)},Hp.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=yh(e),e=n);t.j.push(new Wf(t.fb++,e)),3==t.H&&Ap(t)},Hp.prototype.N=function(){this.g.h=null,delete this.j,kp(this.g),delete this.g,Hp.$.N.call(this)},wd(Kp,nf),wd(Qp,rf),wd(Yp,Gp),Yp.prototype.Ba=function(){gh(this.g,"a")},Yp.prototype.Aa=function(e){gh(this.g,new Kp(e))},Yp.prototype.za=function(e){gh(this.g,new Qp)},Yp.prototype.ya=function(){gh(this.g,"b")},wd($p,(function(){this.blockSize=-1})),$p.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},$p.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Jp(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Jp(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Jp(this,r),i=0;break}}this.h=i,this.i+=t},$p.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Zp={};function em(e){return-128<=e&&128>e?function(e,t){var n=Zp;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Xp([0|e],0>e?-1:0)})):new Xp([0|e],0>e?-1:0)}function tm(e){if(isNaN(e)||!isFinite(e))return rm;if(0>e)return lm(tm(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=nm;return new Xp(t,0)}var nm=4294967296,rm=em(0),im=em(1),sm=em(16777216);function om(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function am(e){return-1==e.h}function lm(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Xp(n,~e.h).add(im)}function cm(e,t){return e.add(lm(t))}function um(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function dm(e,t){this.g=e,this.h=t}function hm(e,t){if(om(t))throw Error("division by zero");if(om(e))return new dm(rm,rm);if(am(e))return t=hm(lm(e),t),new dm(lm(t.g),lm(t.h));if(am(t))return t=hm(e,lm(t)),new dm(lm(t.g),t.h);if(30<e.g.length){if(am(e)||am(t))throw Error("slowDivide_ only works with positive integers.");for(var n=im,r=t;0>=r.X(e);)n=fm(n),r=fm(r);var i=pm(n,1),s=pm(r,1);for(r=pm(r,2),n=pm(n,2);!om(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=pm(r,1),n=pm(n,1)}return t=cm(e,i.R(t)),new dm(i,t)}for(i=rm;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=tm(n)).R(t);am(o)||0<o.X(e);)o=(s=tm(n-=r)).R(t);om(s)&&(s=im),i=i.add(s),e=cm(e,o)}return new dm(i,e)}function fm(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Xp(n,e.h)}function pm(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Xp(i,e.h)}(od=Xp.prototype).ea=function(){if(am(this))return-lm(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:nm+r)*t,t*=nm}return e},od.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(om(this))return"0";if(am(this))return"-"+lm(this).toString(e);for(var t=tm(Math.pow(e,6)),n=this,r="";;){var i=hm(n,t).g,s=((0<(n=cm(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(om(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},od.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},od.X=function(e){return am(e=cm(this,e))?-1:om(e)?0:1},od.abs=function(){return am(this)?lm(this):this},od.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Xp(n,-2147483648&n[n.length-1]?-1:0)},od.R=function(e){if(om(this)||om(e))return rm;if(am(this))return am(e)?lm(this).R(lm(e)):lm(lm(this).R(e));if(am(e))return lm(this.R(lm(e)));if(0>this.X(sm)&&0>e.X(sm))return tm(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,um(n,2*r+2*i),n[2*r+2*i+1]+=s*l,um(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,um(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,um(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Xp(n,0)},od.gb=function(e){return hm(this,e).h},od.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Xp(n,this.h&e.h)},od.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Xp(n,this.h|e.h)},od.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Xp(n,this.h^e.h)},Wp.prototype.createWebChannel=Wp.prototype.g,Hp.prototype.send=Hp.prototype.u,Hp.prototype.open=Hp.prototype.m,Hp.prototype.close=Hp.prototype.close,Yh.NO_ERROR=0,Yh.TIMEOUT=8,Yh.HTTP_ERROR=6,$h.COMPLETE="complete",Zh.EventType=tf,tf.OPEN="a",tf.CLOSE="b",tf.ERROR="c",tf.MESSAGE="d",mh.prototype.listen=mh.prototype.O,dp.prototype.listenOnce=dp.prototype.P,dp.prototype.getLastError=dp.prototype.Sa,dp.prototype.getLastErrorCode=dp.prototype.Ia,dp.prototype.getStatus=dp.prototype.da,dp.prototype.getResponseJson=dp.prototype.Wa,dp.prototype.getResponseText=dp.prototype.ja,dp.prototype.send=dp.prototype.ha,dp.prototype.setWithCredentials=dp.prototype.Oa,$p.prototype.digest=$p.prototype.l,$p.prototype.reset=$p.prototype.reset,$p.prototype.update=$p.prototype.j,Xp.prototype.add=Xp.prototype.add,Xp.prototype.multiply=Xp.prototype.R,Xp.prototype.modulo=Xp.prototype.gb,Xp.prototype.compare=Xp.prototype.X,Xp.prototype.toNumber=Xp.prototype.ea,Xp.prototype.toString=Xp.prototype.toString,Xp.prototype.getBits=Xp.prototype.D,Xp.fromNumber=tm,Xp.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return lm(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=tm(Math.pow(n,8)),i=rm,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=tm(Math.pow(n,o)),i=i.R(o).add(tm(a))):i=(i=i.R(r)).add(tm(a))}return i};var mm=ld.createWebChannelTransport=function(){return new Wp},gm=ld.getStatEventTarget=function(){return jh()},vm=ld.ErrorCode=Yh,ym=ld.EventType=$h,wm=ld.Event=zh,bm=ld.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},_m=(ld.FetchXmlHttpFactory=ip,ld.WebChannel=Zh),Im=ld.XhrIo=dp,Em=ld.Md5=$p,Tm=ld.Integer=Xp;const Sm="@firebase/firestore";class km{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}km.UNAUTHENTICATED=new km(null),km.GOOGLE_CREDENTIALS=new km("google-credentials-uid"),km.FIRST_PARTY=new km("first-party-uid"),km.MOCK_USER=new km("mock-user");let xm="10.7.0";const Cm=new ar("@firebase/firestore");function Am(){return Cm.logLevel}function Nm(e){if(Cm.logLevel<=nr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Dm);Cm.debug("Firestore (".concat(xm,"): ").concat(e),...i)}}function Rm(e){if(Cm.logLevel<=nr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Dm);Cm.error("Firestore (".concat(xm,"): ").concat(e),...i)}}function Pm(e){if(Cm.logLevel<=nr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Dm);Cm.warn("Firestore (".concat(xm,"): ").concat(e),...i)}}function Dm(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(VC){return e}}function Om(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(xm,") INTERNAL ASSERTION FAILED: ")+e;throw Rm(t),new Error(t)}function Lm(e,t){e||Om()}function Mm(e,t){return e}const Fm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Um extends Fn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Vm{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class zm{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Bm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(km.UNAUTHENTICATED)))}shutdown(){}}class jm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class qm{constructor(e){this.t=e,this.currentUser=km.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Vm;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Vm,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Nm("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Nm("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Vm)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Nm("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Lm("string"==typeof t.accessToken),new zm(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Lm(null===e||"string"==typeof e),new km(e)}}class Gm{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=km.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Wm{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Gm(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(km.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Hm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Km{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Nm("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Nm("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Nm("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Nm("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Lm("string"==typeof e.token),this.R=e.token,new Hm(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Qm(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Qm(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function $m(e,t){return e<t?-1:e>t?1:0}function Jm(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Xm(e){return e+"\0"}class Zm{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Um(Fm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Um(Fm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Um(Fm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Um(Fm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Zm.fromMillis(Date.now())}static fromDate(e){return Zm.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Zm(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$m(this.nanoseconds,e.nanoseconds):$m(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class eg{constructor(e){this.timestamp=e}static fromTimestamp(e){return new eg(e)}static min(){return new eg(new Zm(0,0))}static max(){return new eg(new Zm(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class tg{constructor(e,t,n){void 0===t?t=0:t>e.length&&Om(),void 0===n?n=e.length-t:n>e.length-t&&Om(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===tg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof tg?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ng extends tg{construct(e,t,n){return new ng(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Um(Fm.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new ng(e)}static emptyPath(){return new ng([])}}const rg=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ig extends tg{construct(e,t,n){return new ig(e,t,n)}static isValidIdentifier(e){return rg.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ig.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ig(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Um(Fm.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Um(Fm.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Um(Fm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Um(Fm.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ig(t)}static emptyPath(){return new ig([])}}class sg{constructor(e){this.path=e}static fromPath(e){return new sg(ng.fromString(e))}static fromName(e){return new sg(ng.fromString(e).popFirst(5))}static empty(){return new sg(ng.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ng.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ng.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new sg(new ng(e.slice()))}}class og{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function ag(e){return e.fields.find((e=>2===e.kind))}function lg(e){return e.fields.filter((e=>2!==e.kind))}og.UNKNOWN_ID=-1;class cg{constructor(e,t){this.fieldPath=e,this.kind=t}}class ug{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ug(0,fg.min())}}function dg(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=eg.fromTimestamp(1e9===r?new Zm(n+1,0):new Zm(n,r));return new fg(i,sg.empty(),t)}function hg(e){return new fg(e.readTime,e.key,-1)}class fg{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new fg(eg.min(),sg.empty(),-1)}static max(){return new fg(eg.max(),sg.empty(),-1)}}function pg(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=sg.comparator(e.documentKey,t.documentKey),0!==n?n:$m(e.largestBatchId,t.largestBatchId))}const mg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function vg(e){if(e.code!==Fm.FAILED_PRECONDITION||e.message!==mg)throw e;Nm("LocalStore","Unexpectedly lost primary lease")}class yg{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Om(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new yg(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof yg?t:yg.resolve(t)}catch(e){return yg.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):yg.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):yg.reject(t)}static resolve(e){return new yg(((t,n)=>{t(e)}))}static reject(e){return new yg(((t,n)=>{n(e)}))}static waitFor(e){return new yg(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=yg.resolve(!1);for(const n of e)t=t.next((e=>e?yg.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new yg(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new yg(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class wg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Vm,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Ig(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=xg(t.target.error);this.V.reject(new Ig(e,n))}}static open(e,t,n,r){try{return new wg(t,e.transaction(r,n))}catch(e){throw new Ig(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Nm("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Tg(t)}}class bg{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===bg.S(Rn())&&Rm("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Nm("SimpleDb","Removing database:",e),Sg(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Mn())return!1;if(bg.C())return!0;const e=Rn(),t=bg.S(e),n=0<t&&t<10,r=bg.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBV2Gy-2ioJyL0xPN01fM1i3NAY5PQ6Qhg",REACT_APP_AUTH_DOMAIN:"chat-580cf.firebaseapp.com",REACT_APP_PROJECT_ID:"chat-580cf",REACT_APP_STORAGE_BUCKET:"chat-580cf.appspot.com",REACT_APP_MESSAGEING_SENDER_ID:"556518847811",REACT_APP_APP_ID:"1:556518847811:web:fd69272bdce0fadfe22bf6"})||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Nm("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Ig(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Um(Fm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Um(Fm.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Ig(e,r))},r.onupgradeneeded=e=>{Nm("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Nm("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=wg.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),yg.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Nm("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class _g{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Sg(this.k.delete())}}class Ig extends Um{constructor(e,t){super(Fm.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Eg(e){return"IndexedDbTransactionError"===e.name}class Tg{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Nm("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Nm("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Sg(n)}add(e){return Nm("SimpleDb","ADD",this.store.name,e,e),Sg(this.store.add(e))}get(e){return Sg(this.store.get(e)).next((t=>(void 0===t&&(t=null),Nm("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Nm("SimpleDb","DELETE",this.store.name,e),Sg(this.store.delete(e))}count(){return Nm("SimpleDb","COUNT",this.store.name),Sg(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new yg(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new yg(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Nm("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new yg(((n,r)=>{t.onerror=e=>{const t=xg(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new yg(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new _g(i),o=t(i.primaryKey,i.value,s);if(o instanceof yg){const e=o.catch((e=>(s.done(),yg.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>yg.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Sg(e){return new yg(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=xg(e.target.error);n(t)}}))}let kg=!1;function xg(e){const t=bg.S(Rn());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Um("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return kg||(kg=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Cg{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Nm("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Nm("IndexBackiller","Documents written: ".concat(await this.X.te()))}catch(e){Eg(e)?Nm("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await vg(e)}await this.ee(6e4)}))}}class Ag{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return yg.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Nm("IndexBackiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Nm("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=hg(t);pg(r,n)>0&&(n=r)})),new fg(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ng{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Rg(e){return null==e}function Pg(e){return 0===e&&1/e==-1/0}function Dg(e){return"number"==typeof e&&Number.isInteger(e)&&!Pg(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Og(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Mg(t)),t=Lg(e.get(n),t);return Mg(t)}function Lg(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Mg(e){return e+"\x01\x01"}function Fg(e){const t=e.length;if(Lm(t>=2),2===t)return Lm("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ng.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Om(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Om()}s=t+2}return new ng(r)}Ng._e=-1;const Ug=["userId","batchId"];function Vg(e,t){return[e,Og(t)]}function zg(e,t,n){return[e,Og(t),n]}const Bg={},jg=["prefixPath","collectionGroup","readTime","documentId"],qg=["prefixPath","collectionGroup","documentId"],Gg=["collectionGroup","readTime","prefixPath","documentId"],Wg=["canonicalId","targetId"],Hg=["targetId","path"],Kg=["path","targetId"],Qg=["collectionId","parent"],Yg=["indexId","uid"],$g=["uid","sequenceNumber"],Jg=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Xg=["indexId","uid","orderedDocumentKey"],Zg=["userId","collectionPath","documentId"],ev=["userId","collectionPath","largestBatchId"],tv=["userId","collectionGroup","largestBatchId"],nv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],rv=[...nv,"documentOverlays"],iv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],sv=iv,ov=[...sv,"indexConfiguration","indexState","indexEntries"];class av extends gg{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function lv(e,t){const n=Mm(e);return bg.M(n.ae,t)}function cv(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function uv(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function dv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class hv{constructor(e,t){this.comparator=e,this.root=t||pv.EMPTY}insert(e,t){return new hv(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pv.BLACK,null,null))}remove(e){return new hv(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pv.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new fv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new fv(this.root,e,this.comparator,!1)}getReverseIterator(){return new fv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new fv(this.root,e,this.comparator,!0)}}class fv{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pv{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:pv.RED,this.left=null!=r?r:pv.EMPTY,this.right=null!=i?i:pv.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new pv(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return pv.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return pv.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pv.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pv.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Om();if(this.right.isRed())throw Om();const e=this.left.check();if(e!==this.right.check())throw Om();return e+(this.isRed()?0:1)}}pv.EMPTY=null,pv.RED=!0,pv.BLACK=!1,pv.EMPTY=new class{constructor(){this.size=0}get key(){throw Om()}get value(){throw Om()}get color(){throw Om()}get left(){throw Om()}get right(){throw Om()}copy(e,t,n,r,i){return this}insert(e,t,n){return new pv(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class mv{constructor(e){this.comparator=e,this.data=new hv(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gv(this.data.getIterator())}getIteratorFrom(e){return new gv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof mv))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new mv(this.comparator);return t.data=e,t}}class gv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vv(e){return e.hasNext()?e.getNext():void 0}class yv{constructor(e){this.fields=e,e.sort(ig.comparator)}static empty(){return new yv([])}unionWith(e){let t=new mv(ig.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new yv(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jm(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class wv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class bv{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new wv("Invalid base64 string: "+e):e}}(e);return new bv(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new bv(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $m(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}bv.EMPTY_BYTE_STRING=new bv("");const _v=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Iv(e){if(Lm(!!e),"string"==typeof e){let t=0;const n=_v.exec(e);if(Lm(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ev(e.seconds),nanos:Ev(e.nanos)}}function Ev(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Tv(e){return"string"==typeof e?bv.fromBase64String(e):bv.fromUint8Array(e)}function Sv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function kv(e){const t=e.mapValue.fields.__previous_value__;return Sv(t)?kv(t):t}function xv(e){const t=Iv(e.mapValue.fields.__local_write_time__.timestampValue);return new Zm(t.seconds,t.nanos)}class Cv{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Av{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Av("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Av&&e.projectId===this.projectId&&e.database===this.database}}const Nv={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Rv={nullValue:"NULL_VALUE"};function Pv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Sv(e)?4:Hv(e)?9007199254740991:10:Om()}function Dv(e,t){if(e===t)return!0;const n=Pv(e);if(n!==Pv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xv(e).isEqual(xv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Iv(e.timestampValue),r=Iv(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Tv(e.bytesValue).isEqual(Tv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ev(e.geoPointValue.latitude)===Ev(t.geoPointValue.latitude)&&Ev(e.geoPointValue.longitude)===Ev(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ev(e.integerValue)===Ev(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ev(e.doubleValue),r=Ev(t.doubleValue);return n===r?Pg(n)===Pg(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Jm(e.arrayValue.values||[],t.arrayValue.values||[],Dv);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(cv(n)!==cv(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Dv(n[i],r[i])))return!1;return!0}(e,t);default:return Om()}}function Ov(e,t){return void 0!==(e.values||[]).find((e=>Dv(e,t)))}function Lv(e,t){if(e===t)return 0;const n=Pv(e),r=Pv(t);if(n!==r)return $m(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return $m(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ev(e.integerValue||e.doubleValue),r=Ev(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Mv(e.timestampValue,t.timestampValue);case 4:return Mv(xv(e),xv(t));case 5:return $m(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Tv(e),r=Tv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=$m(n[i],r[i]);if(0!==e)return e}return $m(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=$m(Ev(e.latitude),Ev(t.latitude));return 0!==n?n:$m(Ev(e.longitude),Ev(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Lv(n[i],r[i]);if(e)return e}return $m(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Nv.mapValue&&t===Nv.mapValue)return 0;if(e===Nv.mapValue)return 1;if(t===Nv.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=$m(r[o],s[o]);if(0!==e)return e;const t=Lv(n[r[o]],i[s[o]]);if(0!==t)return t}return $m(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Om()}}function Mv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return $m(e,t);const n=Iv(e),r=Iv(t),i=$m(n.seconds,r.seconds);return 0!==i?i:$m(n.nanos,r.nanos)}function Fv(e){return Uv(e)}function Uv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Iv(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Tv(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return sg.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Uv(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Uv(e.fields[i]));return n+"}"}(e.mapValue):Om()}function Vv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function zv(e){return!!e&&"integerValue"in e}function Bv(e){return!!e&&"arrayValue"in e}function jv(e){return!!e&&"nullValue"in e}function qv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Gv(e){return!!e&&"mapValue"in e}function Wv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return uv(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Wv(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Wv(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Hv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Kv(e){return"nullValue"in e?Rv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Vv(Av.empty(),sg.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Om()}function Qv(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Vv(Av.empty(),sg.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Nv:Om()}function Yv(e,t){const n=Lv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function $v(e,t){const n=Lv(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class Jv{constructor(e){this.value=e}static empty(){return new Jv({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Gv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wv(t)}setAll(e){let t=ig.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Wv(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Gv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Dv(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Gv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){uv(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new Jv(Wv(this.value))}}function Xv(e){const t=[];return uv(e.fields,((e,n)=>{const r=new ig([e]);if(Gv(n)){const e=Xv(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new yv(t)}class Zv{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Zv(e,0,eg.min(),eg.min(),eg.min(),Jv.empty(),0)}static newFoundDocument(e,t,n,r){return new Zv(e,1,t,eg.min(),n,r,0)}static newNoDocument(e,t){return new Zv(e,2,t,eg.min(),eg.min(),Jv.empty(),0)}static newUnknownDocument(e,t){return new Zv(e,3,t,eg.min(),eg.min(),Jv.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(eg.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Jv.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Jv.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=eg.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Zv&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Zv(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ey{constructor(e,t){this.position=e,this.inclusive=t}}function ty(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?sg.comparator(sg.fromName(o.referenceValue),n.key):Lv(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ny(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Dv(e.position[n],t.position[n]))return!1;return!0}class ry{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function iy(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class sy{}class oy extends sy{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new gy(e,t,n):"array-contains"===t?new by(e,n):"in"===t?new _y(e,n):"not-in"===t?new Iy(e,n):"array-contains-any"===t?new Ey(e,n):new oy(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new vy(e,n):new yy(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Lv(t,this.value)):null!==t&&Pv(this.value)===Pv(t)&&this.matchesComparison(Lv(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Om()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ay extends sy{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new ay(e,t)}matches(e){return ly(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function ly(e){return"and"===e.op}function cy(e){return"or"===e.op}function uy(e){return dy(e)&&ly(e)}function dy(e){for(const t of e.filters)if(t instanceof ay)return!1;return!0}function hy(e){if(e instanceof oy)return e.field.canonicalString()+e.op.toString()+Fv(e.value);if(uy(e))return e.filters.map((e=>hy(e))).join(",");{const t=e.filters.map((e=>hy(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function fy(e,t){return e instanceof oy?function(e,t){return t instanceof oy&&e.op===t.op&&e.field.isEqual(t.field)&&Dv(e.value,t.value)}(e,t):e instanceof ay?function(e,t){return t instanceof ay&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&fy(n,t.filters[r])),!0)}(e,t):void Om()}function py(e,t){const n=e.filters.concat(t);return ay.create(n,e.op)}function my(e){return e instanceof oy?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Fv(e.value))}(e):e instanceof ay?function(e){return e.op.toString()+" {"+e.getFilters().map(my).join(" ,")+"}"}(e):"Filter"}class gy extends oy{constructor(e,t,n){super(e,t,n),this.key=sg.fromName(n.referenceValue)}matches(e){const t=sg.comparator(e.key,this.key);return this.matchesComparison(t)}}class vy extends oy{constructor(e,t){super(e,"in",t),this.keys=wy("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class yy extends oy{constructor(e,t){super(e,"not-in",t),this.keys=wy("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function wy(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>sg.fromName(e.referenceValue)))}class by extends oy{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bv(t)&&Ov(t.arrayValue,this.value)}}class _y extends oy{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ov(this.value.arrayValue,t)}}class Iy extends oy{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ov(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ov(this.value.arrayValue,t)}}class Ey extends oy{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Ov(this.value.arrayValue,e)))}}class Ty{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Sy(e){return new Ty(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ky(e){const t=Mm(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>hy(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Rg(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Fv(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Fv(e))).join(",")),t.ce=e}return t.ce}function xy(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!iy(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!fy(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ny(e.startAt,t.startAt)&&ny(e.endAt,t.endAt)}function Cy(e){return sg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ay(e,t){return e.filters.filter((e=>e instanceof oy&&e.field.isEqual(t)))}function Ny(e,t,n){let r=Rv,i=!0;for(const s of Ay(e,t)){let e=Rv,t=!0;switch(s.op){case"<":case"<=":e=Kv(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Rv}Yv({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Yv({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Ry(e,t,n){let r=Nv,i=!0;for(const s of Ay(e,t)){let e=Nv,t=!0;switch(s.op){case">=":case">":e=Qv(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Nv}$v({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];$v({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Py{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Dy(e,t,n,r,i,s,o,a){return new Py(e,t,n,r,i,s,o,a)}function Oy(e){return new Py(e)}function Ly(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function My(e){return null!==e.collectionGroup}function Fy(e){const t=Mm(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new mv(ig.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new ry(r,n))})),e.has(ig.keyField().canonicalString())||t.le.push(new ry(ig.keyField(),n))}return t.le}function Uy(e){const t=Mm(e);return t.he||(t.he=Vy(t,Fy(e))),t.he}function Vy(e,t){if("F"===e.limitType)return Sy(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ry(e.field,t)}));const n=e.endAt?new ey(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ey(e.startAt.position,e.startAt.inclusive):null;return Sy(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function zy(e,t){const n=e.filters.concat([t]);return new Py(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function By(e,t,n){return new Py(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function jy(e,t){return xy(Uy(e),Uy(t))&&e.limitType===t.limitType}function qy(e){return"".concat(ky(Uy(e)),"|lt:").concat(e.limitType)}function Gy(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>my(e))).join(", "),"]")),Rg(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Fv(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Fv(e))).join(",")),"Target(".concat(t,")")}(Uy(e)),"; limitType=").concat(e.limitType,")")}function Wy(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):sg.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Fy(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ty(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Fy(e),t))&&!(e.endAt&&!function(e,t,n){const r=ty(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Fy(e),t))}(e,t)}function Hy(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ky(e){return(t,n)=>{let r=!1;for(const i of Fy(e)){const e=Qy(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Qy(e,t,n){const r=e.field.isKeyField()?sg.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Lv(r,i):Om()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Om()}}class Yy{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){uv(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return dv(this.inner)}size(){return this.innerSize}}const $y=new hv(sg.comparator);function Jy(){return $y}const Xy=new hv(sg.comparator);function Zy(){let e=Xy;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function ew(e){let t=Xy;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function tw(){return rw()}function nw(){return rw()}function rw(){return new Yy((e=>e.toString()),((e,t)=>e.isEqual(t)))}const iw=new hv(sg.comparator),sw=new mv(sg.comparator);function ow(){let e=sw;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const aw=new mv($m);function lw(){return aw}function cw(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Pg(t)?"-0":t}}function uw(e){return{integerValue:""+e}}function dw(e,t){return Dg(t)?uw(t):cw(e,t)}class hw{constructor(){this._=void 0}}function fw(e,t,n){return e instanceof gw?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Sv(t)&&(t=kv(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof vw?yw(e,t):e instanceof ww?bw(e,t):function(e,t){const n=mw(e,t),r=Iw(n)+Iw(e.Ie);return zv(n)&&zv(e.Ie)?uw(r):cw(e.serializer,r)}(e,t)}function pw(e,t,n){return e instanceof vw?yw(e,t):e instanceof ww?bw(e,t):n}function mw(e,t){return e instanceof _w?function(e){return zv(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class gw extends hw{}class vw extends hw{constructor(e){super(),this.elements=e}}function yw(e,t){const n=Ew(t);for(const r of e.elements)n.some((e=>Dv(e,r)))||n.push(r);return{arrayValue:{values:n}}}class ww extends hw{constructor(e){super(),this.elements=e}}function bw(e,t){let n=Ew(t);for(const r of e.elements)n=n.filter((e=>!Dv(e,r)));return{arrayValue:{values:n}}}class _w extends hw{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Iw(e){return Ev(e.integerValue||e.doubleValue)}function Ew(e){return Bv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Tw{constructor(e,t){this.field=e,this.transform=t}}class Sw{constructor(e,t){this.version=e,this.transformResults=t}}class kw{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kw}static exists(e){return new kw(void 0,e)}static updateTime(e){return new kw(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xw(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Cw{}function Aw(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Vw(e.key,kw.none()):new Ow(e.key,e.data,kw.none());{const n=e.data,r=Jv.empty();let i=new mv(ig.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Lw(e.key,r,new yv(i.toArray()),kw.none())}}function Nw(e,t,n){e instanceof Ow?function(e,t,n){const r=e.value.clone(),i=Fw(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Lw?function(e,t,n){if(!xw(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Fw(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Mw(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Rw(e,t,n,r){return e instanceof Ow?function(e,t,n,r){if(!xw(e.precondition,t))return n;const i=e.value.clone(),s=Uw(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Lw?function(e,t,n,r){if(!xw(e.precondition,t))return n;const i=Uw(e.fieldTransforms,r,t),s=t.data;return s.setAll(Mw(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return xw(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Pw(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=mw(r.transform,e||null);null!=i&&(null===n&&(n=Jv.empty()),n.set(r.field,i))}return n||null}function Dw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Jm(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof vw&&t instanceof vw||e instanceof ww&&t instanceof ww?Jm(e.elements,t.elements,Dv):e instanceof _w&&t instanceof _w?Dv(e.Ie,t.Ie):e instanceof gw&&t instanceof gw}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ow extends Cw{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Lw extends Cw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Mw(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Fw(e,t,n){const r=new Map;Lm(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,pw(o,a,n[i]))}return r}function Uw(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,fw(e,s,t))}return r}class Vw extends Cw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zw extends Cw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Bw{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Nw(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Rw(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Rw(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=nw();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Aw(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(eg.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ow())}isEqual(e){return this.batchId===e.batchId&&Jm(this.mutations,e.mutations,((e,t)=>Dw(e,t)))&&Jm(this.baseMutations,e.baseMutations,((e,t)=>Dw(e,t)))}}class jw{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Lm(e.mutations.length===n.length);let r=iw;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new jw(e,t,n,r)}}class qw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Gw{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ww,Hw;function Kw(e){switch(e){default:return Om();case Fm.CANCELLED:case Fm.UNKNOWN:case Fm.DEADLINE_EXCEEDED:case Fm.RESOURCE_EXHAUSTED:case Fm.INTERNAL:case Fm.UNAVAILABLE:case Fm.UNAUTHENTICATED:return!1;case Fm.INVALID_ARGUMENT:case Fm.NOT_FOUND:case Fm.ALREADY_EXISTS:case Fm.PERMISSION_DENIED:case Fm.FAILED_PRECONDITION:case Fm.ABORTED:case Fm.OUT_OF_RANGE:case Fm.UNIMPLEMENTED:case Fm.DATA_LOSS:return!0}}function Qw(e){if(void 0===e)return Rm("GRPC error has no .code"),Fm.UNKNOWN;switch(e){case Ww.OK:return Fm.OK;case Ww.CANCELLED:return Fm.CANCELLED;case Ww.UNKNOWN:return Fm.UNKNOWN;case Ww.DEADLINE_EXCEEDED:return Fm.DEADLINE_EXCEEDED;case Ww.RESOURCE_EXHAUSTED:return Fm.RESOURCE_EXHAUSTED;case Ww.INTERNAL:return Fm.INTERNAL;case Ww.UNAVAILABLE:return Fm.UNAVAILABLE;case Ww.UNAUTHENTICATED:return Fm.UNAUTHENTICATED;case Ww.INVALID_ARGUMENT:return Fm.INVALID_ARGUMENT;case Ww.NOT_FOUND:return Fm.NOT_FOUND;case Ww.ALREADY_EXISTS:return Fm.ALREADY_EXISTS;case Ww.PERMISSION_DENIED:return Fm.PERMISSION_DENIED;case Ww.FAILED_PRECONDITION:return Fm.FAILED_PRECONDITION;case Ww.ABORTED:return Fm.ABORTED;case Ww.OUT_OF_RANGE:return Fm.OUT_OF_RANGE;case Ww.UNIMPLEMENTED:return Fm.UNIMPLEMENTED;case Ww.DATA_LOSS:return Fm.DATA_LOSS;default:return Om()}}(Hw=Ww||(Ww={}))[Hw.OK=0]="OK",Hw[Hw.CANCELLED=1]="CANCELLED",Hw[Hw.UNKNOWN=2]="UNKNOWN",Hw[Hw.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hw[Hw.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hw[Hw.NOT_FOUND=5]="NOT_FOUND",Hw[Hw.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hw[Hw.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hw[Hw.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hw[Hw.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hw[Hw.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hw[Hw.ABORTED=10]="ABORTED",Hw[Hw.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hw[Hw.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hw[Hw.INTERNAL=13]="INTERNAL",Hw[Hw.UNAVAILABLE=14]="UNAVAILABLE",Hw[Hw.DATA_LOSS=15]="DATA_LOSS";let Yw=null;function $w(){return new TextEncoder}const Jw=new Tm([4294967295,4294967295],0);function Xw(e){const t=$w().encode(e),n=new Em;return n.update(t),new Uint8Array(n.digest())}function Zw(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Tm([n,r],0),new Tm([i,s],0)]}class eb{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new tb("Invalid padding: ".concat(t));if(n<0)throw new tb("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new tb("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new tb("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Tm.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Tm.fromNumber(n)));return 1===r.compare(Jw)&&(r=new Tm([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Xw(e),[n,r]=Zw(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new eb(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Xw(e),[n,r]=Zw(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class tb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class nb{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,rb.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new nb(eg.min(),r,new hv($m),Jy(),ow())}}class rb{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new rb(n,t,ow(),ow(),ow())}}class ib{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class sb{constructor(e,t){this.targetId=e,this.fe=t}}class ob{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bv.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ab{constructor(){this.ge=0,this.pe=ub(),this.ye=bv.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=ow(),t=ow(),n=ow();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Om()}})),new rb(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=ub()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Lm(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class lb{constructor(e){this.Le=e,this.ke=new Map,this.qe=Jy(),this.Qe=cb(),this.Ke=new hv($m)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Om()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(Cy(i))if(0===n){const e=new sg(i.path);this.We(t,e,Zv.newNoDocument(e,eg.min()))}else Lm(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Yw||Yw.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const d={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(d.bloomFilter={applied:0===i,hashCount:null!==(s=null==h?void 0:h.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),d}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Tv(n).toUint8Array()}catch(e){if(e instanceof wv)return Pm("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new eb(s,r,i)}catch(e){return Pm(e instanceof tb?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Cy(i.target)){const t=new sg(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Zv.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=ow();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new nb(e,t,this.Ke,this.qe,n);return this.qe=Jy(),this.Qe=cb(),this.Ke=new hv($m),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new ab,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new mv($m),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Nm("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new ab),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function cb(){return new hv(sg.comparator)}function ub(){return new hv(sg.comparator)}const db={asc:"ASCENDING",desc:"DESCENDING"},hb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fb={and:"AND",or:"OR"};class pb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mb(e,t){return e.useProto3Json||Rg(t)?t:{value:t}}function gb(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function vb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function yb(e,t){return gb(e,t.toTimestamp())}function wb(e){return Lm(!!e),eg.fromTimestamp(function(e){const t=Iv(e);return new Zm(t.seconds,t.nanos)}(e))}function bb(e,t){return function(e){return new ng(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function _b(e){const t=ng.fromString(e);return Lm(qb(t)),t}function Ib(e,t){return bb(e.databaseId,t.path)}function Eb(e,t){const n=_b(t);if(n.get(1)!==e.databaseId.projectId)throw new Um(Fm.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Um(Fm.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new sg(xb(n))}function Tb(e,t){return bb(e.databaseId,t)}function Sb(e){const t=_b(e);return 4===t.length?ng.emptyPath():xb(t)}function kb(e){return new ng(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function xb(e){return Lm(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Cb(e,t,n){return{name:Ib(e,t),fields:n.value.mapValue.fields}}function Ab(e,t,n){const r=Eb(e,t.name),i=wb(t.updateTime),s=t.createTime?wb(t.createTime):eg.min(),o=new Jv({mapValue:{fields:t.fields}}),a=Zv.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Nb(e,t){let n;if(t instanceof Ow)n={update:Cb(e,t.key,t.value)};else if(t instanceof Vw)n={delete:Ib(e,t.key)};else if(t instanceof Lw)n={update:Cb(e,t.key,t.data),updateMask:jb(t.fieldMask)};else{if(!(t instanceof zw))return Om();n={verify:Ib(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof gw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof vw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ww)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof _w)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Om()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:yb(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Om()}(e,t.precondition)),n}function Rb(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?kw.updateTime(wb(e.updateTime)):void 0!==e.exists?kw.exists(e.exists):kw.none()}(t.currentDocument):kw.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Lm("REQUEST_TIME"===t.setToServerValue),n=new gw;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new vw(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new ww(e)}else"increment"in t?n=new _w(e,t.increment):Om();const r=ig.fromServerFormat(t.fieldPath);return new Tw(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Eb(e,t.update.name),s=new Jv({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new yv(t.map((e=>ig.fromServerFormat(e))))}(t.updateMask);return new Lw(i,s,e,n,r)}return new Ow(i,s,n,r)}if(t.delete){const r=Eb(e,t.delete);return new Vw(r,n)}if(t.verify){const r=Eb(e,t.verify);return new zw(r,n)}return Om()}function Pb(e,t){return{documents:[Tb(e,t.path)]}}function Db(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Tb(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Tb(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return Bb(ay.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Vb(e.field),direction:Mb(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=mb(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Ob(e){let t=Sb(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Lm(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Lb(e);return t instanceof ay&&uy(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new ry(zb(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Rg(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ey(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ey(n,t)}(n.endAt)),Dy(t,i,o,s,a,"F",l,c)}function Lb(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=zb(e.unaryFilter.field);return oy.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=zb(e.unaryFilter.field);return oy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=zb(e.unaryFilter.field);return oy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=zb(e.unaryFilter.field);return oy.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Om()}}(e):void 0!==e.fieldFilter?function(e){return oy.create(zb(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Om()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ay.create(e.compositeFilter.filters.map((e=>Lb(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Om()}}(e.compositeFilter.op))}(e):Om()}function Mb(e){return db[e]}function Fb(e){return hb[e]}function Ub(e){return fb[e]}function Vb(e){return{fieldPath:e.canonicalString()}}function zb(e){return ig.fromServerFormat(e.fieldPath)}function Bb(e){return e instanceof oy?function(e){if("=="===e.op){if(qv(e.value))return{unaryFilter:{field:Vb(e.field),op:"IS_NAN"}};if(jv(e.value))return{unaryFilter:{field:Vb(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(qv(e.value))return{unaryFilter:{field:Vb(e.field),op:"IS_NOT_NAN"}};if(jv(e.value))return{unaryFilter:{field:Vb(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vb(e.field),op:Fb(e.op),value:e.value}}}(e):e instanceof ay?function(e){const t=e.getFilters().map((e=>Bb(e)));return 1===t.length?t[0]:{compositeFilter:{op:Ub(e.op),filters:t}}}(e):Om()}function jb(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function qb(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Gb{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:eg.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:eg.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:bv.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new Gb(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Gb(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gb(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gb(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Wb{constructor(e){this.ut=e}}function Hb(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Kb(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Ib(e,t.key),fields:t.data.value.mapValue.fields,updateTime:gb(e,t.version.toTimestamp()),createTime:gb(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Qb(t.version)};else{if(!t.isUnknownDocument())return Om();r.unknownDocument={path:n.path.toArray(),version:Qb(t.version)}}return r}function Kb(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Qb(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Yb(e){const t=new Zm(e.seconds,e.nanoseconds);return eg.fromTimestamp(t)}function $b(e,t){const n=(t.baseMutations||[]).map((t=>Rb(e.ut,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Rb(e.ut,t))),i=Zm.fromMillis(t.localWriteTimeMs);return new Bw(t.batchId,i,n,r)}function Jb(e){const t=Yb(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Yb(e.lastLimboFreeSnapshotVersion):eg.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Lm(1===e.documents.length),Uy(Oy(Sb(e.documents[0])))}(e.query):function(e){return Uy(Ob(e))}(e.query),new Gb(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,bv.fromBase64String(e.resumeToken))}function Xb(e,t){const n=Qb(t.snapshotVersion),r=Qb(t.lastLimboFreeSnapshotVersion);let i;i=Cy(t.target)?Pb(e.ut,t.target):Db(e.ut,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:ky(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Zb(e){const t=Ob({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?By(t,t.limit,"L"):t}function e_(e,t){return new qw(t.largestBatchId,Rb(e.ut,t.overlayMutation))}function t_(e,t){const n=t.path.lastSegment();return[e,Og(t.path.popLast()),n]}function n_(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Qb(r.readTime),documentKey:Og(r.documentKey.path),largestBatchId:r.largestBatchId}}class r_{getBundleMetadata(e,t){return i_(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Yb(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return i_(e).put(function(e){return{bundleId:e.id,createTime:Qb(wb(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return s_(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Zb(e.bundledQuery),readTime:Yb(e.readTime)}}(e)}))}saveNamedQuery(e,t){return s_(e).put(function(e){return{name:e.name,readTime:Qb(wb(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function i_(e){return lv(e,"bundles")}function s_(e){return lv(e,"namedQueries")}class o_{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new o_(e,n)}getOverlay(e,t){return a_(e).get(t_(this.userId,t)).next((e=>e?e_(this.serializer,e):null))}getOverlays(e,t){const n=tw();return yg.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new qw(t,i);r.push(this.lt(e,s))})),yg.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Og(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(a_(e).H("collectionPathOverlayIndex",r))})),yg.waitFor(i)}getOverlaysForCollection(e,t,n){const r=tw(),i=Og(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return a_(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=e_(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=tw();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return a_(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=e_(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return a_(e).put(function(e,t,n){const[r,i,s]=t_(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Nb(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function a_(e){return lv(e,"documentOverlays")}class l_{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Ev(e.integerValue));else if("doubleValue"in e){const n=Ev(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Pg(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Tv(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?Hv(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Om()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),sg.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function c_(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function u_(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=c_(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}l_.St=new l_;class d_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Bt(e),n=u_(t);this.Lt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),n=u_(t);this.Lt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class h_{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class f_{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class p_{constructor(){this.Wt=new d_,this.Gt=new h_(this.Wt),this.zt=new f_(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class m_{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new m_(this.indexId,this.documentKey,this.arrayValue,n)}}function g_(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=v_(e.arrayValue,t.arrayValue),0!==n?n:(n=v_(e.directionalValue,t.directionalValue),0!==n?n:sg.comparator(e.documentKey,t.documentKey)))}function v_(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class y_{constructor(e){this.Jt=new mv(((e,t)=>ig.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(Lm(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=ag(e);if(void 0!==t&&!this.tn(t))return!1;const n=lg(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Yt.length||!this.rn(this.Yt[s++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new mv(ig.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new cg(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new cg(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new cg(n.field,"asc"===n.dir?0:1)));return new og(og.UNKNOWN_ID,this.collectionId,t,ug.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function w_(e){var t,n;if(Lm(e instanceof oy||e instanceof ay),e instanceof oy){if(e instanceof _y){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>oy.create(e.field,"==",t))))||[];return ay.create(r,"or")}return e}const r=e.filters.map((e=>w_(e)));return ay.create(r,e.op)}function b_(e){if(0===e.getFilters().length)return[];const t=T_(w_(e));return Lm(E_(t)),__(t)||I_(t)?[t]:t.getFilters()}function __(e){return e instanceof oy}function I_(e){return e instanceof ay&&uy(e)}function E_(e){return __(e)||I_(e)||function(e){if(e instanceof ay&&cy(e)){for(const t of e.getFilters())if(!__(t)&&!I_(t))return!1;return!0}return!1}(e)}function T_(e){if(Lm(e instanceof oy||e instanceof ay),e instanceof oy)return e;if(1===e.filters.length)return T_(e.filters[0]);const t=e.filters.map((e=>T_(e)));let n=ay.create(t,e.op);return n=x_(n),E_(n)?n:(Lm(n instanceof ay),Lm(ly(n)),Lm(n.filters.length>1),n.filters.reduce(((e,t)=>S_(e,t))))}function S_(e,t){let n;return Lm(e instanceof oy||e instanceof ay),Lm(t instanceof oy||t instanceof ay),n=e instanceof oy?t instanceof oy?function(e,t){return ay.create([e,t],"and")}(e,t):k_(e,t):t instanceof oy?k_(t,e):function(e,t){if(Lm(e.filters.length>0&&t.filters.length>0),ly(e)&&ly(t))return py(e,t.getFilters());const n=cy(e)?e:t,r=cy(e)?t:e,i=n.filters.map((e=>S_(e,r)));return ay.create(i,"or")}(e,t),x_(n)}function k_(e,t){if(ly(t))return py(t,e.getFilters());{const n=t.filters.map((t=>S_(e,t)));return ay.create(n,"or")}}function x_(e){if(Lm(e instanceof oy||e instanceof ay),e instanceof oy)return e;const t=e.getFilters();if(1===t.length)return x_(t[0]);if(dy(e))return e;const n=t.map((e=>x_(e))),r=[];return n.forEach((t=>{t instanceof oy?r.push(t):t instanceof ay&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:ay.create(r,e.op)}class C_{constructor(){this.on=new A_}addToCollectionParentIndex(e,t){return this.on.add(t),yg.resolve()}getCollectionParents(e,t){return yg.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return yg.resolve()}deleteFieldIndex(e,t){return yg.resolve()}deleteAllFieldIndexes(e){return yg.resolve()}createTargetIndexes(e,t){return yg.resolve()}getDocumentsMatchingTarget(e,t){return yg.resolve(null)}getIndexType(e,t){return yg.resolve(0)}getFieldIndexes(e,t){return yg.resolve([])}getNextCollectionGroupToUpdate(e){return yg.resolve(null)}getMinOffset(e,t){return yg.resolve(fg.min())}getMinOffsetFromCollectionGroup(e,t){return yg.resolve(fg.min())}updateCollectionGroup(e,t,n){return yg.resolve()}updateIndexEntries(e,t){return yg.resolve()}}class A_{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new mv(ng.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new mv(ng.comparator)).toArray()}}const N_=new Uint8Array(0);class R_{constructor(e,t){this.user=e,this.databaseId=t,this._n=new A_,this.an=new Yy((e=>ky(e)),((e,t)=>xy(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:Og(r)};return P_(e).put(i)}return yg.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Xm(t),""],!1,!0);return P_(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Fg(r.parent))}return n}))}addFieldIndex(e,t){const n=O_(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=L_(e);return i.next((e=>{n.put(n_(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=O_(e),r=L_(e),i=D_(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=O_(e),n=D_(e),r=L_(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return yg.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new y_(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=D_(e);let r=!0;const i=new Map;return yg.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=ow();const r=[];return yg.forEach(i,((i,s)=>{Nm("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(ky(t)));const o=function(e,t){const n=ag(t);if(void 0===n)return null;for(const r of Ay(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of lg(t))for(const t of Ay(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of lg(t)){const t=0===i.kind?Ny(e,i.fieldPath,e.startAt):Ry(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new ey(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of lg(t)){const t=0===i.kind?Ry(e,i.fieldPath,e.endAt):Ny(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new ey(n,r)}(s,i),u=this.ln(i,s,l),d=this.ln(i,s,c),h=this.hn(i,s,a),f=this.Pn(i.indexId,o,u,l.inclusive,d,c.inclusive,h);return yg.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=sg.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return yg.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:b_(ay.create(e.filters,"and")).map((t=>Sy(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.In(t[u/l]):N_,d=this.Tn(e,a,n[u%l],r),h=this.En(e,a,i[u%l],s),f=o.map((t=>this.Tn(e,a,t,!0)));c.push(...this.createRange(d,h,f))}return c}Tn(e,t,n,r){const i=new m_(e,sg.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new m_(e,sg.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new y_(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return yg.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new mv(ig.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new p_;for(const r of lg(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);l_.St.ht(e,i)}return n.Ut()}In(e){const t=new p_;return l_.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new p_;return l_.St.ht(Vv(this.databaseId,t),n.jt(function(e){const t=lg(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new p_);let i=0;for(const s of lg(e)){const e=n[i++];for(const n of r)if(this.Rn(t,s.fieldPath)&&Bv(e))r=this.Vn(r,s,e);else{const t=n.jt(s.kind);l_.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new p_;n.seed(e.Ut()),l_.St.ht(s,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof oy&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=O_(e),r=L_(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return yg.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new ug(t.sequenceNumber,new fg(Yb(t.readTime),new sg(Fg(t.documentKey)),t.largestBatchId)):ug.empty(),r=e.fields.map((e=>{let[t,n]=e;return new cg(ig.fromServerFormat(t),n)}));return new og(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:$m(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=O_(e),i=L_(e);return this.fn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>yg.forEach(t,(t=>i.put(n_(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return yg.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?yg.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),yg.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?yg.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return D_(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return D_(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=D_(e);let i=new mv(g_);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new m_(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new mv(g_);const r=this.dn(t,e);if(null==r)return n;const i=ag(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Bv(s))for(const i of s.arrayValue.values||[])n=n.add(new m_(t.indexId,e.key,this.In(i),r))}else n=n.add(new m_(t.indexId,e.key,N_,r));return n}yn(e,t,n,r,i){Nm("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=vv(s),l=vv(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=vv(o)):t?(i(a),a=vv(s)):(a=vv(s),l=vv(o))}}(r,i,g_,(r=>{s.push(this.wn(e,t,n,r))}),(r=>{s.push(this.Sn(e,t,n,r))})),yg.waitFor(s)}fn(e){let t=1;return L_(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>g_(e,t))).filter(((e,t,n)=>!t||0!==g_(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=g_(s,e),i=g_(s,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(s),r.push(s.Ht());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,N_,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,N_,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return g_(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(M_)}getMinOffset(e,t){return yg.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||Om())))).next(M_)}}function P_(e){return lv(e,"collectionParents")}function D_(e){return lv(e,"indexEntries")}function O_(e){return lv(e,"indexConfiguration")}function L_(e){return lv(e,"indexState")}function M_(e){Lm(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;pg(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new fg(t.readTime,t.documentKey,n)}const F_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class U_{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new U_(e,U_.DEFAULT_COLLECTION_PERCENTILE,U_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function V_(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Lm(1===a)})));const c=[];for(const u of n.mutations){const e=zg(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return yg.waitFor(s).next((()=>c))}function z_(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Om();t=e.noDocument}return JSON.stringify(t).length}U_.DEFAULT_COLLECTION_PERCENTILE=10,U_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,U_.DEFAULT=new U_(41943040,U_.DEFAULT_COLLECTION_PERCENTILE,U_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),U_.DISABLED=new U_(-1,0,0);class B_{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){Lm(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new B_(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return q_(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=G_(e),s=q_(e);return s.add({}).next((o=>{Lm("number"==typeof o);const a=new Bw(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Nb(e.ut,t))),i=n.mutations.map((t=>Nb(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new mv(((e,t)=>$m(e.canonicalString(),t.canonicalString())));for(const e of r){const t=zg(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,Bg))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[o]=a.keys()})),yg.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return q_(e).get(t).next((e=>e?(Lm(e.userId===this.userId),$b(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?yg.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return q_(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Lm(t.batchId>=n),i=$b(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return q_(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return q_(e).W("userMutationsIndex",t).next((e=>e.map((e=>$b(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Vg(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return G_(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,c=Fg(a);if(o===this.userId&&t.path.isEqual(c))return q_(e).get(l).next((e=>{if(!e)throw Om();Lm(e.userId===this.userId),i.push($b(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mv($m);const r=[];return t.forEach((t=>{const i=Vg(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=G_(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=Fg(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),yg.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Vg(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new mv($m);return G_(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,c=Fg(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(q_(e).get(t).next((e=>{if(null===e)throw Om();Lm(e.userId===this.userId),n.push($b(this.serializer,e))})))})),yg.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return V_(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),yg.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return yg.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return G_(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Fg(e[1]);r.push(t)}else n.done()})).next((()=>{Lm(0===r.length)}))}))}containsKey(e,t){return j_(e,this.userId,t)}Mn(e){return W_(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function j_(e,t,n){const r=Vg(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return G_(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function q_(e){return lv(e,"mutations")}function G_(e){return lv(e,"documentMutations")}function W_(e){return lv(e,"mutationQueues")}class H_{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new H_(0)}static Nn(){return new H_(-1)}}class K_{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new H_(t.highestTargetId);return t.highestTargetId=n.next(),this.Ln(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>eg.fromTimestamp(new Zm(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Ln(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Q_(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Lm(t.targetCount>0),t.targetCount-=1,this.Ln(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return Q_(e).Y(((s,o)=>{const a=Jb(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>yg.waitFor(i))).next((()=>r))}forEachTarget(e,t){return Q_(e).Y(((e,n)=>{const r=Jb(n);t(r)}))}Bn(e){return Y_(e).get("targetGlobalKey").next((e=>(Lm(null!==e),e)))}Ln(e,t){return Y_(e).put("targetGlobalKey",t)}kn(e,t){return Q_(e).put(Xb(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=ky(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Q_(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=Jb(n);xy(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=$_(e);return t.forEach((t=>{const s=Og(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),yg.waitFor(r)}removeMatchingKeys(e,t,n){const r=$_(e);return yg.forEach(t,(t=>{const i=Og(t.path);return yg.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=$_(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=$_(e);let i=ow();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Fg(e[1]),s=new sg(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Og(t.path),r=IDBKeyRange.bound([n],[Xm(n)],!1,!0);let i=0;return $_(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return Q_(e).get(t).next((e=>e?Jb(e):null))}}function Q_(e){return lv(e,"targets")}function Y_(e){return lv(e,"targetGlobal")}function $_(e){return lv(e,"targetDocuments")}function J_(e,t){let[n,r]=e,[i,s]=t;const o=$m(n,i);return 0===o?$m(r,s):o}class X_{constructor(e){this.Qn=e,this.buffer=new mv(J_),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();J_(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Z_{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){Nm("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Eg(e)?Nm("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await vg(e)}await this.Gn(3e5)}))}}class eI{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return yg.resolve(Ng._e);const n=new X_(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Nm("LruGarbageCollector","Garbage collection skipped; disabled"),yg.resolve(F_)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Nm("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),F_):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Nm("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Am()<=nr.DEBUG&&Nm("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),yg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function tI(e,t){return new eI(e,t)}class nI{constructor(e,t){this.db=e,this.garbageCollector=tI(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return rI(e,n)}removeReference(e,t,n){return rI(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return rI(e,t)}Xn(e,t){return function(e,t){let n=!1;return W_(e).Z((r=>j_(e,r,t).next((e=>(e&&(n=!0),yg.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,eg.min()),$_(e).delete(function(e){return[0,Og(e.path)]}(s)))))}));r.push(t)}})).next((()=>yg.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return rI(e,t)}Zn(e,t){const n=$_(e);let r,i=Ng._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Ng._e&&t(new sg(Fg(r)),i),i=l,r=a):i=Ng._e})).next((()=>{i!==Ng._e&&t(new sg(Fg(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function rI(e,t){return $_(e).put(function(e,t){return{targetId:0,path:Og(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class iI{constructor(){this.changes=new Yy((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Zv.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?yg.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class sI{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return cI(e).put(n)}removeEntry(e,t,n){return cI(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Kb(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=Zv.newInvalidDocument(t);return cI(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(uI(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:Zv.newInvalidDocument(t)};return cI(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(uI(t))},((e,r)=>{n={document:this.tr(t,r),size:z_(r)}})).next((()=>n))}getEntries(e,t){let n=Jy();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=Jy(),r=new hv(sg.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,z_(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return yg.resolve();let r=new mv(hI);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(uI(r.first()),uI(r.last())),s=r.getIterator();let o=s.getNext();return cI(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=sg.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&hI(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(uI(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Kb(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return cI(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=Jy();for(const i of e){const e=this.tr(sg.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Wy(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=Jy();const s=dI(t,n),o=dI(t,fg.max());return cI(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.tr(sg.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new aI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return lI(e).get("remoteDocumentGlobalKey").next((e=>(Lm(!!e),e)))}er(e,t){return lI(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Ab(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=sg.fromSegments(t.noDocument.path),r=Yb(t.noDocument.readTime);n=Zv.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Om();{const e=sg.fromSegments(t.unknownDocument.path),r=Yb(t.unknownDocument.version);n=Zv.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Zm(e[0],e[1]);return eg.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(eg.min()))return e}return Zv.newInvalidDocument(e)}}function oI(e){return new sI(e)}class aI extends iI{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new Yy((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new mv(((e,t)=>$m(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Hb(this._r.serializer,s);r=r.add(i.path.popLast());const l=z_(a);n+=l-o.size,t.push(this._r.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Hb(this._r.serializer,s.convertToNoDocument(eg.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),yg.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function lI(e){return lv(e,"remoteDocumentGlobal")}function cI(e){return lv(e,"remoteDocumentsV14")}function uI(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function dI(e,t){const n=t.documentKey.path.toArray();return[e,Kb(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function hI(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=$m(n[s],r[s]),i)return i;return i=$m(n.length,r.length),i||(i=$m(n[n.length-2],r[r.length-2]),i||$m(n[n.length-1],r[r.length-1]))}class fI{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class pI{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Rw(n.mutation,e,yv.empty(),Zm.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,ow()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ow();const r=tw();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Zy();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=tw();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,ow())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=Jy();const s=rw(),o=rw();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Lw)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Rw(o.mutation,t,o.mutation.getFieldMask(),Zm.now())):s.set(t.key,yv.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new fI(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=rw();let r=new hv(((e,t)=>e-t)),i=ow();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||yv.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||ow()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=nw();l.forEach((e=>{if(!i.has(e)){const r=Aw(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return yg.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return sg.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):My(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):yg.resolve(tw());let o=-1,a=i;return s.next((t=>yg.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?yg.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,ow()))).next((e=>({batchId:o,changes:ew(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new sg(t)).next((e=>{let t=Zy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Zy();return this.indexManager.getCollectionParents(e,i).next((o=>yg.forEach(o,(o=>{const a=function(e,t){return new Py(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Zv.newInvalidDocument(r)))}));let n=Zy();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Rw(s.mutation,r,yv.empty(),Zm.now()),Wy(t,r)&&(n=n.insert(e,r))})),n}))}}class mI{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return yg.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:wb(e.createTime)}}(t)),yg.resolve()}getNamedQuery(e,t){return yg.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:Zb(e.bundledQuery),readTime:wb(e.readTime)}}(t)),yg.resolve()}}class gI{constructor(){this.overlays=new hv(sg.comparator),this.lr=new Map}getOverlay(e,t){return yg.resolve(this.overlays.get(t))}getOverlays(e,t){const n=tw();return yg.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),yg.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),yg.resolve()}getOverlaysForCollection(e,t,n){const r=tw(),i=t.length+1,s=new sg(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return yg.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new hv(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=tw(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=tw(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return yg.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new qw(t,n));let i=this.lr.get(t);void 0===i&&(i=ow(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class vI{constructor(){this.hr=new mv(yI.Pr),this.Ir=new mv(yI.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new yI(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new yI(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new sg(new ng([])),n=new yI(t,e),r=new yI(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new sg(new ng([])),n=new yI(t,e),r=new yI(t,e+1);let i=ow();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new yI(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class yI{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return sg.comparator(e.key,t.key)||$m(e.gr,t.gr)}static Tr(e,t){return $m(e.gr,t.gr)||sg.comparator(e.key,t.key)}}class wI{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new mv(yI.Pr)}checkEmpty(e){return yg.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Bw(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new yI(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return yg.resolve(s)}lookupMutationBatch(e,t){return yg.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return yg.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return yg.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return yg.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new yI(t,0),r=new yI(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),yg.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new mv($m);return t.forEach((e=>{const t=new yI(e,0),r=new yI(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),yg.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;sg.isDocumentKey(i)||(i=i.child(""));const s=new yI(new sg(i),0);let o=new mv($m);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),yg.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Lm(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return yg.forEach(t.mutations,(r=>{const i=new yI(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new yI(t,0),r=this.yr.firstAfterOrEqual(n);return yg.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,yg.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class bI{constructor(e){this.Cr=e,this.docs=new hv(sg.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return yg.resolve(n?n.document.mutableCopy():Zv.newInvalidDocument(t))}getEntries(e,t){let n=Jy();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Zv.newInvalidDocument(e))})),yg.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Jy();const s=t.path,o=new sg(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||pg(hg(o),n)<=0||(r.has(o.key)||Wy(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return yg.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Om()}vr(e,t){return yg.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new _I(this)}getSize(e){return yg.resolve(this.size)}}class _I extends iI{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),yg.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class II{constructor(e){this.persistence=e,this.Fr=new Yy((e=>ky(e)),xy),this.lastRemoteSnapshotVersion=eg.min(),this.highestTargetId=0,this.Mr=0,this.Or=new vI,this.targetCount=0,this.Nr=H_.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),yg.resolve()}getLastRemoteSnapshotVersion(e){return yg.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return yg.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),yg.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),yg.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new H_(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,yg.resolve()}updateTargetData(e,t){return this.kn(t),yg.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,yg.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),yg.waitFor(i).next((()=>r))}getTargetCount(e){return yg.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return yg.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),yg.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),yg.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),yg.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return yg.resolve(n)}containsKey(e,t){return yg.resolve(this.Or.containsKey(t))}}class EI{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Ng(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new II(this),this.indexManager=new C_,this.remoteDocumentCache=function(e){return new bI(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new Wb(t),this.Kr=new mI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new wI(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Nm("MemoryPersistence","Starting transaction:",e);const r=new TI(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return yg.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class TI extends gg{constructor(e){super(),this.currentSequenceNumber=e}}class SI{constructor(e){this.persistence=e,this.Gr=new vI,this.zr=null}static jr(e){return new SI(e)}get Hr(){if(this.zr)return this.zr;throw Om()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),yg.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),yg.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),yg.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return yg.forEach(this.Hr,(n=>{const r=sg.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,eg.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return yg.or([()=>yg.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class kI{constructor(e){this.serializer=e}N(e,t,n,r){const i=new wg("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ug,{unique:!0}),e.createObjectStore("documentMutations")}(e),xI(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=yg.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),xI(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:eg.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Ug,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return yg.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Zr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(s=s.next((()=>this.ei(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ni(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Zg});t.createIndex("collectionPathOverlayIndex",ev,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",tv,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:jg});t.createIndex("documentKeyIndex",qg),t.createIndex("collectionGroupIndex",Gg)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ii(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Yg}).createIndex("sequenceNumberIndex",$g,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Jg}).createIndex("documentKeyIndex",Xg,{unique:!1})}(e)))),s}Xr(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=z_(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>yg.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>yg.forEach(n,(n=>{Lm(n.userId===t.userId);const r=$b(this.serializer,n);return V_(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new ng(n),o=function(e){return[0,Og(e)]}(s);r.push(t.get(o).next((n=>n?yg.resolve():(n=>t.put({targetId:0,path:Og(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>yg.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Qg});const n=t.store("collectionParents"),r=new A_,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Og(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new ng(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=Fg(r);return i(o.popLast())}))))}ni(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=Jb(n),i=Xb(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new sg(ng.fromString(e.document.name).popFirst(5)):e.noDocument?sg.fromSegments(e.noDocument.path):e.unknownDocument?sg.fromSegments(e.unknownDocument.path):Om()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>yg.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=oI(this.serializer),i=new EI(SI.jr,this.serializer.ut);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:ow();$b(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),yg.forEach(n,((e,n)=>{const s=new km(n),o=o_.ct(this.serializer,s),a=i.getIndexManager(s),l=B_.ct(s,this.serializer,a,i.referenceDelegate);return new pI(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new av(t,Ng._e),e).next()}))}))}}function xI(e){e.createObjectStore("targetDocuments",{keyPath:Hg}).createIndex("documentTargetsIndex",Kg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Wg,{unique:!0}),e.createObjectStore("targetGlobal")}const CI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class AI{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=s,this.document=o,this.oi=l,this._i=c,this.ai=u,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!AI.D())throw new Um(Fm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new nI(this,r),this.Ii=t+"main",this.serializer=new Wb(a),this.Ti=new bg(this.Ii,this.ai,new kI(this.serializer)),this.qr=new K_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=oI(this.serializer),this.Kr=new r_,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===c&&Rm("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Um(Fm.FAILED_PRECONDITION,CI);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Lr=new Ng(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>RI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(Eg(e))return Nm("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Nm("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return NI(e).get("owner").next((e=>yg.resolve(this.wi(e))))}Si(e){return RI(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=lv(e,"clientMetadata");return t.W().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return yg.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?yg.resolve(!0):NI(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new Um(Fm.FAILED_PRECONDITION,CI);return!1}}return!(!this.networkEnabled||!this.inForeground)||RI(e).W().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Nm("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new av(e,Ng._e);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>RI(e).W().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return B_.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new R_(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return o_.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){Nm("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?ov:14===e?sv:13===e?iv:12===e?rv:11===e?nv:void Om()}(this.ai);let s;return this.Ti.runTransaction(e,r,i,(r=>(s=new av(r,this.Lr?this.Lr.next():Ng._e),"readwrite-primary"===t?this.fi(s).next((e=>!!e||this.gi(s))).next((t=>{if(!t)throw Rm("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new Um(Fm.FAILED_PRECONDITION,mg);return n(s)})).next((e=>this.yi(s).next((()=>e)))):this.Li(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Li(e){return NI(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Um(Fm.FAILED_PRECONDITION,CI)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return NI(e).put("owner",t)}static D(){return bg.D()}pi(e){const t=NI(e);return t.get("owner").next((e=>this.wi(e)?(Nm("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):yg.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Rm("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;!Pn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return Nm("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Rm("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(nR){Rm("Failed to set zombie client id.",nR)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(nR){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function NI(e){return lv(e,"owner")}function RI(e){return lv(e,"clientMetadata")}function PI(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class DI{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=ow(),r=ow();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new DI(e,t.fromCache,n,r)}}class OI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class LI{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new OI;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Am()<=nr.DEBUG&&Nm("QueryEngine","SDK will not create cache indexes for query:",Gy(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),yg.resolve()):(Am()<=nr.DEBUG&&Nm("QueryEngine","Query:",Gy(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Am()<=nr.DEBUG&&Nm("QueryEngine","The SDK decides to create cache indexes for query:",Gy(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Uy(t))):yg.resolve())}zi(e,t){if(Ly(t))return yg.resolve(null);let n=Uy(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=By(t,null,"F"),n=Uy(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=ow(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,By(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return Ly(t)||r.isEqual(eg.min())?yg.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?yg.resolve(null):(Am()<=nr.DEBUG&&Nm("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Gy(t)),this.Xi(e,s,t,dg(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new mv(Ky(e));return t.forEach(((t,r)=>{Wy(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Am()<=nr.DEBUG&&Nm("QueryEngine","Using full collection scan to execute query:",Gy(t)),this.Gi.getDocumentsMatchingQuery(e,t,fg.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class MI{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new hv($m),this.ns=new Yy((e=>ky(e)),xy),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pI(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function FI(e,t,n,r){return new MI(e,t,n,r)}async function UI(e,t){const n=Mm(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=ow();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function VI(e){const t=Mm(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function zI(e,t,n){let r=ow(),i=ow();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=Jy();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(eg.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Nm("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}function BI(e,t){const n=Mm(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function jI(e,t){const n=Mm(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,yg.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new Gb(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function qI(e,t,n){const r=Mm(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Eg(e))throw e;Nm("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function GI(e,t,n){const r=Mm(e);let i=eg.min(),s=ow();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Mm(e),i=r.ns.get(n);return void 0!==i?yg.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,Uy(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:eg.min(),n?s:ow()))).next((e=>(KI(r,Hy(t),e),{documents:e,ls:s})))))}function WI(e,t){const n=Mm(e),r=Mm(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function HI(e,t){const n=Mm(e),r=n.rs.get(t)||eg.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,dg(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(KI(n,t,e),e)))}function KI(e,t,n){let r=e.rs.get(t)||eg.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function QI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ow();const r=await jI(e,Uy(Zb(t.bundledQuery))),i=Mm(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=wb(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(e,t);const o=r.withResumeToken(bv.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(o.targetId,o),i.qr.updateTargetData(e,o).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function YI(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function $I(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function JI(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class XI{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Um(r.error.code,r.error.message))),s?new XI(e,t,r.state,i):(Rm("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ZI{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Um(n.error.code,n.error.message))),i?new ZI(e,n.state,r):(Rm("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=lw();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Dg(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new eE(e,i):(Rm("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class tE{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new tE(t.clientId,t.onlineState):(Rm("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class nE{constructor(){this.activeTargetIds=lw()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rE{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new hv($m),this.started=!1,this.ps=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=YI(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new nE),this.Ss=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(YI(this.persistenceKey,n));if(e){const t=eE.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(JI(this.persistenceKey,e));if(n){const r=ZI.Ts(e,n);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(JI(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Nm("SharedClientState","READ",e,t),t}setItem(e,t){Nm("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Nm("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(Nm("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void Rm("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=Ng._e;if(null!=e)try{const n=JSON.parse(e);Lm("number"==typeof n),t=n}catch(e){Rm("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ng._e&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,n){const r=new XI(this.currentUser,e,t,n),i=$I(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Bs(e){const t=$I(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=JI(this.persistenceKey,e),i=new ZI(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return eE.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return XI.Ts(new km(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return ZI.Ts(r,t)}Ms(e){return tE.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);Nm("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Xs(s,o).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=lw();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class iE{constructor(){this.eo=new nE,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new nE,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sE{ro(e){}shutdown(){}}class oE{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Nm("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Nm("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let aE=null;function lE(){return null===aE?aE=268435456+Math.round(2147483648*Math.random()):aE++,"0x"+aE.toString(16)}const cE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class uE{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const dE="WebChannelConnection";class hE extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,i){const s=lE(),o=this.So(e,t);Nm("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,i),this.Do(e,o,a,n).then((t=>(Nm("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Pm("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.wo(e,t,n,r,i)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+xm,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=cE[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const i=lE();return new Promise(((s,o)=>{const a=new Im;a.setWithCredentials(!0),a.listenOnce(ym.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case vm.NO_ERROR:const t=a.getResponseJson();Nm(dE,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case vm.TIMEOUT:Nm(dE,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Um(Fm.DEADLINE_EXCEEDED,"Request time out"));break;case vm.HTTP_ERROR:const n=a.getStatus();if(Nm(dE,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Fm).indexOf(t)>=0?t:Fm.UNKNOWN}(t.status);o(new Um(e,t.message))}else o(new Um(Fm.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Um(Fm.UNAVAILABLE,"Connection failed."));break;default:Om()}}finally{Nm(dE,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Nm(dE,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}vo(e,t,n){const r=lE(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=mm(),o=gm(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Nm(dE,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let d=!1,h=!1;const f=new uE({co:t=>{h?Nm(dE,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Nm(dE,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Nm(dE,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,_m.EventType.OPEN,(()=>{h||Nm(dE,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,_m.EventType.CLOSE,(()=>{h||(h=!0,Nm(dE,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Ro())})),p(u,_m.EventType.ERROR,(t=>{h||(h=!0,Pm(dE,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Ro(new Um(Fm.UNAVAILABLE,"The operation could not be completed")))})),p(u,_m.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];Lm(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Nm(dE,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Ww[e];if(void 0!==t)return Qw(t)}(t),i=o.message;void 0===n&&(n=Fm.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),h=!0,f.Ro(new Um(n,i)),u.close()}else Nm(dE,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Vo(i)}})),p(o,wm.STAT_EVENT,(t=>{t.stat===bm.PROXY?Nm(dE,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===bm.NOPROXY&&Nm(dE,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ao()}),0),f}}function fE(){return"undefined"!=typeof window?window:null}function pE(){return"undefined"!=typeof document?document:null}function mE(e){return new pb(e,!0)}class gE{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Nm("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class vE{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Ko=n,this.$o=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new gE(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===Fm.RESOURCE_EXHAUSTED?(Rm(t.toString()),Rm("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===Fm.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new Um(Fm.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return Nm("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(Nm("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yE extends vE{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Om()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Lm(void 0===t||"string"==typeof t),bv.fromBase64String(t||"")):(Lm(void 0===t||t instanceof Uint8Array),bv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Fm.UNKNOWN:Qw(e.code);return new Um(t,e.message||"")}(o);n=new ob(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Eb(e,r.document.name),s=wb(r.document.updateTime),o=r.document.createTime?wb(r.document.createTime):eg.min(),a=new Jv({mapValue:{fields:r.document.fields}}),l=Zv.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ib(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Eb(e,r.document),s=r.readTime?wb(r.readTime):eg.min(),o=Zv.newNoDocument(i,s),a=r.removedTargetIds||[];n=new ib([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Eb(e,r.document),s=r.removedTargetIds||[];n=new ib([],s,i,null)}else{if(!("filter"in t))return Om();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Gw(r,i),o=e.targetId;n=new sb(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return eg.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?eg.min():t.readTime?wb(t.readTime):eg.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=kb(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Cy(r)?{documents:Pb(e,r)}:{query:Db(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=vb(e,t.resumeToken);const r=mb(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(eg.min())>0){n.readTime=gb(e,t.snapshotVersion.toTimestamp());const r=mb(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Om()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=kb(this.serializer),t.removeTarget=e,this.e_(t)}}class wE extends vE{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Lm(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(Lm(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?wb(e.updateTime):wb(t);return n.isEqual(eg.min())&&(n=wb(t)),new Sw(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=wb(e.commitTime);return this.listener.I_(n,t)}return Lm(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=kb(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Nb(this.serializer,e)))};this.e_(t)}}class bE extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new Um(Fm.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.wo(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Fm.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Um(Fm.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Fm.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Um(Fm.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class _E{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(Rm(t),this.f_=!1):Nm("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class IE{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro((e=>{n.enqueueAndForget((async()=>{RE(this)&&(Nm("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Mm(e);t.C_.add(4),await TE(t),t.M_.set("Unknown"),t.C_.delete(4),await EE(t)}(this))}))})),this.M_=new _E(n,r)}}async function EE(e){if(RE(e))for(const t of e.v_)await t(!0)}async function TE(e){for(const t of e.v_)await t(!1)}function SE(e,t){const n=Mm(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),NE(n)?AE(n):YE(n).Ho()&&xE(n,t))}function kE(e,t){const n=Mm(e),r=YE(n);n.D_.delete(t),r.Ho()&&CE(n,t),0===n.D_.size&&(r.Ho()?r.Zo():RE(n)&&n.M_.set("Unknown"))}function xE(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(eg.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}YE(e).u_(t)}function CE(e,t){e.x_.Oe(t),YE(e).c_(t)}function AE(e){e.x_=new lb({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),YE(e).start(),e.M_.g_()}function NE(e){return RE(e)&&!YE(e).jo()&&e.D_.size>0}function RE(e){return 0===Mm(e).C_.size}function PE(e){e.x_=void 0}async function DE(e){e.D_.forEach(((t,n)=>{xE(e,t)}))}async function OE(e,t){PE(e),NE(e)?(e.M_.w_(t),AE(e)):e.M_.set("Unknown")}async function LE(e,t,n){if(e.M_.set("Online"),t instanceof ob&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){Nm("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await ME(e,n)}else if(t instanceof ib?e.x_.$e(t):t instanceof sb?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(eg.min()))try{const t=await VI(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(bv.EMPTY_BYTE_STRING,r.snapshotVersion)),CE(e,t);const i=new Gb(r.target,t,n,r.sequenceNumber);xE(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Nm("RemoteStore","Failed to raise snapshot:",t),await ME(e,t)}}async function ME(e,t,n){if(!Eg(t))throw t;e.C_.add(1),await TE(e),e.M_.set("Offline"),n||(n=()=>VI(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Nm("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await EE(e)}))}function FE(e,t){return t().catch((n=>ME(e,n,t)))}async function UE(e){const t=Mm(e),n=$E(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;VE(t);)try{const e=await BI(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,zE(t,e)}catch(e){await ME(t,e)}BE(t)&&jE(t)}function VE(e){return RE(e)&&e.b_.length<10}function zE(e,t){e.b_.push(t);const n=$E(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function BE(e){return RE(e)&&!$E(e).jo()&&e.b_.length>0}function jE(e){$E(e).start()}async function qE(e){$E(e).E_()}async function GE(e){const t=$E(e);for(const n of e.b_)t.P_(n.mutations)}async function WE(e,t,n){const r=e.b_.shift(),i=jw.from(r,t,n);await FE(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await UE(e)}async function HE(e,t){t&&$E(e).h_&&await async function(e,t){if(function(e){return Kw(e)&&e!==Fm.ABORTED}(t.code)){const n=e.b_.shift();$E(e).Yo(),await FE(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await UE(e)}}(e,t),BE(e)&&jE(e)}async function KE(e,t){const n=Mm(e);n.asyncQueue.verifyOperationInProgress(),Nm("RemoteStore","RemoteStore received new credentials");const r=RE(n);n.C_.add(3),await TE(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await EE(n)}async function QE(e,t){const n=Mm(e);t?(n.C_.delete(2),await EE(n)):t||(n.C_.add(2),await TE(n),n.M_.set("Unknown"))}function YE(e){return e.O_||(e.O_=function(e,t,n){const r=Mm(e);return r.A_(),new yE(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:DE.bind(null,e),Io:OE.bind(null,e),a_:LE.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),NE(e)?AE(e):e.M_.set("Unknown")):(await e.O_.stop(),PE(e))}))),e.O_}function $E(e){return e.N_||(e.N_=function(e,t,n){const r=Mm(e);return r.A_(),new wE(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:qE.bind(null,e),Io:HE.bind(null,e),T_:GE.bind(null,e),I_:WE.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await UE(e)):(await e.N_.stop(),e.b_.length>0&&(Nm("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class JE{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Vm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new JE(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Um(Fm.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function XE(e,t){if(Rm("AsyncQueue","".concat(t,": ").concat(e)),Eg(e))return new Um(Fm.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class ZE{constructor(e){this.comparator=e?(t,n)=>e(t,n)||sg.comparator(t.key,n.key):(e,t)=>sg.comparator(e.key,t.key),this.keyedMap=Zy(),this.sortedSet=new hv(this.comparator)}static emptySet(e){return new ZE(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ZE))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ZE;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class eT{constructor(){this.B_=new hv(sg.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Om():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class tT{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new tT(e,t,ZE.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&jy(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class nT{constructor(){this.k_=void 0,this.listeners=[]}}class rT{constructor(){this.queries=new Yy((e=>qy(e)),jy),this.onlineState="Unknown",this.q_=new Set}}async function iT(e,t){const n=Mm(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new nT),i)try{s.k_=await n.onListen(r)}catch(e){const n=XE(e,"Initialization of query '".concat(Gy(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&lT(n)}async function sT(e,t){const n=Mm(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function oT(e,t){const n=Mm(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(i)&&(r=!0);t.k_=i}}r&&lT(n)}function aT(e,t,n){const r=Mm(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function lT(e){e.q_.forEach((e=>{e.next()}))}class cT{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new tT(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=tT.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class uT{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class dT{constructor(e){this.serializer=e}hs(e){return Eb(this.serializer,e)}Ps(e){return e.metadata.exists?Ab(this.serializer,e.document,!1):Zv.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return wb(e)}}class hT{constructor(e,t,n){this.X_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=fT(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const n=ng.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,n=new dT(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||ow()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Mm(e);let s=ow(),o=Jy();for(const c of n){const e=t.hs(c.metadata.name);c.document&&(s=s.add(e));const n=t.Ps(c);n.setReadTime(t.Is(c.metadata.readTime)),o=o.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=await jI(i,function(e){return Uy(Oy(ng.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>zI(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new dT(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(const n of this.queries)await QI(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function fT(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class pT{constructor(e){this.key=e}}class mT{constructor(e){this.key=e}}class gT{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=ow(),this.mutatedKeys=ow(),this._a=Ky(e),this.aa=new ZE(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new eT,r=t?t.aa:this.aa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Wy(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.ha(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this._a(u,a)>0||l&&this._a(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=h?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{aa:s,la:n,Zi:o,mutatedKeys:i}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Om()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n),r=null!=r&&r;const o=t&&!r?this.Ia():[],a=0===this.oa.size&&this.current&&!r?1:0,l=a!==this.sa;return this.sa=a,0!==s.length||l?{snapshot:new tT(this.query,e.aa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new eT,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=ow(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new mT(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new pT(n))})),t}da(e){this.ia=e.ls,this.oa=ow();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return tT.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class vT{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class yT{constructor(e){this.key=e,this.Ra=!1}}class wT{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Yy((e=>qy(e)),jy),this.fa=new Map,this.ga=new Set,this.pa=new hv(sg.comparator),this.ya=new Map,this.wa=new vI,this.Sa={},this.ba=new Map,this.Da=H_.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function bT(e,t){const n=HT(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const e=await jI(n.localStore,Uy(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await _T(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&SE(n.remoteStore,e)}return i}async function _T(e,t,n,r,i){e.va=(t,n,r)=>async function(e,t,n,r){let i=t.view.ca(n);i.Zi&&(i=await GI(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return PT(e,t.targetId,a.Ta),a.snapshot}(e,t,n,r);const s=await GI(e.localStore,t,!0),o=new gT(t,s.ls),a=o.ca(s.documents),l=rb.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);PT(e,n,c.Ta);const u=new vT(t,n,o);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function IT(e,t){const n=Mm(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter((e=>!jy(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await qI(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),kE(n.remoteStore,r.targetId),NT(n,r.targetId)})).catch(vg)):(NT(n,r.targetId),await qI(n.localStore,r.targetId,!0))}async function ET(e,t){const n=Mm(e);try{const e=await function(e,t){const n=Mm(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(bv.EMPTY_BYTE_STRING,eg.min()).withLastLimboFreeSnapshotVersion(eg.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.qr.updateTargetData(e,c))}));let a=Jy(),l=ow();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(zI(e,s,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(eg.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return yg.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(Lm(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?Lm(r.Ra):e.removedDocuments.size>0&&(Lm(r.Ra),r.Ra=!1))})),await LT(n,e,t)}catch(e){await vg(e)}}function TT(e,t,n){const r=Mm(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const i=r.view.Q_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Mm(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Q_(t)&&(r=!0)})),r&&lT(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ST(e,t,n){const r=Mm(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let e=new hv(sg.comparator);e=e.insert(s,Zv.newNoDocument(s,eg.min()));const n=ow().add(s),i=new nb(eg.min(),new Map,new hv($m),e,n);await ET(r,i),r.pa=r.pa.remove(s),r.ya.delete(t),OT(r)}else await qI(r.localStore,t,!1).then((()=>NT(r,t,n))).catch(vg)}async function kT(e,t){const n=Mm(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Mm(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=yg.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Lm(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ow();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);AT(n,r,null),CT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await LT(n,e)}catch(e){await vg(e)}}async function xT(e,t,n){const r=Mm(e);try{const e=await function(e,t){const n=Mm(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Lm(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);AT(r,t,n),CT(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await LT(r,e)}catch(n){await vg(n)}}function CT(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function AT(e,t,n){const r=Mm(e);let i=r.Sa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function NT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||RT(e,t)}))}function RT(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(kE(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),OT(e))}function PT(e,t,n){for(const r of n)r instanceof pT?(e.wa.addReference(r.key,t),DT(e,r)):r instanceof mT?(Nm("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||RT(e,r.key)):Om()}function DT(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(Nm("SyncEngine","New document in limbo: "+n),e.ga.add(r),OT(e))}function OT(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new sg(ng.fromString(t)),r=e.Da.next();e.ya.set(r,new yT(n)),e.pa=e.pa.insert(n,r),SE(e.remoteStore,new Gb(Uy(Oy(n.path)),r,"TargetPurposeLimboResolution",Ng._e))}}async function LT(e,t,n){const r=Mm(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach(((e,a)=>{o.push(r.va(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=DI.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Va.a_(i),await async function(e,t){const n=Mm(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>yg.forEach(t,(t=>yg.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>yg.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Eg(e))throw e;Nm("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function MT(e,t){const n=Mm(e);if(!n.currentUser.isEqual(t)){Nm("SyncEngine","User change. New user:",t.toKey());const e=await UI(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new Um(Fm.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await LT(n,e._s)}}function FT(e,t){const n=Mm(e),r=n.ya.get(t);if(r&&r.Ra)return ow().add(r.key);{let e=ow();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}async function UT(e,t){const n=Mm(e),r=await GI(n.localStore,t.query,!0),i=t.view.da(r);return n.isPrimaryClient&&PT(n,t.targetId,i.Ta),i}async function VT(e,t){const n=Mm(e);return HI(n.localStore,t).then((e=>LT(n,e)))}async function zT(e,t,n,r){const i=Mm(e),s=await function(e,t){const n=Mm(e),r=Mm(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):yg.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await UE(i.remoteStore):"acknowledged"===n||"rejected"===n?(AT(i,t,r||null),CT(i,t),function(e,t){Mm(Mm(e).mutationQueue).Fn(t)}(i.localStore,t)):Om(),await LT(i,s)):Nm("SyncEngine","Cannot apply mutation batch with id: "+t)}async function BT(e,t,n){const r=Mm(e),i=[],s=[];for(const o of t){let e;const t=r.fa.get(o);if(t&&0!==t.length){e=await jI(r.localStore,Uy(t[0]));for(const e of t){const t=r.ma.get(e),n=await UT(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await WI(r.localStore,o);e=await jI(r.localStore,t),await _T(r,jT(t),o,!1,e.resumeToken)}i.push(e)}return r.Va.a_(s),i}function jT(e){return Dy(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function qT(e){return function(e){return Mm(Mm(e).persistence).Bi()}(Mm(e).localStore)}async function GT(e,t,n,r){const i=Mm(e);if(i.Ca)return void Nm("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await HI(i.localStore,Hy(s[0])),r=nb.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,bv.EMPTY_BYTE_STRING);await LT(i,e,r);break}case"rejected":await qI(i.localStore,t,!0),NT(i,t,r);break;default:Om()}}async function WT(e,t,n){const r=HT(e);if(r.Ca){for(const e of t){if(r.fa.has(e)){Nm("SyncEngine","Adding an already active target "+e);continue}const t=await WI(r.localStore,e),n=await jI(r.localStore,t);await _T(r,jT(t),n.targetId,!1,n.resumeToken),SE(r.remoteStore,n)}for(const e of n)r.fa.has(e)&&await qI(r.localStore,e,!1).then((()=>{kE(r.remoteStore,e),NT(r,e)})).catch(vg)}}function HT(e){const t=Mm(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ET.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=FT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ST.bind(null,t),t.Va.a_=oT.bind(null,t.eventManager),t.Va.Fa=aT.bind(null,t.eventManager),t}function KT(e){const t=Mm(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=kT.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xT.bind(null,t),t}class QT{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=mE(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return FI(this.persistence,new LI,e.initialUser,this.serializer)}createPersistence(e){return new EI(SI.jr,this.serializer)}createSharedClientState(e){return new iE}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class YT extends QT{constructor(e,t,n){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await KT(this.xa.syncEngine),await UE(this.xa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return FI(this.persistence,new LI,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Z_(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Ag(t,this.persistence);return new Cg(e.asyncQueue,n)}createPersistence(e){const t=PI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?U_.withCacheSize(this.cacheSizeBytes):U_.DEFAULT;return new AI(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,fE(),pE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new iE}}class $T extends YT{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xa.syncEngine;this.sharedClientState instanceof rE&&(this.sharedClientState.syncEngine={Ys:zT.bind(null,t),Zs:GT.bind(null,t),Xs:WT.bind(null,t),Bi:qT.bind(null,t),Js:VT.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=Mm(e);if(HT(n),KT(n),!0===t&&!0!==n.Ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await BT(n,e.toArray());n.Ca=!0,await QE(n.remoteStore,!0);for(const r of t)SE(n.remoteStore,r)}else if(!1===t&&!1!==n.Ca){const e=[];let t=Promise.resolve();n.fa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(NT(n,i),qI(n.localStore,i,!0)))),kE(n.remoteStore,i)})),await t,await BT(n,e),function(e){const t=Mm(e);t.ya.forEach(((e,n)=>{kE(t.remoteStore,n)})),t.wa.Vr(),t.ya=new Map,t.pa=new hv(sg.comparator)}(n),n.Ca=!1,await QE(n.remoteStore,!1)}}(this.xa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=fE();if(!rE.D(t))throw new Um(Fm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=PI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new rE(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class JT{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>TT(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=MT.bind(null,this.syncEngine),await QE(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new rT}createDatastore(e){const t=mE(e.databaseInfo.databaseId),n=function(e){return new hE(e)}(e.databaseInfo);return function(e,t,n,r){return new bE(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new IE(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>TT(this.syncEngine,e,0)),oE.D()?new oE:new sE)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new wT(e,t,n,r,i,s);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Mm(e);Nm("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await TE(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}function XT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class ZT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Rm("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class eS{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new Vm,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then((e=>{e&&e.Z_()?this.metadata.resolve(e.Y_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Y_))))}),(e=>this.metadata.reject(e)))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(null===e)return null;const t=this.La.decode(e),n=Number(t);isNaN(n)&&this.Qa("length string (".concat(t,") is not valid number"));const r=await this.Ka(n);return new uT(JSON.parse(r),e.length+n)}$a(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(0===this.buffer.length)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qa(e){throw this.Ba.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ua(){const e=await this.Ba.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class tS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Um(Fm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Mm(e),r=kb(n.serializer)+"/documents",i={documents:t.map((e=>Ib(n.serializer,e)))},s=await n.Co("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Lm(!!t.found),t.found.name,t.found.updateTime;const n=Eb(e,t.found.name),r=wb(t.found.updateTime),i=t.found.createTime?wb(t.found.createTime):eg.min(),s=new Jv({mapValue:{fields:t.found.fields}});return Zv.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Lm(!!t.missing),Lm(!!t.readTime);const n=Eb(e,t.missing),r=wb(t.readTime);return Zv.newNoDocument(n,r)}(e,t):Om()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Lm(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=sg.fromPath(t);this.mutations.push(new zw(n,this.precondition(n)))})),await async function(e,t){const n=Mm(e),r=kb(n.serializer)+"/documents",i={writes:t.map((e=>Nb(n.serializer,e)))};await n.wo("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Om();t=eg.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Um(Fm.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(eg.min())?kw.exists(!1):kw.updateTime(t):kw.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(eg.min()))throw new Um(Fm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kw.updateTime(t)}return kw.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class nS{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Wa=n.maxAttempts,this.zo=new gE(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko((async()=>{const e=new tS(this.datastore),t=this.za(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ja(e)}))))})).catch((e=>{this.ja(e)}))}))}za(e){try{const t=this.updateFunction(e);return!Rg(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ga(),Promise.resolve())))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Kw(t)}return!1}}class rS{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=km.UNAUTHENTICATED,this.clientId=Ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Nm("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Nm("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Um(Fm.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Vm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(VC){const n=XE(VC,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function iS(e,t){e.asyncQueue.verifyOperationInProgress(),Nm("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await UI(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function sS(e,t){e.asyncQueue.verifyOperationInProgress();const n=await aS(e);Nm("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>KE(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>KE(t.remoteStore,n))),e._onlineComponents=t}function oS(e){return"FirebaseError"===e.name?e.code===Fm.FAILED_PRECONDITION||e.code===Fm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function aS(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Nm("FirestoreClient","Using user provided OfflineComponentProvider");try{await iS(e,e._uninitializedComponentsProvider._offline)}catch(VC){const n=VC;if(!oS(n))throw n;Pm("Error using user provided cache. Falling back to memory cache: "+n),await iS(e,new QT)}}else Nm("FirestoreClient","Using default OfflineComponentProvider"),await iS(e,new QT);return e._offlineComponents}async function lS(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Nm("FirestoreClient","Using user provided OnlineComponentProvider"),await sS(e,e._uninitializedComponentsProvider._online)):(Nm("FirestoreClient","Using default OnlineComponentProvider"),await sS(e,new JT))),e._onlineComponents}function cS(e){return aS(e).then((e=>e.persistence))}function uS(e){return aS(e).then((e=>e.localStore))}function dS(e){return lS(e).then((e=>e.remoteStore))}function hS(e){return lS(e).then((e=>e.syncEngine))}function fS(e){return lS(e).then((e=>e.datastore))}async function pS(e){const t=await lS(e),n=t.eventManager;return n.onListen=bT.bind(null,t.syncEngine),n.onUnlisten=IT.bind(null,t.syncEngine),n}function mS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Vm;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new ZT({next:s=>{t.enqueueAndForget((()=>sT(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Um(Fm.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Um(Fm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new cT(Oy(n.path),s,{includeMetadataChanges:!0,J_:!0});return iT(e,o)}(await pS(e),e.asyncQueue,t,n,r))),r.promise}function gS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Vm;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new ZT({next:n=>{t.enqueueAndForget((()=>sT(e,o))),n.fromCache&&"server"===r.source?i.reject(new Um(Fm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new cT(n,s,{includeMetadataChanges:!0,J_:!0});return iT(e,o)}(await pS(e),e.asyncQueue,t,n,r))),r.promise}function vS(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?$w().encode(e):e,function(e,t){return new eS(e,t)}(function(e,t){if(e instanceof Uint8Array)return XT(e,t);if(e instanceof ArrayBuffer)return XT(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,mE(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Mm(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Mm(e),r=wb(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(fT(r));const i=new hT(r,e.localStore,t.serializer);let s=await t.Ma();for(;s;){const e=await i.ea(s);e&&n._updateProgress(e),s=await t.Ma()}const o=await i.complete();return await LT(e,o.ra,void 0),await function(e,t){const n=Mm(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.na)}catch(e){return Pm("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await hS(e),i,r)}))}function yS(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const wS=new Map;function bS(e,t,n){if(!n)throw new Um(Fm.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function _S(e,t,n,r){if(!0===t&&!0===r)throw new Um(Fm.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function IS(e){if(!sg.isDocumentKey(e))throw new Um(Fm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ES(e){if(sg.isDocumentKey(e))throw new Um(Fm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function TS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Om()}function SS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Um(Fm.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=TS(e);throw new Um(Fm.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function kS(e,t){if(t<=0)throw new Um(Fm.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class xS{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Um(Fm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Um(Fm.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_S("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=yS(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Um(Fm.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Um(Fm.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Um(Fm.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class CS{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Um(Fm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Um(Fm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xS(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Bm;switch(e.type){case"firstParty":return new Wm(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Um(Fm.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=wS.get(e);t&&(Nm("ComponentProvider","Removing Datastore"),wS.delete(e),t.terminate())}(this),Promise.resolve()}}function AS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=SS(e,CS))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Pm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=km.MOCK_USER;else{t=Nn(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Um(Fm.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new km(s)}e._authCredentials=new jm(new zm(t,n))}}class NS{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new NS(this.firestore,e,this._query)}}class RS{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new PS(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new RS(this.firestore,e,this._key)}}class PS extends NS{constructor(e,t,n){super(e,t,Oy(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new RS(this.firestore,null,new sg(e))}withConverter(e){return new PS(this.firestore,e,this._path)}}function DS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Yn(e),bS("collection","path",t),e instanceof CS){const n=ng.fromString(t,...r);return ES(n),new PS(e,null,n)}{if(!(e instanceof RS||e instanceof PS))throw new Um(Fm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ng.fromString(t,...r));return ES(n),new PS(e.firestore,null,n)}}function OS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Yn(e),1===arguments.length&&(t=Ym.newId()),bS("doc","path",t),e instanceof CS){const n=ng.fromString(t,...r);return IS(n),new RS(e,null,new sg(n))}{if(!(e instanceof RS||e instanceof PS))throw new Um(Fm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ng.fromString(t,...r));return IS(n),new RS(e.firestore,e instanceof PS?e.converter:null,new sg(n))}}function LS(e,t){return e=Yn(e),t=Yn(t),(e instanceof RS||e instanceof PS)&&(t instanceof RS||t instanceof PS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function MS(e,t){return e=Yn(e),t=Yn(t),e instanceof NS&&t instanceof NS&&e.firestore===t.firestore&&jy(e._query,t._query)&&e.converter===t.converter}class FS{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new gE(this,"async_queue_retry"),this.iu=()=>{const e=pE();e&&Nm("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=pE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=pE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new Vm;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(nR){if(!Eg(nR))throw nR;Nm("AsyncQueue","Operation failed with retryable error: "+nR)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Rm("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=JE.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&Om()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function US(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class VS{constructor(){this._progressObserver={},this._taskCompletionResolver=new Vm,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class zS extends CS{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new FS,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||jS(this),this._firestoreClient.terminate()}}function BS(e){return e._firestoreClient||jS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function jS(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Cv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,yS(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new rS(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function qS(e,t,n){const r=new Vm;return e.asyncQueue.enqueue((async()=>{try{await iS(e,n),await sS(e,t),r.resolve()}catch(e){const n=e;if(!oS(n))throw n;Pm("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function GS(e){return function(e){const t=new Vm;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Mm(e);RE(n.remoteStore)||Nm("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Mm(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ba.get(e)||[];r.push(t),n.ba.set(e,r)}catch(e){const n=XE(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await hS(e),t))),t.promise}(BS(e=SS(e,zS)))}function WS(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await cS(e),n=await dS(e);return t.setNetworkEnabled(!0),function(e){const t=Mm(e);return t.C_.delete(0),EE(t)}(n)}))}(BS(e=SS(e,zS)))}function HS(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await cS(e),n=await dS(e);return t.setNetworkEnabled(!1),async function(e){const t=Mm(e);t.C_.add(0),await TE(t),t.M_.set("Offline")}(n)}))}(BS(e=SS(e,zS)))}function KS(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Mm(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await uS(e),t)))}(BS(e=SS(e,zS)),t).then((t=>t?new NS(e,null,t.query):null))}function QS(e){if(e._initialized||e._terminated)throw new Um(Fm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class YS{constructor(e){this._byteString=e}static fromBase64String(e){try{return new YS(bv.fromBase64String(e))}catch(e){throw new Um(Fm.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new YS(bv.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class $S{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Um(Fm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ig(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class JS{constructor(e){this._methodName=e}}class XS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Um(Fm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Um(Fm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $m(this._lat,e._lat)||$m(this._long,e._long)}}const ZS=/^__.*__$/;class ek{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Lw(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ow(e,this.data,t,this.fieldTransforms)}}class tk{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Lw(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function nk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Om()}}class rk{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new rk(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Ek(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(nk(this.Iu)&&ZS.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class ik{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||mE(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new rk({Iu:e,methodName:t,gu:n,path:ig.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function sk(e){const t=e._freezeSettings(),n=mE(e._databaseId);return new ik(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ok(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);wk("Data must be an object, but it was:",o,r);const a=vk(r,o);let l,c;if(s.merge)l=new yv(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=bk(t,r,n);if(!o.contains(i))throw new Um(Fm.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Tk(e,i)||e.push(i)}l=new yv(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new ek(new Jv(a),l,c)}class ak extends JS{_toFieldTransform(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ak}}function lk(e,t,n){return new rk({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class ck extends JS{_toFieldTransform(e){return new Tw(e.path,new gw)}isEqual(e){return e instanceof ck}}class uk extends JS{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=lk(this,e,!0),n=this.yu.map((e=>gk(e,t))),r=new vw(n);return new Tw(e.path,r)}isEqual(e){return this===e}}class dk extends JS{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=lk(this,e,!0),n=this.yu.map((e=>gk(e,t))),r=new ww(n);return new Tw(e.path,r)}isEqual(e){return this===e}}class hk extends JS{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new _w(e.serializer,dw(e.serializer,this.wu));return new Tw(e.path,t)}isEqual(e){return this===e}}function fk(e,t,n,r){const i=e.pu(1,t,n);wk("Data must be an object, but it was:",i,r);const s=[],o=Jv.empty();uv(r,((e,r)=>{const a=Ik(t,e,n);r=Yn(r);const l=i.Ru(a);if(r instanceof ak)s.push(a);else{const e=gk(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new yv(s);return new tk(o,a,i.fieldTransforms)}function pk(e,t,n,r,i,s){const o=e.pu(1,t,n),a=[bk(t,r,n)],l=[i];if(s.length%2!=0)throw new Um(Fm.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<s.length;h+=2)a.push(bk(t,s[h])),l.push(s[h+1]);const c=[],u=Jv.empty();for(let h=a.length-1;h>=0;--h)if(!Tk(c,a[h])){const e=a[h];let t=l[h];t=Yn(t);const n=o.Ru(e);if(t instanceof ak)c.push(e);else{const r=gk(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new yv(c);return new tk(u,d,o.fieldTransforms)}function mk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return gk(n,e.pu(r?4:3,t))}function gk(e,t){if(yk(e=Yn(e)))return wk("Unsupported field value:",t,e),vk(e,t);if(e instanceof JS)return function(e,t){if(!nk(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=gk(i,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Yn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return dw(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Zm.fromDate(e);return{timestampValue:gb(t.serializer,n)}}if(e instanceof Zm){const n=new Zm(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gb(t.serializer,n)}}if(e instanceof XS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof YS)return{bytesValue:vb(t.serializer,e._byteString)};if(e instanceof RS){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:bb(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(TS(e)))}(e,t)}function vk(e,t){const n={};return dv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):uv(e,((e,r)=>{const i=gk(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function yk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Zm||e instanceof XS||e instanceof YS||e instanceof RS||e instanceof JS)}function wk(e,t,n){if(!yk(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=TS(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function bk(e,t,n){if((t=Yn(t))instanceof $S)return t._internalPath;if("string"==typeof t)return Ik(e,t);throw Ek("Field path arguments must be of type string or ",e,!1,void 0,n)}const _k=new RegExp("[~\\*/\\[\\]]");function Ik(e,t,n){if(t.search(_k)>=0)throw Ek("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new $S(...t.split("."))._internalPath}catch(wd){throw Ek("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ek(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Um(Fm.INVALID_ARGUMENT,a+e+l)}function Tk(e,t){return e.some((e=>e.isEqual(t)))}class Sk{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new RS(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new kk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(xk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class kk extends Sk{data(){return super.data()}}function xk(e,t){return"string"==typeof t?Ik(e,t):t instanceof $S?t._internalPath:t._delegate._internalPath}function Ck(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Um(Fm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ak{}class Nk extends Ak{}function Rk(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Ak&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Dk)).length,n=e.filter((e=>e instanceof Pk)).length;if(t>1||t>0&&n>0)throw new Um(Fm.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Pk extends Nk{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Pk(e,t,n)}_apply(e){const t=this._parse(e);return Bk(e._query,t),new NS(e.firestore,e.converter,zy(e._query,t))}_parse(e){const t=sk(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Um(Fm.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){zk(o,s);const t=[];for(const n of o)t.push(Vk(r,e,n));a={arrayValue:{values:t}}}else a=Vk(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||zk(o,s),a=mk(n,t,o,"in"===s||"not-in"===s);return oy.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Dk extends Ak{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Dk(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ay.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)Bk(n,i),n=zy(n,i)}(e._query,t),new NS(e.firestore,e.converter,zy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ok extends Nk{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ok(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Um(Fm.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Um(Fm.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ry(t,n)}(e._query,this._field,this._direction);return new NS(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Py(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Lk extends Nk{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Lk(e,t,n)}_apply(e){return new NS(e.firestore,e.converter,By(e._query,this._limit,this._limitType))}}class Mk extends Nk{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Mk(e,t,n)}_apply(e){const t=Uk(e,this.type,this._docOrFields,this._inclusive);return new NS(e.firestore,e.converter,function(e,t){return new Py(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Fk extends Nk{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Fk(e,t,n)}_apply(e){const t=Uk(e,this.type,this._docOrFields,this._inclusive);return new NS(e.firestore,e.converter,function(e,t){return new Py(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Uk(e,t,n,r){if(n[0]=Yn(n[0]),n[0]instanceof Sk)return function(e,t,n,r,i){if(!r)throw new Um(Fm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of Fy(e))if(o.field.isKeyField())s.push(Vv(t,r.key));else{const e=r.data.field(o.field);if(Sv(e))throw new Um(Fm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Um(Fm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new ey(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=sk(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Um(Fm.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Um(Fm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!My(e)&&-1!==s.indexOf("/"))throw new Um(Fm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(ng.fromString(s));if(!sg.isDocumentKey(n))throw new Um(Fm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new sg(n);a.push(Vv(t,i))}else{const e=mk(n,r,s);a.push(e)}}return new ey(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Vk(e,t,n){if("string"==typeof(n=Yn(n))){if(""===n)throw new Um(Fm.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!My(t)&&-1!==n.indexOf("/"))throw new Um(Fm.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ng.fromString(n));if(!sg.isDocumentKey(r))throw new Um(Fm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Vv(e,new sg(r))}if(n instanceof RS)return Vv(e,n._key);throw new Um(Fm.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(TS(n),"."))}function zk(e,t){if(!Array.isArray(e)||0===e.length)throw new Um(Fm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Bk(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Um(Fm.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Um(Fm.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class jk{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Pv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ev(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Tv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Om()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return uv(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new XS(Ev(e.latitude),Ev(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=kv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xv(e));default:return null}}convertTimestamp(e){const t=Iv(e);return new Zm(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ng.fromString(e);Lm(qb(n));const r=new Av(n.get(1),n.get(3)),i=new sg(n.popFirst(5));return r.isEqual(t)||Rm("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function qk(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Gk extends jk{constructor(e){super(),this.firestore=e}convertBytes(e){return new YS(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new RS(this.firestore,null,t)}}class Wk{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hk extends Sk{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Kk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(xk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Kk extends Hk{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Qk{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Wk(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Kk(this._firestore,this._userDataWriter,n.key,n,new Wk(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Um(Fm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Kk(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Wk(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Kk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Wk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Yk(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Yk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Om()}}function $k(e,t){return e instanceof Hk&&t instanceof Hk?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Qk&&t instanceof Qk&&e._firestore===t._firestore&&MS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class Jk extends jk{constructor(e){super(),this.firestore=e}convertBytes(e){return new YS(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new RS(this.firestore,null,t)}}function Xk(e){e=SS(e,RS);const t=SS(e.firestore,zS),n=BS(t),r=new Jk(t);return function(e,t){const n=new Vm;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Mm(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Um(Fm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=XE(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await uS(e),t,n))),n.promise}(n,e._key).then((n=>new Hk(t,r,e._key,n,new Wk(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Zk(e){e=SS(e,NS);const t=SS(e.firestore,zS),n=BS(t),r=new Jk(t);return function(e,t){const n=new Vm;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await GI(e,t,!0),i=new gT(t,r.ls),s=i.ca(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=XE(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await uS(e),t,n))),n.promise}(n,e._query).then((n=>new Qk(t,r,e,n)))}function ex(e,t,n){e=SS(e,RS);const r=SS(e.firestore,zS),i=qk(e.converter,t,n);return ix(r,[ok(sk(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,kw.none())])}function tx(e,t,n){e=SS(e,RS);const r=SS(e.firestore,zS),i=sk(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Yn(t))||t instanceof $S?pk(i,"updateDoc",e._key,t,n,a):fk(i,"updateDoc",e._key,t),ix(r,[s.toMutation(e._key,kw.exists(!0))])}function nx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Yn(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||US(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(US(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,d,h;if(e instanceof RS)d=SS(e.firestore,zS),h=Oy(e._key.path),u={next:t=>{n[l]&&n[l](sx(d,e,t))},error:n[l+1],complete:n[l+2]};else{const t=SS(e,NS);d=SS(t.firestore,zS),h=t._query;const r=new Jk(d);u={next:e=>{n[l]&&n[l](new Qk(d,r,t,e))},error:n[l+1],complete:n[l+2]},Ck(e._query)}return function(e,t,n,r){const i=new ZT(r),s=new cT(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>iT(await pS(e),s))),()=>{i.Na(),e.asyncQueue.enqueueAndForget((async()=>sT(await pS(e),s)))}}(BS(d),h,c,u)}function rx(e,t){return function(e,t){const n=new ZT(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Mm(e).q_.add(t),t.next()}(await pS(e),n))),()=>{n.Na(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Mm(e).q_.delete(t)}(await pS(e),n)))}}(BS(e=SS(e,zS)),US(t)?t:{next:t})}function ix(e,t){return function(e,t){const n=new Vm;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=KT(e);try{const e=await function(e,t){const n=Mm(e),r=Zm.now(),i=t.reduce(((e,t)=>e.add(t.key)),ow());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=Jy(),l=ow();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Pw(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Lw(e.key,t,Xv(t.value.mapValue),kw.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:ew(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new hv($m)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await LT(r,e.changes),await UE(r.remoteStore)}catch(e){const t=XE(e,"Failed to persist write");n.reject(t)}}(await hS(e),t,n))),n.promise}(BS(e),t)}function sx(e,t,n){const r=n.docs.get(t._key),i=new Jk(e);return new Hk(e,i,t._key,r,new Wk(n.hasPendingWrites,n.fromCache),t.converter)}const ox={maxAttempts:5};class ax{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=sk(e)}set(e,t,n){this._verifyNotCommitted();const r=lx(e,this._firestore),i=qk(r.converter,t,n),s=ok(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,kw.none())),this}update(e,t,n){this._verifyNotCommitted();const r=lx(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Yn(t))||t instanceof $S?pk(this._dataReader,"WriteBatch.update",r._key,t,n,o):fk(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,kw.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=lx(e,this._firestore);return this._mutations=this._mutations.concat(new Vw(t._key,kw.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Um(Fm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function lx(e,t){if((e=Yn(e)).firestore!==t)throw new Um(Fm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class cx extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=sk(e)}get(e){const t=lx(e,this._firestore),n=new Gk(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Om();const r=e[0];if(r.isFoundDocument())return new Sk(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Sk(this._firestore,n,t._key,null,t.converter);throw Om()}))}set(e,t,n){const r=lx(e,this._firestore),i=qk(r.converter,t,n),s=ok(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=lx(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Yn(t))||t instanceof $S?pk(this._dataReader,"Transaction.update",r._key,t,n,o):fk(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=lx(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=lx(e,this._firestore),n=new Jk(this._firestore);return super.get(e).then((e=>new Hk(this._firestore,n,t._key,e._document,new Wk(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){xm=e}(Br),Lr(new $n("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new zS(new qm(e.getProvider("auth-internal")),new Km(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Um(Fm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Av(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Hr(Sm,"4.4.0",e),Hr(Sm,"4.4.0","esm2017")}();function ux(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Um("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function dx(){if("undefined"===typeof Uint8Array)throw new Um("unimplemented","Uint8Arrays are not available in this environment.")}function hx(){if("undefined"==typeof atob)throw new Um("unimplemented","Blobs are unavailable in Firestore in this environment.")}class fx{constructor(e){this._delegate=e}static fromBase64String(e){return hx(),new fx(YS.fromBase64String(e))}static fromUint8Array(e){return dx(),new fx(YS.fromUint8Array(e))}toBase64(){return hx(),this._delegate.toBase64()}toUint8Array(){return dx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function px(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class mx{enableIndexedDbPersistence(e,t){return function(e,t){QS(e=SS(e,zS));const n=BS(e);if(n._uninitializedComponentsProvider)throw new Um(Fm.FAILED_PRECONDITION,"SDK cache is already specified.");Pm("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new JT;return qS(n,i,new YT(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){QS(e=SS(e,zS));const t=BS(e);if(t._uninitializedComponentsProvider)throw new Um(Fm.FAILED_PRECONDITION,"SDK cache is already specified.");Pm("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new JT;return qS(t,r,new $T(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Um(Fm.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Vm;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!bg.D())return Promise.resolve();const t=e+"main";await bg.delete(t)}(PI(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class gx{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Av||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Pm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};AS(this._delegate,e,t,n)}enableNetwork(){return WS(this._delegate)}disableNetwork(){return HS(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,_S("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return GS(this._delegate)}onSnapshotsInSync(e){return rx(this._delegate,e)}get app(){if(!this._appCompat)throw new Um("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Nx(this,DS(this._delegate,e))}catch(nR){throw Ix(nR,"collection()","Firestore.collection()")}}doc(e){try{return new _x(this,OS(this._delegate,e))}catch(nR){throw Ix(nR,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new xx(this,function(e,t){if(e=SS(e,CS),bS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Um(Fm.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new NS(e,null,function(e){return new Py(ng.emptyPath(),e)}(t))}(this._delegate,e))}catch(nR){throw Ix(nR,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=SS(e,zS);const r=Object.assign(Object.assign({},ox),n);return function(e){if(e.maxAttempts<1)throw new Um(Fm.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Vm;return e.asyncQueue.enqueueAndForget((async()=>{const i=await fS(e);new nS(e.asyncQueue,i,n,t,r).run()})),r.promise}(BS(e),(n=>t(new cx(e,n))),r)}(this._delegate,(t=>e(new yx(this,t))))}batch(){return BS(this._delegate),new wx(new ax(this._delegate,(e=>ix(this._delegate,e))))}loadBundle(e){return function(e,t){const n=BS(e=SS(e,zS)),r=new VS;return vS(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return KS(this._delegate,e).then((e=>e?new xx(this,e):null))}}class vx extends jk{constructor(e){super(),this.firestore=e}convertBytes(e){return new fx(new YS(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return _x.forKey(t,this.firestore,null)}}class yx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new vx(e)}get(e){const t=Rx(e);return this._delegate.get(t).then((e=>new Sx(this._firestore,new Hk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=Rx(e);return n?(ux("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Rx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Rx(e);return this._delegate.delete(t),this}}class wx{constructor(e){this._delegate=e}set(e,t,n){const r=Rx(e);return n?(ux("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Rx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Rx(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class bx{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Kk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new kx(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=bx.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new bx(e,new vx(e),t),r.set(t,i)),i}}bx.INSTANCES=new WeakMap;class _x{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vx(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Um("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new _x(t,new RS(t._delegate,n,new sg(e)))}static forKey(e,t,n){return new _x(t,new RS(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Nx(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Nx(this.firestore,DS(this._delegate,e))}catch(nR){throw Ix(nR,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Yn(e))instanceof RS&&LS(this._delegate,e)}set(e,t){t=ux("DocumentReference.set",t);try{return t?ex(this._delegate,e,t):ex(this._delegate,e)}catch(nR){throw Ix(nR,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?tx(this._delegate,e):tx(this._delegate,e,t,...r)}catch(nR){throw Ix(nR,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return ix(SS(e.firestore,zS),[new Vw(e._key,kw.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Ex(t),i=Tx(t,(e=>new Sx(this.firestore,new Hk(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return nx(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Xk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=SS(e,RS);const t=SS(e.firestore,zS);return mS(BS(t),e._key,{source:"server"}).then((n=>sx(t,e,n)))}(this._delegate):function(e){e=SS(e,RS);const t=SS(e.firestore,zS);return mS(BS(t),e._key).then((n=>sx(t,e,n)))}(this._delegate),t.then((e=>new Sx(this.firestore,new Hk(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new _x(this.firestore,e?this._delegate.withConverter(bx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ix(e,t,n){return e.message=e.message.replace(t,n),e}function Ex(e){for(const t of e)if("object"===typeof t&&!px(t))return t;return{}}function Tx(e,t){var n,r;let i;return i=px(e[0])?e[0]:px(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Sx{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new _x(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return $k(this._delegate,e._delegate)}}class kx extends Sx{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||Om()}(void 0!==t),t}}class xx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new vx(e)}where(e,t,n){try{return new xx(this.firestore,Rk(this._delegate,function(e,t,n){const r=t,i=xk("where",e);return Pk._create(i,r,n)}(e,t,n)))}catch(nR){throw Ix(nR,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new xx(this.firestore,Rk(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=xk("orderBy",e);return Ok._create(n,t)}(e,t)))}catch(nR){throw Ix(nR,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new xx(this.firestore,Rk(this._delegate,function(e){return kS("limit",e),Lk._create("limit",e,"F")}(e)))}catch(nR){throw Ix(nR,"limit()","Query.limit()")}}limitToLast(e){try{return new xx(this.firestore,Rk(this._delegate,function(e){return kS("limitToLast",e),Lk._create("limitToLast",e,"L")}(e)))}catch(nR){throw Ix(nR,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new xx(this.firestore,Rk(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Mk._create("startAt",t,!0)}(...arguments)))}catch(nR){throw Ix(nR,"startAt()","Query.startAt()")}}startAfter(){try{return new xx(this.firestore,Rk(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Mk._create("startAfter",t,!1)}(...arguments)))}catch(nR){throw Ix(nR,"startAfter()","Query.startAfter()")}}endBefore(){try{return new xx(this.firestore,Rk(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Fk._create("endBefore",t,!1)}(...arguments)))}catch(nR){throw Ix(nR,"endBefore()","Query.endBefore()")}}endAt(){try{return new xx(this.firestore,Rk(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Fk._create("endAt",t,!0)}(...arguments)))}catch(nR){throw Ix(nR,"endAt()","Query.endAt()")}}isEqual(e){return MS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Zk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=SS(e,NS);const t=SS(e.firestore,zS),n=BS(t),r=new Jk(t);return gS(n,e._query,{source:"server"}).then((n=>new Qk(t,r,e,n)))}(this._delegate):function(e){e=SS(e,NS);const t=SS(e.firestore,zS),n=BS(t),r=new Jk(t);return Ck(e._query),gS(n,e._query).then((n=>new Qk(t,r,e,n)))}(this._delegate),t.then((e=>new Ax(this.firestore,new Qk(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Ex(t),i=Tx(t,(e=>new Ax(this.firestore,new Qk(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return nx(this._delegate,r,i)}withConverter(e){return new xx(this.firestore,e?this._delegate.withConverter(bx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Cx{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new kx(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ax{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new xx(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new kx(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Cx(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new kx(this._firestore,n))}))}isEqual(e){return $k(this._delegate,e._delegate)}}class Nx extends xx{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new _x(this.firestore,e):null}doc(e){try{return new _x(this.firestore,void 0===e?OS(this._delegate):OS(this._delegate,e))}catch(nR){throw Ix(nR,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=SS(e.firestore,zS),r=OS(e),i=qk(e.converter,t);return ix(n,[ok(sk(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,kw.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new _x(this.firestore,e)))}isEqual(e){return LS(this._delegate,e._delegate)}withConverter(e){return new Nx(this.firestore,e?this._delegate.withConverter(bx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Rx(e){return SS(e,RS)}class Px{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new $S(...t)}static documentId(){return new Px(ig.keyField().canonicalString())}isEqual(e){return(e=Yn(e))instanceof $S&&this._delegate._internalPath.isEqual(e._internalPath)}}class Dx{constructor(e){this._delegate=e}static serverTimestamp(){const e=new ck("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Dx(e)}static delete(){const e=new ak("deleteField");return e._methodName="FieldValue.delete",new Dx(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uk("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Dx(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new dk("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Dx(e)}static increment(e){const t=function(e){return new hk("increment",e)}(e);return t._methodName="FieldValue.increment",new Dx(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Ox={Firestore:gx,GeoPoint:XS,Timestamp:Zm,Blob:fx,Transaction:yx,WriteBatch:wx,DocumentReference:_x,DocumentSnapshot:Sx,Query:xx,QueryDocumentSnapshot:kx,QuerySnapshot:Ax,CollectionReference:Nx,FieldPath:Px,FieldValue:Dx,setLogLevel:function(e){!function(e){Cm.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new $n("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Ox)))}(e,((e,t)=>new gx(e,t,new mx))),e.registerVersion("@firebase/firestore-compat","0.3.23")}(di);const Lx={apiKey:"AIzaSyBV2Gy-2ioJyL0xPN01fM1i3NAY5PQ6Qhg",authDomain:"chat-580cf.firebaseapp.com",projectId:"chat-580cf",storageBucket:"chat-580cf.appspot.com",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBV2Gy-2ioJyL0xPN01fM1i3NAY5PQ6Qhg",REACT_APP_AUTH_DOMAIN:"chat-580cf.firebaseapp.com",REACT_APP_PROJECT_ID:"chat-580cf",REACT_APP_STORAGE_BUCKET:"chat-580cf.appspot.com",REACT_APP_MESSAGEING_SENDER_ID:"556518847811",REACT_APP_APP_ID:"1:556518847811:web:fd69272bdce0fadfe22bf6"}.REACT_APP_MESSAGING_SENDER_ID,appId:"1:556518847811:web:fd69272bdce0fadfe22bf6"},Mx=di.initializeApp(Lx),Fx=Mx.firestore(),Ux=(Mx.auth(),Fx);const Vx=n.p+"static/media/setting.d9994119bfa4726433f63db634b6fc4c.svg";const zx=n.p+"static/media/notification.7e0a1b651817c3197a0774f8d4fd3a2f.svg";var Bx,jx,qx,Gx;const Wx=Ie(Bx||(Bx=s(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -60%);\n  z-index: 30;\n  background-color: #fff;\n  width: 100%;\n  height: auto;\n  max-width: min(80vw, 500px);\n  border: 2px solid #333;\n  border-radius: 10px;\n  padding: 40px 50px;\n  display: flex;\n  gap: 40px;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),Hx=Ie(jx||(jx=s(["\n  display: flex;\n  gap: 18px;\n  @media (max-width: 500px) {\n    display: grid;\n  }\n"]))),Kx=Ie(qx||(qx=s(["\n  border: 2px solid #333;\n  border-radius: 100px;\n  padding: 15px 32px;\n  background-color: #333333;\n  color: #fff;\n  margin-right: auto;\n  margin-left: auto;\n  @media (max-width: 500px) {\n    width: 100%;\n  }\n"]))),Qx=Ie(Gx||(Gx=s(["\n  background-color: #fff;\n  color: #333;\n"]))),Yx=e=>{let{modalTitle:t,onCancel:n,onClick:r,buttonText:i,children:s}=e;return pn("div",{css:Wx,children:[t&&fn("p",{children:t}),fn("div",{children:s}),r&&pn("div",{css:Hx,children:[n&&fn("button",{css:[Kx,Qx],onClick:n,children:"\u30ad\u30e3\u30f3\u30bb\u30eb"}),fn("button",{css:Kx,onClick:r,children:i})]})]})};var $x,Jx;const Xx=Ie($x||($x=s(["\n  display: grid;\n  gap: 30px;\n  & > label {\n    display: grid;\n    gap: 10px;\n    & > input {\n      width: 100%;\n      border-radius: 10px;\n      border: 1.5px solid #333;\n      padding: 12px 20px;\n    }\n  }\n"]))),Zx=Ie(Jx||(Jx=s(["\n  margin: 20px 0 0;\n  font-size: 14px;\n  font-weight: bold;\n  color: #ce0c0c;\n"]))),eC=e=>{let{onLogin:n,loginError:r}=e;const[i,s]=(0,t.useState)(""),[o,a]=(0,t.useState)("");return pn(Yx,{buttonText:"\u30ed\u30b0\u30a4\u30f3",onClick:()=>{n(i,o)},children:[pn("form",{onSubmit:e=>{e.preventDefault()},css:Xx,children:[pn("label",{htmlFor:"email",children:["\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",fn("input",{type:"email",id:"email",value:i,onChange:e=>s(e.target.value),placeholder:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"})]}),pn("label",{htmlFor:"password",children:["\u30d1\u30b9\u30ef\u30fc\u30c9",fn("input",{type:"password",id:"password",value:o,onChange:e=>a(e.target.value),placeholder:"\u30d1\u30b9\u30ef\u30fc\u30c9"})]})]}),r&&fn("p",{css:Zx,children:r})]})};var tC,nC,rC,iC,sC,oC,aC,lC,cC;const uC=Ie(tC||(tC=s(["\n  max-width: 600px;\n  margin: 0 auto;\n  padding-top: 30px;\n  padding-left: 18px;\n  padding-right: 18px;\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  min-height: 100vh;\n  position: relative;\n"]))),dC=Ie(nC||(nC=s(["\n  font-size: 20px;\n  font-weight: bold;\n  margin-bottom: 15px;\n  padding: 10px;\n  color: #333;\n"]))),hC=Ie(rC||(rC=s(["\n  display: flex;\n  gap: 14px;\n"]))),fC=Ie(iC||(iC=s([""]))),pC=Ie(sC||(sC=s(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  & > button {\n    padding-right: 18px;\n  }\n"]))),mC=Ie(oC||(oC=s(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n"]))),gC=Ie(aC||(aC=s(["\n  width: 56px;\n  height: 56px;\n  border-radius: 100%;\n  object-fit: cover;\n  cursor: pointer;\n"]))),vC=Ie(lC||(lC=s(["\n  font-size: 18px;\n  margin-bottom: 2px;\n"]))),yC=Ie(cC||(cC=s(["\n  font-size: 14px;\n  color: #666666;\n"])));di.auth().onAuthStateChanged((e=>{e&&console.log("\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u30fc:",e)}));const wC=()=>{var e;const[n,r]=(0,t.useState)(!0),i=null===(e=di.auth().currentUser)||void 0===e?void 0:e.uid,[s,o]=(0,t.useState)(null),[a,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),d=(0,t.useRef)(null),[h,f]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const e=di.auth().onAuthStateChanged((async e=>{if(r(!0),e){l(!0);try{const t=await Ux.collection("users").doc(e.uid).get();if(t.exists)o(t.data());else{console.log("\u521d\u56de\u30ed\u30b0\u30a4\u30f3: \u30c7\u30d5\u30a9\u30eb\u30c8\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u3092\u8a2d\u5b9a");const t={name:"\u65b0\u898f\u30e6\u30fc\u30b6\u30fc",comment:"\u30b3\u30e1\u30f3\u30c8\u672a\u8a2d\u5b9a",image:Yt};o(t),await Ux.collection("users").doc(e.uid).set(t)}}catch(t){console.error("\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u306b\u5931\u6557\u3057\u307e\u3057\u305f",t)}}else l(!1),o(null);r(!1)}));return()=>e()}),[]);const[p,m]=(0,t.useState)(""),g=async(e,t)=>{try{await di.auth().signInWithEmailAndPassword(e,t),m("")}catch(n){m("\u30ed\u30b0\u30a4\u30f3\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3068\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),console.error(n)}};return n?fn("div",{css:uC,children:"\u30ed\u30fc\u30c7\u30a3\u30f3\u30b0\u4e2d"}):a?s?pn("div",{css:uC,children:[pn("div",{css:pC,children:[fn("h1",{css:dC,children:"\u30db\u30fc\u30e0"}),pn("div",{css:hC,children:[fn("button",{onClick:()=>{f(!h)},children:"\u30ed\u30b0\u30a2\u30a6\u30c8"}),h&&fn(Yx,{modalTitle:"\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3059\u304b\uff1f",onClick:async()=>{try{await di.auth().signOut(),console.log("\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3057\u305f"),f(!1)}catch(e){console.error("\u30ed\u30b0\u30a2\u30a6\u30c8\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f",e)}},onCancel:()=>{f(!1)},buttonText:"\u30ed\u30b0\u30a2\u30a6\u30c8"}),fn("button",{css:fC,children:fn("img",{src:zx,alt:"\u901a\u77e5",width:18,height:24})}),fn("button",{css:fC,onClick:()=>{u(!0),c&&u(!1)},children:fn("img",{src:Vx,alt:"\u8a2d\u5b9a",width:25,height:25})})]})]}),pn("div",{css:mC,children:[fn("button",{onClick:()=>{var e;null===(e=d.current)||void 0===e||e.click()},children:fn("img",{css:gC,src:s.image,alt:s.name,width:56,height:56})}),fn("input",{type:"file",ref:d,style:{display:"none"},onChange:async e=>{if(e.target.files&&e.target.files[0]&&i){const n=e.target.files[0],r=di.storage().ref().child("images/".concat(i,"/").concat(n.name));try{await r.put(n);const e=await r.getDownloadURL(),t={...s,image:e};await Ux.collection("users").doc(i).set(t,{merge:!0}),o((t=>t?{...t,image:e}:null))}catch(t){console.error("\u753b\u50cf\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306b\u5931\u6557\u3057\u307e\u3057\u305f",t)}}}}),pn("div",{children:[fn("p",{css:vC,children:s.name}),fn("p",{css:yC,children:s.comment})]})]}),c&&fn(wn,{userProfile:s,onSave:async e=>{try{i&&(await Ux.collection("users").doc(i).set(e,{merge:!0}),console.log("\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u3092\u66f4\u65b0\u3057\u307e\u3057\u305f"))}catch(t){console.error("\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f",t)}o(e),u(!1)}})]}):fn("div",{css:uC,children:pn("div",{css:pC,children:[fn("h1",{css:dC,children:"\u30db\u30fc\u30e0"}),pn("div",{css:hC,children:[fn("button",{css:fC,children:fn("img",{src:zx,alt:"\u901a\u77e5",width:18,height:24})}),fn("button",{css:fC,children:fn("img",{src:Vx,alt:"\u8a2d\u5b9a",width:25,height:25})})]}),fn(eC,{onLogin:g,loginError:p})]})}):fn("div",{css:uC,children:fn(eC,{onLogin:g,loginError:p})})};function bC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(new Set(t.flatMap((e=>"string"==typeof e?e.split(" "):[])))).filter(Boolean).join(" ")}function _C(e,t){if(e in t){let s=t[e];for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return"function"==typeof s?s(...r):s}let s=new Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(t).map((e=>'"'.concat(e,'"'))).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(s,_C),s}var IC=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(IC||{}),EC=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(EC||{});function TC(e){let{ourProps:t,theirProps:n,slot:r,defaultTag:i,features:s,visible:o=!0,name:a}=e,l=kC(n,t);if(o)return SC(l,r,i,a);let c=null!=s?s:0;if(2&c){let{static:e=!1,...t}=l;if(e)return SC(t,r,i,a)}if(1&c){let{unmount:e=!0,...t}=l;return _C(e?0:1,{0:()=>null,1:()=>SC({...t,hidden:!0,style:{display:"none"}},r,i,a)})}return SC(l,r,i,a)}function SC(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,{as:s=r,children:o,refName:a="ref",...l}=AC(e,["unmount","static"]),c=void 0!==e.ref?{[a]:e.ref}:{},u="function"==typeof o?o(n):o;"className"in l&&l.className&&"function"==typeof l.className&&(l.className=l.className(n));let d={};if(n){let e=!1,t=[];for(let[r,i]of Object.entries(n))"boolean"==typeof i&&(e=!0),!0===i&&t.push(r);e&&(d["data-headlessui-state"]=t.join(" "))}if(s===t.Fragment&&Object.keys(CC(l)).length>0){if(!(0,t.isValidElement)(u)||Array.isArray(u)&&u.length>1)throw new Error(['Passing props on "Fragment"!',"","The current component <".concat(i,' /> is rendering a "Fragment".'),"However we need to passthrough the following props:",Object.keys(l).map((e=>"  - ".concat(e))).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>"  - ".concat(e))).join("\n")].join("\n"));let e=u.props,n="function"==typeof(null==e?void 0:e.className)?function(){return bC(null==e?void 0:e.className(...arguments),l.className)}:bC(null==e?void 0:e.className,l.className),r=n?{className:n}:{};return(0,t.cloneElement)(u,Object.assign({},kC(u.props,CC(AC(l,["ref"]))),d,c,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{ref:t.every((e=>null==e))?void 0:e=>{for(let n of t)null!=n&&("function"==typeof n?n(e):n.current=e)}}}(u.ref,c.ref),r))}return(0,t.createElement)(s,Object.assign({},AC(l,["ref"]),s!==t.Fragment&&c,s!==t.Fragment&&d),u)}function kC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},i={};for(let s of t)for(let e in s)e.startsWith("on")&&"function"==typeof s[e]?(null!=i[e]||(i[e]=[]),i[e].push(s[e])):r[e]=s[e];if(r.disabled||r["aria-disabled"])return Object.assign(r,Object.fromEntries(Object.keys(i).map((e=>[e,void 0]))));for(let s in i)Object.assign(r,{[s](e){let t=i[s];for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(let i of t){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;i(e,...r)}}});return r}function xC(e){var n;return Object.assign((0,t.forwardRef)(e),{displayName:null!=(n=e.displayName)?n:e.name})}function CC(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function AC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}var NC=Object.defineProperty,RC=(e,t,n)=>(((e,t,n)=>{t in e?NC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let PC=new class{constructor(){RC(this,"current",this.detect()),RC(this,"handoffState","pending"),RC(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}},DC=(e,n)=>{PC.isServer?(0,t.useEffect)(e,n):(0,t.useLayoutEffect)(e,n)};function OC(){let e=function(){let e="undefined"==typeof document;return(e=>e.useSyncExternalStore)(r)((()=>()=>{}),(()=>!1),(()=>!e))}(),[n,i]=t.useState(PC.isHandoffComplete);return n&&!1===PC.isHandoffComplete&&i(!1),t.useEffect((()=>{!0!==n&&i(!0)}),[n]),t.useEffect((()=>PC.handoff()),[]),!e&&n}var LC;let MC=null!=(LC=t.useId)?LC:function(){let e=OC(),[n,r]=t.useState(e?()=>PC.nextId():null);return DC((()=>{null===n&&r(PC.nextId())}),[n]),null!=n?""+n:void 0};var FC=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(FC||{});let UC=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>"".concat(e,":not([tabindex='-1'])"))).join(",");var VC,zC,BC=((zC=BC||{})[zC.First=1]="First",zC[zC.Previous=2]="Previous",zC[zC.Next=4]="Next",zC[zC.Last=8]="Last",zC[zC.WrapAround=16]="WrapAround",zC[zC.NoScroll=32]="NoScroll",zC),jC=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(jC||{}),qC=((VC=qC||{})[VC.Previous=-1]="Previous",VC[VC.Next=1]="Next",VC);function GC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(UC)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}var WC=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(WC||{});var HC=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(HC||{});"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let KC=["textarea","input"].join(",");function QC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return e.slice().sort(((e,n)=>{let r=t(e),i=t(n);if(null===r||null===i)return 0;let s=r.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function YC(e,t){let{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?QC(e):e:GC(e);i.length>0&&o.length>1&&(o=o.filter((e=>!i.includes(e)))),r=null!=r?r:s.activeElement;let a,l=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,o.indexOf(r))-1;if(4&t)return Math.max(0,o.indexOf(r))+1;if(8&t)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=32&t?{preventScroll:!0}:{},d=0,h=o.length;do{if(d>=h||d+h<=0)return 0;let e=c+d;if(16&t)e=(e+h)%h;else{if(e<0)return 3;if(e>=h)return 1}a=o[e],null==a||a.focus(u),d+=l}while(a!==s.activeElement);return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,KC))&&n}(a)&&a.select(),2}function $C(e){let n=(0,t.useRef)(e);return DC((()=>{n.current=e}),[e]),n}let JC=function(e){let n=$C(e);return t.useCallback((function(){return n.current(...arguments)}),[n])},XC=Symbol();function ZC(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let i=(0,t.useRef)(n);(0,t.useEffect)((()=>{i.current=n}),[n]);let s=JC((e=>{for(let t of i.current)null!=t&&("function"==typeof t?t(e):t.current=e)}));return n.every((e=>null==e||(null==e?void 0:e[XC])))?void 0:s}function eA(e){var t;if(e.type)return e.type;let n=null!=(t=e.as)?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function tA(e,n){let[r,i]=(0,t.useState)((()=>eA(e)));return DC((()=>{i(eA(e))}),[e.type,e.as]),DC((()=>{r||n.current&&n.current instanceof HTMLButtonElement&&!n.current.hasAttribute("type")&&i("button")}),[r,n]),r}function nA(){let e=(0,t.useRef)(!1);return DC((()=>(e.current=!0,()=>{e.current=!1})),[]),e}var rA=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(rA||{});let iA=xC((function(e,t){let{features:n=1,...r}=e;return TC({ourProps:{ref:t,"aria-hidden":2===(2&n)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4===(4&n)&&2!==(2&n)&&{display:"none"}}},theirProps:r,slot:{},defaultTag:"div",name:"Hidden"})}));function sA(e){let{onFocus:n}=e,[r,i]=(0,t.useState)(!0),s=nA();return r?t.createElement(iA,{as:"button",type:"button",features:rA.Focusable,onFocus:e=>{e.preventDefault();let t,r=50;t=requestAnimationFrame((function e(){if(r--<=0)t&&cancelAnimationFrame(t);else if(n()){if(cancelAnimationFrame(t),!s.current)return;i(!1)}else t=requestAnimationFrame(e)}))}}):null}function oA(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}function aA(e){return PC.isServer?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}const lA=t.createContext(null);function cA(e){let{children:n}=e,r=t.useRef({groups:new Map,get(e,t){var n;let r=this.groups.get(e);r||(r=new Map,this.groups.set(e,r));let i=null!=(n=r.get(t))?n:0;return r.set(t,i+1),[Array.from(r.keys()).indexOf(t),function(){let e=r.get(t);e>1?r.set(t,e-1):r.delete(t)}]}});return t.createElement(lA.Provider,{value:r},n)}function uA(e){let n=t.useContext(lA);if(!n)throw new Error("You must wrap your component in a <StableCollection>");let r=function(){var e,n,r;let i=null!=(r=null==(n=null==(e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)?void 0:e.ReactCurrentOwner)?void 0:n.current)?r:null;if(!i)return Symbol();let s=[],o=i;for(;o;)s.push(o.index),o=o.return;return"$."+s.join(".")}(),[i,s]=n.current.get(e,r);return t.useEffect((()=>s),[]),i}var dA=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(dA||{}),hA=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(hA||{}),fA=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(fA||{});let pA={0(e,t){var n;let r=QC(e.tabs,(e=>e.current)),i=QC(e.panels,(e=>e.current)),s=r.filter((e=>{var t;return!(null!=(t=e.current)&&t.hasAttribute("disabled"))})),o={...e,tabs:r,panels:i};if(t.index<0||t.index>r.length-1){let n=_C(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>_C(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(0===s.length)return o;let i=_C(n,{0:()=>r.indexOf(s[0]),1:()=>r.indexOf(s[s.length-1])});return{...o,selectedIndex:-1===i?e.selectedIndex:i}}let a=r.slice(0,t.index),l=[...r.slice(t.index),...a].find((e=>s.includes(e)));if(!l)return o;let c=null!=(n=r.indexOf(l))?n:e.selectedIndex;return-1===c&&(c=e.selectedIndex),{...o,selectedIndex:c}},1(e,t){var n;if(e.tabs.includes(t.tab))return e;let r=e.tabs[e.selectedIndex],i=QC([...e.tabs,t.tab],(e=>e.current)),s=null!=(n=i.indexOf(r))?n:e.selectedIndex;return-1===s&&(s=e.selectedIndex),{...e,tabs:i,selectedIndex:s}},2:(e,t)=>({...e,tabs:e.tabs.filter((e=>e!==t.tab))}),3:(e,t)=>e.panels.includes(t.panel)?e:{...e,panels:QC([...e.panels,t.panel],(e=>e.current))},4:(e,t)=>({...e,panels:e.panels.filter((e=>e!==t.panel))})},mA=(0,t.createContext)(null);function gA(e){let n=(0,t.useContext)(mA);if(null===n){let t=new Error("<".concat(e," /> is missing a parent <Tab.Group /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,gA),t}return n}mA.displayName="TabsDataContext";let vA=(0,t.createContext)(null);function yA(e){let n=(0,t.useContext)(vA);if(null===n){let t=new Error("<".concat(e," /> is missing a parent <Tab.Group /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,yA),t}return n}function wA(e,t){return _C(t.type,pA,e,t)}vA.displayName="TabsActionsContext";let bA=t.Fragment;let _A=IC.RenderStrategy|IC.Static;let IA=xC((function(e,n){var r,i;let s=MC(),{id:o="headlessui-tabs-tab-".concat(s),...a}=e,{orientation:l,activation:c,selectedIndex:u,tabs:d,panels:h}=gA("Tab"),f=yA("Tab"),p=gA("Tab"),m=(0,t.useRef)(null),g=ZC(m,n);DC((()=>f.registerTab(m)),[f,m]);let v=uA("tabs"),y=d.indexOf(m);-1===y&&(y=v);let w=y===u,b=JC((e=>{var t;let n=e();if(n===jC.Success&&"auto"===c){let e=null==(t=aA(m))?void 0:t.activeElement,n=p.tabs.findIndex((t=>t.current===e));-1!==n&&f.change(n)}return n})),_=JC((e=>{let t=d.map((e=>e.current)).filter(Boolean);if(e.key===FC.Space||e.key===FC.Enter)return e.preventDefault(),e.stopPropagation(),void f.change(y);switch(e.key){case FC.Home:case FC.PageUp:return e.preventDefault(),e.stopPropagation(),b((()=>YC(t,BC.First)));case FC.End:case FC.PageDown:return e.preventDefault(),e.stopPropagation(),b((()=>YC(t,BC.Last)))}return b((()=>_C(l,{vertical:()=>e.key===FC.ArrowUp?YC(t,BC.Previous|BC.WrapAround):e.key===FC.ArrowDown?YC(t,BC.Next|BC.WrapAround):jC.Error,horizontal:()=>e.key===FC.ArrowLeft?YC(t,BC.Previous|BC.WrapAround):e.key===FC.ArrowRight?YC(t,BC.Next|BC.WrapAround):jC.Error})))===jC.Success?e.preventDefault():void 0})),I=(0,t.useRef)(!1),E=JC((()=>{var e;I.current||(I.current=!0,null==(e=m.current)||e.focus({preventScroll:!0}),f.change(y),oA((()=>{I.current=!1})))})),T=JC((e=>{e.preventDefault()})),S=(0,t.useMemo)((()=>({selected:w})),[w]);return TC({ourProps:{ref:g,onKeyDown:_,onMouseDown:T,onClick:E,id:o,role:"tab",type:tA(e,m),"aria-controls":null==(i=null==(r=h[y])?void 0:r.current)?void 0:i.id,"aria-selected":w,tabIndex:w?0:-1},theirProps:a,slot:S,defaultTag:"button",name:"Tabs.Tab"})})),EA=xC((function(e,n){let{defaultIndex:r=0,vertical:i=!1,manual:s=!1,onChange:o,selectedIndex:a=null,...l}=e;const c=i?"vertical":"horizontal",u=s?"manual":"auto";let d=null!==a,h=ZC(n),[f,p]=(0,t.useReducer)(wA,{selectedIndex:null!=a?a:r,tabs:[],panels:[]}),m=(0,t.useMemo)((()=>({selectedIndex:f.selectedIndex})),[f.selectedIndex]),g=$C(o||(()=>{})),v=$C(f.tabs),y=(0,t.useMemo)((()=>({orientation:c,activation:u,...f})),[c,u,f]),w=JC((e=>(p({type:1,tab:e}),()=>p({type:2,tab:e})))),b=JC((e=>(p({type:3,panel:e}),()=>p({type:4,panel:e})))),_=JC((e=>{I.current!==e&&g.current(e),d||p({type:0,index:e})})),I=$C(d?e.selectedIndex:f.selectedIndex),E=(0,t.useMemo)((()=>({registerTab:w,registerPanel:b,change:_})),[]);DC((()=>{p({type:0,index:null!=a?a:r})}),[a]),DC((()=>{if(void 0===I.current||f.tabs.length<=0)return;let e=QC(f.tabs,(e=>e.current));e.some(((e,t)=>f.tabs[t]!==e))&&_(e.indexOf(f.tabs[I.current]))}));let T={ref:h};return t.createElement(cA,null,t.createElement(vA.Provider,{value:E},t.createElement(mA.Provider,{value:y},y.tabs.length<=0&&t.createElement(sA,{onFocus:()=>{var e,t;for(let n of v.current)if(0===(null==(e=n.current)?void 0:e.tabIndex))return null==(t=n.current)||t.focus(),!0;return!1}}),TC({ourProps:T,theirProps:l,slot:m,defaultTag:bA,name:"Tabs"}))))})),TA=xC((function(e,t){let{orientation:n,selectedIndex:r}=gA("Tab.List");return TC({ourProps:{ref:ZC(t),role:"tablist","aria-orientation":n},theirProps:e,slot:{selectedIndex:r},defaultTag:"div",name:"Tabs.List"})})),SA=xC((function(e,n){let{selectedIndex:r}=gA("Tab.Panels");return TC({ourProps:{ref:ZC(n)},theirProps:e,slot:(0,t.useMemo)((()=>({selectedIndex:r})),[r]),defaultTag:"div",name:"Tabs.Panels"})})),kA=xC((function(e,n){var r,i,s,o;let a=MC(),{id:l="headlessui-tabs-panel-".concat(a),tabIndex:c=0,...u}=e,{selectedIndex:d,tabs:h,panels:f}=gA("Tab.Panel"),p=yA("Tab.Panel"),m=(0,t.useRef)(null),g=ZC(m,n);DC((()=>p.registerPanel(m)),[p,m]);let v=uA("panels"),y=f.indexOf(m);-1===y&&(y=v);let w=y===d,b=(0,t.useMemo)((()=>({selected:w})),[w]),_={ref:g,id:l,role:"tabpanel","aria-labelledby":null==(i=null==(r=h[y])?void 0:r.current)?void 0:i.id,tabIndex:w?c:-1};return w||null!=(s=u.unmount)&&!s||null!=(o=u.static)&&o?TC({ourProps:_,theirProps:u,slot:b,defaultTag:"div",features:_A,visible:w,name:"Tabs.Panel"}):t.createElement(iA,{as:"span",..._})})),xA=Object.assign(IA,{Group:EA,List:TA,Panels:SA,Panel:kA});const CA=n.p+"static/media/plus.96157a559cf3dc8a117aa8c0d538ed26.svg";const AA=n.p+"static/media/close-black.2b4a89f010de2d95fcc533008a828cbe.svg";var NA,RA,PA;const DA=Ie(NA||(NA=s(["\n  /* \u30e2\u30fc\u30c0\u30eb\u306e\u30b9\u30bf\u30a4\u30eb */\n  position: fixed;\n  top: 45%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  z-index: 30;\n  background-color: #fff;\n  height: 70vh;\n  max-width: 540px;\n  width: 85vw;\n  border: 2px solid #333;\n  border-radius: 10px;\n  padding: 30px 10px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  overflow-y: auto;\n"]))),OA=Ie(RA||(RA=s(["\n  position: absolute;\n  top: 20px;\n  right: 20px;\n"]))),LA=Ie(PA||(PA=s(["\n  padding: 50px 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 18px;\n"]))),MA=e=>{let{onClose:t,children:n}=e;return pn("div",{css:DA,children:[fn("button",{css:OA,onClick:t,children:fn("img",{src:AA,alt:"\u9589\u3058\u308b",width:40,height:40})}),n&&fn("div",{css:LA,children:n})]})};var FA,UA,VA;const zA=Ie(FA||(FA=s(["\n  position: absolute;\n  top: 20px;\n  right: 20px;\n"]))),BA=Ie(UA||(UA=s(["\n  display: grid;\n  width: 100%;\n  gap: 30px;\n  & > label {\n    display: grid;\n    gap: 10px;\n    & > input {\n      width: 100%;\n      border-radius: 10px;\n      border: 1.5px solid #333;\n      padding: 12px 20px;\n    }\n    &:last-of-type > input {\n      height: 250px;\n    }\n  }\n"]))),jA=Ie(VA||(VA=s(["\n  border: 2px solid #333;\n  border-radius: 100px;\n  padding: 15px 32px;\n  background-color: #333333;\n  color: #fff;\n  margin-right: auto;\n  margin-left: auto;\n  cursor: pointer;\n  @media (max-width: 500px) {\n    width: 100%;\n  }\n"]))),qA=e=>{let{onClose:t,newPost:n,newPostTitle:r,onNewPostTitleChange:i,onNewPostChange:s}=e;return pn(Yx,{buttonText:"\u6295\u7a3f\u3059\u308b",children:[fn("button",{css:zA,onClick:t,children:fn("img",{src:AA,alt:"\u9589\u3058\u308b",width:40,height:40})}),fn("div",{children:pn("form",{onSubmit:async e=>{if(e.preventDefault(),n.trim())try{var i;await Ux.collection("posts").add({title:r,content:n,date:(new Date).getTime(),userId:null===(i=di.auth().currentUser)||void 0===i?void 0:i.uid}),t()}catch(s){console.error("Error adding post: ",s)}},css:BA,children:[pn("label",{children:["\u25bc \u30bf\u30a4\u30c8\u30eb",fn("input",{type:"text",value:r,onChange:i,placeholder:"\u30bf\u30a4\u30c8\u30eb\u3092\u5165\u529b"})]}),pn("label",{children:["\u25bc \u672c\u6587",fn("input",{type:"text",value:n,onChange:s,placeholder:"\u6295\u7a3f\u5185\u5bb9\u3092\u5165\u529b"})]}),fn("input",{type:"submit",value:"\u6295\u7a3f",css:jA})]})})]})};var GA,WA,HA,KA,QA,YA,$A,JA,XA,ZA,eN,tN;const nN=Ie(GA||(GA=s(["\n  max-width: 600px;\n  margin: 0 auto;\n  padding-top: 30px;\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  min-height: 100vh;\n  position: relative;\n"]))),rN=Ie(WA||(WA=s(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  & > button {\n    padding-right: 18px;\n  }\n"]))),iN=Ie(HA||(HA=s(["\n  font-size: 20px;\n  font-weight: bold;\n  padding: 10px 26px;\n  color: #333;\n"]))),sN=Ie(KA||(KA=s(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  gap: 15px;\n"]))),oN=Ie(QA||(QA=s(["\n  background-color: #eee;\n  border-top: 1px solid #333;\n  border-left: 1px solid #333;\n  border-right: 1px solid #333;\n  padding: 10px 60px 6px;\n  position: relative;\n  bottom: 0;\n  border-radius: 6px 6px 0 0;\n  z-index: 0;\n"]))),aN=Ie(YA||(YA=s(['\n  background-color: #fff;\n  top: 4px;\n  padding: 10px 60px;\n  &::after {\n    position: absolute;\n    left: -2px;\n    bottom: -7px;\n    content: "";\n    width: 120%;\n    height: 10px;\n    background-color: #fff;\n  }\n']))),lN=Ie($A||($A=s(["\n  background-color: #fff;\n  border-top: 1px solid #333;\n"]))),cN=Ie(JA||(JA=s(["\n  display: grid;\n  grid-template-columns: 56px 1fr;\n  grid-template-rows: 56px;\n  align-items: center;\n  justify-items: flex-start;\n  gap: 16px;\n  padding: 10px;\n  border-radius: 8px;\n  transition: background-color 0.2s;\n  @media (any-hover: hover) {\n    &:hover {\n      background-color: #eee;\n    }\n  }\n  @media (max-width: 500px) {\n    background-color: #eee;\n  }\n"]))),uN=Ie(XA||(XA=s(["\n  text-align: left;\n"]))),dN=Ie(ZA||(ZA=s(["\n  border-radius: 50%;\n  width: 56px;\n  height: 56px;\n  object-fit: cover;\n"]))),hN=Ie(eN||(eN=s(["\n  font-size: 16px;\n  margin-bottom: 2px;\n"]))),fN=Ie(tN||(tN=s(["\n  font-size: 12px;\n  color: #666666;\n"]))),pN=()=>{var e;const[n,r]=(0,t.useState)(!1),[i,s]=(0,t.useState)(!1),[o,a]=(0,t.useState)([]),[l,c]=(0,t.useState)(""),[u,d]=(0,t.useState)(""),[h,f]=(0,t.useState)("chat"),p=null===(e=di.auth().currentUser)||void 0===e?void 0:e.uid,m=gt(),g=pt();(0,t.useEffect)((()=>{const e=g.pathname;e.includes("/contact/chat")?f("chat"):e.includes("/contact/board")&&f("board")}),[g.pathname]),(0,t.useEffect)((()=>{(async()=>{const e=(await Ux.collection("users").get()).docs.filter((e=>e.id!==p)).map((e=>({id:e.id,name:e.data().name,image:e.data().image,comment:e.data().comment})));a(e)})()}),[p]);return pn("div",{css:nN,children:[pn("div",{css:rN,children:[fn("h1",{css:iN,children:"\u9023\u7d61"}),fn("button",{onClick:()=>{g.pathname.includes("/contact/chat")?r(!0):g.pathname.includes("/contact/board")&&s(!0)},children:fn("img",{src:CA,alt:"\u8ffd\u52a0"})})]}),fn(xA.Group,{children:pn(xA.List,{css:sN,children:[fn(xA,{as:Ht,to:"chat",children:fn("div",{css:[oN,"chat"===h&&aN],children:fn("p",{children:"\u30e1\u30c3\u30bb\u30fc\u30b8"})})}),fn(xA,{as:Ht,to:"board",children:fn("div",{css:[oN,"board"===h&&aN],children:fn("p",{children:"\u63b2\u793a\u677f"})})})]})}),pn("div",{css:lN,children:[fn(Pt,{context:{isNewChatModalOpen:n,setIsNewChatModalOpen:r,users:o}}),n&&fn(MA,{onClose:()=>r(!1),children:o.map((e=>pn("button",{css:cN,onClick:()=>{return t=e.id,void m("/contact/chat/".concat(t));var t},children:[fn("img",{src:e.image,css:dN,alt:"",width:56,height:56}),pn("div",{css:uN,children:[fn("p",{css:hN,children:e.name}),fn("p",{css:fN,children:e.comment})]})]},e.id)))}),i&&fn(qA,{newPostTitle:u,newPost:l,onNewPostTitleChange:e=>{d(e.target.value)},onNewPostChange:e=>{c(e.target.value)},onClose:()=>s(!1)})]})]})};const mN=n.p+"static/media/search.0b850d80e65b1109c3b361cf79507b8e.svg",gN=[{value:"\u30e6\u30cb\u30c3\u30c8",color:"#eb8ddd"},{value:"\u5f93\u6765",color:"#235980"},{value:"\u30c7\u30a4\u30b5\u30fc\u30d3\u30b9",color:"#c37100"}],vN=[{value:"1A",color:"#a63c3b"},{value:"1B",color:"#6e8b37"},{value:"2A",color:"#3c75a7"},{value:"2B",color:"#9d499d"}];const yN=n.p+"static/media/close.720b476b9ec20a374ed98f4f7a96f79e.svg";const wN=n.p+"static/media/eating.842c1929f5c8ef3f78a30c3a26d1e5eb.svg";const bN=n.p+"static/media/drink.e085d721f98df7edc13faf2d0cc17f17.svg";const _N=n.p+"static/media/toilet.c9a012af7f9f5e7e371f2448c4582c1d.svg";const IN=n.p+"static/media/thermometer.f59575320df7b1874a48bd51db973e99.svg";const EN=n.p+"static/media/bath.18b395bc367da88470fce7bc2660eec1.svg";const TN=n.p+"static/media/dentifrice.33cad00f336b3a31b0fcfd9f376981dd.svg";const SN=n.p+"static/media/scale.e0da622d14f85c07fec375b0821f20e0.svg";const kN=n.p+"static/media/contact.b8e413c6b43136f20862702eca5f48e2.svg";const xN=[{label:"eating",value:"\u98df\u4e8b",color:"#6277FE",icon:wN,selectedIcon:n.p+"static/media/eating-active.7389cdae11c822c422e163583777df4c.svg"},{label:"drinking",value:"\u6c34\u5206",color:"#D88E18",icon:bN,selectedIcon:n.p+"static/media/drink-active.5fcb57f7601eb2fc2d0c5dc7909a6c58.svg"},{label:"excretion",value:"\u6392\u6cc4",color:"#E65CCF",icon:_N,selectedIcon:n.p+"static/media/toilet-active.c7c56a40eb16237784aae55b67a79a6a.svg"},{label:"vital",value:"\u30d0\u30a4\u30bf\u30eb",color:"#30AC51",icon:IN,selectedIcon:n.p+"static/media/thermometer-active.40220802994c7817c754a4491fc9be89.svg"},{label:"bathing",value:"\u5165\u6d74",color:"#C3292F",icon:EN,selectedIcon:n.p+"static/media/bath-active.d9e19ad9108a4afc71f8de41059aeb88.svg"},{label:"oral",value:"\u53e3\u8154",color:"#993BAB",icon:TN,selectedIcon:n.p+"static/media/dentifrice-active.e98f323aadb256b1c6b06c533d7c37de.svg"},{label:"weight",value:"\u4f53\u91cd",color:"#167E56",icon:SN,selectedIcon:n.p+"static/media/scale-active.61b50655ad4923f83ae645c47c1815ca.svg"},{label:"contact",value:"\u9023\u7d61",color:"#DF6F33",icon:kN,selectedIcon:n.p+"static/media/contact-active.b451e6ba00a581754f1434b17395e77c.svg"}];var CN,AN,NN,RN,PN,DN,ON,LN,MN,FN;const UN=Ie(CN||(CN=s(["\n  display: flex;\n  position: relative;\n"]))),VN=Ie(AN||(AN=s(["\n  border-radius: 100px;\n  border: 1px solid #333;\n  padding: 15px 20px;\n  width: 100%;\n  position: relative;\n  z-index: 1;\n  font-size: 15px;\n"]))),zN=Ie(NN||(NN=s(["\n  background-color: #eee;\n"]))),BN=Ie(RN||(RN=s(["\n  position: absolute;\n  z-index: 0;\n  top: 6px;\n  border-radius: 100px;\n  width: 100%;\n  height: 100%;\n  background-color: #333;\n"]))),jN=Ie(PN||(PN=s(["\n  position: absolute;\n  z-index: 1;\n  top: 50%;\n  right: 15px;\n  cursor: pointer;\n  transform: translateY(-50%);\n  padding: 10px;\n"]))),qN=Ie(DN||(DN=s(["\n  position: absolute;\n  z-index: 1;\n  top: 50%;\n  right: 60px;\n  transform: translateY(-50%);\n  display: flex;\n  gap: 4px;\n"]))),GN=Ie(ON||(ON=s(['\n  width: auto;\n  font-size: 12px;\n  color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 2px;\n  padding: 5px 16px 5px 10px;\n  border-radius: 100px;\n  border: 1px solid #333;\n  transition: background-color 0.2s ease;\n  // \u9589\u3058\u308b\u30a2\u30a4\u30b3\u30f3\n  &::before {\n    content: "";\n    width: 16px;\n    height: 16px;\n    background-image: url(',');\n    background-size: 16px;\n    font-family: "Zen Maru Gothic", serif;\n  }\n'])),yN),WN=e=>{var t,n,r;let{isDisabled:i,selectedDepartment:o,selectedRoom:a,selectedItem:l,onDepartmentClick:c,onRoomClick:u,onItemClick:d}=e;return pn("div",{css:UN,children:[fn("input",{css:[VN,i&&zN],type:"text",placeholder:"\u691c\u7d22\u3059\u308b",disabled:i}),fn("span",{css:BN}),fn("button",{css:jN,type:"submit",children:fn("img",{src:mN,alt:"\u691c\u7d22\u3059\u308b",width:22,height:22})}),pn("div",{css:[qN],children:[o&&fn("button",{css:[GN,Ie(LN||(LN=s(["\n                background-color: ",";\n              "])),null===(t=gN.find((e=>e.value===o)))||void 0===t?void 0:t.color)],onClick:()=>{c(o)},children:o}),a&&fn("button",{css:[GN,Ie(MN||(MN=s(["\n                background-color: ",";\n              "])),null===(n=vN.find((e=>e.value===a)))||void 0===n?void 0:n.color)],onClick:()=>{u(a)},children:a}),l&&fn("button",{css:[GN,Ie(FN||(FN=s(["\n                background-color: ",";\n              "])),null===(r=xN.find((e=>e.value===l)))||void 0===r?void 0:r.color)],onClick:()=>{d(l)},children:l})]})]})};let HN=(0,t.createContext)(null);function KN(){let e=(0,t.useContext)(HN);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,KN),e}return e}function QN(){let[e,n]=(0,t.useState)([]);return[e.length>0?e.join(" "):void 0,(0,t.useMemo)((()=>function(e){let r=JC((e=>(n((t=>[...t,e])),()=>n((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),i=(0,t.useMemo)((()=>({register:r,slot:e.slot,name:e.name,props:e.props})),[r,e.slot,e.name,e.props]);return t.createElement(HN.Provider,{value:i},e.children)}),[n])]}let YN=xC((function(e,t){let n=MC(),{id:r="headlessui-label-".concat(n),passive:i=!1,...s}=e,o=KN(),a=ZC(t);DC((()=>o.register(r)),[r,o.register]);let l={ref:a,...o.props,id:r};return i&&("onClick"in l&&(delete l.htmlFor,delete l.onClick),"onClick"in s&&delete s.onClick),TC({ourProps:l,theirProps:s,slot:o.slot||{},defaultTag:"label",name:o.name||"Label"})})),$N=Object.assign(YN,{}),JN=(0,t.createContext)(null);function XN(){let e=(0,t.useContext)(JN);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,XN),e}return e}function ZN(){let[e,n]=(0,t.useState)([]);return[e.length>0?e.join(" "):void 0,(0,t.useMemo)((()=>function(e){let r=JC((e=>(n((t=>[...t,e])),()=>n((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),i=(0,t.useMemo)((()=>({register:r,slot:e.slot,name:e.name,props:e.props})),[r,e.slot,e.name,e.props]);return t.createElement(JN.Provider,{value:i},e.children)}),[n])]}let eR=xC((function(e,t){let n=MC(),{id:r="headlessui-description-".concat(n),...i}=e,s=XN(),o=ZC(t);return DC((()=>s.register(r)),[r,s.register]),TC({ourProps:{ref:o,...s.props,id:r},theirProps:i,slot:s.slot||{},defaultTag:"p",name:s.name||"Description"})})),tR=Object.assign(eR,{});function nR(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let[r,i]of Object.entries(e))iR(n,rR(t,r),i);return n}function rR(e,t){return e?e+"["+t+"]":t}function iR(e,t,n){if(Array.isArray(n))for(let[r,i]of n.entries())iR(e,rR(t,r.toString()),i);else n instanceof Date?e.push([t,n.toISOString()]):"boolean"==typeof n?e.push([t,n?"1":"0"]):"string"==typeof n?e.push([t,n]):"number"==typeof n?e.push([t,"".concat(n)]):null==n?e.push([t,""]):nR(n,t,e)}function sR(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=""===(null==t?void 0:t.getAttribute("disabled"));return(!r||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(n))&&r}function oR(){let e=[],t={addEventListener:(e,n,r,i)=>(e.addEventListener(n,r,i),t.add((()=>e.removeEventListener(n,r,i)))),requestAnimationFrame(){let e=requestAnimationFrame(...arguments);return t.add((()=>cancelAnimationFrame(e)))},nextFrame(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.requestAnimationFrame((()=>t.requestAnimationFrame(...n)))},setTimeout(){let e=setTimeout(...arguments);return t.add((()=>clearTimeout(e)))},microTask(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let i={current:!0};return oA((()=>{i.current&&n[0]()})),t.add((()=>{i.current=!1}))},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add((()=>{Object.assign(e.style,{[t]:r})}))},group(e){let t=oR();return e(t),this.add((()=>t.dispose()))},add:t=>(e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}var aR=(e=>(e[e.RegisterOption=0]="RegisterOption",e[e.UnregisterOption=1]="UnregisterOption",e))(aR||{});let lR={0(e,t){let n=[...e.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...e,options:QC(n,(e=>e.element.current))}},1(e,t){let n=e.options.slice(),r=e.options.findIndex((e=>e.id===t.id));return-1===r?e:(n.splice(r,1),{...e,options:n})}},cR=(0,t.createContext)(null);function uR(e){let n=(0,t.useContext)(cR);if(null===n){let t=new Error("<".concat(e," /> is missing a parent <RadioGroup /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,uR),t}return n}cR.displayName="RadioGroupDataContext";let dR=(0,t.createContext)(null);function hR(e){let n=(0,t.useContext)(dR);if(null===n){let t=new Error("<".concat(e," /> is missing a parent <RadioGroup /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,hR),t}return n}function fR(e,t){return _C(t.type,lR,e,t)}dR.displayName="RadioGroupActionsContext";var pR=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(pR||{});let mR=xC((function(e,n){let r=MC(),{id:i="headlessui-radiogroup-".concat(r),value:s,defaultValue:o,form:a,name:l,onChange:c,by:u=((e,t)=>e===t),disabled:d=!1,...h}=e,f=JC("string"==typeof u?(e,t)=>{let n=u;return(null==e?void 0:e[n])===(null==t?void 0:t[n])}:u),[p,m]=(0,t.useReducer)(fR,{options:[]}),g=p.options,[v,y]=QN(),[w,b]=ZN(),_=(0,t.useRef)(null),I=ZC(_,n),[E,T]=function(e,n,r){let[i,s]=(0,t.useState)(r),o=void 0!==e,a=(0,t.useRef)(o),l=(0,t.useRef)(!1),c=(0,t.useRef)(!1);return!o||a.current||l.current?!o&&a.current&&!c.current&&(c.current=!0,a.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(l.current=!0,a.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[o?e:i,JC((e=>(o||s(e),null==n?void 0:n(e))))]}(s,c,o),S=(0,t.useMemo)((()=>g.find((e=>!e.propsRef.current.disabled))),[g]),k=(0,t.useMemo)((()=>g.some((e=>f(e.propsRef.current.value,E)))),[g,E]),x=JC((e=>{var t;if(d||f(e,E))return!1;let n=null==(t=g.find((t=>f(t.propsRef.current.value,e))))?void 0:t.propsRef.current;return(null==n||!n.disabled)&&(null==T||T(e),!0)}));!function(e){let{container:n,accept:r,walk:i,enabled:s=!0}=e,o=(0,t.useRef)(r),a=(0,t.useRef)(i);(0,t.useEffect)((()=>{o.current=r,a.current=i}),[r,i]),DC((()=>{if(!n||!s)return;let e=aA(n);if(!e)return;let t=o.current,r=a.current,i=Object.assign((e=>t(e)),{acceptNode:t}),l=e.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,i,!1);for(;l.nextNode();)r(l.currentNode)}),[n,s,o,a])}({container:_.current,accept:e=>"radio"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let C=JC((e=>{let t=_.current;if(!t)return;let n=aA(t),r=g.filter((e=>!1===e.propsRef.current.disabled)).map((e=>e.element.current));switch(e.key){case FC.Enter:!function(e){var t,n;let r=null!=(t=null==e?void 0:e.form)?t:e.closest("form");if(r){for(let t of r.elements)if(t!==e&&("INPUT"===t.tagName&&"submit"===t.type||"BUTTON"===t.tagName&&"submit"===t.type||"INPUT"===t.nodeName&&"image"===t.type))return void t.click();null==(n=r.requestSubmit)||n.call(r)}}(e.currentTarget);break;case FC.ArrowLeft:case FC.ArrowUp:if(e.preventDefault(),e.stopPropagation(),YC(r,BC.Previous|BC.WrapAround)===jC.Success){let e=g.find((e=>e.element.current===(null==n?void 0:n.activeElement)));e&&x(e.propsRef.current.value)}break;case FC.ArrowRight:case FC.ArrowDown:if(e.preventDefault(),e.stopPropagation(),YC(r,BC.Next|BC.WrapAround)===jC.Success){let e=g.find((e=>e.element.current===(null==n?void 0:n.activeElement)));e&&x(e.propsRef.current.value)}break;case FC.Space:{e.preventDefault(),e.stopPropagation();let t=g.find((e=>e.element.current===(null==n?void 0:n.activeElement)));t&&x(t.propsRef.current.value)}}})),A=JC((e=>(m({type:0,...e}),()=>m({type:1,id:e.id})))),N=(0,t.useMemo)((()=>({value:E,firstOption:S,containsCheckedOption:k,disabled:d,compare:f,...p})),[E,S,k,d,f,p]),R=(0,t.useMemo)((()=>({registerOption:A,change:x})),[A,x]),P={ref:I,id:i,role:"radiogroup","aria-labelledby":v,"aria-describedby":w,onKeyDown:C},D=(0,t.useMemo)((()=>({value:E})),[E]),O=(0,t.useRef)(null),L=function(){let[e]=(0,t.useState)(oR);return(0,t.useEffect)((()=>()=>e.dispose()),[e]),e}();return(0,t.useEffect)((()=>{O.current&&void 0!==o&&L.addEventListener(O.current,"reset",(()=>{x(o)}))}),[O,x]),t.createElement(b,{name:"RadioGroup.Description"},t.createElement(y,{name:"RadioGroup.Label"},t.createElement(dR.Provider,{value:R},t.createElement(cR.Provider,{value:N},null!=l&&null!=E&&nR({[l]:E}).map(((e,n)=>{let[r,i]=e;return t.createElement(iA,{features:rA.Hidden,ref:0===n?e=>{var t;O.current=null!=(t=null==e?void 0:e.closest("form"))?t:null}:void 0,...CC({key:r,as:"input",type:"radio",checked:null!=i,hidden:!0,readOnly:!0,form:a,name:r,value:i})})})),TC({ourProps:P,theirProps:h,slot:D,defaultTag:"div",name:"RadioGroup"})))))})),gR=xC((function(e,n){var r;let i=MC(),{id:s="headlessui-radiogroup-option-".concat(i),value:o,disabled:a=!1,...l}=e,c=(0,t.useRef)(null),u=ZC(c,n),[d,h]=QN(),[f,p]=ZN(),{addFlag:m,removeFlag:g,hasFlag:v}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[n,r]=(0,t.useState)(e),i=nA(),s=(0,t.useCallback)((e=>{i.current&&r((t=>t|e))}),[n,i]),o=(0,t.useCallback)((e=>Boolean(n&e)),[n]),a=(0,t.useCallback)((e=>{i.current&&r((t=>t&~e))}),[r,i]),l=(0,t.useCallback)((e=>{i.current&&r((t=>t^e))}),[r]);return{flags:n,addFlag:s,hasFlag:o,removeFlag:a,toggleFlag:l}}(1),y=$C({value:o,disabled:a}),w=uR("RadioGroup.Option"),b=hR("RadioGroup.Option");DC((()=>b.registerOption({id:s,element:c,propsRef:y})),[s,b,c,e]);let _=JC((e=>{var t;if(sR(e.currentTarget))return e.preventDefault();b.change(o)&&(m(2),null==(t=c.current)||t.focus())})),I=JC((e=>{if(sR(e.currentTarget))return e.preventDefault();m(2)})),E=JC((()=>g(2))),T=(null==(r=w.firstOption)?void 0:r.id)===s,S=w.disabled||a,k=w.compare(w.value,o),x={ref:u,id:s,role:"radio","aria-checked":k?"true":"false","aria-labelledby":d,"aria-describedby":f,"aria-disabled":!!S||void 0,tabIndex:S?-1:k||!w.containsCheckedOption&&T?0:-1,onClick:S?void 0:_,onFocus:S?void 0:I,onBlur:S?void 0:E},C=(0,t.useMemo)((()=>({checked:k,disabled:S,active:v(2)})),[k,S,v]);return t.createElement(p,{name:"RadioGroup.Description"},t.createElement(h,{name:"RadioGroup.Label"},TC({ourProps:x,theirProps:l,slot:C,defaultTag:"div",name:"RadioGroup.Option"})))})),vR=Object.assign(mR,{Option:gR,Label:$N,Description:tR});var yR,wR,bR,_R,IR,ER,TR;const SR=Ie(yR||(yR=s(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 14px;\n"]))),kR=Ie(wR||(wR=s(["\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n"]))),xR=Ie(bR||(bR=s(["\n  width: 58px;\n  height: 58px;\n  display: grid;\n  place-items: center;\n  border-radius: 10px;\n  border: 1.6px solid #333;\n  transition: background-color 0.2s ease;\n"]))),CR=Ie(_R||(_R=s(["\n  @media (any-hover: hover) {\n    &:hover {\n      background-color: #ddd;\n    }\n  }\n"]))),AR=Ie(IR||(IR=s(["\n  font-size: 11px;\n  width: 100%;\n  text-align: center;\n  padding-top: 2px;\n  padding-bottom: 2px;\n  border: 1.6px solid #333;\n  border-radius: 50px;\n  color: #fff;\n"]))),NR=e=>{let{onClick:t,selectedItem:n}=e;return fn(vR,{css:SR,value:n,onChange:e=>{n!==e&&t(e)},children:xN.map(((e,t)=>e?fn(vR.Option,{css:kR,value:e.value,children:t=>{let{checked:n}=t;return pn(hn,{children:[fn("span",{css:[xR,!n&&CR,n&&Ie(ER||(ER=s(["\n                        background-color: ",";\n                      "])),e.color)],children:fn("img",{alt:e.label,src:n?e.selectedIcon:e.icon})}),fn("span",{css:[AR,Ie(TR||(TR=s(["\n                      background-color: ",";\n                    "])),e.color)],children:e.value})]})}},t):null))})},RR=[{department:"\u30c7\u30a4\u30b5\u30fc\u30d3\u30b9",room:"",name:"\u5c71\u7530\u592a\u90ce"},{department:"\u30c7\u30a4\u30b5\u30fc\u30d3\u30b9",room:"",name:"\u5ca1\u7530 \u8fb0\u592b"},{department:"\u5f93\u6765",room:"",name:"\u53e4\u7530 \u592a\u90ce"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1A",name:"\u5c71\u7530 \u592a\u90ce",records:{eating:{value:"\u98df\u4e8b",time:"2023/12/11 14:10",detail:" \u3068\u308d\u307f 6\u5272",manager:"\u5ca9\u9593 \u65e5\u83dc",managerThumbnail:"iwamahina"},drinking:{value:"\u6c34\u5206",time:"2023/12/11 14:30",detail:"\u304a\u8336 100ml",manager:"\u5ca9\u9593 \u65e5\u83dc",managerThumbnail:"iwamahina"},excretion:{value:"\u6392\u6cc4",time:"2023/12/11 14:10",detail:"\u304a\u8336 100ml",manager:"\u5ca9\u9593 \u65e5\u83dc",managerThumbnail:"iwamahina"}}},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1A",name:"\u9234\u6728 \u4e00\u90ce",records:{eating:{value:"\u98df\u4e8b",time:"2023/12/11 14:20",detail:"\u5168\u7ca5 8\u5272",manager:"\u5ca9\u9593 \u65e5\u83dc",managerThumbnail:"iwamahina"},drinking:{value:"\u6c34\u5206",time:"2023/12/11 13:10",detail:"\u304a\u8336 100ml",manager:"\u5c71\u7530 \u82b1\u5b50",managerThumbnail:"yamadahanako"}}},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1A",name:"\u7530\u4e2d \u82b1\u5b50",records:{excretion:{value:"\u6392\u6cc4",time:"2023/12/11 14:50",detail:"\u5c0f",manager:"\u5c71\u7530 \u82b1\u5b50",managerThumbnail:"yamadahanako"}}},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1A",name:"\u5ca1\u672c \u3088\u3057\u5b50",records:{drinking:{value:"\u6c34\u5206",time:"2023/12/11 14:30",detail:"\u304a\u8336 100ml",manager:"\u5c71\u7530 \u82b1\u5b50",managerThumbnail:"yamadahanako"},excretion:{value:"\u6392\u6cc4",time:"2023/12/11 14:10",detail:"\u304a\u8336 100ml",manager:"\u5ca9\u9593 \u65e5\u83dc",managerThumbnail:"iwamahina"}}},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1A",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1B",name:"\u7530\u4e2d \u82b1\u5b50",records:{eating:{value:"\u98df\u4e8b",time:"2023/12/11 14:10",detail:" \u3068\u308d\u307f 6\u5272",manager:"\u5ca9\u9593 \u65e5\u83dc",managerThumbnail:"iwamahina"}}},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2A",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2A",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2A",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2A",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2A",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2B",name:"\u7530\u4e2d \u82b1\u5b50"}];var PR,DR,OR,LR,MR,FR,UR,VR,zR,BR,jR,qR,GR,WR,HR,KR,QR;const YR=Ie(PR||(PR=s(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  flex-wrap: wrap;\n  column-gap: 16px;\n  row-gap: 30px;\n  @media (max-width: 420px) {\n    grid-template-columns: repeat(1, 1fr);\n  }\n"]))),$R=Ie(DR||(DR=s(["\n  display: flex;\n  flex-wrap: wrap;\n  cursor: pointer;\n  position: relative;\n"]))),JR=Ie(OR||(OR=s(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n  min-width: 180px;\n  width: 100%;\n  padding: 30px 20px;\n  border: 1.6px solid #333;\n  position: relative;\n  z-index: 1;\n  border-radius: 10px;\n  background-color: #fff;\n"]))),XR=Ie(LR||(LR=s(["\n  position: absolute;\n  top: 6px;\n  left: 0;\n  background-color: #3c75a7;\n  width: 100%;\n  height: 100%;\n  border-radius: 10px;\n  border: 1.6px solid #333;\n  box-sizing: border-box;\n"]))),ZR=Ie(MR||(MR=s(["\n  position: absolute;\n  top: -18px;\n  left: 50%;\n  padding: 8px 24px;\n  font-size: 14px;\n  white-space: nowrap;\n  transform: translateX(-50%);\n  background-color: #3c75a7;\n  border-radius: 40px;\n  border: 1.6px solid #333;\n  color: #fff;\n"]))),eP=Ie(FR||(FR=s(["\n  display: flex;\n  gap: 4px;\n  font-size: 14px;\n  align-items: flex-end;\n  justify-content: center;\n"]))),tP=Ie(UR||(UR=s(["\n  font-size: 24px;\n"]))),nP=Ie(VR||(VR=s(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n"]))),rP=Ie(zR||(zR=s(["\n  position: relative;\n"]))),iP=Ie(BR||(BR=s(["\n  width: 40px;\n  height: 40px;\n  display: grid;\n  place-items: center;\n  border-radius: 7px;\n  border: 1.6px solid #333;\n"]))),sP=Ie(jR||(jR=s(["\n  border-radius: 50%;\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  top: 35%;\n  left: 45%;\n"]))),oP=Ie(qR||(qR=s(['\n  font-size: 14px;\n  position: relative;\n  display: flex;\n  font-weight: bold;\n  gap: 8px;\n  &::before {\n    content: "\u3010";\n  }\n  &::after {\n    content: "\u3011";\n  }\n']))),aP=e=>{let{selectedDepartment:t,selectedRoom:r,selectedItem:i}=e;return fn("div",{css:YR,children:RR.filter((e=>(!t||e.department===t)&&(!r||e.room===r)&&(!i||e.records&&((e,t)=>void 0!==t&&e&&Object.values(e).some((e=>e&&e.value===t)))(e.records,i)))).map(((e,t)=>{var r,o,a,l,c,u,d,h,f,p,m;return pn("div",{css:$R,children:[pn("div",{css:JR,children:[pn("span",{css:[ZR,e.department&&gN.map((t=>e.department===t.value&&Ie(GR||(GR=s(["\n                          background-color: ",";\n                        "])),t.color))),e.room&&vN.map((t=>e.room===t.value&&Ie(WR||(WR=s(["\n                          background-color: ",";\n                        "])),t.color)))],children:[e.department,e.room]}),pn("p",{css:eP,children:[fn("span",{css:tP,children:e.name}),"\u69d8"]}),e.records&&i&&xN.find((e=>e.value===i))&&pn("div",{css:nP,children:[pn("div",{css:rP,children:[fn("span",{css:[iP,Ie(HR||(HR=s(["\n                            background-color: ",";\n                          "])),null===(r=xN.find((e=>e.value===i)))||void 0===r?void 0:r.color)],children:fn("img",{alt:i,src:null===(o=xN.find((e=>e.value===i)))||void 0===o?void 0:o.selectedIcon,width:22,height:22})}),i&&e.records&&fn("img",{src:n(318)("./".concat(null===(a=e.records[null===(l=xN.find((e=>e.value===i)))||void 0===l?void 0:l.label])||void 0===a?void 0:a.managerThumbnail,".jpg")),alt:"\u6700\u7d42\u8a18\u9332\u8005\uff1a".concat(null===(c=e.records[null===(u=xN.find((e=>e.value===i)))||void 0===u?void 0:u.label])||void 0===c?void 0:c.manager),css:sP})]}),fn("div",{children:i&&e.records&&pn(hn,{children:[fn("p",{css:oP,children:(m=(null===(d=e.records[null===(h=xN.find((e=>e.value===i)))||void 0===h?void 0:h.label])||void 0===d?void 0:d.time)||"",new Date(m).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}))}),fn("p",{css:oP,children:(null===(f=e.records[null===(p=xN.find((e=>e.value===i)))||void 0===p?void 0:p.label])||void 0===f?void 0:f.detail)||""})]})})]})]}),fn("div",{css:[XR,e.department&&gN.map((t=>e.department===t.value&&Ie(KR||(KR=s(["\n                        background-color: ",";\n                      "])),t.color))),e.room&&vN.map((t=>e.room===t.value&&Ie(QR||(QR=s(["\n                        background-color: ",";\n                      "])),t.color)))]})]},t)}))})};var lP,cP,uP,dP,hP,fP;const pP=Ie(lP||(lP=s(["\n  display: grid;\n  gap: 12px;\n"]))),mP=Ie(cP||(cP=s(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n"]))),gP=Ie(uP||(uP=s(['\n  display: flex;\n  position: relative;\n  z-index: 1;\n  font-weight: bold;\n  border-radius: 100px;\n  cursor: pointer;\n  &::after {\n    content: "";\n    box-sizing: border-box;\n    position: absolute;\n    z-index: -1;\n    left: 0;\n    top: 4px;\n    border-radius: 100px;\n    width: 100%;\n    height: 100%;\n    border: 1px solid #333;\n  }\n']))),vP=Ie(dP||(dP=s(["\n  color: #fff;\n"]))),yP=Ie(hP||(hP=s(["\n  background-color: #fff;\n  padding: 8px 20px;\n  border-radius: 100px;\n  border: 1px solid #333;\n  transition: background-color 0.2s ease;\n"]))),wP=Ie(fP||(fP=s(["\n  padding: 4px 20px;\n  font-size: 14px;\n"])));var bP,_P,IP,EP,TP,SP;const kP=e=>{let{onDepartmentClick:t,onRoomClick:n,selectedDepartment:r,selectedRoom:i}=e;return fn(hn,{children:pn("div",{css:pP,children:[fn(vR,{css:mP,value:r,onChange:e=>{t&&t(e)},children:gN.map(((e,t)=>e?fn(vR.Option,{value:e.value,children:t=>{let{checked:n}=t;return fn("div",{css:[gP,Ie(bP||(bP=s(["\n                        color: ",";\n                        &::after {\n                          background-color: ",";\n                        }\n                      "])),e.color,e.color),n&&vP,n&&Ie(_P||(_P=s(["\n                          background-color: ",";\n                        "])),e.color)],children:fn("span",{css:[yP,n&&vP,n&&Ie(IP||(IP=s(["\n                            background-color: ",";\n                          "])),e.color)],children:e.value})})}},t):null))}),"\u30e6\u30cb\u30c3\u30c8"===r&&fn(vR,{css:mP,value:i,onChange:e=>{n&&n(e)},children:vN.map(((e,t)=>e?fn(vR.Option,{value:e.value,children:t=>{let{checked:n}=t;return fn("div",{css:[gP,Ie(EP||(EP=s(["\n                          color: ",";\n                          &::after {\n                            background-color: ",";\n                          }\n                        "])),e.color,e.color),n&&vP,n&&Ie(TP||(TP=s(["\n                            background-color: ",";\n                          "])),e.color)],children:fn("span",{css:[yP,wP,n&&vP,n&&Ie(SP||(SP=s(["\n                              background-color: ",";\n                            "])),e.color)],children:e.value})})}},t):null))}),"\u5f93\u6765"===r&&fn("div",{}),"\u30c7\u30a4\u30b5\u30fc\u30d3\u30b9"===r&&fn("div",{})]})})};var xP,CP,AP,NP,RP,PP,DP;const OP=Ie(xP||(xP=s(["\n  max-width: 600px;\n  margin: 0 auto;\n  padding: 30px 18px 150px;\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  min-height: 100vh;\n"]))),LP=Ie(CP||(CP=s(["\n  display: flex;\n"]))),MP=Ie(AP||(AP=s(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n"]))),FP=Ie(NP||(NP=s(["\n  font-size: 20px;\n  font-weight: bold;\n  padding: 10px;\n  color: #333;\n"]))),UP=Ie(RP||(RP=s(["\n  &:not(:last-child) {\n    margin-bottom: 15px;\n  }\n"]))),VP=Ie(PP||(PP=s(["\n  font-size: 16px;\n  font-weight: bold;\n  padding: 10px;\n"]))),zP=Ie(DP||(DP=s(["\n  margin-bottom: 18px;\n"]))),BP=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,o]=(0,t.useState)(""),a=()=>{n(""),i("")},l=()=>{o("")};return pn("div",{css:OP,children:[pn("div",{css:MP,children:[fn("h1",{css:FP,children:"\u8a18\u9332"}),fn("button",{children:fn("img",{src:CA,alt:"\u8ffd\u52a0"})})]}),fn("div",{css:UP,children:fn(WN,{selectedDepartment:e,selectedRoom:r,selectedItem:s,onDepartmentClick:a,onRoomClick:()=>{i("")},onItemClick:l,isDisabled:!!e||!!r||!!s})}),pn("div",{css:UP,children:[pn("div",{css:LP,children:[fn("h2",{css:VP,children:"\u25bc \u90e8\u7f72"}),fn("button",{onClick:a,children:"\u89e3\u9664\u3059\u308b"})]}),fn(kP,{onDepartmentClick:e=>{n(e),i("")},onRoomClick:e=>{i(e)},selectedDepartment:e,selectedRoom:r})]}),pn("div",{css:UP,children:[pn("div",{css:LP,children:[fn("h2",{css:VP,children:"\u25bc \u9805\u76ee"}),fn("button",{onClick:l,children:"\u89e3\u9664\u3059\u308b"})]}),fn(NR,{onClick:e=>{o(e)},selectedItem:s})]}),pn("div",{css:UP,children:[fn("h2",{css:[VP,zP],children:"\u25bc \u691c\u7d22\u7d50\u679c"}),fn(aP,{selectedDepartment:e,selectedRoom:r,selectedItem:s})]})]})};const jP=n.p+"static/media/home-active.3a78a90b434beaa89d99c23a04f2c7ed.svg";const qP=n.p+"static/media/home.eb36321b07fe37f7a569abe58ad87489.svg";const GP=n.p+"static/media/pen-active.c83bb6aef3adffb9e1c323f83a66219b.svg";const WP=n.p+"static/media/pen.9042bb06e23bc05c4ba6ba1f75fe2251.svg";const HP=n.p+"static/media/mail-active.492094a42b4b8953733cfe35de81787a.svg";const KP=n.p+"static/media/mail.e659a1abd2bbe3438be345e3e167eb91.svg";const QP=n.p+"static/media/send.2d13d03103edee0f4a432bae599f373d.svg";const YP=n.p+"static/media/back.5e566790522f5e7fe6dcd21b20e4cb85.svg";const $P=n.p+"static/media/chat.f9a66dab3a1f725fc8987d58778a489d.svg";const JP=n.p+"static/media/chat-white.e0d78f6e7cd6cca67a35c1d5417d7cd0.svg";var XP,ZP,eD,tD,nD,rD,iD,sD,oD,aD,lD,cD,uD,dD,hD,fD,pD,mD,gD;const vD=Ie(XP||(XP=s(["\n  position: relative;\n  left: 50%;\n  transform: translateX(-50%);\n  display: grid;\n  grid-template-rows: 88px 1fr auto;\n  max-width: 600px;\n  width: 100%;\n  height: 100dvh;\n  background-color: #eee;\n  overflow: hidden;\n"]))),yD=Ie(ZP||(ZP=s(["\n  width: 100%;\n  overflow-y: scroll;\n  overflow-x: hidden;\n  padding: 10px 20px;\n"]))),wD=Ie(eD||(eD=s(['\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  width: 100%;\n  background-color: #fff;\n  padding-top: 30px;\n  padding-bottom: 16px;\n  border-bottom: 2px solid #333;\n  position: relative;\n  top: 0;\n  z-index: 20;\n  & > a {\n    position: relative;\n    &::after {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      content: "";\n      width: 150%;\n      height: 100%;\n      padding: 10px;\n      transform: translate(-50%, -50%);\n    }\n  }\n']))),bD=Ie(tD||(tD=s(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 16px;\n  & > p {\n    font-size: 20px;\n  }\n"]))),_D=Ie(nD||(nD=s(["\n  text-align: center;\n  margin-top: 20px;\n  margin-bottom: 50px;\n  color: #3c75a7;\n  font-size: 15px;\n  &:not(:first-child) {\n    margin-top: 80px;\n  }\n"]))),ID=Ie(rD||(rD=s(["\n  display: flex;\n  justify-content: flex-end;\n  align-items: flex-start;\n  margin: 2px 0;\n"]))),ED=Ie(iD||(iD=s(["\n  margin: 2px 0 20px;\n"]))),TD=Ie(sD||(sD=s(["\n  justify-content: flex-start;\n"]))),SD=Ie(oD||(oD=s(["\n  max-width: 500px;\n  display: flex;\n  flex-wrap: wrap;\n  position: relative;\n  padding: 8px 16px;\n  border-radius: 12px;\n  background: #333333;\n  box-sizing: border-box;\n  line-height: 1.5;\n  align-items: center;\n  color: #fff;\n  white-space: pre-wrap;\n  font-size: 14px;\n  font-weight: 400;\n"]))),kD=Ie(aD||(aD=s(['\n  &::after {\n    position: absolute;\n    bottom: -8px;\n    right: -30px;\n    width: 30px;\n    height: 30px;\n    content: "";\n    background-image: url(',");\n    background-repeat: no-repeat;\n  }\n"])),$P),xD=Ie(lD||(lD=s(["\n  background: #fff;\n  border: 2px solid #333;\n  color: #333;\n  &::after {\n    left: -14px;\n    right: auto;\n    background-image: url(",");\n  }\n"])),JP),CD=Ie(cD||(cD=s(["\n  display: flex;\n  flex-direction: row-reverse;\n  gap: 8px;\n  align-items: flex-end;\n"]))),AD=Ie(uD||(uD=s(["\n  flex-direction: row;\n"]))),ND=Ie(dD||(dD=s(["\n  display: flex;\n  gap: 20px;\n  align-items: flex-end;\n"]))),RD=Ie(hD||(hD=s(["\n  border-radius: 50%;\n  min-width: 40px;\n  width: 40px;\n  height: 40px;\n  object-fit: cover;\n"]))),PD=Ie(fD||(fD=s(["\n  margin-left: 60px;\n"]))),DD=Ie(pD||(pD=s(["\n  color: #8a8a8a;\n  font-size: 12px;\n  padding-bottom: 2px;\n"]))),OD=Ie(mD||(mD=s(["\n  display: flex;\n  padding: 10px 20px;\n  gap: 20px;\n  justify-content: space-around;\n  align-items: center;\n  position: relative;\n  left: 50%;\n  bottom: 0;\n  max-width: 600px;\n  width: 100%;\n  height: min-content;\n  background-color: #fff;\n  border-top: 2px solid #333;\n  transform: translateX(-50%);\n"]))),LD=Ie(gD||(gD=s(["\n  border-radius: 8px;\n  min-height: 40px;\n  border: 2px solid #333;\n  padding: 4px 10px;\n  width: 100%;\n  position: relative;\n  z-index: 1;\n  font-size: 15px;\n  line-height: 20px;\n  overflow-y: hidden;\n  resize: none;\n"]))),MD=e=>{const t=new Date,n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),s=["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"];if(n===t.getFullYear()&&r===t.getMonth()+1&&i===t.getDate()){const t=s[e.getDay()];return"\u4eca\u65e5\uff08".concat(r,"\u6708").concat(i,"\u65e5\uff1a").concat(t,"\uff09")}if(n===t.getFullYear()&&r===t.getMonth()+1&&i===t.getDate()-1){const t=s[e.getDay()];return"\u6628\u65e5\uff08".concat(r,"\u6708").concat(i,"\u65e5\uff1a").concat(t,"\uff09")}return"".concat(r,"\u6708").concat(i,"\u65e5")},FD=e=>{const t=e.getFullYear(),n=e.getMonth()+1,r=e.getDate(),i=e.getHours(),s=e.getMinutes(),o=e=>e.toString().padStart(2,"0");return"".concat(t,"\u5e74").concat(o(n),"\u6708").concat(o(r),"\u65e5 ").concat(o(i),":").concat(o(s))},UD=(e,t,n)=>{const r=new Date(e.date),i=t.filter((e=>{const t=new Date(e.date);return r.getDate()===t.getDate()&&r.getHours()===t.getHours()&&r.getMinutes()===t.getMinutes()&&e.senderId===n}));if(i.length>0){if(i[i.length-1].id===e.id)return"".concat(r.getHours()).padStart(2,"0")+":"+"".concat(r.getMinutes()).padStart(2,"0")}return null},VD=e=>{let t=e instanceof Date?e:new Date(e),n=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate());const i=(new Date(n.getFullYear(),n.getMonth(),n.getDate()).getTime()-r.getTime())/864e5;if(0===i)return"".concat(t.getHours()).padStart(2,"0")+":"+"".concat(t.getMinutes()).padStart(2,"0");if(i<7){return["\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"][t.getDay()]}return t.toLocaleDateString()},zD=()=>{var e;const n=(0,t.useRef)(null),{chatId:r}=yt(),[i,s]=(0,t.useState)([]),[o,a]=(0,t.useState)(""),l=null===(e=di.auth().currentUser)||void 0===e?void 0:e.uid,c=(0,t.useRef)(null),[u,d]=(0,t.useState)(null),h=async(e,t)=>[e,t].sort().join("-"),[f,p]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{if(l&&r){const e=await h(l,r),t=Ux.collection("chatroom").doc(e).collection("messages");p(t)}})()}),[l,r]),(0,t.useEffect)((()=>{if(f){const e=nx(f.orderBy("date","asc"),(e=>{const t=e.docs.map((e=>({id:e.id,senderId:e.data().senderId,msg:e.data().msg,date:new Date(e.data().date)})));s(t)}));return()=>{e()}}}),[f]),(0,t.useEffect)((()=>{if(r){(async()=>{const e=await Ux.collection("users").doc(r).get();if(e.exists){const t=e.data();t&&d({id:t.id,name:t.name,image:t.image,comment:t.comment})}})()}}),[r]),(0,t.useEffect)((()=>{let e=()=>{};return(async()=>{if(!l||!r)return;const t=await h(l,r),n=Ux.collection("chatroom").doc(t).collection("messages");e=nx(n.orderBy("date","asc"),(e=>{const t=e.docs.map((e=>({id:e.id,senderId:e.data().senderId,msg:e.data().msg,date:new Date(e.data().date)})));s(t)}))})().catch(console.error),()=>{e()}}),[l,r]);(0,t.useEffect)((()=>{(()=>{var e;const t=c.current;if(!t)return;const n=parseInt(getComputedStyle(t).lineHeight,12),r=(null===(e=(o+"\n").match(/\n/g))||void 0===e?void 0:e.length)||1;t.style.height="".concat(n*r,"px")})()}),[o]),(0,t.useEffect)((()=>{n.current&&n.current.scrollTo({top:n.current.scrollHeight,behavior:"auto"})}),[a,i]);const m=(0,t.useMemo)((()=>i.map((e=>UD(e,i,e.senderId)))),[i]);return pn("div",{css:vD,children:[pn("div",{css:wD,children:[fn(Ht,{to:"/contact/chat",children:fn("img",{src:YP,alt:""})}),pn("div",{css:bD,children:[fn("img",{src:u?null===u||void 0===u?void 0:u.image:void 0,alt:null===u||void 0===u?void 0:u.name,css:RD,width:40,height:40}),fn("p",{children:null===u||void 0===u?void 0:u.name})]}),fn("img",{src:mN})]}),fn("div",{css:yD,ref:n,children:i.map(((e,n)=>{const r=e.senderId===l,s=0===n||e.date.toDateString()!==i[n-1].date.toDateString();return pn(t.Fragment,{children:[s&&fn("p",{css:_D,children:MD(e.date)}),fn("div",{css:[ID,!r&&TD,m[n]&&ED,!m[n]&&PD],children:pn("div",{css:[CD,!r&&AD],children:[pn("div",{css:ND,children:[!r&&m[n]&&fn("img",{src:u?null===u||void 0===u?void 0:u.image:void 0,alt:null===u||void 0===u?void 0:u.name,width:40,height:40,css:RD}),fn("p",{css:[SD,m[n]&&kD,!r&&xD],children:e.msg})]}),m[n]&&fn("span",{css:DD,children:m[n]})]})})]},e.id)}))}),pn("form",{onSubmit:async e=>{if(e.preventDefault(),0!==o.length&&l&&r){const e=await h(l,r),t=Ux.collection("chatroom").doc(e).collection("messages");await t.add({msg:o,date:(new Date).getTime(),senderId:l}),a("")}},css:OD,children:[fn("img",{src:CA,alt:"\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0"}),fn("textarea",{value:o,ref:c,onChange:e=>a(e.target.value),css:LD,placeholder:"\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b"}),fn("input",{type:"image",src:QP,alt:"",width:32,height:32})]})]})};var BD,jD,qD,GD,WD,HD,KD,QD,YD,$D,JD;const XD=Ie(BD||(BD=s(["\n  padding-top: 20px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 90px;\n"]))),ZD=Ie(jD||(jD=s(["\n  display: flex;\n  position: relative;\n  width: 90%;\n  margin: 0 auto;\n"]))),eO=Ie(qD||(qD=s(["\n  border-radius: 100px;\n  border: 1px solid #333;\n  padding: 12px 20px;\n  width: 100%;\n  position: relative;\n  z-index: 1;\n  font-size: 15px;\n"]))),tO=Ie(GD||(GD=s(["\n  position: absolute;\n  z-index: 0;\n  top: 5px;\n  border-radius: 100px;\n  width: 100%;\n  height: 100%;\n  background-color: #333;\n"]))),nO=Ie(WD||(WD=s(["\n  position: absolute;\n  z-index: 1;\n  top: 50%;\n  right: 15px;\n  cursor: pointer;\n  transform: translateY(-50%);\n  padding: 10px;\n"]))),rO=Ie(HD||(HD=s(["\n  display: flex;\n  flex-direction: column;\n  margin-top: 20px;\n"]))),iO=Ie(KD||(KD=s(["\n  display: grid;\n  grid-template-columns: 56px 1fr 70px;\n  justify-content: space-between;\n  align-items: center;\n  gap: 12px;\n  padding: 15px 18px;\n  border-top: 1px solid #333;\n  transition: background-color 0.2s ease;\n  & > img {\n    width: 56px;\n    height: 56px;\n    object-fit: cover;\n    border-radius: 50%;\n  }\n  &:last-child {\n    border-bottom: 1px solid #333;\n  }\n  @media (max-width: 500px) {\n    grid-template-columns: 56px 1fr 50px;\n  }\n  @media (any-hover: hover) {\n    &:hover {\n      background-color: #eee;\n    }\n  }\n"]))),sO=Ie(QD||(QD=s(["\n  width: 100%;\n  display: grid;\n  gap: 3px;\n"]))),oO=Ie(YD||(YD=s(["\n  font-size: 16px;\n"]))),aO=Ie($D||($D=s(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-size: 14px;\n  color: #999;\n"]))),lO=Ie(JD||(JD=s(["\n  white-space: nowrap;\n  justify-self: flex-end;\n  color: #999;\n  @media (max-width: 500px) {\n    font-size: 12px;\n  }\n"]))),cO=()=>{const[e,n]=(0,t.useState)([]);return(0,t.useEffect)((()=>{(async()=>{const e=await di.firestore().collection("posts").orderBy("date","desc").get(),t=await Promise.all(e.docs.map((async e=>{const t=e.data(),n=t.userId,r=di.firestore().collection("users").doc(n),i=(await r.get()).data();return{...t,id:e.id,postId:e.id,date:new Date(t.date),senderImageURL:null===i||void 0===i?void 0:i.image,senderName:null===i||void 0===i?void 0:i.name}})));n(t)})()}),[]),fn(hn,{children:pn("div",{css:XD,children:[pn("div",{css:ZD,children:[fn("input",{css:[eO],type:"text",placeholder:"\u691c\u7d22\u3059\u308b"}),fn("span",{css:tO}),fn("button",{css:nO,type:"submit",children:fn("img",{src:mN,alt:"\u691c\u7d22\u3059\u308b",width:22,height:22})})]}),fn("ul",{css:rO,children:e.sort(((e,t)=>t.date.getTime()-e.date.getTime())).map(((e,t)=>fn("li",{children:pn(Ht,{to:"/contact/board/".concat(e.postId),css:iO,children:[fn("img",{src:e.senderImageURL||void 0,alt:e.senderName,width:56,height:56}),pn("div",{css:sO,children:[fn("p",{css:oO,children:e.title}),fn("p",{css:aO,children:e.content})]}),fn("span",{css:lO,children:VD(e.date)})]})},t)))})]})})};var uO,dO,hO,fO,pO,mO,gO,vO,yO,wO,bO;const _O=Ie(uO||(uO=s(["\n  padding-top: 20px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 90px;\n"]))),IO=Ie(dO||(dO=s(["\n  display: flex;\n  position: relative;\n  width: 90%;\n  margin: 0 auto;\n"]))),EO=Ie(hO||(hO=s(["\n  border-radius: 100px;\n  border: 1px solid #333;\n  padding: 12px 20px;\n  width: 100%;\n  position: relative;\n  z-index: 1;\n  font-size: 15px;\n"]))),TO=Ie(fO||(fO=s(["\n  position: absolute;\n  z-index: 0;\n  top: 5px;\n  border-radius: 100px;\n  width: 100%;\n  height: 100%;\n  background-color: #333;\n"]))),SO=Ie(pO||(pO=s(["\n  position: absolute;\n  z-index: 1;\n  top: 50%;\n  right: 15px;\n  cursor: pointer;\n  transform: translateY(-50%);\n  padding: 10px;\n"]))),kO=Ie(mO||(mO=s(["\n  display: flex;\n  flex-direction: column;\n  margin-top: 20px;\n"]))),xO=Ie(gO||(gO=s(["\n  display: grid;\n  grid-template-columns: 56px 1fr 70px;\n  justify-content: space-between;\n  align-items: center;\n  gap: 12px;\n  padding: 15px 18px;\n  border-top: 1px solid #333;\n  transition: background-color 0.2s ease;\n  & > img {\n    width: 56px;\n    height: 56px;\n    object-fit: cover;\n    border-radius: 50%;\n  }\n  &:last-child {\n    border-bottom: 1px solid #333;\n  }\n  @media (max-width: 500px) {\n    grid-template-columns: 56px 1fr 50px;\n  }\n  @media (any-hover: hover) {\n    &:hover {\n      background-color: #eee;\n    }\n  }\n"]))),CO=Ie(vO||(vO=s(["\n  width: 100%;\n  display: grid;\n  gap: 3px;\n"]))),AO=Ie(yO||(yO=s(["\n  font-size: 16px;\n"]))),NO=Ie(wO||(wO=s(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-size: 14px;\n  color: #999;\n"]))),RO=Ie(bO||(bO=s(["\n  justify-self: flex-end;\n  color: #999;\n  @media (max-width: 500px) {\n    font-size: 12px;\n  }\n"]))),PO=()=>{var e;const[n,r]=(0,t.useState)([]),i=null===(e=di.auth().currentUser)||void 0===e?void 0:e.uid,{users:s}=t.useContext(vt);return(0,t.useEffect)((()=>{s&&(async()=>{const e=s.map((e=>{const t=[i,e.id].sort().join("-");return Ux.collection("chatroom").doc(t).collection("messages").orderBy("date","desc").limit(1).get().then((t=>{const n=t.docs[0];return n?{sessionId:e.id,id:n.id,name:e.name,msg:n.data().msg,imageURL:e.image,date:new Date(n.data().date)}:null}))})),t=await Promise.all(e);r(t.filter((e=>null!==e)))})()}),[i,s]),pn("div",{css:_O,children:[pn("div",{css:IO,children:[fn("input",{css:[EO],type:"text",placeholder:"\u691c\u7d22\u3059\u308b"}),fn("span",{css:TO}),fn("button",{css:SO,type:"submit",children:fn("img",{src:mN,alt:"\u691c\u7d22\u3059\u308b",width:22,height:22})})]}),fn("ul",{css:kO,children:n.filter((e=>e.sessionId!==i)).sort(((e,t)=>t.date.getTime()-e.date.getTime())).map((e=>fn("li",{children:pn(Ht,{to:"/contact/chat/".concat(e.sessionId),css:xO,children:[fn("img",{src:e.imageURL||void 0,alt:e.name,width:56,height:56}),pn("div",{css:CO,children:[fn("p",{css:AO,children:e.name}),fn("p",{css:NO,children:e.msg})]}),fn("span",{css:RO,children:VD(e.date)})]})},e.sessionId)))})]})};const DO=n.p+"static/media/clock.f2fbffeb19511bcd7274c7fe594b3b2e.svg";var OO,LO,MO,FO,UO,VO,zO,BO,jO;const qO=Ie(OO||(OO=s(["\n  margin-bottom: 160px;\n"]))),GO=Ie(LO||(LO=s(["\n  display: flex;\n  gap: 20px;\n  margin-bottom: 40px;\n"]))),WO=Ie(MO||(MO=s(["\n  margin-top: 10px;\n  display: flex;\n  gap: 6px;\n  font-weight: bold;\n  color: #3c75a7;\n  font-size: 15px;\n"]))),HO=Ie(FO||(FO=s(["\n  display: grid;\n  gap: 20px;\n  padding: 20px;\n  width: 100%;\n  font-weight: bold;\n"]))),KO=Ie(UO||(UO=s(["\n  color: #3c75a7;\n"]))),QO=Ie(VO||(VO=s(["\n  line-height: 2;\n"]))),YO=Ie(zO||(zO=s(["\n  max-width: 350px;\n  width: 60vw;\n  font-size: 18px;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n"]))),$O=Ie(BO||(BO=s(["\n  margin-bottom: 20px;\n  font-weight: 400;\n"]))),JO=Ie(jO||(jO=s(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n"]))),XO=()=>{var e;const{postId:n}=yt(),[r,i]=(0,t.useState)(null),[s,o]=(0,t.useState)(""),[a,l]=(0,t.useState)([]),c=(0,t.useRef)(null),u=null===(e=di.auth().currentUser)||void 0===e?void 0:e.uid,[d,h]=(0,t.useState)(null);(0,t.useEffect)((()=>{if(!n)return;(async()=>{const e=await Ux.collection("posts").doc(n).collection("comments").orderBy("date","asc").get(),t=await Promise.all(e.docs.map((async e=>{const t=e.data(),n=(await Ux.collection("users").doc(t.senderId).get()).data();return{id:e.id,senderId:t.senderId,msg:t.msg,date:new Date(t.date),userName:null===n||void 0===n?void 0:n.name,userImage:null===n||void 0===n?void 0:n.image}})));l(t)})()}),[n]);const[,f]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{if(u&&n){const e=Ux.collection("posts");f(e)}})()}),[u,n]),(0,t.useEffect)((()=>{(async()=>{if(n){const e=await Ux.collection("posts").doc(n).get();if(e.exists){const t=e.data(),n=t?t.userId:null;if(n){const e=await Ux.collection("users").doc(n).get();if(e.exists){const t=e.data();t&&h({id:e.id,name:t.name,image:t.image,comment:t.comment})}}}}})()}),[n,Ux]),(0,t.useEffect)((()=>{(async()=>{if(n){const e=await di.firestore().collection("posts").doc(n).get();if(e.exists){const t=e.data();if(t){const n={postId:e.id,senderName:t.senderName,title:t.title,content:t.content,senderImageURL:t.senderImageURL,date:new Date(t.date),userId:t.userId};i(n)}}}})()}),[n]),(0,t.useEffect)((()=>{(()=>{var e;const t=c.current;if(!t)return;const n=parseInt(getComputedStyle(t).lineHeight,12),r=(null===(e=(s+"\n").match(/\n/g))||void 0===e?void 0:e.length)||1;t.style.height="".concat(n*r,"px")})()}),[s]);const p=(0,t.useMemo)((()=>a.map((e=>UD(e,a,e.senderId)))),[a]);return pn("div",{css:vD,children:[pn("div",{css:wD,children:[fn(Ht,{to:"/contact/board",children:fn("img",{src:YP,alt:""})}),pn("div",{css:bD,children:[fn("img",{src:d?null===d||void 0===d?void 0:d.image:void 0,alt:null===d||void 0===d?void 0:d.name,css:RD,width:40,height:40}),fn("h2",{css:YO,children:null===r||void 0===r?void 0:r.title})]}),fn("img",{src:mN})]}),pn("div",{css:yD,children:[fn("div",{css:qO,children:r&&pn(t.Fragment,{children:[pn("div",{css:GO,children:[pn("div",{css:WO,children:[fn("img",{src:DO,alt:"",width:16,height:16}),FD(r.date)]}),pn("div",{css:WO,children:[fn("img",{src:GP,alt:"",width:16,height:16}),null===d||void 0===d?void 0:d.name]})]}),fn("div",{css:[ID,r.userId!==u&&TD],children:fn("div",{css:[CD,r.userId!==u&&AD],children:pn("div",{css:ND,children:[r.userId!==u&&fn("img",{src:d?null===d||void 0===d?void 0:d.image:void 0,alt:null===d||void 0===d?void 0:d.name,width:40,height:40,css:RD}),pn("div",{css:[SD,kD,r.userId!==u&&xD,HO],children:[fn("h3",{css:KO,children:r.title}),fn("p",{css:QO,children:r.content})]})]})})})]})}),a.length>0&&pn("div",{children:[pn("h3",{css:$O,children:["\u8fd4\u4fe1 (",a.length,")"]}),fn("div",{css:JO,children:a.map(((e,n)=>{const r=e.senderId===u;return fn(t.Fragment,{children:fn("div",{css:[ID,!r&&TD],children:pn("div",{css:[CD,!r&&AD],children:[pn("div",{css:ND,children:[!r&&fn("img",{src:e.userImage||void 0,alt:e.userName||"Unknown",width:40,height:40,css:RD}),fn("p",{css:[SD,kD,!r&&xD],children:e.msg})]}),fn("span",{css:DD,children:p[n]})]})})},e.senderId)}))})]})]}),pn("form",{onSubmit:async e=>{if(e.preventDefault(),0!==s.length&&u&&n&&u&&n){const e=Ux.collection("posts").doc(n).collection("comments");await e.add({msg:s,date:(new Date).getTime(),senderId:u}),o("")}},css:OD,children:[fn("textarea",{value:s,ref:c,onChange:e=>o(e.target.value),css:LD,placeholder:"\u8fd4\u4fe1\u3092\u5165\u529b"}),fn("input",{type:"image",src:QP,alt:"",width:32,height:32})]})]})};var ZO,eL,tL,nL,rL,iL,sL;const oL=Ie(ZO||(ZO=s(["\n  background-color: #333;\n  height: auto;\n"]))),aL=Ie(eL||(eL=s(['\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  align-items: center;\n  justify-items: center;\n  max-width: 600px;\n  width: 100%;\n  height: 85px;\n  background-color: #333;\n  position: fixed;\n  bottom: 0;\n  left: 50%;\n  z-index: 10;\n  transform: translateX(-50%);\n  &::after {\n    position: absolute;\n    left: 0;\n    z-index: -1;\n    content: "";\n    width: 120px;\n    height: 120px;\n    background-color: #333;\n    border-radius: 50%;\n    transition: left 0.3s ease-in-out;\n  }\n']))),lL=Ie(tL||(tL=s(['\n  &::after {\n    position: absolute;\n    left: calc(calc(100% / 6) - 60px);\n    z-index: -1;\n    content: "";\n    width: 120px;\n    height: 120px;\n    background-color: #333;\n    border-radius: 50%;\n    transform: translateY(-30px);\n  }\n']))),cL=Ie(nL||(nL=s(['\n  &::after {\n    position: absolute;\n    left: calc(calc(100% / 2) - 60px);\n    z-index: -1;\n    content: "";\n    width: 120px;\n    height: 120px;\n    background-color: #333;\n    border-radius: 50%;\n    transform: translateY(-30px);\n  }\n']))),uL=Ie(rL||(rL=s(['\n  &::after {\n    position: absolute;\n    left: calc(calc(100% / calc(6 / 5)) - 60px);\n    z-index: -1;\n    content: "";\n    width: 120px;\n    height: 120px;\n    background-color: #333;\n    border-radius: 50%;\n    transform: translateY(-30px);\n  }\n']))),dL=Ie(iL||(iL=s(['\n  display: flex;\n  gap: 4px;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  transition: transform 0.3s ease-in-out;\n  border-radius: 50%;\n  color: #fff;\n  position: relative;\n  &::after {\n    content: "";\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    padding: 20px;\n  }\n']))),hL=Ie(sL||(sL=s(["\n  width: 90px;\n  height: 90px;\n  background-color: #fff;\n  transform: translateY(-30px);\n  border: 1px solid #333;\n  color: #333;\n"]))),fL=()=>{const e=pt(),[n,r]=(0,t.useState)(!1);(0,t.useEffect)((()=>{const t=e.pathname.includes("/contact/chat/")||e.pathname.includes("/contact/board/");r(t)}),[e]);const i="/"===(s=e.pathname)?0:s.startsWith("/record")?1:s.startsWith("/contact")?2:0;var s;return pn("div",{css:oL,children:[fn(xA.Group,{defaultIndex:1,selectedIndex:i,children:!n&&pn(xA.List,{css:[aL,0===i&&lL,1===i&&cL,2===i&&uL],children:[fn(xA,{children:e=>{let{selected:t}=e;return pn(Ht,{to:"/",css:[dL,t&&hL],children:[fn("img",{alt:"\u30db\u30fc\u30e0",src:t?jP:qP}),fn("span",{children:"\u30db\u30fc\u30e0"})]})}}),fn(xA,{children:e=>{let{selected:t}=e;return pn(Ht,{to:"record",css:[dL,t&&hL],children:[fn("img",{alt:"\u8a18\u9332",src:t?GP:WP}),fn("span",{children:"\u8a18\u9332"})]})}}),fn(xA,{children:e=>{let{selected:t}=e;return pn(Ht,{to:"contact",css:[dL,t&&hL],children:[fn("img",{alt:"\u9023\u7d61",src:t?HP:KP}),fn("span",{children:"\u9023\u7d61"})]})}})]})}),pn(Lt,{children:[fn(Dt,{path:"/",element:fn(wC,{})}),fn(Dt,{path:"/record",element:fn(BP,{})}),pn(Dt,{path:"/contact",element:fn(pN,{}),children:[fn(Dt,{index:!0,element:fn(PO,{})}),fn(Dt,{path:"chat",element:fn(PO,{})}),fn(Dt,{path:"board",element:fn(cO,{})})]}),fn(Dt,{path:"/contact/chat/:chatId",element:fn(zD,{})}),fn(Dt,{path:"/contact/board/:postId",element:fn(XO,{})})]})]})},pL=e=>{e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,$t.jsx)(t.StrictMode,{children:(0,$t.jsx)(qt,{children:(0,$t.jsx)(fL,{})})})),pL()})()})();
//# sourceMappingURL=main.ae648cab.js.map
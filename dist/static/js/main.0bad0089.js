/*! For license information please see main.0bad0089.js.LICENSE.txt */
(()=>{var e={110:(e,t,n)=>{"use strict";var r=n(309),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function l(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a[r.Memo]=o;var c=Object.defineProperty,u=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,n,r){if("string"!==typeof n){if(p){var i=f(n);i&&i!==p&&e(t,i,r)}var o=u(n);h&&(o=o.concat(h(n)));for(var a=l(t),m=l(n),g=0;g<o.length;++g){var v=o[g];if(!s[v]&&(!r||!r[v])&&(!m||!m[v])&&(!a||!a[v])){var y=d(n,v);try{c(t,v,y)}catch(w){}}}}return t}},746:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,s=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,a=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function _(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case s:case a:case o:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function E(e){return _(e)===h}t.AsyncMode=u,t.ConcurrentMode=h,t.ContextConsumer=c,t.ContextProvider=l,t.Element=r,t.ForwardRef=d,t.Fragment=s,t.Lazy=g,t.Memo=m,t.Portal=i,t.Profiler=a,t.StrictMode=o,t.Suspense=f,t.isAsyncMode=function(e){return E(e)||_(e)===u},t.isConcurrentMode=E,t.isContextConsumer=function(e){return _(e)===c},t.isContextProvider=function(e){return _(e)===l},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===s},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===i},t.isProfiler=function(e){return _(e)===a},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===f},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===h||e===a||e===o||e===f||e===p||"object"===typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===l||e.$$typeof===c||e.$$typeof===d||e.$$typeof===y||e.$$typeof===w||e.$$typeof===b||e.$$typeof===v)},t.typeOf=_},309:(e,t,n)=>{"use strict";e.exports=n(746)},463:(e,t,n)=>{"use strict";var r=n(791),i=n(296);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function w(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),E=Symbol.for("react.portal"),I=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),x=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function z(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||i[o]!==s[a]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function B(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case I:return"Fragment";case E:return"Portal";case S:return"Profiler";case T:return"StrictMode";case A:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case x:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function H(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){J(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function se(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ie=null,Te=null;function Se(e){if(e=wi(e)){if("function"!==typeof Ee)throw Error(s(280));var t=e.stateNode;t&&(t=_i(t),Ee(e.stateNode,e.type,t))}}function ke(e){Ie?Te?Te.push(e):Te=[e]:Ie=e}function xe(){if(Ie){var e=Ie,t=Te;if(Te=Ie=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Ne=!1;function Re(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==Ie||null!==Te)&&(Ae(),xe())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=_i(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function Le(e,t,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Me=!1,Fe=null,Ue=!1,Ve=null,ze={onError:function(e){Me=!0,Fe=e}};function Be(e,t,n,r,i,s,o,a,l){Me=!1,Fe=null,Le.apply(ze,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(je(e)!==e)throw Error(s(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=o;break}if(l===r){a=!0,r=i,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=i;break}if(l===r){a=!0,r=o,n=i;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var He=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Je=i.unstable_now,Xe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~i;0!==a?r=ht(a):0!==(s&=o)&&(r=ht(s))}else 0!==(o=n&~i)?r=ht(o):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,Et,It,Tt,St,kt=!1,xt=[],Ct=null,At=null,Nt=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=wi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){It(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=wi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function zt(){kt=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==At&&Ut(At)&&(At=null),null!==Nt&&Ut(Nt)&&(Nt=null),Rt.forEach(Vt),Pt.forEach(Vt)}function Bt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function jt(e){function t(t){return Bt(t,e)}if(0<xt.length){Bt(xt[0],e);for(var n=1;n<xt.length;n++){var r=xt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Bt(Ct,e),null!==At&&Bt(At,e),null!==Nt&&Bt(Nt,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Wt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=1,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Kt(e,t,n,r){var i=wt,s=qt.transition;qt.transition=null;try{wt=4,Ht(e,t,n,r)}finally{wt=i,qt.transition=s}}function Ht(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return At=Mt(At,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Rt.set(s,Mt(Rt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Pt.set(s,Mt(Pt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=wi(i);if(null!==s&&_t(s),null===(s=Yt(e,t,n,r))&&Gr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=yi(e=_e(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Xt,r=n.length,i="value"in Jt?Jt.value:Jt.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(F({},fn,{dataTransfer:0})),gn=sn(F({},hn,{relatedTarget:0})),vn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(yn),bn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},In={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=In[e])&&!!t[e]}function Sn(){return Tn}var kn=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),xn=sn(kn),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Nn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=sn(Rn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,Ln=null;u&&"documentMode"in document&&(Ln=document.documentMode);var Mn=u&&"TextEvent"in window&&!Ln,Fn=u&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Wn(e,t,n,r){ke(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Hn=null;function Qn(e){Ur(e,0)}function Yn(e){if(H(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Jn=!1;if(u){var Xn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Xn=Zn}else Xn=!1;Jn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Hn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Hn)){var t=[];Wn(t,Hn,e,_e(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Hn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Hn)}function sr(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var o=ur(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==Q(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Kr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionend:_r("Transition","TransitionEnd")},Ir={},Tr={};function Sr(e){if(Ir[e])return Ir[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return Ir[e]=n[t];return e}u&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Sr("animationend"),xr=Sr("animationiteration"),Cr=Sr("animationstart"),Ar=Sr("transitionend"),Nr=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Nr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(kr,"onAnimationEnd"),Pr(xr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,l,c){if(Be.apply(this,arguments),Me){if(!Me)throw Error(s(198));var u=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Fr(i,a,c),s=l}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var Br="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Br]){e[Br]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||zr(t,!1,e),zr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Br]||(t[Br]=!0,zr("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Kt;break;default:i=Ht}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==a;){if(null===(o=yi(a)))return;if(5===(l=o.tag)||6===l){r=s=o;continue e}a=a.parentNode}}r=r.return}Re((function(){var r=s,i=_e(n),o=[];e:{var a=Nr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=xn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case kr:case xr:case Cr:l=vn;break;case Ar:l=Nn;break;case"scroll":l=dn;break;case"wheel":l=Pn;break;case"copy":case"cut":case"paste":l=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Pe(p,d))&&u.push(Wr(p,m,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,i),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==c?a:bi(c),(a=new u(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Hr(f))p++;for(f=0,m=d;m;m=Hr(m))f++;for(;0<p-f;)u=Hr(u),p--;for(;0<f-p;)d=Hr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Hr(u),d=Hr(d)}u=null}else u=null;null!==l&&Qr(o,a,l,u,!1),null!==c&&null!==h&&Qr(o,h,c,u,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=$n;else if(Gn(a))if(Jn)g=or;else{g=ir;var v=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=sr);switch(g&&(g=g(e,r))?Wn(o,g,n,i):(v&&v(e,a,r),"focusout"===e&&(v=a._wrapperState)&&v.controlled&&"number"===a.type&&ee(a,"number",a.value)),v=r?bi(r):window,e){case"focusin":(Gn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(o,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else jn?zn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Fn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==w?"onCompositionEnd"===w&&jn&&(y=en()):(Xt="value"in(Jt=i)?Jt.value:Jt.textContent,jn=!0)),0<(v=Kr(r,w)).length&&(w=new bn(w,e,null,n,i),o.push({event:w,listeners:v}),y?w.data=y:null!==(y=Bn(n))&&(w.data=y))),(y=Mn?function(e,t){switch(e){case"compositionend":return Bn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!On&&zn(e,t)?(e=en(),Zt=Xt=Jt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Ur(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Pe(e,n))&&r.unshift(Wr(e,s,i)),null!=(s=Pe(e,t))&&r.push(Wr(e,s,i))),e=e.return}return r}function Hr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,i?null!=(l=Pe(n,s))&&o.unshift(Wr(n,l,a)):i||null!=(l=Pe(n,s))&&o.push(Wr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Xr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(ai)}:ri;function ai(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function wi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _i(e){return e[fi]||null}var Ei=[],Ii=-1;function Ti(e){return{current:e}}function Si(e){0>Ii||(e.current=Ei[Ii],Ei[Ii]=null,Ii--)}function ki(e,t){Ii++,Ei[Ii]=e.current,e.current=t}var xi={},Ci=Ti(xi),Ai=Ti(!1),Ni=xi;function Ri(e,t){var n=e.type.contextTypes;if(!n)return xi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Si(Ai),Si(Ci)}function Oi(e,t,n){if(Ci.current!==xi)throw Error(s(168));ki(Ci,t),ki(Ai,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xi,Ni=Ci.current,ki(Ci,e),ki(Ai,Ai.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Si(Ai),Si(Ci),ki(Ci,e)):Si(Ai),ki(Ai,n)}var Ui=null,Vi=!1,zi=!1;function Bi(e){null===Ui?Ui=[e]:Ui.push(e)}function ji(){if(!zi&&null!==Ui){zi=!0;var e=0,t=wt;try{var n=Ui;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),He(Ze,ji),i}finally{wt=t,zi=!1}}return null}var qi=[],Gi=0,Wi=null,Ki=0,Hi=[],Qi=0,Yi=null,$i=1,Ji="";function Xi(e,t){qi[Gi++]=Ki,qi[Gi++]=Wi,Wi=e,Ki=t}function Zi(e,t,n){Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,Yi=e;var r=$i;e=Ji;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var s=32-ot(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Ji=s+e}else $i=1<<s|n<<i|r,Ji=e}function es(e){null!==e.return&&(Xi(e,1),Zi(e,1,0))}function ts(e){for(;e===Wi;)Wi=qi[--Gi],qi[Gi]=null,Ki=qi[--Gi],qi[Gi]=null;for(;e===Yi;)Yi=Hi[--Qi],Hi[Qi]=null,Ji=Hi[--Qi],Hi[Qi]=null,$i=Hi[--Qi],Hi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function os(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Ji}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&as(e,t)?os(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var vs=Ti(null),ys=null,ws=null,bs=null;function _s(){bs=ws=ys=null}function Es(e){var t=vs.current;Si(vs),e._currentValue=t}function Is(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ts(e,t){ys=e,bs=ws=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ba=!0),e.firstContext=null)}function Ss(e){var t=e._currentValue;if(bs!==e)if(e={context:e,memoizedValue:t,next:null},null===ws){if(null===ys)throw Error(s(308));ws=e,ys.dependencies={lanes:0,firstContext:e}}else ws=ws.next=e;return t}var ks=null;function xs(e){null===ks?ks=[e]:ks.push(e)}function Cs(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,xs(t)):(n.next=i.next,i.next=n),t.interleaved=n,As(e,r)}function As(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ns=!1;function Rs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ps(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ds(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Os(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,As(e,n)}return null===(i=r.interleaved)?(t.next=t,xs(r)):(t.next=i.next,i.next=t),r.interleaved=t,As(e,n)}function Ls(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ms(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,r){var i=e.updateQueue;Ns=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ns=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function Us(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Vs=(new r.Component).refs;function zs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Bs={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ds(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),s=Ds(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Os(e,s,i))&&(rc(t,e,i,r),Ls(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ds(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Os(e,i,r))&&(rc(t,e,r,n),Ls(t,e,r))}};function js(e,t,n,r,i,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function qs(e,t,n){var r=!1,i=xi,s=t.contextType;return"object"===typeof s&&null!==s?s=Ss(s):(i=Pi(t)?Ni:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):xi),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Bs,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Gs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Bs.enqueueReplaceState(t,t.state,null)}function Ws(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Vs,Rs(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ss(s):(s=Pi(t)?Ni:Ci.current,i.context=Ri(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(zs(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Bs.enqueueReplaceState(i,i.state,null),Fs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ks(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Vs&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Hs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===I?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===P&&Qs(s)===t.type)?((r=i(t,n.props)).ref=Ks(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ks(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ks(e,null,t),n.return=e,n;case E:return(t=Vc(t,e.mode,n)).return=e,t;case P:return d(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Hs(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===i?c(e,t,n,r):null;case E:return n.key===i?u(e,t,n,r):null;case P:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:h(e,t,n,r,null);Hs(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case _:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);Hs(t,r)}return null}function m(i,s,a,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,a[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),s=o(v,s,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===a.length)return n(i,h),is&&Xi(i,m),c;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(s=o(h,s,m),null===u?c=h:u.sibling=h,u=h);return is&&Xi(i,m),c}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=o(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),is&&Xi(i,m),c}function g(i,a,l,c){var u=L(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=a,g=a=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var w=f(i,m,y.value,c);if(null===w){null===m&&(m=v);break}e&&m&&null===w.alternate&&t(i,m),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,m=v}if(y.done)return n(i,m),is&&Xi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return is&&Xi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=o(y,a,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),is&&Xi(i,g),u}return function e(r,s,o,l){if("object"===typeof o&&null!==o&&o.type===I&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===I){if(7===u.tag){n(r,u.sibling),(s=i(u,o.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qs(c)===u.type){n(r,u.sibling),(s=i(u,o.props)).ref=Ks(r,u,o),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===I?((s=Mc(o.props.children,r.mode,l,o.key)).return=r,r=s):((l=Lc(o.type,o.key,o.props,null,r.mode,l)).ref=Ks(r,s,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(r,s.sibling),(s=i(s,o.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Vc(o,r.mode,l)).return=r,r=s}return a(r);case P:return e(r,s,(u=o._init)(o._payload),l)}if(te(o))return m(r,s,o,l);if(L(o))return g(r,s,o,l);Hs(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,o)).return=r,r=s):(n(r,s),(s=Uc(o,r.mode,l)).return=r,r=s),a(r)):n(r,s)}}var $s=Ys(!0),Js=Ys(!1),Xs={},Zs=Ti(Xs),eo=Ti(Xs),to=Ti(Xs);function no(e){if(e===Xs)throw Error(s(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Zs,Xs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Zs),ki(Zs,t)}function io(){Si(Zs),Si(eo),Si(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(ki(eo,e),ki(Zs,n))}function oo(e){eo.current===e&&(Si(Zs),Si(eo))}var ao=Ti(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=b.ReactCurrentDispatcher,fo=b.ReactCurrentBatchConfig,po=0,mo=null,go=null,vo=null,yo=!1,wo=!1,bo=0,_o=0;function Eo(){throw Error(s(321))}function Io(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function To(e,t,n,r,i,o){if(po=o,mo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(r,i),wo){o=0;do{if(wo=!1,bo=0,25<=o)throw Error(s(301));o+=1,vo=go=null,t.updateQueue=null,ho.current=ca,e=n(r,i)}while(wo)}if(ho.current=oa,t=null!==go&&null!==go.next,po=0,vo=go=mo=null,yo=!1,t)throw Error(s(300));return e}function So(){var e=0!==bo;return bo=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===vo?mo.memoizedState=vo=e:vo=vo.next=e,vo}function xo(){if(null===go){var e=mo.alternate;e=null!==e?e.memoizedState:null}else e=go.next;var t=null===vo?mo.memoizedState:vo.next;if(null!==t)vo=t,go=e;else{if(null===e)throw Error(s(310));e={memoizedState:(go=e).memoizedState,baseState:go.baseState,baseQueue:go.baseQueue,queue:go.queue,next:null},null===vo?mo.memoizedState=vo=e:vo=vo.next=e}return vo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=go,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=r):c=c.next=d,mo.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ba=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,mo.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=xo(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);ar(o,t.memoizedState)||(ba=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=mo,r=xo(),i=t(),o=!ar(r.memoizedState,i);if(o&&(r.memoizedState=i,ba=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==vo&&1&vo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Nl)throw Error(s(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Fo(e){var t=As(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,mo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=mo.updateQueue)?(t={lastEffect:null,stores:null},mo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function zo(){return xo().memoizedState}function Bo(e,t,n,r){var i=ko();mo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=xo();r=void 0===r?null:r;var s=void 0;if(null!==go){var o=go.memoizedState;if(s=o.destroy,null!==r&&Io(r,o.deps))return void(i.memoizedState=Vo(t,n,s,r))}mo.flags|=e,i.memoizedState=Vo(1|t,n,s,r)}function qo(e,t){return Bo(8390656,8,e,t)}function Go(e,t){return jo(2048,8,e,t)}function Wo(e,t){return jo(4,2,e,t)}function Ko(e,t){return jo(4,4,e,t)}function Ho(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Ho.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Jo(e,t){var n=xo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Io(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,ba=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),mo.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{wt=n,fo.transition=r}}function ea(){return xo().memoizedState}function ta(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ra(e))ia(t,n);else if(null!==(n=Cs(e,t,n,r))){rc(n,e,r,tc()),sa(n,t,r)}}function na(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ra(e))ia(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(i.next=i,xs(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Cs(e,t,i,r))&&(rc(n,e,r,i=tc()),sa(n,t,r))}}function ra(e){var t=e.alternate;return e===mo||null!==t&&t===mo}function ia(e,t){wo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var oa={readContext:Ss,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},aa={readContext:Ss,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Ss,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4194308,4,Ho.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ta.bind(null,mo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=mo,i=ko();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Nl)throw Error(s(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Nl.identifierPrefix;if(is){var n=Ji;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Ss,useCallback:$o,useContext:Ss,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Jo,useReducer:Ao,useRef:zo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Xo(xo(),go.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],xo().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Ss,useCallback:$o,useContext:Ss,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Wo,useLayoutEffect:Ko,useMemo:Jo,useReducer:No,useRef:zo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=xo();return null===go?t.memoizedState=e:Xo(t,go.memoizedState,e)},useTransition:function(){return[No(Co)[0],xo().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",r=t;do{n+=B(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Ds(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Kl=r),da(0,t)},n}function ma(e,t,n){(n=Ds(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof r&&(null===Hl?Hl=new Set([this]):Hl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ga(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fa;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function va(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ds(-1,1)).tag=2,Os(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var wa=b.ReactCurrentOwner,ba=!1;function _a(e,t,n,r){t.child=null===e?Js(t,null,n,r):$s(t,e.child,n,r)}function Ea(e,t,n,r,i){n=n.render;var s=t.ref;return Ts(t,i),r=To(e,t,n,r,s,i),n=So(),null===e||ba?(is&&n&&es(t),t.flags|=1,_a(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ia(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ta(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,(e=Oc(s,r)).ref=t.ref,e.return=t,t.child=e}function Ta(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(ba=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Wa(e,t,i);0!==(131072&e.flags)&&(ba=!0)}}return xa(e,t,n,r,i)}function Sa(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Ol,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Ol,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,ki(Ol,Dl),Dl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,ki(Ol,Dl),Dl|=r;return _a(e,t,i,n),t.child}function ka(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xa(e,t,n,r,i){var s=Pi(n)?Ni:Ci.current;return s=Ri(t,s),Ts(t,i),n=To(e,t,n,r,s,i),r=So(),null===e||ba?(is&&r&&es(t),t.flags|=1,_a(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i))}function Ca(e,t,n,r,i){if(Pi(n)){var s=!0;Mi(t)}else s=!1;if(Ts(t,i),null===t.stateNode)Ga(e,t),qs(t,n,r),Ws(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ss(c):c=Ri(t,c=Pi(n)?Ni:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&Gs(t,o,r,c),Ns=!1;var d=t.memoizedState;o.state=d,Fs(t,r,o,i),l=t.memoizedState,a!==r||d!==l||Ai.current||Ns?("function"===typeof u&&(zs(t,n,u,r),l=t.memoizedState),(a=Ns||js(t,n,a,r,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ps(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:gs(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ss(l):l=Ri(t,l=Pi(n)?Ni:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Gs(t,o,r,l),Ns=!1,d=t.memoizedState,o.state=d,Fs(t,r,o,i);var p=t.memoizedState;a!==h||d!==p||Ai.current||Ns?("function"===typeof f&&(zs(t,n,f,r),p=t.memoizedState),(c=Ns||js(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Aa(e,t,n,r,s,i)}function Aa(e,t,n,r,i,s){ka(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wa(e,t,s);r=t.stateNode,wa.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$s(t,e.child,null,s),t.child=$s(t,null,a,s)):_a(e,t,a,s),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Na(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ra(e,t,n,r,i){return fs(),ps(i),t.flags|=256,_a(e,t,n,r),t.child}var Pa,Da,Oa,La,Ma={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ua(e,t,n){var r,i=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,a?(i=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,i,0,null),e=Mc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=Ma,e):Va(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,za(e,t,a,r=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$s(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=Ma,o);if(0===(1&t.mode))return za(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(e,t,a,r=ha(o=Error(s(419)),r,void 0))}if(l=0!==(a&e.childLanes),ba||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==o.retryLane&&(o.retryLane=i,As(e,i),rc(r,e,i,-1))}return gc(),za(e,t,a,r=ha(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Hi[Qi++]=$i,Hi[Qi++]=Ji,Hi[Qi++]=Yi,$i=e.id,Ji=e.overflow,Yi=t),t=Va(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(a){a=i.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Oc(r,a):(a=Mc(a,l,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Ma,i}return e=(a=e.child).sibling,i=Oc(a,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Va(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function za(e,t,n,r){return null!==r&&ps(r),$s(t,e.child,null,n),(e=Va(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Is(e.return,t,n)}function ja(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function qa(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(_a(e,t,r.children,n),0!==(2&(r=ao.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(ao,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ja(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ja(t,!0,n,null,s);break;case"together":ja(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ha(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ha(t),null;case 1:case 17:return Pi(t.type)&&Di(),Ha(t),null;case 3:return r=t.stateNode,io(),Si(Ai),Si(Ci),uo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Da(e,t),Ha(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Oa(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ha(t),null}if(e=no(Zs.current),hs(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,c,e),i=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":K(r),Z(r,o,!0);break;case"textarea":K(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(l=we(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ye(n,i),c=i)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Vr("scroll",e):null!=u&&w(e,o,u,l))}switch(n){case"input":K(e),Z(e,r,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ha(t),null;case 6:if(e&&null!=t.stateNode)La(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ha(t),null;case 13:if(Si(ao),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ha(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ha(t),null);case 4:return io(),Da(e,t),null===e&&jr(t.stateNode.containerInfo),Ha(t),null;case 10:return Es(t.type._context),Ha(t),null;case 19:if(Si(ao),null===(o=t.memoizedState))return Ha(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ka(o,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ka(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>ql&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!is)return Ha(t),null}else 2*Je()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,r=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ao.current,ki(ao,r?1&n|2:1&n),t):(Ha(t),null);case 22:case 23:return dc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(Ha(t),6&t.subtreeFlags&&(t.flags|=8192)):Ha(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ai),Si(Ci),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(ao),null;case 4:return io(),null;case 10:return Es(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Da=function(){},Oa=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},La=function(e,t,n,r){n!==r&&(t.flags|=4)};var $a=!1,Ja=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&tl(t,n,s)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(a){}switch(n.tag){case 5:Ja||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),jt(e)):li(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!Ja&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!Ja&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Sc(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?(Ja=(r=Ja)||null!==n.memoizedState,fl(e,t,n),Ja=r):fl(e,t,n);break;default:fl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xa),t.forEach((function(t){var r=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,i),hl=null,dl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)vl(t,e),t=t.sibling}function vl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{rl(3,e,e.return),il(3,e)}catch(g){Sc(e,e.return,g)}try{rl(5,e,e.return)}catch(g){Sc(e,e.return,g)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&el(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Sc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(i,o),we(l,a);var u=we(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):w(i,h,d,u)}switch(l){case"input":X(i,o);break;case"textarea":se(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(g){Sc(e,e.return,g)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(g){Sc(e,e.return,g)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(g){Sc(e,e.return,g)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(jl=Je())),4&r&&ml(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ja=(u=Ja)||h,gl(t,e),Ja=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:rl(4,f,f.return);break;case 1:el(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Sc(r,n,g)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){El(d);continue}}null!==p?(p.return=f,Za=p):El(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Sc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Sc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),yl(e),4&r&&ml(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Sc(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function wl(e,t,n){Za=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Za;){var i=Za,s=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$a;if(!o){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ja;a=$a;var c=Ja;if($a=o,(Ja=l)&&!c)for(Za=i;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?Il(i):null!==l?(l.return=o,Za=l):Il(i);for(;null!==s;)Za=s,bl(s,t,n),s=s.sibling;Za=i,$a=a,Ja=c}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Za=s):_l(e)}}function _l(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ja||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ja)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:gs(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Us(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Us(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&jt(d)}}}break;default:throw Error(s(163))}Ja||512&t.flags&&sl(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function El(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function Il(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var s=t.return;try{sl(t)}catch(l){Sc(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Sc(t,o,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Tl,Sl=Math.ceil,kl=b.ReactCurrentDispatcher,xl=b.ReactCurrentOwner,Cl=b.ReactCurrentBatchConfig,Al=0,Nl=null,Rl=null,Pl=0,Dl=0,Ol=Ti(0),Ll=0,Ml=null,Fl=0,Ul=0,Vl=0,zl=null,Bl=null,jl=0,ql=1/0,Gl=null,Wl=!1,Kl=null,Hl=null,Ql=!1,Yl=null,$l=0,Jl=0,Xl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Al)?Je():-1!==Zl?Zl:Zl=Je()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==ms.transition?(0===ec&&(ec=mt()),ec):0!==(e=wt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Jl)throw Jl=0,Xl=null,Error(s(185));vt(e,n,r),0!==(2&Al)&&e===Nl||(e===Nl&&(0===(2&Al)&&(Ul|=n),4===Ll&&lc(e,Pl)),ic(e,r),1===n&&0===Al&&0===(1&t.mode)&&(ql=Je()+500,Vi&&ji()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=i[o];-1===l?0!==(a&n)&&0===(a&r)||(i[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var r=dt(e,e===Nl?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Bi(e)}(cc.bind(null,e)):Bi(cc.bind(null,e)),oi((function(){0===(6&Al)&&ji()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(Ic()&&e.callbackNode!==n)return null;var r=dt(e,e===Nl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=vc(e,r);else{t=r;var i=Al;Al|=2;var o=mc();for(Nl===e&&Pl===t||(Gl=null,ql=Je()+500,fc(e,t));;)try{wc();break}catch(l){pc(e,l)}_s(),kl.current=o,Al=i,null!==Rl?t=0:(Nl=null,Pl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ml,fc(e,0),lc(e,r),ic(e,Je()),n;if(6===t)lc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ar(s(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=vc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ml,fc(e,0),lc(e,r),ic(e,Je()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:Ec(e,Bl,Gl);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=jl+500-Je())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(Ec.bind(null,e,Bl,Gl),t);break}Ec(e,Bl,Gl);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(Ec.bind(null,e,Bl,Gl),r);break}Ec(e,Bl,Gl);break;default:throw Error(s(329))}}}return ic(e,Je()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=zl;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=vc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function lc(e,t){for(t&=~Vl,t&=~Ul,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Al))throw Error(s(327));Ic();var t=dt(e,0);if(0===(1&t))return ic(e,Je()),null;var n=vc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ml,fc(e,0),lc(e,t),ic(e,Je()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ec(e,Bl,Gl),ic(e,Je()),null}function uc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(ql=Je()+500,Vi&&ji())}}function hc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&Ic();var t=Al;Al|=1;var n=Cl.transition,r=wt;try{if(Cl.transition=null,wt=1,e)return e()}finally{wt=r,Cl.transition=n,0===(6&(Al=t))&&ji()}}function dc(){Dl=Ol.current,Si(Ol)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Rl)for(n=Rl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Si(Ai),Si(Ci),uo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(ao);break;case 10:Es(r.type._context);break;case 22:case 23:dc()}n=n.return}if(Nl=e,Rl=e=Oc(e.current,null),Pl=Dl=t,Ll=0,Ml=null,Vl=Ul=Fl=0,Bl=zl=null,null!==ks){for(t=0;t<ks.length;t++)if(null!==(r=(n=ks[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var o=s.next;s.next=i,r.next=o}n.pending=r}ks=null}return e}function pc(e,t){for(;;){var n=Rl;try{if(_s(),ho.current=oa,yo){for(var r=mo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,vo=go=mo=null,wo=!1,bo=0,xl.current=null,null===n||null===n.return){Ll=1,Ml=t,Rl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=va(a);if(null!==p){p.flags&=-257,ya(p,a,l,0,t),1&p.mode&&ga(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ga(o,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=va(a);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),ya(v,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Ll&&(Ll=2),null===zl?zl=[o]:zl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,pa(0,c,t));break e;case 1:l=c;var y=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Hl||!Hl.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Ms(o,ma(o,l,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(b){t=b,Rl===n&&null!==n&&(Rl=n=n.return);continue}break}}function mc(){var e=kl.current;return kl.current=oa,null===e?oa:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Nl||0===(268435455&Fl)&&0===(268435455&Ul)||lc(Nl,Pl)}function vc(e,t){var n=Al;Al|=2;var r=mc();for(Nl===e&&Pl===t||(Gl=null,fc(e,t));;)try{yc();break}catch(i){pc(e,i)}if(_s(),Al=n,kl.current=r,null!==Rl)throw Error(s(261));return Nl=null,Pl=0,Ll}function yc(){for(;null!==Rl;)bc(Rl)}function wc(){for(;null!==Rl&&!Ye();)bc(Rl)}function bc(e){var t=Tl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?_c(e):Rl=t,xl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Dl)))return void(Rl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Rl=n);if(null===e)return Ll=6,void(Rl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Rl=t);Rl=t=e}while(null!==t);0===Ll&&(Ll=5)}function Ec(e,t,n){var r=wt,i=Cl.transition;try{Cl.transition=null,wt=1,function(e,t,n,r){do{Ic()}while(null!==Yl);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,o),e===Nl&&(Rl=Nl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Nc(tt,(function(){return Ic(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=wt;wt=1;var l=Al;Al|=4,xl.current=null,function(e,t){if(ei=Gt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==o||0!==r&&3!==d.nodeType||(c=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=a),f===o&&++h===r&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,w=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:gs(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Sc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}m=nl,nl=!1}(e,n),vl(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,wl(n,e,i),$e(),Al=l,wt=a,Cl.transition=o}else e.current=n;if(Ql&&(Ql=!1,Yl=e,$l=i),o=e.pendingLanes,0===o&&(Hl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Kl,Kl=null,e;0!==(1&$l)&&0!==e.tag&&Ic(),o=e.pendingLanes,0!==(1&o)?e===Xl?Jl++:(Jl=0,Xl=e):Jl=0,ji()}(e,t,n,r)}finally{Cl.transition=i,wt=r}return null}function Ic(){if(null!==Yl){var e=bt($l),t=Cl.transition,n=wt;try{if(Cl.transition=null,wt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,$l=0,0!==(6&Al))throw Error(s(331));var i=Al;for(Al|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Za=y;break e}Za=o.return}}var w=e.current;for(Za=w;null!==Za;){var b=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Za=b;else e:for(a=w;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(E){Sc(l,l.return,E)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(Al=i,ji(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{wt=n,Cl.transition=t}}return!1}function Tc(e,t,n){e=Os(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(vt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Tc(e,e,n);else for(;null!==t;){if(3===t.tag){Tc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hl||!Hl.has(r))){t=Os(t,e=ma(t,e=ua(n,e),1),1),e=tc(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function kc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Nl===e&&(Pl&n)===n&&(4===Ll||3===Ll&&(130023424&Pl)===Pl&&500>Je()-jl?fc(e,0):Vl|=n),ic(e,t)}function xc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=As(e,t))&&(vt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),xc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),xc(e,n)}function Nc(e,t){return He(e,t)}function Rc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Rc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var a=2;if(r=e,"function"===typeof e)Dc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case I:return Mc(n.children,i,o,t);case T:a=8,i|=8;break;case S:return(e=Pc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=o,e;case N:return(e=Pc(19,n,t,i)).elementType=N,e.lanes=o,e;case D:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:a=10;break e;case x:a=9;break e;case C:a=11;break e;case R:a=14;break e;case P:a=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,s,o,a,l){return e=new zc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rs(s),e}function jc(e){if(!e)return xi;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,s,o,a,l){return(e=Bc(n,r,!0,e,0,s,0,a,l)).context=jc(null),n=e.current,(s=Ds(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Os(n,s,i),e.current.lanes=i,vt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,s=tc(),o=nc(i);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ds(s,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Os(i,t,o))&&(rc(e,i,o,s),Ls(e,i,o)),o}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Hc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Tl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)ba=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ba=!1,function(e,t,n){switch(t.tag){case 3:Na(t),fs();break;case 5:so(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(vs,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ua(e,t,n):(ki(ao,1&ao.current),null!==(e=Wa(e,t,n))?e.sibling:null);ki(ao,1&ao.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qa(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ao,ao.current),r)break;return null;case 22:case 23:return t.lanes=0,Sa(e,t,n)}return Wa(e,t,n)}(e,t,n);ba=0!==(131072&e.flags)}else ba=!1,is&&0!==(1048576&t.flags)&&Zi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ga(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Ts(t,n),i=To(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Rs(t),i.updater=Bs,t.stateNode=i,i._reactInternals=t,Ws(t,r,e,n),t=Aa(null,t,r,!0,o,n)):(t.tag=0,is&&o&&es(t),_a(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=gs(r,e),i){case 0:t=xa(null,t,r,e,n);break e;case 1:t=Ca(null,t,r,e,n);break e;case 11:t=Ea(null,t,r,e,n);break e;case 14:t=Ia(null,t,r,gs(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,xa(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ca(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 3:e:{if(Na(t),null===e)throw Error(s(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ps(e,t),Fs(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ra(e,t,r,n,i=ua(Error(s(423)),t));break e}if(r!==i){t=Ra(e,t,r,n,i=ua(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=Js(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=Wa(e,t,n);break e}_a(e,t,r,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==o&&ni(r,o)&&(t.flags|=32),ka(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Ua(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$s(t,null,r,n):_a(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ea(e,t,r,i=t.elementType===r?i:gs(r,i),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,ki(vs,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===i.children&&!Ai.current){t=Wa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ds(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Is(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Is(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ts(t,n),r=r(i=Ss(i)),t.flags|=1,_a(e,t,r,n),t.child;case 14:return i=gs(r=t.type,t.pendingProps),Ia(e,t,r,i=gs(r.type,i),n);case 15:return Ta(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:gs(r,i),Ga(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ts(t,n),qs(t,r,i),Ws(t,r,i,n),Aa(null,t,r,!0,e,n);case 19:return qa(e,t,n);case 22:return Sa(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof i){var a=i;i=function(){var e=Wc(o);a.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Wc(o);s.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,jr(8===e.nodeType?e.parentNode:e),hc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var a=r;r=function(){var e=Wc(l);a.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,jr(8===e.nodeType?e.parentNode:e),hc((function(){Gc(t,l,n,r)})),l}(n,t,e,i,r);return Wc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Gc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Gc(null,e,null,null)})),t[pi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Je()),0===(6&Al)&&(ql=Je()+500,ji()))}break;case 13:hc((function(){var t=As(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Hc(e,1)}},Et=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)rc(t,e,134217728,tc());Hc(e,134217728)}},It=function(e){if(13===e.tag){var t=nc(e),n=As(e,t);if(null!==n)rc(n,e,t,tc());Hc(e,t)}},Tt=function(){return wt},St=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Ee=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=_i(r);if(!i)throw Error(s(90));H(r),X(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,Ae=hc;var tu={usingClientEntryPoint:!1,Events:[wi,bi,_i,ke,xe,uc]},nu={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ru={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{it=iu.inject(ru),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,a),e[pi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:(e,t,n)=>{"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:(e,t,n)=>{"use strict";var r=n(791),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},117:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=w.prototype=new y;b.constructor=w,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,E=Object.prototype.hasOwnProperty,I={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,s={},o=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!T.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:I.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var x=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,i,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,_(o)?(i="",null!=e&&(i=e.replace(x,"$&/")+"/"),A(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(x,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=A(a,t,i,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,i,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function N(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:I};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=o,t.PureComponent=w,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=I.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!T.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:(e,t,n)=>{"use strict";e.exports=n(117)},184:(e,t,n)=>{"use strict";e.exports=n(374)},813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function _(e){if(g=!1,b(e),!m)if(null!==r(c))m=!0,D(E);else{var t=r(u);null!==t&&O(_,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var s=f;try{for(b(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(c)&&i(c),b(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var I,T=!1,S=null,k=-1,x=5,C=-1;function A(){return!(t.unstable_now()-C<x)}function N(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?I():(T=!1,S=null)}}else T=!1}if("function"===typeof w)I=function(){w(N)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=N,I=function(){P.postMessage(null)}}else I=function(){v(N,0)};function D(e){S=e,T||(T=!0,I())}function O(e,n){k=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(g?(y(k),k=-1):g=!0,O(_,s-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,D(E))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},296:(e,t,n)=>{"use strict";e.exports=n(813)},318:(e,t,n)=>{var r={"./iwamahina.jpg":327,"./tanakayumi.jpg":267,"./yamadahanako.jpg":611};function i(e){var t=s(e);return n(t)}function s(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=s,e.exports=i,i.id=318},327:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/iwamahina.23675039e2037159d09a.jpg"},267:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/tanakayumi.1cedec100d0b75bcb33b.jpg"},611:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/yamadahanako.e2ec0861f7c3eabfe006.jpg"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&r;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((e=>o[e]=()=>r[e]));return o.default=()=>r,n.d(s,o),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+".0f8d78ff.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="app:";n.l=(r,i,s,o)=>{if(e[r])e[r].push(i);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=r),e[r]=[i];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],a.parentNode&&a.parentNode.removeChild(a),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/app/",(()=>{var e={179:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,i[1](a)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,s,o=r[0],a=r[1],l=r[2],c=0;if(o.some((t=>0!==e[t]))){for(i in a)n.o(a,i)&&(n.m[i]=a[i]);if(l)l(n)}for(t&&t(r);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkapp=self.webpackChunkapp||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>Mn,SDK_VERSION:()=>zr,_DEFAULT_ENTRY_NAME:()=>Cr,_addComponent:()=>Pr,_addOrOverwriteComponent:()=>Dr,_apps:()=>Nr,_clearComponents:()=>Fr,_components:()=>Rr,_getProvider:()=>Lr,_registerComponent:()=>Or,_removeServiceInstance:()=>Mr,deleteApp:()=>Gr,getApp:()=>jr,getApps:()=>qr,initializeApp:()=>Br,onLog:()=>Kr,registerVersion:()=>Wr,setLogLevel:()=>Hr});var t=n(791),r=n.t(t,2),i=n(250);function s(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var o=!!r.useInsertionEffect&&r.useInsertionEffect,a=o||function(e){return e()};o||t.useLayoutEffect;var l={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};function c(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}var u=/[A-Z]|^ms/g,h=/_EMO_([^_]+?)_([^]*?)_EMO_/g,d=function(e){return 45===e.charCodeAt(1)},f=function(e){return null!=e&&"boolean"!==typeof e},p=c((function(e){return d(e)?e:e.replace(u,"-$&").toLowerCase()})),m=function(e,t){switch(e){case"animation":case"animationName":if("string"===typeof t)return t.replace(h,(function(e,t,n){return v={name:t,styles:n,next:v},t}))}return 1===l[e]||d(e)||"number"!==typeof t||0===t?t:t+"px"};function g(e,t,n){if(null==n)return"";if(void 0!==n.__emotion_styles)return n;switch(typeof n){case"boolean":return"";case"object":if(1===n.anim)return v={name:n.name,styles:n.styles,next:v},n.name;if(void 0!==n.styles){var r=n.next;if(void 0!==r)for(;void 0!==r;)v={name:r.name,styles:r.styles,next:v},r=r.next;return n.styles+";"}return function(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=g(e,t,n[i])+";";else for(var s in n){var o=n[s];if("object"!==typeof o)null!=t&&void 0!==t[o]?r+=s+"{"+t[o]+"}":f(o)&&(r+=p(s)+":"+m(s,o)+";");else if(!Array.isArray(o)||"string"!==typeof o[0]||null!=t&&void 0!==t[o[0]]){var a=g(e,t,o);switch(s){case"animation":case"animationName":r+=p(s)+":"+a+";";break;default:r+=s+"{"+a+"}"}}else for(var l=0;l<o.length;l++)f(o[l])&&(r+=p(s)+":"+m(s,o[l])+";")}return r}(e,t,n);case"function":if(void 0!==e){var i=v,s=n(e);return v=i,g(e,t,s)}}if(null==t)return n;var o=t[n];return void 0!==o?o:n}var v,y=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var w=function(e,t,n){if(1===e.length&&"object"===typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var r=!0,i="";v=void 0;var s=e[0];null==s||void 0===s.raw?(r=!1,i+=g(n,t,s)):i+=s[0];for(var o=1;o<e.length;o++)i+=g(n,t,e[o]),r&&(i+=s[o]);y.lastIndex=0;for(var a,l="";null!==(a=y.exec(i));)l+="-"+a[1];var c=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)}(i)+l;return{name:c,styles:i,next:v}};var b=function(){function e(e){var t=this;this._insertTag=function(e){var n;n=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,n),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{n.insertRule(e,n.cssRules.length)}catch(MN){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),_=Math.abs,E=String.fromCharCode,I=Object.assign;function T(e){return e.trim()}function S(e,t,n){return e.replace(t,n)}function k(e,t){return e.indexOf(t)}function x(e,t){return 0|e.charCodeAt(t)}function C(e,t,n){return e.slice(t,n)}function A(e){return e.length}function N(e){return e.length}function R(e,t){return t.push(e),e}var P=1,D=1,O=0,L=0,M=0,F="";function U(e,t,n,r,i,s,o){return{value:e,root:t,parent:n,type:r,props:i,children:s,line:P,column:D,length:o,return:""}}function V(e,t){return I(U("",null,null,"",null,null,0),e,{length:-e.length},t)}function z(){return M=L>0?x(F,--L):0,D--,10===M&&(D=1,P--),M}function B(){return M=L<O?x(F,L++):0,D++,10===M&&(D=1,P++),M}function j(){return x(F,L)}function q(){return L}function G(e,t){return C(F,e,t)}function W(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function K(e){return P=D=1,O=A(F=e),L=0,[]}function H(e){return F="",e}function Q(e){return T(G(L-1,J(91===e?e+2:40===e?e+1:e)))}function Y(e){for(;(M=j())&&M<33;)B();return W(e)>2||W(M)>3?"":" "}function $(e,t){for(;--t&&B()&&!(M<48||M>102||M>57&&M<65||M>70&&M<97););return G(e,q()+(t<6&&32==j()&&32==B()))}function J(e){for(;B();)switch(M){case e:return L;case 34:case 39:34!==e&&39!==e&&J(M);break;case 40:41===e&&J(e);break;case 92:B()}return L}function X(e,t){for(;B()&&e+M!==57&&(e+M!==84||47!==j()););return"/*"+G(t,L-1)+"*"+E(47===e?e:B())}function Z(e){for(;!W(j());)B();return G(e,L)}var ee="-ms-",te="-moz-",ne="-webkit-",re="comm",ie="rule",se="decl",oe="@keyframes";function ae(e,t){for(var n="",r=N(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function le(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case se:return e.return=e.return||e.value;case re:return"";case oe:return e.return=e.value+"{"+ae(e.children,r)+"}";case ie:e.value=e.props.join(",")}return A(n=ae(e.children,r))?e.return=e.value+"{"+n+"}":""}function ce(e){return H(ue("",null,null,null,[""],e=K(e),0,[0],e))}function ue(e,t,n,r,i,s,o,a,l){for(var c=0,u=0,h=o,d=0,f=0,p=0,m=1,g=1,v=1,y=0,w="",b=i,_=s,I=r,T=w;g;)switch(p=y,y=B()){case 40:if(108!=p&&58==x(T,h-1)){-1!=k(T+=S(Q(y),"&","&\f"),"&\f")&&(v=-1);break}case 34:case 39:case 91:T+=Q(y);break;case 9:case 10:case 13:case 32:T+=Y(p);break;case 92:T+=$(q()-1,7);continue;case 47:switch(j()){case 42:case 47:R(de(X(B(),q()),t,n),l);break;default:T+="/"}break;case 123*m:a[c++]=A(T)*v;case 125*m:case 59:case 0:switch(y){case 0:case 125:g=0;case 59+u:-1==v&&(T=S(T,/\f/g,"")),f>0&&A(T)-h&&R(f>32?fe(T+";",r,n,h-1):fe(S(T," ","")+";",r,n,h-2),l);break;case 59:T+=";";default:if(R(I=he(T,t,n,c,u,i,a,w,b=[],_=[],h),s),123===y)if(0===u)ue(T,t,I,I,b,s,h,a,_);else switch(99===d&&110===x(T,3)?100:d){case 100:case 108:case 109:case 115:ue(e,I,I,r&&R(he(e,I,I,0,0,i,a,w,i,b=[],h),_),i,_,h,a,r?b:_);break;default:ue(T,I,I,I,[""],_,0,a,_)}}c=u=f=0,m=v=1,w=T="",h=o;break;case 58:h=1+A(T),f=p;default:if(m<1)if(123==y)--m;else if(125==y&&0==m++&&125==z())continue;switch(T+=E(y),y*m){case 38:v=u>0?1:(T+="\f",-1);break;case 44:a[c++]=(A(T)-1)*v,v=1;break;case 64:45===j()&&(T+=Q(B())),d=j(),u=h=A(w=T+=Z(q())),y++;break;case 45:45===p&&2==A(T)&&(m=0)}}return s}function he(e,t,n,r,i,s,o,a,l,c,u){for(var h=i-1,d=0===i?s:[""],f=N(d),p=0,m=0,g=0;p<r;++p)for(var v=0,y=C(e,h+1,h=_(m=o[p])),w=e;v<f;++v)(w=T(m>0?d[v]+" "+y:S(y,/&\f/g,d[v])))&&(l[g++]=w);return U(e,t,n,0===i?ie:a,l,c,u)}function de(e,t,n){return U(e,t,n,re,E(M),C(e,2,-2),0)}function fe(e,t,n,r){return U(e,t,n,se,C(e,0,r),C(e,r+1,-1),r)}var pe=function(e,t,n){for(var r=0,i=0;r=i,i=j(),38===r&&12===i&&(t[n]=1),!W(i);)B();return G(e,L)},me=function(e,t){return H(function(e,t){var n=-1,r=44;do{switch(W(r)){case 0:38===r&&12===j()&&(t[n]=1),e[n]+=pe(L-1,t,n);break;case 2:e[n]+=Q(r);break;case 4:if(44===r){e[++n]=58===j()?"&\f":"",t[n]=e[n].length;break}default:e[n]+=E(r)}}while(r=B());return e}(K(e),t))},ge=new WeakMap,ve=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;"rule"!==n.type;)if(!(n=n.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ge.get(n))&&!r){ge.set(e,!0);for(var i=[],s=me(t,i),o=n.props,a=0,l=0;a<s.length;a++)for(var c=0;c<o.length;c++,l++)e.props[l]=i[a]?s[a].replace(/&\f/g,o[c]):o[c]+" "+s[a]}}},ye=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}};function we(e,t){switch(function(e,t){return 45^x(e,0)?(((t<<2^x(e,0))<<2^x(e,1))<<2^x(e,2))<<2^x(e,3):0}(e,t)){case 5103:return ne+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ne+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ne+e+te+e+ee+e+e;case 6828:case 4268:return ne+e+ee+e+e;case 6165:return ne+e+ee+"flex-"+e+e;case 5187:return ne+e+S(e,/(\w+).+(:[^]+)/,ne+"box-$1$2"+ee+"flex-$1$2")+e;case 5443:return ne+e+ee+"flex-item-"+S(e,/flex-|-self/,"")+e;case 4675:return ne+e+ee+"flex-line-pack"+S(e,/align-content|flex-|-self/,"")+e;case 5548:return ne+e+ee+S(e,"shrink","negative")+e;case 5292:return ne+e+ee+S(e,"basis","preferred-size")+e;case 6060:return ne+"box-"+S(e,"-grow","")+ne+e+ee+S(e,"grow","positive")+e;case 4554:return ne+S(e,/([^-])(transform)/g,"$1"+ne+"$2")+e;case 6187:return S(S(S(e,/(zoom-|grab)/,ne+"$1"),/(image-set)/,ne+"$1"),e,"")+e;case 5495:case 3959:return S(e,/(image-set\([^]*)/,ne+"$1$`$1");case 4968:return S(S(e,/(.+:)(flex-)?(.*)/,ne+"box-pack:$3"+ee+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ne+e+e;case 4095:case 3583:case 4068:case 2532:return S(e,/(.+)-inline(.+)/,ne+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(A(e)-1-t>6)switch(x(e,t+1)){case 109:if(45!==x(e,t+4))break;case 102:return S(e,/(.+:)(.+)-([^]+)/,"$1"+ne+"$2-$3$1"+te+(108==x(e,t+3)?"$3":"$2-$3"))+e;case 115:return~k(e,"stretch")?we(S(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==x(e,t+1))break;case 6444:switch(x(e,A(e)-3-(~k(e,"!important")&&10))){case 107:return S(e,":",":"+ne)+e;case 101:return S(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ne+(45===x(e,14)?"inline-":"")+"box$3$1"+ne+"$2$3$1"+ee+"$2box$3")+e}break;case 5936:switch(x(e,t+11)){case 114:return ne+e+ee+S(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ne+e+ee+S(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ne+e+ee+S(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ne+e+ee+e+e}return e}var be=[function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case se:e.return=we(e.value,e.length);break;case oe:return ae([V(e,{value:S(e.value,"@","@"+ne)})],r);case ie:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ae([V(e,{props:[S(t,/:(read-\w+)/,":-moz-$1")]})],r);case"::placeholder":return ae([V(e,{props:[S(t,/:(plac\w+)/,":"+ne+"input-$1")]}),V(e,{props:[S(t,/:(plac\w+)/,":-moz-$1")]}),V(e,{props:[S(t,/:(plac\w+)/,ee+"input-$1")]})],r)}return""}))}}],_e=function(e){var t=e.key;if("css"===t){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var r=e.stylisPlugins||be;var i,s,o={},a=[];i=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),n=1;n<t.length;n++)o[t[n]]=!0;a.push(e)}));var l,c,u=[le,(c=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&c(e)})],h=function(e){var t=N(e);return function(n,r,i,s){for(var o="",a=0;a<t;a++)o+=e[a](n,r,i,s)||"";return o}}([ve,ye].concat(r,u));s=function(e,t,n,r){l=n,ae(ce(e?e+"{"+t.styles+"}":t.styles),h),r&&(d.inserted[t.name]=!0)};var d={key:t,sheet:new b({key:t,container:i,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:o,registered:{},insert:s};return d.sheet.hydrate(a),d};n(110);function Ee(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return w(t)}var Ie;function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Te.apply(this,arguments)}(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ie||(Ie={}));const Se="popstate";function ke(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function xe(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(MN){}}}function Ce(e,t){return{usr:e.state,key:e.key,idx:t}}function Ae(e,t,n,r){return void 0===n&&(n=null),Te({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?Re(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function Ne(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function Re(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Pe(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Ie.Pop,l=null,c=u();function u(){return(o.state||{idx:null}).idx}function h(){a=Ie.Pop;let e=u(),t=null==e?null:e-c;c=e,l&&l({action:a,location:f.location,delta:t})}function d(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:Ne(e);return ke(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==c&&(c=0,o.replaceState(Te({},o.state,{idx:c}),""));let f={get action(){return a},get location(){return e(i,o)},listen(e){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Se,h),l=e,()=>{i.removeEventListener(Se,h),l=null}},createHref:e=>t(i,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){a=Ie.Push;let r=Ae(f.location,e,t);n&&n(r,e),c=u()+1;let h=Ce(r,c),d=f.createHref(r);try{o.pushState(h,"",d)}catch(p){if(p instanceof DOMException&&"DataCloneError"===p.name)throw p;i.location.assign(d)}s&&l&&l({action:a,location:f.location,delta:1})},replace:function(e,t){a=Ie.Replace;let r=Ae(f.location,e,t);n&&n(r,e),c=u();let i=Ce(r,c),h=f.createHref(r);o.replaceState(i,"",h),s&&l&&l({action:a,location:f.location,delta:0})},go:e=>o.go(e)};return f}var De;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(De||(De={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function Oe(e,t,n){void 0===n&&(n="/");let r=Qe(("string"===typeof t?Re(t):t).pathname||"/",n);if(null==r)return null;let i=Le(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(i);let s=null;for(let o=0;null==s&&o<i.length;++o)s=We(i[o],He(r));return s}function Le(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let o={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(ke(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=Ze([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(ke(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),Le(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:Ge(a,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of Me(e.path))i(e,t,r);else i(e,t)})),t}function Me(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let o=Me(r.join("/")),a=[];return a.push(...o.map((e=>""===e?s:[s,e].join("/")))),i&&a.push(...o),a.map((t=>e.startsWith("/")&&""===t?"/":t))}const Fe=/^:\w+$/,Ue=3,Ve=2,ze=1,Be=10,je=-2,qe=e=>"*"===e;function Ge(e,t){let n=e.split("/"),r=n.length;return n.some(qe)&&(r+=je),t&&(r+=Ve),n.filter((e=>!qe(e))).reduce(((e,t)=>e+(Fe.test(t)?Ue:""===t?ze:Be)),r)}function We(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let e=n[o],a=o===n.length-1,l="/"===i?t:t.slice(i.length)||"/",c=Ke({path:e.relativePath,caseSensitive:e.caseSensitive,end:a},l);if(!c)return null;Object.assign(r,c.params);let u=e.route;s.push({params:r,pathname:Ze([i,c.pathname]),pathnameBase:et(Ze([i,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(i=Ze([i,c.pathnameBase]))}return s}function Ke(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);xe("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=a[n]||"";o=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=i&&!l?void 0:function(e,t){try{return decodeURIComponent(e)}catch(n){return xe(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+n+")."),e}}(l||"",r),e}),{}),pathname:s,pathnameBase:o,pattern:e}}function He(e){try{return decodeURI(e)}catch(t){return xe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function Qe(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function Ye(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function $e(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function Je(e,t){let n=$e(e);return t?n.map(((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)):n.map((e=>e.pathnameBase))}function Xe(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=Re(e):(i=Te({},e),ke(!i.pathname||!i.pathname.includes("?"),Ye("?","pathname","search",i)),ke(!i.pathname||!i.pathname.includes("#"),Ye("#","pathname","hash",i)),ke(!i.search||!i.search.includes("#"),Ye("#","search","hash",i)));let s,o=""===e||""===i.pathname,a=o?"/":i.pathname;if(null==a)s=n;else if(r){let e=0===t.length?[]:t[t.length-1].replace(/^\//,"").split("/");if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e.pop();i.pathname=t.join("/")}s="/"+e.join("/")}else{let e=t.length-1;if(a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?Re(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:tt(r),hash:nt(i)}}(i,s),c=a&&"/"!==a&&a.endsWith("/"),u=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const Ze=e=>e.join("/").replace(/\/\/+/g,"/"),et=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),tt=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",nt=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function rt(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const it=["post","put","patch","delete"],st=(new Set(it),["get",...it]);new Set(st),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function ot(){return ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ot.apply(this,arguments)}const at=t.createContext(null);const lt=t.createContext(null);const ct=t.createContext(null);const ut=t.createContext(null);const ht=t.createContext({outlet:null,matches:[],isDataRoute:!1});const dt=t.createContext(null);function ft(){return null!=t.useContext(ut)}function pt(){return ft()||ke(!1),t.useContext(ut).location}function mt(e){t.useContext(ct).static||t.useLayoutEffect(e)}function gt(){let{isDataRoute:e}=t.useContext(ht);return e?function(){let{router:e}=xt(St.UseNavigateStable),n=At(kt.UseNavigateStable),r=t.useRef(!1);mt((()=>{r.current=!0}));let i=t.useCallback((function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,ot({fromRouteId:n},i)))}),[e,n]);return i}():function(){ft()||ke(!1);let e=t.useContext(at),{basename:n,future:r,navigator:i}=t.useContext(ct),{matches:s}=t.useContext(ht),{pathname:o}=pt(),a=JSON.stringify(Je(s,r.v7_relativeSplatPath)),l=t.useRef(!1);return mt((()=>{l.current=!0})),t.useCallback((function(t,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof t)return void i.go(t);let s=Xe(t,JSON.parse(a),o,"path"===r.relative);null==e&&"/"!==n&&(s.pathname="/"===s.pathname?n:Ze([n,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)}),[n,i,a,o,e])}()}const vt=t.createContext(null);function yt(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(ct),{matches:s}=t.useContext(ht),{pathname:o}=pt(),a=JSON.stringify(Je(s,i.v7_relativeSplatPath));return t.useMemo((()=>Xe(e,JSON.parse(a),o,"path"===r)),[e,a,o,r])}function wt(e,n,r,i){ft()||ke(!1);let{navigator:s}=t.useContext(ct),{matches:o}=t.useContext(ht),a=o[o.length-1],l=a?a.params:{},c=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let u,h=pt();if(n){var d;let e="string"===typeof n?Re(n):n;"/"===c||(null==(d=e.pathname)?void 0:d.startsWith(c))||ke(!1),u=e}else u=h;let f=u.pathname||"/",p=Oe(e,{pathname:"/"===c?f:f.slice(c.length)||"/"});let m=Tt(p&&p.map((e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:Ze([c,s.encodeLocation?s.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?c:Ze([c,s.encodeLocation?s.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,r,i);return n&&m?t.createElement(ut.Provider,{value:{location:ot({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Ie.Pop}},m):m}function bt(){let e=function(){var e;let n=t.useContext(dt),r=Ct(kt.UseRouteError),i=At(kt.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=rt(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:s},r):null,null)}const _t=t.createElement(bt,null);class Et extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(ht.Provider,{value:this.props.routeContext},t.createElement(dt.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function It(e){let{routeContext:n,match:r,children:i}=e,s=t.useContext(at);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(ht.Provider,{value:n},i)}function Tt(e,n,r,i){var s;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var o;if(null==(o=r)||!o.errors)return null;e=r.matches}let a=e,l=null==(s=r)?void 0:s.errors;if(null!=l){let e=a.findIndex((e=>e.route.id&&(null==l?void 0:l[e.route.id])));e>=0||ke(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<a.length;t++){let e=a[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=t),e.route.loader&&e.route.id&&void 0===r.loaderData[e.route.id]&&(!r.errors||void 0===r.errors[e.route.id])){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}return a.reduceRight(((e,i,s)=>{let o,h=!1,d=null,f=null;var p;r&&(o=l&&i.route.id?l[i.route.id]:void 0,d=i.route.errorElement||_t,c&&(u<0&&0===s?(p="route-fallback",!1||Nt[p]||(Nt[p]=!0),h=!0,f=null):u===s&&(h=!0,f=i.route.hydrateFallbackElement||null)));let m=n.concat(a.slice(0,s+1)),g=()=>{let n;return n=o?d:h?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(It,{match:i,routeContext:{outlet:e,matches:m,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?t.createElement(Et,{location:r.location,revalidation:r.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var St=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(St||{}),kt=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(kt||{});function xt(e){let n=t.useContext(at);return n||ke(!1),n}function Ct(e){let n=t.useContext(lt);return n||ke(!1),n}function At(e){let n=function(e){let n=t.useContext(ht);return n||ke(!1),n}(),r=n.matches[n.matches.length-1];return r.route.id||ke(!1),r.route.id}const Nt={};r.startTransition;function Rt(e){return function(e){let n=t.useContext(ht).outlet;return n?t.createElement(vt.Provider,{value:e},n):n}(e.context)}function Pt(e){ke(!1)}function Dt(e){let{basename:n="/",children:r=null,location:i,navigationType:s=Ie.Pop,navigator:o,static:a=!1,future:l}=e;ft()&&ke(!1);let c=n.replace(/^\/*/,"/"),u=t.useMemo((()=>({basename:c,navigator:o,static:a,future:ot({v7_relativeSplatPath:!1},l)})),[c,l,o,a]);"string"===typeof i&&(i=Re(i));let{pathname:h="/",search:d="",hash:f="",state:p=null,key:m="default"}=i,g=t.useMemo((()=>{let e=Qe(h,c);return null==e?null:{location:{pathname:e,search:d,hash:f,state:p,key:m},navigationType:s}}),[c,h,d,f,p,m,s]);return null==g?null:t.createElement(ct.Provider,{value:u},t.createElement(ut.Provider,{children:r,value:g}))}function Ot(e){let{children:t,location:n}=e;return wt(Lt(t),n)}new Promise((()=>{}));t.Component;function Lt(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,((e,i)=>{if(!t.isValidElement(e))return;let s=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,Lt(e.props.children,s));e.type!==Pt&&ke(!1),e.props.index&&e.props.children&&ke(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Lt(e.props.children,s)),r.push(o)})),r}var Mt=n(164),Ft=n.t(Mt,2);function Ut(){return Ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ut.apply(this,arguments)}function Vt(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const zt=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];new Map;const Bt=r.startTransition;Ft.flushSync;function jt(e){let{basename:n,children:r,future:i,window:s}=e,o=t.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),Pe((function(e,t){let{pathname:n="/",search:r="",hash:i=""}=Re(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),Ae("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:Ne(t))}),(function(e,t){xe("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")}),a)));let l=o.current,[c,u]=t.useState({action:l.action,location:l.location}),{v7_startTransition:h}=i||{},d=t.useCallback((e=>{h&&Bt?Bt((()=>u(e))):u(e)}),[u,h]);return t.useLayoutEffect((()=>l.listen(d)),[l,d]),t.createElement(Dt,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}const qt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Gt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Wt=t.forwardRef((function(e,n){let r,{onClick:i,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:h,unstable_viewTransition:d}=e,f=Vt(e,zt),{basename:p}=t.useContext(ct),m=!1;if("string"===typeof u&&Gt.test(u)&&(r=u,qt))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=Qe(t.pathname,p);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:m=!0}catch(MN){}let g=function(e,n){let{relative:r}=void 0===n?{}:n;ft()||ke(!1);let{basename:i,navigator:s}=t.useContext(ct),{hash:o,pathname:a,search:l}=yt(e,{relative:r}),c=a;return"/"!==i&&(c="/"===a?i:Ze([i,a])),s.createHref({pathname:c,search:l,hash:o})}(u,{relative:s}),v=function(e,n){let{target:r,replace:i,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l}=void 0===n?{}:n,c=gt(),u=pt(),h=yt(e,{relative:a});return t.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:Ne(u)===Ne(h);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,unstable_viewTransition:l})}}),[u,c,h,i,s,r,e,o,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:h,relative:s,unstable_viewTransition:d});return t.createElement("a",Ut({},f,{href:r||g,onClick:m||o?i:function(e){i&&i(e),e.defaultPrevented||v(e)},ref:n,target:c}))}));var Kt,Ht;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Kt||(Kt={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ht||(Ht={}));var Qt=n(327),Yt=n(184);var $t=function(e,t,n){var r=e.key+"-"+t.name;!1===n&&void 0===e.registered[r]&&(e.registered[r]=t.styles)},Jt={}.hasOwnProperty,Xt=t.createContext("undefined"!==typeof HTMLElement?_e({key:"css"}):null);Xt.Provider;var Zt=function(e){return(0,t.forwardRef)((function(n,r){var i=(0,t.useContext)(Xt);return e(n,i,r)}))};var en=t.createContext({});var tn="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",nn=function(e,t){var n={};for(var r in t)Jt.call(t,r)&&(n[r]=t[r]);return n[tn]=e,n},rn=function(e){var t=e.cache,n=e.serialized,r=e.isStringTag;return $t(t,n,r),a((function(){return function(e,t,n){$t(e,t,n);var r=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+r:"",i,e.sheet,!0),i=i.next}while(void 0!==i)}}(t,n,r)})),null},sn=Zt((function(e,n,r){var i=e.css;"string"===typeof i&&void 0!==n.registered[i]&&(i=n.registered[i]);var s=e[tn],o=[i],a="";"string"===typeof e.className?a=function(e,t,n){var r="";return n.split(" ").forEach((function(n){void 0!==e[n]?t.push(e[n]+";"):r+=n+" "})),r}(n.registered,o,e.className):null!=e.className&&(a=e.className+" ");var l=w(o,void 0,t.useContext(en));a+=n.key+"-"+l.name;var c={};for(var u in e)Jt.call(e,u)&&"css"!==u&&u!==tn&&(c[u]=e[u]);return c.ref=r,c.className=a,t.createElement(t.Fragment,null,t.createElement(rn,{cache:n,serialized:l,isStringTag:"string"===typeof s}),t.createElement(s,c))}));var on,an,ln,cn,un=sn,hn=Yt.Fragment;function dn(e,t,n){return Jt.call(t,"css")?Yt.jsx(un,nn(e,t),n):Yt.jsx(e,t,n)}function fn(e,t,n){return Jt.call(t,"css")?Yt.jsxs(un,nn(e,t),n):Yt.jsxs(e,t,n)}const pn=Ee(on||(on=s(["\n  position: fixed;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -60%);\n  z-index: 30;\n  background-color: #fff;\n  height: 40vh;\n  max-width: 500px;\n  width: 80vw;\n  border: 2px solid #333;\n  border-radius: 10px;\n  padding: 30px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n"]))),mn=Ee(an||(an=s(["\n  display: flex;\n  flex-direction: column;\n  gap: 20px;\n"]))),gn=Ee(ln||(ln=s(["\n  display: flex;\n  gap: 20px;\n  justify-content: space-between;\n  align-items: center;\n  & > label {\n    white-space: nowrap;\n  }\n  & > input {\n    width: 100%;\n    max-width: 300px;\n    border-radius: 10px;\n    border: 1.5px solid #333;\n    padding: 12px 20px;\n  }\n"]))),vn=Ee(cn||(cn=s(["\n  border: 2px solid #333;\n  border-radius: 100px;\n  width: 40%;\n  padding: 10px;\n  background-color: #333333;\n  color: #fff;\n  margin-right: auto;\n  margin-left: auto;\n"]))),yn=e=>{let{userProfile:n,onSave:r}=e;const[i,s]=(0,t.useState)(n);return fn("div",{css:pn,children:[fn("div",{css:mn,children:[fn("div",{css:gn,children:[dn("label",{htmlFor:"name-input",children:"\u540d\u524d:"}),dn("input",{type:"text",id:"name-input",value:i.name,onChange:e=>{s({...i,name:e.target.value})}})]}),fn("div",{css:gn,children:[dn("label",{htmlFor:"comment-input",children:"\u30b3\u30e1\u30f3\u30c8:"}),dn("input",{type:"text",id:"comment-input",value:i.comment,onChange:e=>{s({...i,comment:e.target.value})}})]})]}),dn("button",{css:vn,onClick:()=>{r(i)},children:"\u4fdd\u5b58"})]})},wn=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},bn={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,l=a?e[i+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(wn(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw new _n;const l=t<<2|s>>4;if(r.push(l),64!==o){const e=s<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class _n extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const En=function(e){return function(e){const t=wn(e);return bn.encodeByteArray(t,!0)}(e).replace(/\./g,"")},In=function(e){try{return bn.decodeString(e,!0)}catch(MN){console.error("base64Decode failed: ",MN)}return null};function Tn(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=Tn(e[n],t[n]));return e}const Sn=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,kn=()=>{try{return Sn()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBV2Gy-2ioJyL0xPN01fM1i3NAY5PQ6Qhg",REACT_APP_AUTH_DOMAIN:"chat-580cf.firebaseapp.com",REACT_APP_PROJECT_ID:"chat-580cf",REACT_APP_STORAGE_BUCKET:"chat-580cf.appspot.com",REACT_APP_MESSAGEING_SENDER_ID:"556518847811",REACT_APP_APP_ID:"1:556518847811:web:fd69272bdce0fadfe22bf6"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(MN){return}const t=e&&In(e[1]);return t&&JSON.parse(t)})()}catch(MN){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(MN))}},xn=()=>{var e;return null===(e=kn())||void 0===e?void 0:e.config};class Cn{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function An(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[En(JSON.stringify({alg:"none",type:"JWT"})),En(JSON.stringify(s)),""].join(".")}function Nn(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Rn(){var e;const t=null===(e=kn())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(MN){return!1}}function Pn(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Dn(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function On(){const e=Nn();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function Ln(){try{return"object"===typeof indexedDB}catch(MN){return!1}}class Mn extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fn.prototype.create)}}class Fn{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Un,((e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Mn(n,s,t)}}const Un=/\{\$([^}]+)}/g;function Vn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function zn(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(Bn(n)&&Bn(s)){if(!zn(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Bn(e){return null!==e&&"object"===typeof e}function jn(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function qn(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function Gn(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Wn(e,t){const n=new Kn(e,t);return n.subscribe.bind(n)}class Kn{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Hn),void 0===r.error&&(r.error=Hn),void 0===r.complete&&(r.complete=Hn);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(MN){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(MN){"undefined"!==typeof console&&console.error&&console.error(MN)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Hn(){}function Qn(e){return e&&e._delegate?e._delegate:e}class Yn{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const $n="[DEFAULT]";class Jn{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new Cn;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(MN){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(MN){if(r)return null;throw MN}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:$n})}catch(MN){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(MN){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$n;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$n;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$n;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Xn(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$n;return this.component?this.component.multipleInstances?e:$n:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function Xn(e){return e===$n?void 0:e}class Zn{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Jn(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const er=[];var tr;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(tr||(tr={}));const nr={debug:tr.DEBUG,verbose:tr.VERBOSE,info:tr.INFO,warn:tr.WARN,error:tr.ERROR,silent:tr.SILENT},rr=tr.INFO,ir={[tr.DEBUG]:"log",[tr.VERBOSE]:"log",[tr.INFO]:"info",[tr.WARN]:"warn",[tr.ERROR]:"error"},sr=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ir[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class or{constructor(e){this.name=e,this._logLevel=rr,this._logHandler=sr,this._userLogHandler=null,er.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in tr))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?nr[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,tr.DEBUG,...t),this._logHandler(this,tr.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,tr.VERBOSE,...t),this._logHandler(this,tr.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,tr.INFO,...t),this._logHandler(this,tr.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,tr.WARN,...t),this._logHandler(this,tr.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,tr.ERROR,...t),this._logHandler(this,tr.ERROR,...t)}}const ar=(e,t)=>t.some((t=>e instanceof t));let lr,cr;const ur=new WeakMap,hr=new WeakMap,dr=new WeakMap,fr=new WeakMap,pr=new WeakMap;let mr={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return hr.get(e);if("objectStoreNames"===t)return e.objectStoreNames||dr.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yr(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function gr(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(cr||(cr=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(wr(this),n),yr(ur.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yr(e.apply(wr(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(wr(this),t,...r);return dr.set(s,t.sort?t.sort():[t]),yr(s)}}function vr(e){return"function"===typeof e?gr(e):(e instanceof IDBTransaction&&function(e){if(hr.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)}));hr.set(e,t)}(e),ar(e,lr||(lr=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,mr):e)}function yr(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(yr(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&ur.set(t,e)})).catch((()=>{})),pr.set(t,e),t}(e);if(fr.has(e))return fr.get(e);const t=vr(e);return t!==e&&(fr.set(e,t),pr.set(t,e)),t}const wr=e=>pr.get(e);const br=["get","getKey","getAll","getAllKeys","count"],_r=["put","add","delete","clear"],Er=new Map;function Ir(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Er.get(t))return Er.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=_r.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!br.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),i&&t.done]))[0]};return Er.set(t,s),s}mr=(e=>({...e,get:(t,n,r)=>Ir(t,n)||e.get(t,n,r),has:(t,n)=>!!Ir(t,n)||e.has(t,n)}))(mr);class Tr{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const Sr="@firebase/app",kr="0.9.25",xr=new or("@firebase/app"),Cr="[DEFAULT]",Ar={[Sr]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nr=new Map,Rr=new Map;function Pr(e,t){try{e.container.addComponent(t)}catch(MN){xr.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),MN)}}function Dr(e,t){e.container.addOrOverwriteComponent(t)}function Or(e){const t=e.name;if(Rr.has(t))return xr.debug("There were multiple attempts to register component ".concat(t,".")),!1;Rr.set(t,e);for(const n of Nr.values())Pr(n,e);return!0}function Lr(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Mr(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Cr;Lr(e,t).clearInstance(n)}function Fr(){Rr.clear()}const Ur=new Fn("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Vr{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Yn("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ur.create("app-deleted",{appName:this._name})}}const zr="10.7.1";function Br(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:Cr,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Ur.create("bad-app-name",{appName:String(i)});if(n||(n=xn()),!n)throw Ur.create("no-options");const s=Nr.get(i);if(s){if(zn(n,s.options)&&zn(r,s.config))return s;throw Ur.create("duplicate-app",{appName:i})}const o=new Zn(i);for(const l of Rr.values())o.addComponent(l);const a=new Vr(n,r,o);return Nr.set(i,a),a}function jr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cr;const t=Nr.get(e);if(!t&&e===Cr&&xn())return Br();if(!t)throw Ur.create("no-app",{appName:e});return t}function qr(){return Array.from(Nr.values())}async function Gr(e){const t=e.name;Nr.has(t)&&(Nr.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Wr(e,t,n){var r;let i=null!==(r=Ar[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void xr.warn(e.join(" "))}Or(new Yn("".concat(i,"-version"),(()=>({library:i,version:t})),"VERSION"))}function Kr(e,t){if(null!==e&&"function"!==typeof e)throw Ur.create("invalid-log-argument");!function(e,t){for(const n of er){let r=null;t&&t.level&&(r=nr[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var i=arguments.length,s=new Array(i>2?i-2:0),o=2;o<i;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==r&&void 0!==r?r:t.logLevel)&&e({level:tr[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Hr(e){var t;t=e,er.forEach((e=>{e.setLogLevel(t)}))}const Qr="firebase-heartbeat-database",Yr=1,$r="firebase-heartbeat-store";let Jr=null;function Xr(){return Jr||(Jr=function(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=yr(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(yr(o.result),e.oldVersion,e.newVersion,yr(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Qr,Yr,{upgrade:(e,t)=>{if(0===t)e.createObjectStore($r)}}).catch((e=>{throw Ur.create("idb-open",{originalErrorMessage:e.message})}))),Jr}async function Zr(e,t){try{const n=(await Xr()).transaction($r,"readwrite"),r=n.objectStore($r);await r.put(t,ei(e)),await n.done}catch(MN){if(MN instanceof Mn)xr.warn(MN.message);else{const t=Ur.create("idb-set",{originalErrorMessage:null===MN||void 0===MN?void 0:MN.message});xr.warn(t.message)}}}function ei(e){return"".concat(e.name,"!").concat(e.options.appId)}class ti{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ri(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ni();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ni(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),ii(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ii(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=En(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function ni(){return(new Date).toISOString().substring(0,10)}class ri{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ln()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await Xr();return await t.transaction($r).objectStore($r).get(ei(e))}catch(MN){if(MN instanceof Mn)xr.warn(MN.message);else{const t=Ur.create("idb-get",{originalErrorMessage:null===MN||void 0===MN?void 0:MN.message});xr.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Zr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Zr(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ii(e){return En(JSON.stringify({version:2,heartbeats:e})).length}var si;si="",Or(new Yn("platform-logger",(e=>new Tr(e)),"PRIVATE")),Or(new Yn("heartbeat",(e=>new ti(e)),"PRIVATE")),Wr(Sr,kr,si),Wr(Sr,kr,"esm2017"),Wr("fire-js","");class oi{constructor(e,t){this._delegate=e,this.firebase=t,Pr(e,new Yn("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Gr(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cr;var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cr;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Pr(this._delegate,e)}_addOrOverwriteComponent(e){Dr(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ai=new Fn("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const li=function t(){const n=function(t){const n={},r={__esModule:!0,initializeApp:function(e){const i=Br(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Vn(n,i.name))return n[i.name];const s=new t(i,r);return n[i.name]=s,s},app:i,registerVersion:Wr,setLogLevel:Hr,onLog:Kr,apps:null,SDK_VERSION:zr,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(Or(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[s])throw ai.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&Tn(o,e.serviceProps),r[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Vn(n,e=e||Cr))throw ai.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),i.App=t,r}(oi);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){Tn(n,e)},createSubscribe:Wn,ErrorFactory:Fn,deepExtend:Tn}),n}(),ci=new or("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){ci.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&ci.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ui=li;!function(e){Wr("@firebase/app-compat","0.2.25",e)}();ui.registerVersion("firebase","10.7.1","app-compat");const hi="firebasestorage.googleapis.com",di="storageBucket";class fi extends Mn{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(gi(e),"Firebase Storage: ".concat(t," (").concat(gi(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return gi(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var pi,mi;function gi(e){return"storage/"+e}function vi(){return new fi(pi.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function yi(){return new fi(pi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function wi(){return new fi(pi.CANCELED,"User canceled the upload/download.")}function bi(){return new fi(pi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _i(e){return new fi(pi.INVALID_ARGUMENT,e)}function Ei(){return new fi(pi.APP_DELETED,"The Firebase app was deleted.")}function Ii(e){return new fi(pi.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ti(e,t){return new fi(pi.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Si(e){throw new fi(pi.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(pi||(pi={}));class ki{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=ki.makeFromUrl(e,t)}catch(MN){return new ki(e,"")}if(""===n.path)return n;throw r=e,new fi(pi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://".concat(t===hi?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:s}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new ki(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new fi(pi.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class xi{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Ci(e){return"string"===typeof e||e instanceof String}function Ai(e){return Ni()&&e instanceof Blob}function Ni(){return"undefined"!==typeof Blob}function Ri(e,t,n,r){if(r<t)throw _i("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw _i("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Pi(e,t,n){let r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Di(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Oi(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(mi||(mi={}));class Li{constructor(e,t,n,r,i,s,o,a,l,c,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new Mi(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===mi.NO_ERROR,i=n.getStatus();if(!t||Oi(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===mi.ABORT;return void e(!1,new Mi(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new Mi(s,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(MN){r(MN)}else if(null!==i){const e=vi();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else if(t.canceled){r(this.appDelete_?Ei():wi())}else{r(yi())}};this.canceled_?t(0,new Mi(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){i=setTimeout((()=>{i=null,e(f,l())}),t)}function d(){s&&clearTimeout(s)}function f(e){if(c)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return d(),void u.call(null,e,...n);if(l()||o)return d(),void u.call(null,e,...n);let s;r<64&&(r*=2),1===a?(a=2,s=0):s=1e3*(r+Math.random()),h(s)}let p=!1;function m(e){p||(p=!0,d(),c||(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout((()=>{o=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Mi{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Fi(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Ui(){const e=Fi();for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){const t=new e;for(let e=0;e<n.length;e++)t.append(n[e]);return t.getBlob()}if(Ni())return new Blob(n);throw new fi(pi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function Vi(e){if("undefined"===typeof atob)throw t="base-64",new fi(pi.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}const zi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Bi{constructor(e,t){this.data=e,this.contentType=t||null}}function ji(e,t){switch(e){case zi.RAW:return new Bi(qi(t));case zi.BASE64:case zi.BASE64URL:return new Bi(Gi(e,t));case zi.DATA_URL:return new Bi(function(e){const t=new Wi(e);return t.base64?Gi(zi.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(MN){throw Ti(zi.DATA_URL,"Malformed data URL.")}return qi(t)}(t.rest)}(t),new Wi(t).contentType)}throw vi()}function qi(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r)){if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1))){r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else t.push(239,191,189)}else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function Gi(e,t){switch(e){case zi.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r){throw Ti(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?")}break}case zi.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r){throw Ti(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?")}t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Vi(t)}catch(MN){if(MN.message.includes("polyfill"))throw MN;throw Ti(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class Wi{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Ti(zi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;if(!n)return!1;return e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class Ki{constructor(e,t){let n=0,r="";Ai(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(Ai(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Ki(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new Ki(n,!0)}}static getBlob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(Ni()){const e=t.map((e=>e instanceof Ki?e.data_:e));return new Ki(Ui.apply(null,e))}{const e=t.map((e=>Ci(e)?ji(zi.RAW,e).data:e.data_));let n=0;e.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return e.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new Ki(r,!0)}}uploadData(){return this.data_}}function Hi(e){let t;try{t=JSON.parse(e)}catch(MN){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function Qi(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function Yi(e,t){return t}class $i{constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Yi}}let Ji=null;function Xi(){if(Ji)return Ji;const e=[];e.push(new $i("bucket")),e.push(new $i("generation")),e.push(new $i("metageneration")),e.push(new $i("name","fullPath",!0));const t=new $i("name");t.xform=function(e,t){return function(e){return!Ci(e)||e.length<2?e:Qi(e)}(t)},e.push(t);const n=new $i("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new $i("timeCreated")),e.push(new $i("updated")),e.push(new $i("md5Hash",null,!0)),e.push(new $i("cacheControl",null,!0)),e.push(new $i("contentDisposition",null,!0)),e.push(new $i("contentEncoding",null,!0)),e.push(new $i("contentLanguage",null,!0)),e.push(new $i("contentType",null,!0)),e.push(new $i("metadata","customMetadata",!0)),Ji=e,Ji}function Zi(e,t,n){const r={type:"file"},i=n.length;for(let s=0;s<i;s++){const e=n[s];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new ki(n,r);return t._makeStorageReference(i)}})}(r,e),r}function es(e,t,n){const r=Hi(t);if(null===r)return null;return Zi(e,r,n)}function ts(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}const ns="prefixes",rs="items";function is(e,t,n){const r=Hi(n);if(null===r)return null;return function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[ns])for(const i of n[ns]){const n=i.replace(/\/$/,""),s=e._makeStorageReference(new ki(t,n));r.prefixes.push(s)}if(n[rs])for(const i of n[rs]){const n=e._makeStorageReference(new ki(t,i.name));r.items.push(n)}return r}(e,t,r)}class ss{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function os(e){if(!e)throw vi()}function as(e,t){return function(n,r){const i=es(e,r,t);return os(null!==i),i}}function ls(e,t){return function(n,r){const i=es(e,r,t);return os(null!==i),function(e,t,n,r){const i=Hi(t);if(null===i)return null;if(!Ci(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const o=encodeURIComponent,a=s.split(",").map((t=>{const i=e.bucket,s=e.fullPath;return Pi("/b/"+o(i)+"/o/"+o(s),n,r)+Di({alt:"media",token:t})}));return a[0]}(i,r,e.host,e._protocol)}}function cs(e){return function(t,n){let r;var i,s;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new fi(pi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new fi(pi.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(s=e.bucket,r=new fi(pi.QUOTA_EXCEEDED,"Quota for bucket '"+s+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new fi(pi.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function us(e){const t=cs(e);return function(n,r){let i=t(n,r);var s;return 404===n.getStatus()&&(s=e.path,i=new fi(pi.OBJECT_NOT_FOUND,"Object '"+s+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function hs(e,t,n){const r=Pi(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new ss(r,"GET",as(e,n),i);return s.errorHandler=us(t),s}function ds(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n&&n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=Pi(t.bucketOnlyServerUrl(),e.host,e._protocol),a=e.maxOperationRetryTime,l=new ss(o,"GET",function(e,t){return function(n,r){const i=is(e,t,r);return os(null!==i),i}}(e,t.bucket),a);return l.urlParams=s,l.errorHandler=cs(t),l}function fs(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function ps(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};const a=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+a;const l=fs(t,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+ts(l,n)+"\r\n--"+a+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",u="\r\n--"+a+"--",h=Ki.getBlob(c,r,u);if(null===h)throw bi();const d={name:l.fullPath},f=Pi(s,e.host,e._protocol),p=e.maxUploadRetryTime,m=new ss(f,"POST",as(e,n),p);return m.urlParams=d,m.headers=o,m.body=h.uploadData(),m.errorHandler=cs(t),m}class ms{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function gs(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(MN){os(!1)}return os(!!n&&-1!==(t||["active"]).indexOf(n)),n}const vs=262144;function ys(e,t,n,r,i,s,o,a){const l=new ms(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new fi(pi.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const c=l.total-l.current;let u=c;i>0&&(u=Math.min(u,i));const h=l.current,d=h+u;let f="";f=0===u?"finalize":c===u?"upload, finalize":"upload";const p={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(l.current)},m=r.slice(h,d);if(null===m)throw bi();const g=t.maxUploadRetryTime,v=new ss(n,"POST",(function(e,n){const i=gs(e,["active","final"]),o=l.current+u,a=r.size();let c;return c="final"===i?as(t,s)(e,n):null,new ms(o,a,"final"===i,c)}),g);return v.headers=p,v.body=m.uploadData(),v.progressCallback=a||null,v.errorHandler=cs(e),v}const ws={STATE_CHANGED:"state_changed"},bs={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function _s(e){switch(e){case"running":case"pausing":case"canceling":return bs.RUNNING;case"paused":return bs.PAUSED;case"success":return bs.SUCCESS;case"canceled":return bs.CANCELED;default:return bs.ERROR}}class Es{constructor(e,t,n){const r=function(e){return"function"===typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!==t&&void 0!==t?t:void 0,this.complete=null!==n&&void 0!==n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}function Is(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((()=>e(...n)))}}let Ts=null;class Ss{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=mi.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=mi.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=mi.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw Si("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Si("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Si("cannot .getStatus() before sending");try{return this.xhr_.status}catch(MN){return-1}}getResponse(){if(!this.sent_)throw Si("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Si("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class ks extends Ss{initXhr(){this.xhr_.responseType="text"}}function xs(){return Ts?Ts():new ks}class Cs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=Xi(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(pi.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(Oi(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=yi()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(pi.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((t=>{let[n,r]=t;switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o=fs(t,r,i),a={name:o.fullPath},l=Pi(s,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},u=ts(o,n),h=e.maxUploadRetryTime,d=new ss(l,"POST",(function(e){let t;gs(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(MN){os(!1)}return os(Ci(t)),t}),h);return d.urlParams=a,d.headers=c,d.body=u,d.errorHandler=cs(t),d}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,xs,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,s=new ss(n,"POST",(function(e){const t=gs(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(MN){os(!1)}n||os(!1);const i=Number(n);return os(!isNaN(i)),new ms(i,r.size(),"final"===t)}),i);return s.headers={"X-Goog-Upload-Command":"query"},s.errorHandler=cs(t),s}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,xs,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=vs*this._chunkMultiplier,t=new ms(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let s;try{s=ys(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(MN){return this._error=MN,void this._transition("error")}const o=this._ref.storage._makeRequest(s,xs,r,i,!1);this._request=o,o.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){2*(vs*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=hs(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,xs,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=ps(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,xs,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=wi(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=_s(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new Es(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise();this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(_s(this._state)){case bs.SUCCESS:Is(this._resolve.bind(null,this.snapshot))();break;case bs.CANCELED:case bs.ERROR:Is(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(_s(this._state)){case bs.RUNNING:case bs.PAUSED:e.next&&Is(e.next.bind(e,this.snapshot))();break;case bs.SUCCESS:e.complete&&Is(e.complete.bind(e))();break;default:e.error&&Is(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class As{constructor(e,t){this._service=e,this._location=t instanceof ki?t:ki.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new As(e,t)}get root(){const e=new ki(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Qi(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new ki(this._location.bucket,e);return new As(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Ii(e)}}function Ns(e){const t={prefixes:[],items:[]};return Rs(e,t).then((()=>t))}async function Rs(e,t,n){const r={pageToken:n},i=await Ps(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await Rs(e,t,i.nextPageToken)}function Ps(e,t){null!=t&&"number"===typeof t.maxResults&&Ri("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=ds(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,xs)}function Ds(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=Pi(t.fullServerUrl(),e.host,e._protocol),s=ts(n,r),o=e.maxOperationRetryTime,a=new ss(i,"PATCH",as(e,r),o);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=s,a.errorHandler=us(t),a}(e.storage,e._location,t,Xi());return e.storage.makeRequestWithTokens(n,xs)}function Os(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=Pi(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,s=new ss(r,"GET",ls(e,n),i);return s.errorHandler=us(t),s}(e.storage,e._location,Xi());return e.storage.makeRequestWithTokens(t,xs).then((e=>{if(null===e)throw new fi(pi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Ls(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=Pi(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new ss(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=us(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,xs)}function Ms(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new ki(e._location.bucket,n);return new As(e.storage,r)}function Fs(e,t){if(e instanceof zs){const n=e;if(null==n._bucket)throw new fi(pi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+di+"' property when initializing the app?");const r=new As(n,n._bucket);return null!=t?Fs(r,t):r}return void 0!==t?Ms(e,t):e}function Us(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof zs)return new As(e,t);throw _i("To use ref(service, url), the first argument must be a Storage instance.")}return Fs(e,t)}function Vs(e,t){const n=null===t||void 0===t?void 0:t[di];return null==n?null:ki.makeFromBucketSpec(n,e)}class zs{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=hi,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?ki.makeFromBucketSpec(r,this._host):Vs(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=ki.makeFromBucketSpec(this._url,e):this._bucket=Vs(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Ri("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Ri("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new As(this,e)}_makeRequest(e,t,n,r){let i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new xi(Ei());{const s=function(e,t,n,r,i,s){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Di(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Li(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(s),s.getPromise().then((()=>this._requests.delete(s)),(()=>this._requests.delete(s))),s}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Bs="@firebase/storage",js="0.12.0",qs="storage";function Gs(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Cs(e,new Ki(t),n)}(e=Qn(e),t,n)}function Ws(e){return function(e){e._throwIfRoot("getMetadata");const t=hs(e.storage,e._location,Xi());return e.storage.makeRequestWithTokens(t,xs)}(e=Qn(e))}function Ks(e,t){return Us(e=Qn(e),t)}function Hs(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:An(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function Qs(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new zs(r,i,s,n,zr)}Or(new Yn(qs,Qs,"PUBLIC").setMultipleInstances(!0)),Wr(Bs,js,""),Wr(Bs,js,"esm2017");class Ys{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class $s{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Ys(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new Ys(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"===typeof t?e=>t(new Ys(e,this,this._ref)):{next:t.next?e=>t.next(new Ys(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class Js{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new Xs(e,this._service)))}get items(){return this._delegate.items.map((e=>new Xs(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Xs{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return Ms(e,t)}(this._delegate,e);return new Xs(t,this.storage)}get root(){return new Xs(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Xs(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new $s(Gs(this._delegate,e,t),this)}putString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zi.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");const r=ji(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new $s(new Cs(this._delegate,new Ki(r.data,!0),i),this)}listAll(){return function(e){return Ns(e=Qn(e))}(this._delegate).then((e=>new Js(e,this.storage)))}list(e){return function(e,t){return Ps(e=Qn(e),t)}(this._delegate,e||void 0).then((e=>new Js(e,this.storage)))}getMetadata(){return Ws(this._delegate)}updateMetadata(e){return function(e,t){return Ds(e=Qn(e),t)}(this._delegate,e)}getDownloadURL(){return function(e){return Os(e=Qn(e))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return Ls(e=Qn(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Ii(e)}}class Zs{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(eo(e))throw _i("ref() expected a child path but got a URL, use refFromURL instead.");return new Xs(Ks(this._delegate,e),this)}refFromURL(e){if(!eo(e))throw _i("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ki.makeFromUrl(e,this._delegate.host)}catch(MN){throw _i("refFromUrl() expected a valid full URL but got an invalid one.")}return new Xs(Ks(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Hs(this._delegate,e,t,n)}}function eo(e){return/^[A-Za-z]+:\/\//.test(e)}function to(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new Zs(r,i)}!function(e){const t={TaskState:bs,TaskEvent:ws,StringFormat:zi,Storage:Zs,Reference:Xs};e.INTERNAL.registerComponent(new Yn("storage-compat",to,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.3")}(ui);function no(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const ro={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},io="EMAIL_SIGNIN",so="PASSWORD_RESET",oo="RECOVER_EMAIL",ao="REVERT_SECOND_FACTOR_ADDITION",lo="VERIFY_AND_CHANGE_EMAIL",co="VERIFY_EMAIL";function uo(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ho=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},fo=uo,po=new Fn("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),mo=new or("@firebase/auth");function go(e){if(mo.logLevel<=tr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];mo.error("Auth (".concat(zr,"): ").concat(e),...n)}}function vo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw _o(e,...n)}function yo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return _o(e,...n)}function wo(e,t,n){const r=Object.assign(Object.assign({},fo()),{[t]:n});return new Fn("auth","Firebase",r).create(t,{appName:e.name})}function bo(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&vo(e,"argument-error"),wo(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function _o(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return po.create(e,...n)}function Eo(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw _o(t,...r)}}function Io(e){const t="INTERNAL ASSERTION FAILED: "+e;throw go(t),new Error(t)}function To(e,t){e||Io(t)}function So(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function ko(){return"http:"===xo()||"https:"===xo()}function xo(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Co{constructor(e,t){this.shortDelay=e,this.longDelay=t,To(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Nn())||Dn()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(ko()||Pn()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ao(e,t){To(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class No{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Io("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Io("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Io("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ro={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Po=new Co(3e4,6e4);function Do(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Oo(e,t,n,r){return Lo(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const o=jn(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),No.fetch()(Fo(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},i))}))}async function Lo(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ro),t);try{const t=new Vo(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw zo(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw zo(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw zo(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw zo(e,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw wo(e,a,o);vo(e,a)}}catch(MN){if(MN instanceof Mn)throw MN;vo(e,"network-request-failed",{message:String(MN)})}}async function Mo(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Oo(e,t,n,r,i);return"mfaPendingCredential"in s&&vo(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Fo(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Ao(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function Uo(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vo{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(yo(this.auth,"network-request-failed"))),Po.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function zo(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=yo(e,t,r);return i.customData._tokenResponse=n,i}function Bo(e){return void 0!==e&&void 0!==e.getResponse}function jo(e){return void 0!==e&&void 0!==e.enterprise}class qo{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Uo(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function Go(e,t){return Oo(e,"GET","/v2/recaptchaConfig",Do(e,t))}function Wo(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(MN){}}function Ko(e){return 1e3*Number(e)}function Ho(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return go("JWT malformed, contained fewer than 3 sections"),null;try{const e=In(n);return e?JSON.parse(e):(go("Failed to decode base64 JWT payload"),null)}catch(MN){return go("Caught error parsing JWT payload as JSON",null===MN||void 0===MN?void 0:MN.toString()),null}}async function Qo(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(MN){throw MN instanceof Mn&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(MN)&&e.auth.currentUser===e&&await e.auth.signOut(),MN}}class Yo{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(MN){return void((null===MN||void 0===MN?void 0:MN.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class $o{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Wo(this.lastLoginAt),this.creationTime=Wo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Jo(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Qo(e,async function(e,t){return Oo(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Eo(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?s.providerUserInfo.map((e=>{var{providerId:t}=e,n=no(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[];const a=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,o),l=e.isAnonymous,c=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new $o(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(e,h)}class Xo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Eo(e.idToken,"internal-error"),Eo("undefined"!==typeof e.idToken,"internal-error"),Eo("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=Ho(e);return Eo(t,"internal-error"),Eo("undefined"!==typeof t.exp,"internal-error"),Eo("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Eo(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await Lo(e,{},(async()=>{const n=jn({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=Fo(e,r,"/v1/token","key=".concat(i)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",No.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Xo;return n&&(Eo("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Eo("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Eo("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Xo,this.toJSON())}_performRefresh(){return Io("not implemented")}}function Zo(e,t){Eo("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class ea{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=no(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yo(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $o(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Qo(this,this.stsTokenManager.getToken(this.auth,e));return Eo(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Qn(e),r=await n.getIdToken(t),i=Ho(r);Eo(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Wo(Ko(i.auth_time)),issuedAtTime:Wo(Ko(i.iat)),expirationTime:Wo(Ko(i.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Qn(e);await Jo(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Eo(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ea(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Eo(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Jo(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Qo(this,async function(e,t){return Oo(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:y,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:E}=t;Eo(y&&E,e,"internal-error");const I=Xo.fromJSON(this.name,E);Eo("string"===typeof y,e,"internal-error"),Zo(u,e.name),Zo(h,e.name),Eo("boolean"===typeof w,e,"internal-error"),Eo("boolean"===typeof b,e,"internal-error"),Zo(d,e.name),Zo(f,e.name),Zo(p,e.name),Zo(m,e.name),Zo(g,e.name),Zo(v,e.name);const T=new ea({uid:y,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:I,createdAt:g,lastLoginAt:v});return _&&Array.isArray(_)&&(T.providerData=_.map((e=>Object.assign({},e)))),m&&(T._redirectEventId=m),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Xo;r.updateFromServerResponse(t);const i=new ea({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Jo(i),i}}const ta=new Map;function na(e){To(e instanceof Function,"Expected a class definition");let t=ta.get(e);return t?(To(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ta.set(e,t),t)}class ra{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ra.type="NONE";const ia=ra;function sa(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class oa{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=sa(this.userKey,r.apiKey,i),this.fullPersistenceKey=sa("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ea._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new oa(na(ia),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||na(ia);const s=sa(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=ea._fromJSON(e,t);c!==i&&(o=n),i=c;break}}catch(l){}const a=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(s)}catch(l){}}))),new oa(i,e,n)):new oa(i,e,n)}}function aa(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ha(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(la(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(fa(t))return"Blackberry";if(pa(t))return"Webos";if(ca(t))return"Safari";if((t.includes("chrome/")||ua(t))&&!t.includes("edge/"))return"Chrome";if(da(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function la(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/firefox\//i.test(e)}function ca(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ua(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/crios\//i.test(e)}function ha(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/iemobile/i.test(e)}function da(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/android/i.test(e)}function fa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/blackberry/i.test(e)}function pa(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/webos/i.test(e)}function ma(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function ga(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return ma(e)||da(e)||pa(e)||fa(e)||/windows phone/i.test(e)||ha(e)}function va(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=aa(Nn());break;case"Worker":t="".concat(aa(Nn()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(zr,"/").concat(r)}class ya{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(MN){r(MN)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(MN){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===MN||void 0===MN?void 0:MN.message})}}}class wa{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(i=a.containsUppercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class ba{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ea(this),this.idTokenSubscription=new Ea(this),this.beforeStateQueue=new ya(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=po,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=na(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await oa.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(MN){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(MN){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(MN)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Eo(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(MN){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Jo(e)}catch(MN){if((null===MN||void 0===MN?void 0:MN.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Qn(e):null;return t&&Eo(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Eo(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(na(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Oo(e,"GET","/v2/passwordPolicy",Do(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new wa(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fn("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Oo(e,"POST","/v2/accounts:revokeToken",Do(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&na(e)||this._popupRedirectResolver;Eo(t,this,"argument-error"),this.redirectPersistenceManager=await oa.create(this,[na(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(Eo(o,this,"internal-error"),o.then((()=>{s||i(this.currentUser)})),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Eo(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=va(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(mo.logLevel<=tr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];mo.warn("Auth (".concat(zr,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function _a(e){return Qn(e)}class Ea{constructor(e){this.auth=e,this.observer=null,this.addObserver=Wn((e=>this.observer=e))}get next(){return Eo(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ia(e){return new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=yo("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ta(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class Sa{constructor(e){this.type="recaptcha-enterprise",this.auth=_a(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;jo(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{Go(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new qo(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((i=>{if(!t&&jo(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Ia("https://www.google.com/recaptcha/enterprise.js?render="+i).then((()=>{n(i,e,r)})).catch((e=>{r(e)}))}})).catch((e=>{r(e)}))}))}}async function ka(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=new Sa(e);let s;try{s=await i.verify(n)}catch(a){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function xa(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await ka(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await ka(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function Ca(e,t,n){const r=_a(e);Eo(r._canInitEmulator,r,"emulator-config-failed"),Eo(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=Aa(t),{host:o,port:a}=function(e){const t=Aa(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Na(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Na(t)}}}(t),l=null===a?"":":".concat(a);r.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Aa(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Na(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ra{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Io("not implemented")}_getIdTokenResponse(e){return Io("not implemented")}_linkToIdToken(e,t){return Io("not implemented")}_getReauthenticationResolver(e){return Io("not implemented")}}async function Pa(e,t){return Oo(e,"POST","/v1/accounts:resetPassword",Do(e,t))}async function Da(e,t){return Oo(e,"POST","/v1/accounts:signUp",t)}async function Oa(e,t){return Mo(e,"POST","/v1/accounts:signInWithPassword",Do(e,t))}async function La(e,t){return Oo(e,"POST","/v1/accounts:sendOobCode",Do(e,t))}async function Ma(e,t){return La(e,t)}async function Fa(e,t){return La(e,t)}class Ua extends Ra{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ua(e,t,"password")}static _fromEmailAndCode(e,t){return new Ua(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return xa(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Oa);case"emailLink":return async function(e,t){return Mo(e,"POST","/v1/accounts:signInWithEmailLink",Do(e,t))}(e,{email:this._email,oobCode:this._password});default:vo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return xa(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Da);case"emailLink":return async function(e,t){return Mo(e,"POST","/v1/accounts:signInWithEmailLink",Do(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:vo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Va(e,t){return Mo(e,"POST","/v1/accounts:signInWithIdp",Do(e,t))}class za extends Ra{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new za(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):vo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=no(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new za(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return Va(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Va(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Va(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=jn(t)}return e}}const Ba={USER_NOT_FOUND:"user-not-found"};class ja extends Ra{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new ja({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new ja({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Mo(e,"POST","/v1/accounts:signInWithPhoneNumber",Do(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Mo(e,"POST","/v1/accounts:signInWithPhoneNumber",Do(e,t));if(n.temporaryProof)throw zo(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Mo(e,"POST","/v1/accounts:signInWithPhoneNumber",Do(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ba)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new ja({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class qa{constructor(e){var t,n,r,i,s,o;const a=qn(Gn(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Eo(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=a.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=qn(Gn(e)).link,n=t?qn(Gn(t)).deep_link_id:null,r=qn(Gn(e)).deep_link_id;return(r?qn(Gn(r)).link:null)||r||n||t||e}(e);try{return new qa(t)}catch(n){return null}}}class Ga{constructor(){this.providerId=Ga.PROVIDER_ID}static credential(e,t){return Ua._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=qa.parseLink(t);return Eo(n,"argument-error"),Ua._fromEmailAndCode(e,n.code,n.tenantId)}}Ga.PROVIDER_ID="password",Ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Wa{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ka extends Wa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Ha extends Ka{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return Eo("providerId"in t&&"signInMethod"in t,"argument-error"),za._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return Eo(e.idToken||e.accessToken,"argument-error"),za._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Ha.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Ha.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:s,nonce:o,providerId:a}=t;if(!r&&!i&&!n&&!s)return null;if(!a)return null;try{return new Ha(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:s})}catch(MN){return null}}}class Qa extends Ka{constructor(){super("facebook.com")}static credential(e){return za._fromParams({providerId:Qa.PROVIDER_ID,signInMethod:Qa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qa.credentialFromTaggedObject(e)}static credentialFromError(e){return Qa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Qa.credential(t.oauthAccessToken)}catch(n){return null}}}Qa.FACEBOOK_SIGN_IN_METHOD="facebook.com",Qa.PROVIDER_ID="facebook.com";class Ya extends Ka{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return za._fromParams({providerId:Ya.PROVIDER_ID,signInMethod:Ya.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ya.credentialFromTaggedObject(e)}static credentialFromError(e){return Ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Ya.credential(n,r)}catch(i){return null}}}Ya.GOOGLE_SIGN_IN_METHOD="google.com",Ya.PROVIDER_ID="google.com";class $a extends Ka{constructor(){super("github.com")}static credential(e){return za._fromParams({providerId:$a.PROVIDER_ID,signInMethod:$a.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $a.credentialFromTaggedObject(e)}static credentialFromError(e){return $a.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return $a.credential(t.oauthAccessToken)}catch(n){return null}}}$a.GITHUB_SIGN_IN_METHOD="github.com",$a.PROVIDER_ID="github.com";class Ja extends Ra{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Va(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Va(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Va(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Ja(n,i):null}static _create(e,t){return new Ja(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Xa extends Wa{constructor(e){Eo(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return Xa.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Xa.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Ja.fromJSON(e);return Eo(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:r}=t;if(!n||!r)return null;try{return Ja._create(r,n)}catch(MN){return null}}}class Za extends Ka{constructor(){super("twitter.com")}static credential(e,t){return za._fromParams({providerId:Za.PROVIDER_ID,signInMethod:Za.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Za.credentialFromTaggedObject(e)}static credentialFromError(e){return Za.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Za.credential(n,r)}catch(i){return null}}}async function el(e,t){return Mo(e,"POST","/v1/accounts:signUp",Do(e,t))}Za.TWITTER_SIGN_IN_METHOD="twitter.com",Za.PROVIDER_ID="twitter.com";class tl{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await ea._fromIdTokenResponse(e,n,r),s=nl(n);return new tl({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=nl(n);return new tl({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function nl(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class rl extends Mn{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,rl.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new rl(e,t,n,r)}}function il(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw rl._fromErrorAndOperation(e,n,t,r);throw n}))}function sl(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function ol(e,t){const n=Qn(e);await ll(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return Oo(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=sl(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function al(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Qo(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return tl._forOperation(e,"link",r)}async function ll(e,t,n){await Jo(t);const r=!1===e?"provider-already-linked":"no-such-provider";Eo(sl(t.providerData).has(n)===e,t.auth,r)}async function cl(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,i="reauthenticate";try{const s=await Qo(e,il(r,i,t,e),n);Eo(s.idToken,r,"internal-error");const o=Ho(s.idToken);Eo(o,r,"internal-error");const{sub:a}=o;return Eo(e.uid===a,r,"user-mismatch"),tl._forOperation(e,i,s)}catch(MN){throw(null===MN||void 0===MN?void 0:MN.code)==="auth/".concat("user-not-found")&&vo(r,"user-mismatch"),MN}}async function ul(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",i=await il(e,r,t),s=await tl._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function hl(e,t){return ul(_a(e),t)}async function dl(e,t){const n=Qn(e);return await ll(!1,n,t.providerId),al(n,t)}async function fl(e,t){return cl(Qn(e),t)}async function pl(e,t){const n=_a(e),r=await async function(e,t){return Mo(e,"POST","/v1/accounts:signInWithCustomToken",Do(e,t))}(n,{token:t,returnSecureToken:!0}),i=await tl._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class ml{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?gl._fromServerResponse(e,t):"totpInfo"in t?vl._fromServerResponse(e,t):vo(e,"internal-error")}}class gl extends ml{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new gl(t)}}class vl extends ml{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new vl(t)}}function yl(e,t,n){var r;Eo((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Eo("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Eo(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Eo(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function wl(e){const t=_a(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function bl(e,t){await async function(e,t){return Oo(e,"POST","/v1/accounts:update",Do(e,t))}(Qn(e),{oobCode:t})}async function _l(e,t){const n=Qn(e),r=await Pa(n,{oobCode:t}),i=r.requestType;switch(Eo(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Eo(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Eo(r.mfaInfo,n,"internal-error");default:Eo(r.email,n,"internal-error")}let s=null;return r.mfaInfo&&(s=ml._fromServerResponse(_a(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:s},operation:i}}async function El(e,t){const n={identifier:t,continueUri:ko()?So():"http://localhost"},{signinMethods:r}=await async function(e,t){return Oo(e,"POST","/v1/accounts:createAuthUri",Do(e,t))}(Qn(e),n);return r||[]}async function Il(e,t){const n=Qn(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&yl(n.auth,r,t);const{email:i}=await async function(e,t){return La(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function Tl(e,t,n){const r=Qn(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&yl(r.auth,i,n);const{email:s}=await async function(e,t){return La(e,t)}(r.auth,i);s!==e.email&&await e.reload()}async function Sl(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const i=Qn(e),s={idToken:await i.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},o=await Qo(i,async function(e,t){return Oo(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}async function kl(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await Qo(e,async function(e,t){return Oo(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(s,!0)}class xl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Cl extends xl{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Al extends xl{constructor(e,t){super(e,"facebook.com",t)}}class Nl extends Cl{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Rl extends xl{constructor(e,t){super(e,"google.com",t)}}class Pl extends Cl{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Dl(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){const r=null===(n=null===(t=Ho(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new xl(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Al(s,i);case"github.com":return new Nl(s,i);case"google.com":return new Rl(s,i);case"twitter.com":return new Pl(s,i,e.screenName||null);case"custom":case"anonymous":return new xl(s,null);default:return new xl(s,r,i)}}(n)}class Ol{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Ol("enroll",e,t)}static _fromMfaPendingCredential(e){return new Ol("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Ol._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Ol._fromIdtoken(e.multiFactorSession.idToken)}return null}}class Ll{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=_a(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>ml._fromServerResponse(n,e)));Eo(r.mfaPendingCredential,n,"internal-error");const s=Ol._fromMfaPendingCredential(r.mfaPendingCredential);return new Ll(s,i,(async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await tl._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return Eo(t.user,n,"internal-error"),tl._forOperation(t.user,t.operationType,o);default:vo(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Ml{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>ml._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Ml(e)}async getSession(){return Ol._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Qo(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Qo(this.user,function(e,t){return Oo(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Do(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(MN){throw MN}}}const Fl=new WeakMap;const Ul="__sak";class Vl{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ul,"1"),this.storage.removeItem(Ul),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class zl extends Vl{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Nn();return ca(e)||ma(e)}()&&function(){try{return!(!window||window===window.top)}catch(MN){return!1}}(),this.fallbackToPolling=ga(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);On()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}zl.type="LOCAL";const Bl=zl;class jl extends Vl{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jl.type="SESSION";const ql=jl;class Gl{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Gl(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map((async e=>e(t.origin,i))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Wl(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Gl.receivers=[];class Kl{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise(((o,a)=>{const l=Wl("",20);r.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(c),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function Hl(){return window}function Ql(){return"undefined"!==typeof Hl().WorkerGlobalScope&&"function"===typeof Hl().importScripts}const Yl="firebaseLocalStorageDb",$l="firebaseLocalStorage",Jl="fbase_key";class Xl{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function Zl(e,t){return e.transaction([$l],t?"readwrite":"readonly").objectStore($l)}function ec(){const e=indexedDB.open(Yl,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore($l,{keyPath:Jl})}catch(MN){n(MN)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains($l)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Yl);return new Xl(e).toPromise()}(),t(await ec()))}))}))}async function tc(e,t,n){const r=Zl(e,!0).put({[Jl]:t,value:n});return new Xl(r).toPromise()}function nc(e,t){const n=Zl(e,!0).delete(t);return new Xl(n).toPromise()}class rc{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await ec()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(MN){if(t++>3)throw MN;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ql()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gl._getInstance(Ql()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Kl(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ec();return await tc(e,Ul,"1"),await nc(e,Ul),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>tc(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=Zl(e,!1).get(t),r=await new Xl(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>nc(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=Zl(e,!1).getAll();return new Xl(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}rc.type="LOCAL";const ic=rc;const sc=1e12;class oc{constructor(e){this.auth=e,this.counter=sc,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new ac(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||sc;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||sc;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||sc;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class ac{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Eo(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(MN){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(MN){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const lc=Ta("rcb"),cc=new Co(3e4,6e4);class uc{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=Hl().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Eo(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Bo(Hl().grecaptcha)?Promise.resolve(Hl().grecaptcha):new Promise(((n,r)=>{const i=Hl().setTimeout((()=>{r(yo(e,"network-request-failed"))}),cc.get());Hl()[lc]=()=>{Hl().clearTimeout(i),delete Hl()[lc];const s=Hl().grecaptcha;if(!s||!Bo(s))return void r(yo(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Ia("".concat("https://www.google.com/recaptcha/api.js?","?").concat(jn({onload:lc,render:"explicit",hl:t}))).catch((()=>{clearTimeout(i),r(yo(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=Hl().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class hc{async load(e){return new oc(e)}clearedOneInstance(){}}const dc="recaptcha",fc={theme:"light",type:"image"};class pc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},fc);this.parameters=n,this.type=dc,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_a(e),this.isInvisible="invisible"===this.parameters.size,Eo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Eo(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new hc:new uc,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(MN){return Promise.reject(MN)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){Eo(!this.parameters.sitekey,this.auth,"argument-error"),Eo(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Eo("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=Hl()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Eo(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Eo(ko()&&!Ql(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Oo(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Eo(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Eo(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class mc{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=ja._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function gc(e,t,n){var r;const i=await n.verify();try{let s;if(Eo("string"===typeof i,e,"argument-error"),Eo(n.type===dc,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Eo("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Oo(e,"POST","/v2/accounts/mfaEnrollment:start",Do(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{Eo("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Eo(n,e,"missing-multi-factor-info");const o=await function(e,t){return Oo(e,"POST","/v2/accounts/mfaSignIn:start",Do(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Oo(e,"POST","/v1/accounts:sendVerificationCode",Do(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}class vc{constructor(e){this.providerId=vc.PROVIDER_ID,this.auth=_a(e)}verifyPhoneNumber(e,t){return gc(this.auth,e,Qn(t))}static credential(e,t){return ja._fromVerification(e,t)}static credentialFromResult(e){const t=e;return vc.credentialFromTaggedObject(t)}static credentialFromError(e){return vc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?ja._fromTokenResponse(n,r):null}}function yc(e,t){return t?na(t):(Eo(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}vc.PROVIDER_ID="phone",vc.PHONE_SIGN_IN_METHOD="phone";class wc extends Ra{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Va(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Va(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Va(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function bc(e){return ul(e.auth,new wc(e),e.bypassAuthState)}function _c(e){const{auth:t,user:n}=e;return Eo(n,t,"internal-error"),cl(n,new wc(e),e.bypassAuthState)}async function Ec(e){const{auth:t,user:n}=e;return Eo(n,t,"internal-error"),al(n,new wc(e),e.bypassAuthState)}class Ic{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(MN){this.reject(MN)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(MN){this.reject(MN)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bc;case"linkViaPopup":case"linkViaRedirect":return Ec;case"reauthViaPopup":case"reauthViaRedirect":return _c;default:vo(this.auth,"internal-error")}}resolve(e){To(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){To(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Tc=new Co(2e3,1e4);class Sc extends Ic{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Sc.currentPopupAction&&Sc.currentPopupAction.cancel(),Sc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Eo(e,this.auth,"internal-error"),e}async onExecution(){To(1===this.filter.length,"Popup operations only handle one event");const e=Wl();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(yo(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(yo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Sc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(yo(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Tc.get())};e()}}Sc.currentPopupAction=null;const kc="pendingRedirect",xc=new Map;class Cc extends Ic{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=xc.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Pc(t),r=Rc(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(MN){e=()=>Promise.reject(MN)}xc.set(this.auth._key(),e)}return this.bypassAuthState||xc.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Ac(e,t){return Rc(e)._set(Pc(t),"true")}function Nc(e,t){xc.set(e._key(),t)}function Rc(e){return na(e._redirectPersistence)}function Pc(e){return sa(kc,e.config.apiKey,e.name)}function Dc(e,t,n){return async function(e,t,n){const r=_a(e);bo(e,t,Wa),await r._initializationPromise;const i=yc(r,n);return await Ac(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Oc(e,t,n){return async function(e,t,n){const r=Qn(e);bo(r.auth,t,Wa),await r.auth._initializationPromise;const i=yc(r.auth,n);await Ac(i,r.auth);const s=await Fc(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",s)}(e,t,n)}function Lc(e,t,n){return async function(e,t,n){const r=Qn(e);bo(r.auth,t,Wa),await r.auth._initializationPromise;const i=yc(r.auth,n);await ll(!1,r,t.providerId),await Ac(i,r.auth);const s=await Fc(r);return i._openRedirect(r.auth,t,"linkViaRedirect",s)}(e,t,n)}async function Mc(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=_a(e),i=yc(r,t),s=new Cc(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Fc(e){const t=Wl("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Uc{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zc(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!zc(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(yo(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vc(e))}saveEventToCache(e){this.cachedEventUids.add(Vc(e)),this.lastProcessedEventTime=Date.now()}}function Vc(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function zc(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function Bc(e){return Oo(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const jc=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qc=/^https?/;function Gc(e){const t=So(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!qc.test(n))return!1;if(jc.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Wc=new Co(3e4,6e4);function Kc(){const e=Hl().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Hc=null;function Qc(e){return Hc=Hc||function(e){return new Promise(((t,n)=>{var r,i,s;function o(){Kc(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Kc(),n(yo(e,"network-request-failed"))},timeout:Wc.get()})}if(null===(i=null===(r=Hl().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Hl().gapi)||void 0===s?void 0:s.load)){const t=Ta("iframefcb");return Hl()[t]=()=>{gapi.load?o():n(yo(e,"network-request-failed"))},Ia("https://apis.google.com/js/api.js?onload=".concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Hc=null,e}))}(e),Hc}const Yc=new Co(5e3,15e3),$c="__/auth/iframe",Jc="emulator/auth/iframe",Xc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Zc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eu(e){const t=e.config;Eo(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ao(t,Jc):"https://".concat(e.config.authDomain,"/").concat($c),r={apiKey:t.apiKey,appName:e.name,v:zr},i=Zc.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat(jn(r).slice(1))}const tu={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class nu{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(MN){}}}function ru(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},tu),{width:r.toString(),height:i.toString(),top:s,left:o}),c=Nn().toLowerCase();n&&(a=ua(c)?"_blank":n),la(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")}),"");if(function(){var e;return ma(arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new nu(null);const h=window.open(t||"",a,u);Eo(h,e,"popup-blocked");try{h.focus()}catch(MN){}return new nu(h)}const iu="__/auth/handler",su="emulator/auth/handler",ou=encodeURIComponent("fac");async function au(e,t,n,r,i,s){Eo(e.config.authDomain,e,"auth-domain-config-required"),Eo(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:zr,eventId:i};if(t instanceof Wa){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Ka){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(ou,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(iu);return Ao(t,su)}(e),"?").concat(jn(a).slice(1)).concat(c)}const lu="webStorageSupport";const cu=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ql,this._completeRedirectFn=Mc,this._overrideRedirectResult=Nc}async _openPopup(e,t,n,r){var i;To(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return ru(e,await au(e,t,n,So(),r),Wl())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Hl().location.href=e}(await au(e,t,n,So(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(To(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await async function(e){const t=await Qc(e),n=Hl().gapi;return Eo(n,e,"internal-error"),t.open({where:document.body,url:eu(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xc,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=yo(e,"network-request-failed"),s=Hl().setTimeout((()=>{r(i)}),Yc.get());function o(){Hl().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{r(i)}))}))))}(e),n=new Uc(e);return t.register("authEvent",(t=>{Eo(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(lu,{type:lu},(n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[lu];void 0!==i&&t(!!i),vo(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Bc(e);for(const r of t)try{if(Gc(r))return}catch(n){}vo(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ga()||ca()||ma()}};class uu{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Io("unexpected MultiFactorSessionType")}}}class hu extends uu{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new hu(e)}_finalizeEnroll(e,t,n){return function(e,t){return Oo(e,"POST","/v2/accounts/mfaEnrollment:finalize",Do(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Oo(e,"POST","/v2/accounts/mfaSignIn:finalize",Do(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class du{constructor(){}static assertion(e){return hu._fromCredential(e)}}du.FACTOR_ID="phone";var fu="@firebase/auth",pu="1.5.1";class mu{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Eo(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=kn())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var gu;function vu(){return window}gu="Browser",Or(new Yn("auth",((e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Eo(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:gu,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:va(gu)},c=new ba(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(na);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),Or(new Yn("auth-internal",(e=>(e=>new mu(e))(_a(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Wr(fu,pu,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(gu)),Wr(fu,pu,"esm2017");async function yu(e,t,n){var r;const{BuildInfo:i}=vu();To(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(To(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return ma()?o.ibi=i.packageName:da()?o.apn=i.packageName:vo(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,au(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function wu(e){const{cordova:t}=vu();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}const bu=20;class _u extends Uc{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Eu(e){const t=await Su()._get(ku(e));return t&&await Su()._remove(ku(e)),t}function Iu(e,t){var n,r;const i=function(e){const t=xu(e),n=t.link?decodeURIComponent(t.link):void 0,r=xu(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return xu(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=xu(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(MN){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?yo(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Tu(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<bu;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Su(){return na(Bl)}function ku(e){return sa("authEvent",e.config.apiKey,e.name)}function xu(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return qn(n.join("?"))}const Cu=class{constructor(){this._redirectPersistence=ql,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mc,this._overrideRedirectResult=Nc}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new _u(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){vo(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,l,c,u;const h=vu();Eo("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Eo("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Eo("function"===typeof(null===(s=null===(i=null===(r=null===h||void 0===h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Eo("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Eo("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),xc.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:Tu(),postBody:null,tenantId:e.tenantId,error:yo(e,"no-auth-event")}}(e,n,r);await function(e,t){return Su()._set(ku(e),t)}(e,s);const o=await yu(e,s,t);return async function(e,t,n){const{cordova:r}=vu();let i=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(yo(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),da()&&document.addEventListener("visibilitychange",u,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{i()}}(e,i,await wu(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=vu(),n={};ma()?n.iosBundleId=t.packageName:da()?n.androidPackageName=t.packageName:vo(e,"operation-not-supported-in-this-environment"),await Bc(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=vu(),s=setTimeout((async()=>{await Eu(e),t.onEvent(Au())}),500),o=async n=>{clearTimeout(s);const r=await Eu(e);let i=null;r&&(null===n||void 0===n?void 0:n.url)&&(i=Iu(r,n.url)),t.onEvent(i||Au())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=r,l="".concat(i.packageName.toLowerCase(),"://");vu().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(MN){console.error(MN)}}}};function Au(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:yo("no-auth-event")}}function Nu(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Ru(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return!("file:"!==Nu()&&"ionic:"!==Nu()&&"capacitor:"!==Nu()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Pu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return On()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nn();return/Edge\/\d+/.test(e)}(e)}function Du(){try{const e=self.localStorage,t=Wl();if(e)return e.setItem(t,"1"),e.removeItem(t),!Pu()||Ln()}catch(MN){return Ou()&&Ln()}return!1}function Ou(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Lu(){return("http:"===Nu()||"https:"===Nu()||Pn()||Ru())&&!(Dn()||Rn())&&Du()&&!Ou()}function Mu(){return Ru()&&"undefined"!==typeof document}const Fu={LOCAL:"local",NONE:"none",SESSION:"session"},Uu=Eo,Vu="persistence";async function zu(e){await e._initializationPromise;const t=Bu(),n=sa(Vu,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Bu(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(MN){return null}}const ju=Eo;class qu{constructor(){this.browserResolver=na(cu),this.cordovaResolver=na(Cu),this.underlyingResolver=null,this._redirectPersistence=ql,this._completeRedirectFn=Mc,this._overrideRedirectResult=Nc}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return Mu()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ju(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!Mu()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Gu(e){return e.unwrap()}function Wu(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new Yu(e,function(e,t){var n;const r=Qn(e),i=t;return Eo(t.customData.operationType,r,"argument-error"),Eo(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Ll._fromError(r,i)}(e,t))}else if(r){const e=Ku(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function Ku(e){const{_tokenResponse:t}=e instanceof Mn?e.customData:e;if(!t)return null;if(!(e instanceof Mn)&&"temporaryProof"in t&&"phoneNumber"in t)return vc.credentialFromResult(e);const n=t.providerId;if(!n||n===ro.PASSWORD)return null;let r;switch(n){case ro.GOOGLE:r=Ya;break;case ro.FACEBOOK:r=Qa;break;case ro.GITHUB:r=$a;break;case ro.TWITTER:r=Za;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return i||s||e||o?o?n.startsWith("saml.")?Ja._create(n,o):za._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:i}):new Ha(n).credential({idToken:e,accessToken:i,rawNonce:a}):null}return e instanceof Mn?r.credentialFromError(e):r.credentialFromResult(e)}function Hu(e,t){return t.catch((t=>{throw t instanceof Mn&&Wu(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,Ku(r)),additionalUserInfo:Dl(e),user:$u.getOrCreate(n)};var r}))}async function Qu(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Hu(e,n.confirm(t))}}class Yu{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Hu(Gu(this.auth),this.resolver.resolveSignIn(e))}}class $u{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Qn(e);return Fl.has(t)||Fl.set(t,Ml._fromUser(t)),Fl.get(t)}(e)}static getOrCreate(e){return $u.USER_MAP.has(e)||$u.USER_MAP.set(e,new $u(e)),$u.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Hu(this.auth,dl(this._delegate,e))}async linkWithPhoneNumber(e,t){return Qu(this.auth,async function(e,t,n){const r=Qn(e);await ll(!1,r,"phone");const i=await gc(r.auth,t,Qn(n));return new mc(i,(e=>dl(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Hu(this.auth,async function(e,t,n){const r=Qn(e);bo(r.auth,t,Wa);const i=yc(r.auth,n);return new Sc(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,qu))}async linkWithRedirect(e){return await zu(_a(this.auth)),Lc(this._delegate,e,qu)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Hu(this.auth,fl(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Qu(this.auth,async function(e,t,n){const r=Qn(e),i=await gc(r.auth,t,Qn(n));return new mc(i,(e=>fl(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Hu(this.auth,async function(e,t,n){const r=Qn(e);bo(r.auth,t,Wa);const i=yc(r.auth,n);return new Sc(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,qu))}async reauthenticateWithRedirect(e){return await zu(_a(this.auth)),Oc(this._delegate,e,qu)}sendEmailVerification(e){return Il(this._delegate,e)}async unlink(e){return await ol(this._delegate,e),this}updateEmail(e){return function(e,t){return kl(Qn(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return kl(Qn(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await al(Qn(e),t)}(this._delegate,e)}updateProfile(e){return Sl(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Tl(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}$u.USER_MAP=new WeakMap;const Ju=Eo;class Xu{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Ju(n,"invalid-api-key",{appName:e.name}),Ju(n,"invalid-api-key",{appName:e.name});const r="undefined"!==typeof window?qu:void 0;this._delegate=t.initialize({options:{persistence:eh(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(ho),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$u.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Ca(this._delegate,e,t)}applyActionCode(e){return bl(this._delegate,e)}checkActionCode(e){return _l(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Pa(Qn(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wl(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Hu(this._delegate,async function(e,t,n){const r=_a(e),i=xa(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",el),s=await i.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wl(e),t})),o=await tl._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return El(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=qa.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){Ju(Lu(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await _a(e)._initializationPromise,Mc(e,t,!1)}(this._delegate,qu);return e?Hu(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){_a(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=Zu(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=Zu(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const r=_a(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){Eo(t.handleCodeInApp,r,"argument-error"),t&&yl(r,e,t)}(i,n),await xa(r,i,"getOobCode",Fa)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=_a(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&yl(r,i,n),await xa(r,i,"getOobCode",Ma)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){Uu(Object.values(Fu).includes(t),e,"invalid-persistence-type"),Dn()?Uu(t!==Fu.SESSION,e,"unsupported-persistence-type"):Rn()?Uu(t===Fu.NONE,e,"unsupported-persistence-type"):Ou()?Uu(t===Fu.NONE||t===Fu.LOCAL&&Ln(),e,"unsupported-persistence-type"):Uu(t===Fu.NONE||Du(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Fu.SESSION:t=ql;break;case Fu.LOCAL:t=await na(ic)._isAvailable()?ic:Bl;break;case Fu.NONE:t=ia;break;default:return vo("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Hu(this._delegate,async function(e){var t;const n=_a(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new tl({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await el(n,{returnSecureToken:!0}),i=await tl._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return Hu(this._delegate,hl(this._delegate,e))}signInWithCustomToken(e){return Hu(this._delegate,pl(this._delegate,e))}signInWithEmailAndPassword(e,t){return Hu(this._delegate,function(e,t,n){return hl(Qn(e),Ga.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&wl(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Hu(this._delegate,async function(e,t,n){const r=Qn(e),i=Ga.credentialWithLink(t,n||So());return Eo(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),hl(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Qu(this._delegate,async function(e,t,n){const r=_a(e),i=await gc(r,t,Qn(n));return new mc(i,(e=>hl(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return Ju(Lu(),this._delegate,"operation-not-supported-in-this-environment"),Hu(this._delegate,async function(e,t,n){const r=_a(e);bo(e,t,Wa);const i=yc(r,n);return new Sc(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,qu))}async signInWithRedirect(e){return Ju(Lu(),this._delegate,"operation-not-supported-in-this-environment"),await zu(this._delegate),Dc(this._delegate,e,qu)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await _l(Qn(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function Zu(e,t,n){let r=e;"function"!==typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&$u.getOrCreate(e)),error:t,complete:n}}function eh(e,t){const n=function(e,t){const n=Bu();if(!n)return[];const r=sa(Vu,e,t);switch(n.getItem(r)){case Fu.NONE:return[ia];case Fu.LOCAL:return[ic,ql];case Fu.SESSION:return[ql];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(ic)||n.push(ic),"undefined"!==typeof window)for(const r of[Bl,ql])n.includes(r)||n.push(r);return n.includes(ia)||n.push(ia),n}Xu.Persistence=Fu;class th{constructor(){this.providerId="phone",this._delegate=new vc(Gu(ui.auth()))}static credential(e,t){return vc.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}th.PHONE_SIGN_IN_METHOD=vc.PHONE_SIGN_IN_METHOD,th.PROVIDER_ID=vc.PROVIDER_ID;const nh=Eo;class rh{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ui.app();var r;nh(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new pc(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var ih;(ih=ui).INTERNAL.registerComponent(new Yn("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new Xu(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:io,PASSWORD_RESET:so,RECOVER_EMAIL:oo,REVERT_SECOND_FACTOR_ADDITION:ao,VERIFY_AND_CHANGE_EMAIL:lo,VERIFY_EMAIL:co}},EmailAuthProvider:Ga,FacebookAuthProvider:Qa,GithubAuthProvider:$a,GoogleAuthProvider:Ya,OAuthProvider:Ha,SAMLAuthProvider:Xa,PhoneAuthProvider:th,PhoneMultiFactorGenerator:du,RecaptchaVerifier:rh,TwitterAuthProvider:Za,Auth:Xu,AuthCredential:Ra,Error:Mn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ih.registerVersion("@firebase/auth-compat","0.5.1");var sh,oh="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ah={},lh=lh||{},ch=oh||self;function uh(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function hh(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var dh="closure_uid_"+(1e9*Math.random()>>>0),fh=0;function ph(e,t,n){return e.call.apply(e.bind,arguments)}function mh(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function gh(e,t,n){return(gh=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ph:mh).apply(null,arguments)}function vh(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function yh(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function wh(){this.s=this.s,this.o=this.o}wh.prototype.s=!1,wh.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,dh)&&e[dh]||(e[dh]=++fh)}(this)},wh.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const bh=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function _h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Eh(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(uh(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function Ih(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ih.prototype.h=function(){this.defaultPrevented=!0};var Th=function(){if(!ch.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};ch.addEventListener("test",e,t),ch.removeEventListener("test",e,t)}catch(fC){}return e}();function Sh(e){return/^[\s\xa0]*$/.test(e)}function kh(){var e=ch.navigator;return e&&(e=e.userAgent)?e:""}function xh(e){return-1!=kh().indexOf(e)}function Ch(e){return Ch[" "](e),e}Ch[" "]=function(){};var Ah,Nh,Rh=xh("Opera"),Ph=xh("Trident")||xh("MSIE"),Dh=xh("Edge"),Oh=Dh||Ph,Lh=xh("Gecko")&&!(-1!=kh().toLowerCase().indexOf("webkit")&&!xh("Edge"))&&!(xh("Trident")||xh("MSIE"))&&!xh("Edge"),Mh=-1!=kh().toLowerCase().indexOf("webkit")&&!xh("Edge");function Fh(){var e=ch.document;return e?e.documentMode:void 0}e:{var Uh="",Vh=function(){var e=kh();return Lh?/rv:([^\);]+)(\)|;)/.exec(e):Dh?/Edge\/([\d\.]+)/.exec(e):Ph?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Mh?/WebKit\/(\S+)/.exec(e):Rh?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Vh&&(Uh=Vh?Vh[1]:""),Ph){var zh=Fh();if(null!=zh&&zh>parseFloat(Uh)){Ah=String(zh);break e}}Ah=Uh}if(ch.document&&Ph){var Bh=Fh();Nh=Bh||(parseInt(Ah,10)||void 0)}else Nh=void 0;var jh=Nh;function qh(e,t){if(Ih.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Lh){e:{try{Ch(t.nodeName);var i=!0;break e}catch(PC){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Gh[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&qh.$.h.call(this)}}yh(qh,Ih);var Gh={2:"touch",3:"pen",4:"mouse"};qh.prototype.h=function(){qh.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Wh="closure_listenable_"+(1e6*Math.random()|0),Kh=0;function Hh(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++Kh,this.fa=this.ia=!1}function Qh(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function Yh(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function $h(e){const t={};for(const n in e)t[n]=e[n];return t}const Jh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xh(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<Jh.length;t++)n=Jh[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Zh(e){this.src=e,this.g={},this.h=0}function ed(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=bh(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Qh(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function td(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}Zh.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=td(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Hh(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var nd="closure_lm_"+(1e6*Math.random()|0),rd={};function id(e,t,n,r,i){if(r&&r.once)return od(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)id(e,t[s],n,r,i);return null}return n=fd(n),e&&e[Wh]?e.O(t,n,hh(r)?!!r.capture:!!r,i):sd(e,t,n,!1,r,i)}function sd(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=hh(i)?!!i.capture:!!i,a=hd(e);if(a||(e[nd]=a=new Zh(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ud;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Th||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(cd(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function od(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)od(e,t[s],n,r,i);return null}return n=fd(n),e&&e[Wh]?e.P(t,n,hh(r)?!!r.capture:!!r,i):sd(e,t,n,!0,r,i)}function ad(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)ad(e,t[s],n,r,i);else r=hh(r)?!!r.capture:!!r,n=fd(n),e&&e[Wh]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=td(s=e.g[t],n,r,i))&&(Qh(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=hd(e))&&(t=e.g[t.toString()],e=-1,t&&(e=td(t,n,r,i)),(n=-1<e?t[e]:null)&&ld(n))}function ld(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[Wh])ed(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(cd(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=hd(t))?(ed(n,e),0==n.h&&(n.src=null,t[nd]=null)):Qh(e)}}}function cd(e){return e in rd?rd[e]:rd[e]="on"+e}function ud(e,t){if(e.fa)e=!0;else{t=new qh(t,this);var n=e.listener,r=e.la||e.src;e.ia&&ld(e),e=n.call(r,t)}return e}function hd(e){return(e=e[nd])instanceof Zh?e:null}var dd="__closure_events_fn_"+(1e9*Math.random()>>>0);function fd(e){return"function"===typeof e?e:(e[dd]||(e[dd]=function(t){return e.handleEvent(t)}),e[dd])}function pd(){wh.call(this),this.i=new Zh(this),this.S=this,this.J=null}function md(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Ih(t,e);else if(t instanceof Ih)t.target=t.target||e;else{var i=t;Xh(t=new Ih(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=gd(o,r,!0,t)&&i}if(i=gd(o=t.g=e,r,!0,t)&&i,i=gd(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=gd(o=t.g=n[s],r,!1,t)&&i}function gd(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&ed(e.i,o),i=!1!==a.call(l,r)&&i}}return i&&!r.defaultPrevented}yh(pd,wh),pd.prototype[Wh]=!0,pd.prototype.removeEventListener=function(e,t,n,r){ad(this,e,t,n,r)},pd.prototype.N=function(){if(pd.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Qh(n[r]);delete t.g[e],t.h--}}this.J=null},pd.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},pd.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var vd=ch.JSON.stringify;function yd(){var e=Sd;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var wd=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new bd),(e=>e.reset()));class bd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function _d(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ed(e){ch.setTimeout((()=>{throw e}),0)}let Id,Td=!1,Sd=new class{constructor(){this.h=this.g=null}add(e,t){const n=wd.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},kd=()=>{const e=ch.Promise.resolve(void 0);Id=()=>{e.then(xd)}};var xd=()=>{for(var e;e=yd();){try{e.h.call(e.g)}catch(fC){Ed(fC)}var t=wd;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Td=!1};function Cd(e,t){pd.call(this),this.h=e||1,this.g=t||ch,this.j=gh(this.qb,this),this.l=Date.now()}function Ad(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Nd(e,t,n){if("function"===typeof e)n&&(e=gh(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=gh(e.handleEvent,e)}return 2147483647<Number(t)?-1:ch.setTimeout(e,t||0)}function Rd(e){e.g=Nd((()=>{e.g=null,e.i&&(e.i=!1,Rd(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}yh(Cd,pd),(sh=Cd.prototype).ga=!1,sh.T=null,sh.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),md(this,"tick"),this.ga&&(Ad(this),this.start()))}},sh.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},sh.N=function(){Cd.$.N.call(this),Ad(this),delete this.g};class Pd extends wh{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Rd(this)}N(){super.N(),this.g&&(ch.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Dd(e){wh.call(this),this.h=e,this.g={}}yh(Dd,wh);var Od=[];function Ld(e,t,n,r){Array.isArray(n)||(n&&(Od[0]=n.toString()),n=Od);for(var i=0;i<n.length;i++){var s=id(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Md(e){Yh(e.g,(function(e,t){this.g.hasOwnProperty(t)&&ld(e)}),e),e.g={}}function Fd(){this.g=!0}function Ud(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return vd(n)}catch(CC){return t}}(e,n)+(r?" "+r:"")}))}Dd.prototype.N=function(){Dd.$.N.call(this),Md(this)},Dd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Fd.prototype.Ea=function(){this.g=!1},Fd.prototype.info=function(){};var Vd={},zd=null;function Bd(){return zd=zd||new pd}function jd(e){Ih.call(this,Vd.Ta,e)}function qd(e){const t=Bd();md(t,new jd(t))}function Gd(e,t){Ih.call(this,Vd.STAT_EVENT,e),this.stat=t}function Wd(e){const t=Bd();md(t,new Gd(t,e))}function Kd(e,t){Ih.call(this,Vd.Ua,e),this.size=t}function Hd(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return ch.setTimeout((function(){e()}),t)}Vd.Ta="serverreachability",yh(jd,Ih),Vd.STAT_EVENT="statevent",yh(Gd,Ih),Vd.Ua="timingevent",yh(Kd,Ih);var Qd={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Yd={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function $d(){}function Jd(e){return e.h||(e.h=e.i())}function Xd(){}$d.prototype.h=null;var Zd,ef={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function tf(){Ih.call(this,"d")}function nf(){Ih.call(this,"c")}function rf(){}function sf(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Dd(this),this.P=af,e=Oh?125:void 0,this.V=new Cd(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new of}function of(){this.i=null,this.g="",this.h=!1}yh(tf,Ih),yh(nf,Ih),yh(rf,$d),rf.prototype.g=function(){return new XMLHttpRequest},rf.prototype.i=function(){return{}},Zd=new rf;var af=45e3,lf={},cf={};function uf(e,t,n){e.L=1,e.A=Af(Tf(t)),e.u=n,e.S=!0,hf(e,null)}function hf(e,t){e.G=Date.now(),mf(e),e.B=Tf(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),jf(n.i,"t",r),e.o=0,n=e.l.J,e.h=new of,e.g=jp(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Pd(gh(e.Pa,e,e.g),e.O)),Ld(e.U,e.g,"readystatechange",e.nb),t=e.I?$h(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),qd(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function df(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function ff(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=pf(e,n),r==cf){4==t&&(e.s=4,Wd(14),i=!1),Ud(e.j,e.m,null,"[Incomplete Response]");break}if(r==lf){e.s=4,Wd(15),Ud(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ud(e.j,e.m,r,null),bf(e,r)}df(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,Wd(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Op(t),t.M=!0,Wd(11))):(Ud(e.j,e.m,n,"[Invalid Chunked Response]"),wf(e),yf(e))}function pf(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?cf:(n=Number(t.substring(n,r)),isNaN(n)?lf:(r+=1)+n>t.length?cf:(t=t.slice(r,r+n),e.o=r+n,t))}function mf(e){e.Y=Date.now()+e.P,gf(e,e.P)}function gf(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Hd(gh(e.lb,e),t)}function vf(e){e.C&&(ch.clearTimeout(e.C),e.C=null)}function yf(e){0==e.l.H||e.J||Fp(e.l,e)}function wf(e){vf(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ad(e.V),Md(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function bf(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||Yf(n.i,e)))if(!e.K&&Yf(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Mp(n),kp(n)}Dp(n),Wd(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=Hd(gh(n.ib,n),6e3));if(1>=Qf(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Vp(n,11)}else if((e.K||n.g==e)&&Mp(n),!Sh(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=c[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&($f(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Cf(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Bp(r,r.J?r.pa:null,r.Y),o.K){Jf(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.C&&(vf(a),mf(a)),r.g=o}else Pp(r);0<n.j.length&&Cp(n)}else"stop"!=c[0]&&"close"!=c[0]||Vp(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Vp(n,7):Sp(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}qd()}catch(c){}}function _f(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(uh(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(uh(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(uh(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(sh=sf.prototype).setTimeout=function(e){this.P=e},sh.nb=function(e){e=e.target;const t=this.M;t&&3==wp(e)?t.l():this.Pa(e)},sh.Pa=function(e){try{if(e==this.g)e:{const u=wp(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Oh||this.g&&(this.h.h||this.g.ja()||bp(this.g)))){this.J||4!=u||7==t||qd(),vf(this);var n=this.g.da();this.ca=n;t:if(df(this)){var r=bp(this.g);e="";var i=r.length,s=4==wp(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){wf(this),yf(this);var o="";break t}this.h.i=new ch.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Sh(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,Wd(12),wf(this),yf(this);break e}Ud(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,bf(this,n)}this.S?(ff(this,u,o),Oh&&this.i&&3==u&&(Ld(this.U,this.V,"tick",this.mb),this.V.start())):(Ud(this.j,this.m,o,null),bf(this,o)),4==u&&wf(this),this.i&&!this.J&&(4==u?Fp(this.l,this):(this.i=!1,mf(this)))}else(function(e){const t={};e=(e.g&&2<=wp(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Sh(e[r]))continue;var n=_d(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Wd(12)):(this.s=0,Wd(13)),wf(this),yf(this)}}}catch(zC){}},sh.mb=function(){if(this.g){var e=wp(this.g),t=this.g.ja();this.o<t.length&&(vf(this),ff(this,e,t),this.i&&4!=e&&mf(this))}},sh.cancel=function(){this.J=!0,wf(this)},sh.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(qd(),Wd(17)),wf(this),this.s=2,yf(this)):gf(this,this.Y-e)};var Ef=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function If(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof If){this.h=e.h,Sf(this,e.j),this.s=e.s,this.g=e.g,kf(this,e.m),this.l=e.l;var t=e.i,n=new Uf;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),xf(this,n),this.o=e.o}else e&&(t=String(e).match(Ef))?(this.h=!1,Sf(this,t[1]||"",!0),this.s=Nf(t[2]||""),this.g=Nf(t[3]||"",!0),kf(this,t[4]),this.l=Nf(t[5]||"",!0),xf(this,t[6]||"",!0),this.o=Nf(t[7]||"")):(this.h=!1,this.i=new Uf(null,this.h))}function Tf(e){return new If(e)}function Sf(e,t,n){e.j=n?Nf(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function kf(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function xf(e,t,n){t instanceof Uf?(e.i=t,function(e,t){t&&!e.j&&(Vf(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(zf(this,t),jf(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Rf(t,Mf)),e.i=new Uf(t,e.h))}function Cf(e,t,n){e.i.set(t,n)}function Af(e){return Cf(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Nf(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Rf(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Pf),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Pf(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}If.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Rf(t,Df,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Rf(t,Df,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Rf(n,"/"==n.charAt(0)?Lf:Of,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Rf(n,Ff)),e.join("")};var Df=/[#\/\?@]/g,Of=/[#\?:]/g,Lf=/[#\?]/g,Mf=/[#\?@]/g,Ff=/#/g;function Uf(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Vf(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function zf(e,t){Vf(e),t=qf(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Bf(e,t){return Vf(e),t=qf(e,t),e.g.has(t)}function jf(e,t,n){zf(e,t),0<n.length&&(e.i=null,e.g.set(qf(e,t),_h(n)),e.h+=n.length)}function qf(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(sh=Uf.prototype).add=function(e,t){Vf(this),this.i=null,e=qf(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},sh.forEach=function(e,t){Vf(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},sh.ta=function(){Vf(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},sh.Z=function(e){Vf(this);let t=[];if("string"===typeof e)Bf(this,e)&&(t=t.concat(this.g.get(qf(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},sh.set=function(e,t){return Vf(this),this.i=null,Bf(this,e=qf(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},sh.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},sh.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};var Gf=class{constructor(e,t){this.g=e,this.map=t}};function Wf(e){this.l=e||Kf,ch.PerformanceNavigationTiming?e=0<(e=ch.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(ch.g&&ch.g.Ka&&ch.g.Ka()&&ch.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Kf=10;function Hf(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Qf(e){return e.h?1:e.g?e.g.size:0}function Yf(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function $f(e,t){e.g?e.g.add(t):e.h=t}function Jf(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Xf(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return _h(e.i)}Wf.prototype.cancel=function(){if(this.i=Xf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var Zf=class{stringify(e){return ch.JSON.stringify(e,void 0)}parse(e){return ch.JSON.parse(e,void 0)}};function ep(){this.g=new Zf}function tp(e,t,n){const r=n||"";try{_f(e,(function(e,n){let i=e;hh(e)&&(i=vd(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(MN){throw t.push(r+"type="+encodeURIComponent("_badmap")),MN}}function np(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(PC){}}function rp(e){this.l=e.ec||null,this.j=e.ob||!1}function ip(e,t){pd.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=sp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yh(rp,$d),rp.prototype.g=function(){return new ip(this.l,this.j)},rp.prototype.i=function(e){return function(){return e}}({}),yh(ip,pd);var sp=0;function op(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function ap(e){e.readyState=4,e.l=null,e.j=null,e.A=null,lp(e)}function lp(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(sh=ip.prototype).open=function(e,t){if(this.readyState!=sp)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,lp(this)},sh.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||ch).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},sh.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ap(this)),this.readyState=sp},sh.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,lp(this)),this.g&&(this.readyState=3,lp(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof ch.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;op(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},sh.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?ap(this):lp(this),3==this.readyState&&op(this)}},sh.Za=function(e){this.g&&(this.response=this.responseText=e,ap(this))},sh.Ya=function(e){this.g&&(this.response=e,ap(this))},sh.ka=function(){this.g&&ap(this)},sh.setRequestHeader=function(e,t){this.v.append(e,t)},sh.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},sh.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(ip.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var cp=ch.JSON.parse;function up(e){pd.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=hp,this.L=this.M=!1}yh(up,pd);var hp="",dp=/^https?$/i,fp=["POST","PUT"];function pp(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,mp(e),vp(e)}function mp(e){e.F||(e.F=!0,md(e,"complete"),md(e,"error"))}function gp(e){if(e.h&&"undefined"!=typeof lh&&(!e.C[1]||4!=wp(e)||2!=e.da()))if(e.v&&4==wp(e))Nd(e.La,0,e);else if(md(e,"readystatechange"),4==wp(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(Ef)[1]||null;!i&&ch.self&&ch.self.location&&(i=ch.self.location.protocol.slice(0,-1)),r=!dp.test(i?i.toLowerCase():"")}n=r}if(n)md(e,"complete"),md(e,"success");else{e.m=6;try{var s=2<wp(e)?e.g.statusText:""}catch(CC){s=""}e.j=s+" ["+e.da()+"]",mp(e)}}finally{vp(e)}}}function vp(e,t){if(e.g){yp(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||md(e,"ready");try{n.onreadystatechange=r}catch(MN){}}}function yp(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(ch.clearTimeout(e.A),e.A=null)}function wp(e){return e.g?e.g.readyState:0}function bp(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case hp:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function _p(e){let t="";return Yh(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ep(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=_p(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Cf(e,t,n))}function Ip(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Tp(e){this.Ga=0,this.j=[],this.l=new Fd,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ip("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ip("baseRetryDelayMs",5e3,e),this.hb=Ip("retryDelaySeedMs",1e4,e),this.eb=Ip("forwardChannelMaxRetries",2,e),this.xa=Ip("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Wf(e&&e.concurrentRequestLimit),this.Ja=new ep,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Sp(e){if(xp(e),3==e.H){var t=e.W++,n=Tf(e.I);if(Cf(n,"SID",e.K),Cf(n,"RID",t),Cf(n,"TYPE","terminate"),Np(e,n),(t=new sf(e,e.l,t)).L=2,t.A=Af(Tf(n)),n=!1,ch.navigator&&ch.navigator.sendBeacon)try{n=ch.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&ch.Image&&((new Image).src=t.A,n=!0),n||(t.g=jp(t.l,null),t.g.ha(t.A)),t.G=Date.now(),mf(t)}zp(e)}function kp(e){e.g&&(Op(e),e.g.cancel(),e.g=null)}function xp(e){kp(e),e.u&&(ch.clearTimeout(e.u),e.u=null),Mp(e),e.i.cancel(),e.m&&("number"===typeof e.m&&ch.clearTimeout(e.m),e.m=null)}function Cp(e){if(!Hf(e.i)&&!e.m){e.m=!0;var t=e.Na;Id||kd(),Td||(Id(),Td=!0),Sd.add(t,e),e.C=0}}function Ap(e,t){var n;n=t?t.m:e.W++;const r=Tf(e.I);Cf(r,"SID",e.K),Cf(r,"RID",n),Cf(r,"AID",e.V),Np(e,r),e.o&&e.s&&Ep(r,e.o,e.s),n=new sf(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Rp(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),$f(e.i,n),uf(n,r,t)}function Np(e,t){e.na&&Yh(e.na,(function(e,n){Cf(t,n,e)})),e.h&&_f({},(function(e,n){Cf(t,n,e)}))}function Rp(e,t,n){n=Math.min(e.j.length,n);var r=e.h?gh(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const l=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{tp(l,e,"req"+n+"_")}catch(s){r&&r(l)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function Pp(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Id||kd(),Td||(Id(),Td=!0),Sd.add(t,e),e.A=0}}function Dp(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Hd(gh(e.Ma,e),Up(e,e.A)),e.A++,!0)}function Op(e){null!=e.B&&(ch.clearTimeout(e.B),e.B=null)}function Lp(e){e.g=new sf(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Tf(e.wa);Cf(t,"RID","rpc"),Cf(t,"SID",e.K),Cf(t,"AID",e.V),Cf(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Cf(t,"TO",e.qa),Cf(t,"TYPE","xmlhttp"),Np(e,t),e.o&&e.s&&Ep(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Af(Tf(t)),n.u=null,n.S=!0,hf(n,e)}function Mp(e){null!=e.v&&(ch.clearTimeout(e.v),e.v=null)}function Fp(e,t){var n=null;if(e.g==t){Mp(e),Op(e),e.g=null;var r=2}else{if(!Yf(e.i,t))return;n=t.F,Jf(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;md(r=Bd(),new Kd(r,n)),Cp(e)}else Pp(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Qf(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Hd(gh(e.Na,e,t),Up(e,e.C)),e.C++,!0))}(e,t)||2==r&&Dp(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Vp(e,5);break;case 4:Vp(e,10);break;case 3:Vp(e,6);break;default:Vp(e,2)}}function Up(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Vp(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=gh(e.pb,e);n||(n=new If("//www.google.com/images/cleardot.gif"),ch.location&&"http"==ch.location.protocol||Sf(n,"https"),Af(n)),function(e,t){const n=new Fd;if(ch.Image){const r=new Image;r.onload=vh(np,n,r,"TestLoadImage: loaded",!0,t),r.onerror=vh(np,n,r,"TestLoadImage: error",!1,t),r.onabort=vh(np,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=vh(np,n,r,"TestLoadImage: timeout",!1,t),ch.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else Wd(2);e.H=0,e.h&&e.h.za(t),zp(e),xp(e)}function zp(e){if(e.H=0,e.ma=[],e.h){const t=Xf(e.i);0==t.length&&0==e.j.length||(Eh(e.ma,t),Eh(e.ma,e.j),e.i.i.length=0,_h(e.j),e.j.length=0),e.h.ya()}}function Bp(e,t,n){var r=n instanceof If?Tf(n):new If(n);if(""!=r.g)t&&(r.g=t+"."+r.g),kf(r,r.m);else{var i=ch.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new If(null);r&&Sf(s,r),t&&(s.g=t),i&&kf(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Cf(r,n,t),Cf(r,"VER",e.ra),Np(e,r),r}function jp(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new up(new rp({ob:n})):new up(e.va)).Oa(e.J),t}function qp(){}function Gp(){if(Ph&&!(10<=Number(jh)))throw Error("Environmental error: no available transport.")}function Wp(e,t){pd.call(this),this.g=new Tp(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Sh(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Sh(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Qp(this)}function Kp(e){tf.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Hp(){nf.call(this),this.status=1}function Qp(e){this.g=e}function Yp(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function $p(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Jp(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(sh=up.prototype).Oa=function(e){this.M=e},sh.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Zd.g(),this.C=this.u?Jd(this.u):Jd(Zd),this.g.onreadystatechange=gh(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(PC){return void pp(this,PC)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=ch.FormData&&e instanceof ch.FormData,!(0<=bh(fp,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{yp(this),0<this.B&&((this.L=function(e){return Ph&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=gh(this.ua,this)):this.A=Nd(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(PC){pp(this,PC)}},sh.ua=function(){"undefined"!=typeof lh&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,md(this,"timeout"),this.abort(8))},sh.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,md(this,"complete"),md(this,"abort"),vp(this))},sh.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),vp(this,!0)),up.$.N.call(this)},sh.La=function(){this.s||(this.G||this.v||this.l?gp(this):this.kb())},sh.kb=function(){gp(this)},sh.isActive=function(){return!!this.g},sh.da=function(){try{return 2<wp(this)?this.g.status:-1}catch(e){return-1}},sh.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},sh.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),cp(t)}},sh.Ia=function(){return this.m},sh.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(sh=Tp.prototype).ra=8,sh.H=1,sh.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new sf(this,this.l,e);let s=this.s;if(this.U&&(s?(s=$h(s),Xh(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Rp(this,i,t),Cf(n=Tf(this.I),"RID",e),Cf(n,"CVER",22),this.F&&Cf(n,"X-HTTP-Session-Id",this.F),Np(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(_p(s)))+"&"+t:this.o&&Ep(n,this.o,s)),$f(this.i,i),this.bb&&Cf(n,"TYPE","init"),this.P?(Cf(n,"$req",t),Cf(n,"SID","null"),i.aa=!0,uf(i,n,null)):uf(i,n,t),this.H=2}}else 3==this.H&&(e?Ap(this,e):0==this.j.length||Hf(this.i)||Ap(this))},sh.Ma=function(){if(this.u=null,Lp(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Hd(gh(this.jb,this),e)}},sh.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Wd(10),kp(this),Lp(this))},sh.ib=function(){null!=this.v&&(this.v=null,kp(this),Dp(this),Wd(19))},sh.pb=function(e){e?(this.l.info("Successfully pinged google.com"),Wd(2)):(this.l.info("Failed to ping google.com"),Wd(1))},sh.isActive=function(){return!!this.h&&this.h.isActive(this)},(sh=qp.prototype).Ba=function(){},sh.Aa=function(){},sh.za=function(){},sh.ya=function(){},sh.isActive=function(){return!0},sh.Va=function(){},Gp.prototype.g=function(e,t){return new Wp(e,t)},yh(Wp,pd),Wp.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;Wd(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Bp(e,null,e.Y),Cp(e)},Wp.prototype.close=function(){Sp(this.g)},Wp.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=vd(e),e=n);t.j.push(new Gf(t.fb++,e)),3==t.H&&Cp(t)},Wp.prototype.N=function(){this.g.h=null,delete this.j,Sp(this.g),delete this.g,Wp.$.N.call(this)},yh(Kp,tf),yh(Hp,nf),yh(Qp,qp),Qp.prototype.Ba=function(){md(this.g,"a")},Qp.prototype.Aa=function(e){md(this.g,new Kp(e))},Qp.prototype.za=function(e){md(this.g,new Hp)},Qp.prototype.ya=function(){md(this.g,"b")},yh(Yp,(function(){this.blockSize=-1})),Yp.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Yp.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)$p(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){$p(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){$p(this,r),i=0;break}}this.h=i,this.i+=t},Yp.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Xp={};function Zp(e){return-128<=e&&128>e?function(e,t){var n=Xp;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Jp([0|e],0>e?-1:0)})):new Jp([0|e],0>e?-1:0)}function em(e){if(isNaN(e)||!isFinite(e))return nm;if(0>e)return am(em(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=tm;return new Jp(t,0)}var tm=4294967296,nm=Zp(0),rm=Zp(1),im=Zp(16777216);function sm(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function om(e){return-1==e.h}function am(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Jp(n,~e.h).add(rm)}function lm(e,t){return e.add(am(t))}function cm(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function um(e,t){this.g=e,this.h=t}function hm(e,t){if(sm(t))throw Error("division by zero");if(sm(e))return new um(nm,nm);if(om(e))return t=hm(am(e),t),new um(am(t.g),am(t.h));if(om(t))return t=hm(e,am(t)),new um(am(t.g),t.h);if(30<e.g.length){if(om(e)||om(t))throw Error("slowDivide_ only works with positive integers.");for(var n=rm,r=t;0>=r.X(e);)n=dm(n),r=dm(r);var i=fm(n,1),s=fm(r,1);for(r=fm(r,2),n=fm(n,2);!sm(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=fm(r,1),n=fm(n,1)}return t=lm(e,i.R(t)),new um(i,t)}for(i=nm;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=em(n)).R(t);om(o)||0<o.X(e);)o=(s=em(n-=r)).R(t);sm(s)&&(s=rm),i=i.add(s),e=lm(e,o)}return new um(i,e)}function dm(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Jp(n,e.h)}function fm(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Jp(i,e.h)}(sh=Jp.prototype).ea=function(){if(om(this))return-am(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:tm+r)*t,t*=tm}return e},sh.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(sm(this))return"0";if(om(this))return"-"+am(this).toString(e);for(var t=em(Math.pow(e,6)),n=this,r="";;){var i=hm(n,t).g,s=((0<(n=lm(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(sm(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},sh.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},sh.X=function(e){return om(e=lm(this,e))?-1:sm(e)?0:1},sh.abs=function(){return om(this)?am(this):this},sh.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Jp(n,-2147483648&n[n.length-1]?-1:0)},sh.R=function(e){if(sm(this)||sm(e))return nm;if(om(this))return om(e)?am(this).R(am(e)):am(am(this).R(e));if(om(e))return am(this.R(am(e)));if(0>this.X(im)&&0>e.X(im))return em(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=o*l,cm(n,2*r+2*i),n[2*r+2*i+1]+=s*l,cm(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,cm(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,cm(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Jp(n,0)},sh.gb=function(e){return hm(this,e).h},sh.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Jp(n,this.h&e.h)},sh.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Jp(n,this.h|e.h)},sh.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Jp(n,this.h^e.h)},Gp.prototype.createWebChannel=Gp.prototype.g,Wp.prototype.send=Wp.prototype.u,Wp.prototype.open=Wp.prototype.m,Wp.prototype.close=Wp.prototype.close,Qd.NO_ERROR=0,Qd.TIMEOUT=8,Qd.HTTP_ERROR=6,Yd.COMPLETE="complete",Xd.EventType=ef,ef.OPEN="a",ef.CLOSE="b",ef.ERROR="c",ef.MESSAGE="d",pd.prototype.listen=pd.prototype.O,up.prototype.listenOnce=up.prototype.P,up.prototype.getLastError=up.prototype.Sa,up.prototype.getLastErrorCode=up.prototype.Ia,up.prototype.getStatus=up.prototype.da,up.prototype.getResponseJson=up.prototype.Wa,up.prototype.getResponseText=up.prototype.ja,up.prototype.send=up.prototype.ha,up.prototype.setWithCredentials=up.prototype.Oa,Yp.prototype.digest=Yp.prototype.l,Yp.prototype.reset=Yp.prototype.reset,Yp.prototype.update=Yp.prototype.j,Jp.prototype.add=Jp.prototype.add,Jp.prototype.multiply=Jp.prototype.R,Jp.prototype.modulo=Jp.prototype.gb,Jp.prototype.compare=Jp.prototype.X,Jp.prototype.toNumber=Jp.prototype.ea,Jp.prototype.toString=Jp.prototype.toString,Jp.prototype.getBits=Jp.prototype.D,Jp.fromNumber=em,Jp.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return am(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=em(Math.pow(n,8)),i=nm,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=em(Math.pow(n,o)),i=i.R(o).add(em(a))):i=(i=i.R(r)).add(em(a))}return i};var pm=ah.createWebChannelTransport=function(){return new Gp},mm=ah.getStatEventTarget=function(){return Bd()},gm=ah.ErrorCode=Qd,vm=ah.EventType=Yd,ym=ah.Event=Vd,wm=ah.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},bm=(ah.FetchXmlHttpFactory=rp,ah.WebChannel=Xd),_m=ah.XhrIo=up,Em=ah.Md5=Yp,Im=ah.Integer=Jp;const Tm="@firebase/firestore";class Sm{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sm.UNAUTHENTICATED=new Sm(null),Sm.GOOGLE_CREDENTIALS=new Sm("google-credentials-uid"),Sm.FIRST_PARTY=new Sm("first-party-uid"),Sm.MOCK_USER=new Sm("mock-user");let km="10.7.0";const xm=new or("@firebase/firestore");function Cm(){return xm.logLevel}function Am(e){if(xm.logLevel<=tr.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Pm);xm.debug("Firestore (".concat(km,"): ").concat(e),...i)}}function Nm(e){if(xm.logLevel<=tr.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Pm);xm.error("Firestore (".concat(km,"): ").concat(e),...i)}}function Rm(e){if(xm.logLevel<=tr.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(Pm);xm.warn("Firestore (".concat(km,"): ").concat(e),...i)}}function Pm(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(xC){return e}}function Dm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(km,") INTERNAL ASSERTION FAILED: ")+e;throw Nm(t),new Error(t)}function Om(e,t){e||Dm()}function Lm(e,t){return e}const Mm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fm extends Mn{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Um{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Vm{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class zm{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Sm.UNAUTHENTICATED)))}shutdown(){}}class Bm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class jm{constructor(e){this.t=e,this.currentUser=Sm.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Um;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Um,e.enqueueRetryable((()=>r(this.currentUser)))};const s=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},o=e=>{Am("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Am("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Um)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Am("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Om("string"==typeof t.accessToken),new Vm(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Om(null===e||"string"==typeof e),new Sm(e)}}class qm{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Sm.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Gm{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new qm(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Sm.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Wm{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Km{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Am("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Am("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{Am("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):Am("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Om("string"==typeof e.token),this.R=e.token,new Wm(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Hm(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Qm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Hm(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Ym(e,t){return e<t?-1:e>t?1:0}function $m(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function Jm(e){return e+"\0"}class Xm{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fm(Mm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fm(Mm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fm(Mm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fm(Mm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xm.fromMillis(Date.now())}static fromDate(e){return Xm.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new Xm(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ym(this.nanoseconds,e.nanoseconds):Ym(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Zm{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Zm(e)}static min(){return new Zm(new Xm(0,0))}static max(){return new Zm(new Xm(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class eg{constructor(e,t,n){void 0===t?t=0:t>e.length&&Dm(),void 0===n?n=e.length-t:n>e.length-t&&Dm(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===eg.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof eg?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tg extends eg{construct(e,t,n){return new tg(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new Fm(Mm.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter((e=>e.length>0)))}return new tg(e)}static emptyPath(){return new tg([])}}const ng=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rg extends eg{construct(e,t,n){return new rg(e,t,n)}static isValidIdentifier(e){return ng.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rg.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rg(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Fm(Mm.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Fm(Mm.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Fm(Mm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Fm(Mm.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rg(t)}static emptyPath(){return new rg([])}}class ig{constructor(e){this.path=e}static fromPath(e){return new ig(tg.fromString(e))}static fromName(e){return new ig(tg.fromString(e).popFirst(5))}static empty(){return new ig(tg.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tg.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tg.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ig(new tg(e.slice()))}}class sg{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function og(e){return e.fields.find((e=>2===e.kind))}function ag(e){return e.fields.filter((e=>2!==e.kind))}sg.UNKNOWN_ID=-1;class lg{constructor(e,t){this.fieldPath=e,this.kind=t}}class cg{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new cg(0,dg.min())}}function ug(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Zm.fromTimestamp(1e9===r?new Xm(n+1,0):new Xm(n,r));return new dg(i,ig.empty(),t)}function hg(e){return new dg(e.readTime,e.key,-1)}class dg{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new dg(Zm.min(),ig.empty(),-1)}static max(){return new dg(Zm.max(),ig.empty(),-1)}}function fg(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ig.comparator(e.documentKey,t.documentKey),0!==n?n:Ym(e.largestBatchId,t.largestBatchId))}const pg="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class mg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function gg(e){if(e.code!==Mm.FAILED_PRECONDITION||e.message!==pg)throw e;Am("LocalStore","Unexpectedly lost primary lease")}class vg{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Dm(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new vg(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof vg?t:vg.resolve(t)}catch(e){return vg.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):vg.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):vg.reject(t)}static resolve(e){return new vg(((t,n)=>{t(e)}))}static reject(e){return new vg(((t,n)=>{n(e)}))}static waitFor(e){return new vg(((t,n)=>{let r=0,i=0,s=!1;e.forEach((e=>{++r,e.next((()=>{++i,s&&i===r&&t()}),(e=>n(e)))})),s=!0,i===r&&t()}))}static or(e){let t=vg.resolve(!1);for(const n of e)t=t.next((e=>e?vg.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new vg(((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===i&&n(s)}),(e=>r(e)))}}))}static doWhile(e,t){return new vg(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}class yg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Um,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new _g(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=kg(t.target.error);this.V.reject(new _g(e,n))}}static open(e,t,n,r){try{return new yg(t,e.transaction(r,n))}catch(e){throw new _g(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Am("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ig(t)}}class wg{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===wg.S(Nn())&&Nm("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Am("SimpleDb","Removing database:",e),Tg(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Ln())return!1;if(wg.C())return!0;const e=Nn(),t=wg.S(e),n=0<t&&t<10,r=wg.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBV2Gy-2ioJyL0xPN01fM1i3NAY5PQ6Qhg",REACT_APP_AUTH_DOMAIN:"chat-580cf.firebaseapp.com",REACT_APP_PROJECT_ID:"chat-580cf",REACT_APP_STORAGE_BUCKET:"chat-580cf.appspot.com",REACT_APP_MESSAGEING_SENDER_ID:"556518847811",REACT_APP_APP_ID:"1:556518847811:web:fd69272bdce0fadfe22bf6"})||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Am("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new _g(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new Fm(Mm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new Fm(Mm.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new _g(e,r))},r.onupgradeneeded=e=>{Am("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{Am("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=yg.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),vg.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Am("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class bg{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Tg(this.k.delete())}}class _g extends Fm{constructor(e,t){super(Mm.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Eg(e){return"IndexedDbTransactionError"===e.name}class Ig{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Am("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Am("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Tg(n)}add(e){return Am("SimpleDb","ADD",this.store.name,e,e),Tg(this.store.add(e))}get(e){return Tg(this.store.get(e)).next((t=>(void 0===t&&(t=null),Am("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Am("SimpleDb","DELETE",this.store.name,e),Tg(this.store.delete(e))}count(){return Am("SimpleDb","COUNT",this.store.name),Tg(this.store.count())}W(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}{const e=this.store.getAll(n.range);return new vg(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new vg(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Am("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new vg(((n,r)=>{t.onerror=e=>{const t=kg(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new vg(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new bg(i),o=t(i.primaryKey,i.value,s);if(o instanceof vg){const e=o.catch((e=>(s.done(),vg.reject(e))));n.push(e)}s.isDone?r():null===s.$?i.continue():i.continue(s.$)}})).next((()=>vg.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Tg(e){return new vg(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=kg(e.target.error);n(t)}}))}let Sg=!1;function kg(e){const t=wg.S(Nn());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Fm("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Sg||(Sg=!0,setTimeout((()=>{throw e}),0)),e}}return e}class xg{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Am("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Am("IndexBackiller","Documents written: ".concat(await this.X.te()))}catch(e){Eg(e)?Am("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await gg(e)}await this.ee(6e4)}))}}class Cg{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return vg.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Am("IndexBackiller","Processing collection: ".concat(t)),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(Am("IndexBackiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=hg(t);fg(r,n)>0&&(n=r)})),new dg(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ag{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Ng(e){return null==e}function Rg(e){return 0===e&&1/e==-1/0}function Pg(e){return"number"==typeof e&&Number.isInteger(e)&&!Rg(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Dg(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Lg(t)),t=Og(e.get(n),t);return Lg(t)}function Og(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Lg(e){return e+"\x01\x01"}function Mg(e){const t=e.length;if(Om(t>=2),2===t)return Om("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),tg.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Dm(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Dm()}s=t+2}return new tg(r)}Ag._e=-1;const Fg=["userId","batchId"];function Ug(e,t){return[e,Dg(t)]}function Vg(e,t,n){return[e,Dg(t),n]}const zg={},Bg=["prefixPath","collectionGroup","readTime","documentId"],jg=["prefixPath","collectionGroup","documentId"],qg=["collectionGroup","readTime","prefixPath","documentId"],Gg=["canonicalId","targetId"],Wg=["targetId","path"],Kg=["path","targetId"],Hg=["collectionId","parent"],Qg=["indexId","uid"],Yg=["uid","sequenceNumber"],$g=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Jg=["indexId","uid","orderedDocumentKey"],Xg=["userId","collectionPath","documentId"],Zg=["userId","collectionPath","largestBatchId"],ev=["userId","collectionGroup","largestBatchId"],tv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],nv=[...tv,"documentOverlays"],rv=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],iv=rv,sv=[...iv,"indexConfiguration","indexState","indexEntries"];class ov extends mg{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function av(e,t){const n=Lm(e);return wg.M(n.ae,t)}function lv(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function cv(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function uv(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class hv{constructor(e,t){this.comparator=e,this.root=t||fv.EMPTY}insert(e,t){return new hv(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,fv.BLACK,null,null))}remove(e){return new hv(this.comparator,this.root.remove(e,this.comparator).copy(null,null,fv.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new dv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new dv(this.root,e,this.comparator,!1)}getReverseIterator(){return new dv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new dv(this.root,e,this.comparator,!0)}}class dv{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class fv{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:fv.RED,this.left=null!=r?r:fv.EMPTY,this.right=null!=i?i:fv.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new fv(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return fv.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return fv.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,fv.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,fv.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Dm();if(this.right.isRed())throw Dm();const e=this.left.check();if(e!==this.right.check())throw Dm();return e+(this.isRed()?0:1)}}fv.EMPTY=null,fv.RED=!0,fv.BLACK=!1,fv.EMPTY=new class{constructor(){this.size=0}get key(){throw Dm()}get value(){throw Dm()}get color(){throw Dm()}get left(){throw Dm()}get right(){throw Dm()}copy(e,t,n,r,i){return this}insert(e,t,n){return new fv(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pv{constructor(e){this.comparator=e,this.data=new hv(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mv(this.data.getIterator())}getIteratorFrom(e){return new mv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof pv))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new pv(this.comparator);return t.data=e,t}}class mv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function gv(e){return e.hasNext()?e.getNext():void 0}class vv{constructor(e){this.fields=e,e.sort(rg.comparator)}static empty(){return new vv([])}unionWith(e){let t=new pv(rg.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new vv(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $m(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class yv extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wv{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new yv("Invalid base64 string: "+e):e}}(e);return new wv(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new wv(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ym(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wv.EMPTY_BYTE_STRING=new wv("");const bv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _v(e){if(Om(!!e),"string"==typeof e){let t=0;const n=bv.exec(e);if(Om(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ev(e.seconds),nanos:Ev(e.nanos)}}function Ev(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Iv(e){return"string"==typeof e?wv.fromBase64String(e):wv.fromUint8Array(e)}function Tv(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Sv(e){const t=e.mapValue.fields.__previous_value__;return Tv(t)?Sv(t):t}function kv(e){const t=_v(e.mapValue.fields.__local_write_time__.timestampValue);return new Xm(t.seconds,t.nanos)}class xv{constructor(e,t,n,r,i,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Cv{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Cv("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Cv&&e.projectId===this.projectId&&e.database===this.database}}const Av={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Nv={nullValue:"NULL_VALUE"};function Rv(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tv(e)?4:Wv(e)?9007199254740991:10:Dm()}function Pv(e,t){if(e===t)return!0;const n=Rv(e);if(n!==Rv(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return kv(e).isEqual(kv(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=_v(e.timestampValue),r=_v(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Iv(e.bytesValue).isEqual(Iv(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ev(e.geoPointValue.latitude)===Ev(t.geoPointValue.latitude)&&Ev(e.geoPointValue.longitude)===Ev(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ev(e.integerValue)===Ev(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ev(e.doubleValue),r=Ev(t.doubleValue);return n===r?Rg(n)===Rg(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return $m(e.arrayValue.values||[],t.arrayValue.values||[],Pv);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(lv(n)!==lv(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Pv(n[i],r[i])))return!1;return!0}(e,t);default:return Dm()}}function Dv(e,t){return void 0!==(e.values||[]).find((e=>Pv(e,t)))}function Ov(e,t){if(e===t)return 0;const n=Rv(e),r=Rv(t);if(n!==r)return Ym(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ym(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ev(e.integerValue||e.doubleValue),r=Ev(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Lv(e.timestampValue,t.timestampValue);case 4:return Lv(kv(e),kv(t));case 5:return Ym(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Iv(e),r=Iv(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Ym(n[i],r[i]);if(0!==e)return e}return Ym(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Ym(Ev(e.latitude),Ev(t.latitude));return 0!==n?n:Ym(Ev(e.longitude),Ev(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ov(n[i],r[i]);if(e)return e}return Ym(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Av.mapValue&&t===Av.mapValue)return 0;if(e===Av.mapValue)return 1;if(t===Av.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=Ym(r[o],s[o]);if(0!==e)return e;const t=Ov(n[r[o]],i[s[o]]);if(0!==t)return t}return Ym(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Dm()}}function Lv(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Ym(e,t);const n=_v(e),r=_v(t),i=Ym(n.seconds,r.seconds);return 0!==i?i:Ym(n.nanos,r.nanos)}function Mv(e){return Fv(e)}function Fv(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=_v(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Iv(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ig.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Fv(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Fv(e.fields[i]));return n+"}"}(e.mapValue):Dm()}function Uv(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Vv(e){return!!e&&"integerValue"in e}function zv(e){return!!e&&"arrayValue"in e}function Bv(e){return!!e&&"nullValue"in e}function jv(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function qv(e){return!!e&&"mapValue"in e}function Gv(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return cv(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Gv(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gv(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Wv(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Kv(e){return"nullValue"in e?Nv:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Uv(Cv.empty(),ig.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Dm()}function Hv(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Uv(Cv.empty(),ig.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Av:Dm()}function Qv(e,t){const n=Ov(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Yv(e,t){const n=Ov(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class $v{constructor(e){this.value=e}static empty(){return new $v({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!qv(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gv(t)}setAll(e){let t=rg.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Gv(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());qv(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pv(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];qv(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){cv(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new $v(Gv(this.value))}}function Jv(e){const t=[];return cv(e.fields,((e,n)=>{const r=new rg([e]);if(qv(n)){const e=Jv(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new vv(t)}class Xv{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new Xv(e,0,Zm.min(),Zm.min(),Zm.min(),$v.empty(),0)}static newFoundDocument(e,t,n,r){return new Xv(e,1,t,Zm.min(),n,r,0)}static newNoDocument(e,t){return new Xv(e,2,t,Zm.min(),Zm.min(),$v.empty(),0)}static newUnknownDocument(e,t){return new Xv(e,3,t,Zm.min(),Zm.min(),$v.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Zm.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=$v.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=$v.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Zm.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Xv&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xv(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Zv{constructor(e,t){this.position=e,this.inclusive=t}}function ey(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?ig.comparator(ig.fromName(o.referenceValue),n.key):Ov(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function ty(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Pv(e.position[n],t.position[n]))return!1;return!0}class ny{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ry(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class iy{}class sy extends iy{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new my(e,t,n):"array-contains"===t?new wy(e,n):"in"===t?new by(e,n):"not-in"===t?new _y(e,n):"array-contains-any"===t?new Ey(e,n):new sy(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new gy(e,n):new vy(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ov(t,this.value)):null!==t&&Rv(this.value)===Rv(t)&&this.matchesComparison(Ov(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Dm()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oy extends iy{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new oy(e,t)}matches(e){return ay(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function ay(e){return"and"===e.op}function ly(e){return"or"===e.op}function cy(e){return uy(e)&&ay(e)}function uy(e){for(const t of e.filters)if(t instanceof oy)return!1;return!0}function hy(e){if(e instanceof sy)return e.field.canonicalString()+e.op.toString()+Mv(e.value);if(cy(e))return e.filters.map((e=>hy(e))).join(",");{const t=e.filters.map((e=>hy(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function dy(e,t){return e instanceof sy?function(e,t){return t instanceof sy&&e.op===t.op&&e.field.isEqual(t.field)&&Pv(e.value,t.value)}(e,t):e instanceof oy?function(e,t){return t instanceof oy&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&dy(n,t.filters[r])),!0)}(e,t):void Dm()}function fy(e,t){const n=e.filters.concat(t);return oy.create(n,e.op)}function py(e){return e instanceof sy?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Mv(e.value))}(e):e instanceof oy?function(e){return e.op.toString()+" {"+e.getFilters().map(py).join(" ,")+"}"}(e):"Filter"}class my extends sy{constructor(e,t,n){super(e,t,n),this.key=ig.fromName(n.referenceValue)}matches(e){const t=ig.comparator(e.key,this.key);return this.matchesComparison(t)}}class gy extends sy{constructor(e,t){super(e,"in",t),this.keys=yy("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class vy extends sy{constructor(e,t){super(e,"not-in",t),this.keys=yy("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yy(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>ig.fromName(e.referenceValue)))}class wy extends sy{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zv(t)&&Dv(t.arrayValue,this.value)}}class by extends sy{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Dv(this.value.arrayValue,t)}}class _y extends sy{constructor(e,t){super(e,"not-in",t)}matches(e){if(Dv(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Dv(this.value.arrayValue,t)}}class Ey extends sy{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zv(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>Dv(this.value.arrayValue,e)))}}class Iy{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.ce=null}}function Ty(e){return new Iy(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Sy(e){const t=Lm(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>hy(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Ng(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Mv(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Mv(e))).join(",")),t.ce=e}return t.ce}function ky(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ry(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!dy(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ty(e.startAt,t.startAt)&&ty(e.endAt,t.endAt)}function xy(e){return ig.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Cy(e,t){return e.filters.filter((e=>e instanceof sy&&e.field.isEqual(t)))}function Ay(e,t,n){let r=Nv,i=!0;for(const s of Cy(e,t)){let e=Nv,t=!0;switch(s.op){case"<":case"<=":e=Kv(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Nv}Qv({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Qv({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Ny(e,t,n){let r=Av,i=!0;for(const s of Cy(e,t)){let e=Av,t=!0;switch(s.op){case">=":case">":e=Hv(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Av}Yv({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Yv({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Ry{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function Py(e,t,n,r,i,s,o,a){return new Ry(e,t,n,r,i,s,o,a)}function Dy(e){return new Ry(e)}function Oy(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ly(e){return null!==e.collectionGroup}function My(e){const t=Lm(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new pv(rg.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new ny(r,n))})),e.has(rg.keyField().canonicalString())||t.le.push(new ny(rg.keyField(),n))}return t.le}function Fy(e){const t=Lm(e);return t.he||(t.he=Uy(t,My(e))),t.he}function Uy(e,t){if("F"===e.limitType)return Ty(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new ny(e.field,t)}));const n=e.endAt?new Zv(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Zv(e.startAt.position,e.startAt.inclusive):null;return Ty(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Vy(e,t){const n=e.filters.concat([t]);return new Ry(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function zy(e,t,n){return new Ry(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function By(e,t){return ky(Fy(e),Fy(t))&&e.limitType===t.limitType}function jy(e){return"".concat(Sy(Fy(e)),"|lt:").concat(e.limitType)}function qy(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>py(e))).join(", "),"]")),Ng(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Mv(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Mv(e))).join(",")),"Target(".concat(t,")")}(Fy(e)),"; limitType=").concat(e.limitType,")")}function Gy(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ig.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of My(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ey(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,My(e),t))&&!(e.endAt&&!function(e,t,n){const r=ey(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,My(e),t))}(e,t)}function Wy(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ky(e){return(t,n)=>{let r=!1;for(const i of My(e)){const e=Hy(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Hy(e,t,n){const r=e.field.isKeyField()?ig.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ov(r,i):Dm()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Dm()}}class Qy{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){cv(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return uv(this.inner)}size(){return this.innerSize}}const Yy=new hv(ig.comparator);function $y(){return Yy}const Jy=new hv(ig.comparator);function Xy(){let e=Jy;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function Zy(e){let t=Jy;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function ew(){return nw()}function tw(){return nw()}function nw(){return new Qy((e=>e.toString()),((e,t)=>e.isEqual(t)))}const rw=new hv(ig.comparator),iw=new pv(ig.comparator);function sw(){let e=iw;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const ow=new pv(Ym);function aw(){return ow}function lw(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rg(t)?"-0":t}}function cw(e){return{integerValue:""+e}}function uw(e,t){return Pg(t)?cw(t):lw(e,t)}class hw{constructor(){this._=void 0}}function dw(e,t,n){return e instanceof mw?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Tv(t)&&(t=Sv(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof gw?vw(e,t):e instanceof yw?ww(e,t):function(e,t){const n=pw(e,t),r=_w(n)+_w(e.Ie);return Vv(n)&&Vv(e.Ie)?cw(r):lw(e.serializer,r)}(e,t)}function fw(e,t,n){return e instanceof gw?vw(e,t):e instanceof yw?ww(e,t):n}function pw(e,t){return e instanceof bw?function(e){return Vv(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class mw extends hw{}class gw extends hw{constructor(e){super(),this.elements=e}}function vw(e,t){const n=Ew(t);for(const r of e.elements)n.some((e=>Pv(e,r)))||n.push(r);return{arrayValue:{values:n}}}class yw extends hw{constructor(e){super(),this.elements=e}}function ww(e,t){let n=Ew(t);for(const r of e.elements)n=n.filter((e=>!Pv(e,r)));return{arrayValue:{values:n}}}class bw extends hw{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function _w(e){return Ev(e.integerValue||e.doubleValue)}function Ew(e){return zv(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Iw{constructor(e,t){this.field=e,this.transform=t}}class Tw{constructor(e,t){this.version=e,this.transformResults=t}}class Sw{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Sw}static exists(e){return new Sw(void 0,e)}static updateTime(e){return new Sw(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function kw(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class xw{}function Cw(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Uw(e.key,Sw.none()):new Dw(e.key,e.data,Sw.none());{const n=e.data,r=$v.empty();let i=new pv(rg.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Ow(e.key,r,new vv(i.toArray()),Sw.none())}}function Aw(e,t,n){e instanceof Dw?function(e,t,n){const r=e.value.clone(),i=Mw(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Ow?function(e,t,n){if(!kw(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Mw(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Lw(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Nw(e,t,n,r){return e instanceof Dw?function(e,t,n,r){if(!kw(e.precondition,t))return n;const i=e.value.clone(),s=Fw(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Ow?function(e,t,n,r){if(!kw(e.precondition,t))return n;const i=Fw(e.fieldTransforms,r,t),s=t.data;return s.setAll(Lw(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return kw(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Rw(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=pw(r.transform,e||null);null!=i&&(null===n&&(n=$v.empty()),n.set(r.field,i))}return n||null}function Pw(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&$m(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof gw&&t instanceof gw||e instanceof yw&&t instanceof yw?$m(e.elements,t.elements,Pv):e instanceof bw&&t instanceof bw?Pv(e.Ie,t.Ie):e instanceof mw&&t instanceof mw}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Dw extends xw{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Ow extends xw{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Lw(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Mw(e,t,n){const r=new Map;Om(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,fw(o,a,n[i]))}return r}function Fw(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,dw(e,s,t))}return r}class Uw extends xw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vw extends xw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class zw{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Aw(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Nw(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Nw(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=tw();return this.mutations.forEach((r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=Cw(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(Zm.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),sw())}isEqual(e){return this.batchId===e.batchId&&$m(this.mutations,e.mutations,((e,t)=>Pw(e,t)))&&$m(this.baseMutations,e.baseMutations,((e,t)=>Pw(e,t)))}}class Bw{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Om(e.mutations.length===n.length);let r=rw;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Bw(e,t,n,r)}}class jw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class qw{constructor(e,t){this.count=e,this.unchangedNames=t}}var Gw,Ww;function Kw(e){switch(e){default:return Dm();case Mm.CANCELLED:case Mm.UNKNOWN:case Mm.DEADLINE_EXCEEDED:case Mm.RESOURCE_EXHAUSTED:case Mm.INTERNAL:case Mm.UNAVAILABLE:case Mm.UNAUTHENTICATED:return!1;case Mm.INVALID_ARGUMENT:case Mm.NOT_FOUND:case Mm.ALREADY_EXISTS:case Mm.PERMISSION_DENIED:case Mm.FAILED_PRECONDITION:case Mm.ABORTED:case Mm.OUT_OF_RANGE:case Mm.UNIMPLEMENTED:case Mm.DATA_LOSS:return!0}}function Hw(e){if(void 0===e)return Nm("GRPC error has no .code"),Mm.UNKNOWN;switch(e){case Gw.OK:return Mm.OK;case Gw.CANCELLED:return Mm.CANCELLED;case Gw.UNKNOWN:return Mm.UNKNOWN;case Gw.DEADLINE_EXCEEDED:return Mm.DEADLINE_EXCEEDED;case Gw.RESOURCE_EXHAUSTED:return Mm.RESOURCE_EXHAUSTED;case Gw.INTERNAL:return Mm.INTERNAL;case Gw.UNAVAILABLE:return Mm.UNAVAILABLE;case Gw.UNAUTHENTICATED:return Mm.UNAUTHENTICATED;case Gw.INVALID_ARGUMENT:return Mm.INVALID_ARGUMENT;case Gw.NOT_FOUND:return Mm.NOT_FOUND;case Gw.ALREADY_EXISTS:return Mm.ALREADY_EXISTS;case Gw.PERMISSION_DENIED:return Mm.PERMISSION_DENIED;case Gw.FAILED_PRECONDITION:return Mm.FAILED_PRECONDITION;case Gw.ABORTED:return Mm.ABORTED;case Gw.OUT_OF_RANGE:return Mm.OUT_OF_RANGE;case Gw.UNIMPLEMENTED:return Mm.UNIMPLEMENTED;case Gw.DATA_LOSS:return Mm.DATA_LOSS;default:return Dm()}}(Ww=Gw||(Gw={}))[Ww.OK=0]="OK",Ww[Ww.CANCELLED=1]="CANCELLED",Ww[Ww.UNKNOWN=2]="UNKNOWN",Ww[Ww.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ww[Ww.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ww[Ww.NOT_FOUND=5]="NOT_FOUND",Ww[Ww.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ww[Ww.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ww[Ww.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ww[Ww.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ww[Ww.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ww[Ww.ABORTED=10]="ABORTED",Ww[Ww.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ww[Ww.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ww[Ww.INTERNAL=13]="INTERNAL",Ww[Ww.UNAVAILABLE=14]="UNAVAILABLE",Ww[Ww.DATA_LOSS=15]="DATA_LOSS";let Qw=null;function Yw(){return new TextEncoder}const $w=new Im([4294967295,4294967295],0);function Jw(e){const t=Yw().encode(e),n=new Em;return n.update(t),new Uint8Array(n.digest())}function Xw(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Im([n,r],0),new Im([i,s],0)]}class Zw{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new eb("Invalid padding: ".concat(t));if(n<0)throw new eb("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new eb("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new eb("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Im.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(Im.fromNumber(n)));return 1===r.compare($w)&&(r=new Im([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=Jw(e),[n,r]=Xw(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Zw(i,r,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=Jw(e),[n,r]=Xw(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class eb extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tb{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,nb.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new tb(Zm.min(),r,new hv(Ym),$y(),sw())}}class nb{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new nb(n,t,sw(),sw(),sw())}}class rb{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class ib{constructor(e,t){this.targetId=e,this.fe=t}}class sb{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wv.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ob{constructor(){this.ge=0,this.pe=cb(),this.ye=wv.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=sw(),t=sw(),n=sw();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Dm()}})),new nb(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=cb()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Om(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class ab{constructor(e){this.Le=e,this.ke=new Map,this.qe=$y(),this.Qe=lb(),this.Ke=new hv(Ym)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:Dm()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(xy(i))if(0===n){const e=new ig(i.path);this.We(t,e,Xv.newNoDocument(e,Zm.min()))}else Om(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==Qw||Qw.tt(function(e,t,n,r,i){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.fe,this.Le.nt(),n,i))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,o;try{s=Iv(n).toUint8Array()}catch(e){if(e instanceof yv)return Rm("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new Zw(s,r,i)}catch(e){return Rm(e instanceof eb?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&xy(i.target)){const t=new ig(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,Xv.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=sw();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new tb(e,t,this.Ke,this.qe,n);return this.qe=$y(),this.Qe=lb(),this.Ke=new hv(Ym),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new ob,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new pv(Ym),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Am("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new ob),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function lb(){return new hv(ig.comparator)}function cb(){return new hv(ig.comparator)}const ub={asc:"ASCENDING",desc:"DESCENDING"},hb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},db={and:"AND",or:"OR"};class fb{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pb(e,t){return e.useProto3Json||Ng(t)?t:{value:t}}function mb(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function gb(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function vb(e,t){return mb(e,t.toTimestamp())}function yb(e){return Om(!!e),Zm.fromTimestamp(function(e){const t=_v(e);return new Xm(t.seconds,t.nanos)}(e))}function wb(e,t){return function(e){return new tg(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function bb(e){const t=tg.fromString(e);return Om(jb(t)),t}function _b(e,t){return wb(e.databaseId,t.path)}function Eb(e,t){const n=bb(t);if(n.get(1)!==e.databaseId.projectId)throw new Fm(Mm.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Fm(Mm.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ig(kb(n))}function Ib(e,t){return wb(e.databaseId,t)}function Tb(e){const t=bb(e);return 4===t.length?tg.emptyPath():kb(t)}function Sb(e){return new tg(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function kb(e){return Om(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function xb(e,t,n){return{name:_b(e,t),fields:n.value.mapValue.fields}}function Cb(e,t,n){const r=Eb(e,t.name),i=yb(t.updateTime),s=t.createTime?yb(t.createTime):Zm.min(),o=new $v({mapValue:{fields:t.fields}}),a=Xv.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ab(e,t){let n;if(t instanceof Dw)n={update:xb(e,t.key,t.value)};else if(t instanceof Uw)n={delete:_b(e,t.key)};else if(t instanceof Ow)n={update:xb(e,t.key,t.data),updateMask:Bb(t.fieldMask)};else{if(!(t instanceof Vw))return Dm();n={verify:_b(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof mw)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof yw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof bw)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw Dm()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:vb(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Dm()}(e,t.precondition)),n}function Nb(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Sw.updateTime(yb(e.updateTime)):void 0!==e.exists?Sw.exists(e.exists):Sw.none()}(t.currentDocument):Sw.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Om("REQUEST_TIME"===t.setToServerValue),n=new mw;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new gw(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new yw(e)}else"increment"in t?n=new bw(e,t.increment):Dm();const r=rg.fromServerFormat(t.fieldPath);return new Iw(r,n)}(e,t))):[];if(t.update){t.update.name;const i=Eb(e,t.update.name),s=new $v({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new vv(t.map((e=>rg.fromServerFormat(e))))}(t.updateMask);return new Ow(i,s,e,n,r)}return new Dw(i,s,n,r)}if(t.delete){const r=Eb(e,t.delete);return new Uw(r,n)}if(t.verify){const r=Eb(e,t.verify);return new Vw(r,n)}return Dm()}function Rb(e,t){return{documents:[Ib(e,t.path)]}}function Pb(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Ib(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Ib(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return zb(oy.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Ub(e.field),direction:Lb(e.dir)}}(e)))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=pb(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Db(e){let t=Tb(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Om(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Ob(e);return t instanceof oy&&cy(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new ny(Vb(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Ng(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Zv(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Zv(n,t)}(n.endAt)),Py(t,i,o,s,a,"F",l,c)}function Ob(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Vb(e.unaryFilter.field);return sy.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Vb(e.unaryFilter.field);return sy.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vb(e.unaryFilter.field);return sy.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Vb(e.unaryFilter.field);return sy.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Dm()}}(e):void 0!==e.fieldFilter?function(e){return sy.create(Vb(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Dm()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return oy.create(e.compositeFilter.filters.map((e=>Ob(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Dm()}}(e.compositeFilter.op))}(e):Dm()}function Lb(e){return ub[e]}function Mb(e){return hb[e]}function Fb(e){return db[e]}function Ub(e){return{fieldPath:e.canonicalString()}}function Vb(e){return rg.fromServerFormat(e.fieldPath)}function zb(e){return e instanceof sy?function(e){if("=="===e.op){if(jv(e.value))return{unaryFilter:{field:Ub(e.field),op:"IS_NAN"}};if(Bv(e.value))return{unaryFilter:{field:Ub(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(jv(e.value))return{unaryFilter:{field:Ub(e.field),op:"IS_NOT_NAN"}};if(Bv(e.value))return{unaryFilter:{field:Ub(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ub(e.field),op:Mb(e.op),value:e.value}}}(e):e instanceof oy?function(e){const t=e.getFilters().map((e=>zb(e)));return 1===t.length?t[0]:{compositeFilter:{op:Fb(e.op),filters:t}}}(e):Dm()}function Bb(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function jb(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class qb{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Zm.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zm.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:wv.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new qb(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qb(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qb(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qb(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Gb{constructor(e){this.ut=e}}function Wb(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Kb(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:_b(e,t.key),fields:t.data.value.mapValue.fields,updateTime:mb(e,t.version.toTimestamp()),createTime:mb(e,t.createTime.toTimestamp())}}(e.ut,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Hb(t.version)};else{if(!t.isUnknownDocument())return Dm();r.unknownDocument={path:n.path.toArray(),version:Hb(t.version)}}return r}function Kb(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Hb(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Qb(e){const t=new Xm(e.seconds,e.nanoseconds);return Zm.fromTimestamp(t)}function Yb(e,t){const n=(t.baseMutations||[]).map((t=>Nb(e.ut,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map((t=>Nb(e.ut,t))),i=Xm.fromMillis(t.localWriteTimeMs);return new zw(t.batchId,i,n,r)}function $b(e){const t=Qb(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Qb(e.lastLimboFreeSnapshotVersion):Zm.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return Om(1===e.documents.length),Fy(Dy(Tb(e.documents[0])))}(e.query):function(e){return Fy(Db(e))}(e.query),new qb(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,wv.fromBase64String(e.resumeToken))}function Jb(e,t){const n=Hb(t.snapshotVersion),r=Hb(t.lastLimboFreeSnapshotVersion);let i;i=xy(t.target)?Rb(e.ut,t.target):Pb(e.ut,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Sy(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Xb(e){const t=Db({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?zy(t,t.limit,"L"):t}function Zb(e,t){return new jw(t.largestBatchId,Nb(e.ut,t.overlayMutation))}function e_(e,t){const n=t.path.lastSegment();return[e,Dg(t.path.popLast()),n]}function t_(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Hb(r.readTime),documentKey:Dg(r.documentKey.path),largestBatchId:r.largestBatchId}}class n_{getBundleMetadata(e,t){return r_(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:Qb(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return r_(e).put(function(e){return{bundleId:e.id,createTime:Hb(yb(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return i_(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:Xb(e.bundledQuery),readTime:Qb(e.readTime)}}(e)}))}saveNamedQuery(e,t){return i_(e).put(function(e){return{name:e.name,readTime:Hb(yb(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function r_(e){return av(e,"bundles")}function i_(e){return av(e,"namedQueries")}class s_{constructor(e,t){this.serializer=e,this.userId=t}static ct(e,t){const n=t.uid||"";return new s_(e,n)}getOverlay(e,t){return o_(e).get(e_(this.userId,t)).next((e=>e?Zb(this.serializer,e):null))}getOverlays(e,t){const n=ew();return vg.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const s=new jw(t,i);r.push(this.lt(e,s))})),vg.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(Dg(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(o_(e).H("collectionPathOverlayIndex",r))})),vg.waitFor(i)}getOverlaysForCollection(e,t,n){const r=ew(),i=Dg(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return o_(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=Zb(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=ew();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return o_(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=Zb(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>i))}lt(e,t){return o_(e).put(function(e,t,n){const[r,i,s]=e_(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ab(e.ut,n.mutation)}}(this.serializer,this.userId,t))}}function o_(e){return av(e,"documentOverlays")}class a_{constructor(){}ht(e,t){this.Pt(e,t),t.It()}Pt(e,t){if("nullValue"in e)this.Tt(t,5);else if("booleanValue"in e)this.Tt(t,10),t.Et(e.booleanValue?1:0);else if("integerValue"in e)this.Tt(t,15),t.Et(Ev(e.integerValue));else if("doubleValue"in e){const n=Ev(e.doubleValue);isNaN(n)?this.Tt(t,13):(this.Tt(t,15),Rg(n)?t.Et(0):t.Et(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Tt(t,20),"string"==typeof n?t.dt(n):(t.dt("".concat(n.seconds||"")),t.Et(n.nanos||0))}else if("stringValue"in e)this.At(e.stringValue,t),this.Rt(t);else if("bytesValue"in e)this.Tt(t,30),t.Vt(Iv(e.bytesValue)),this.Rt(t);else if("referenceValue"in e)this.ft(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Tt(t,45),t.Et(n.latitude||0),t.Et(n.longitude||0)}else"mapValue"in e?Wv(e)?this.Tt(t,Number.MAX_SAFE_INTEGER):(this.gt(e.mapValue,t),this.Rt(t)):"arrayValue"in e?(this.yt(e.arrayValue,t),this.Rt(t)):Dm()}At(e,t){this.Tt(t,25),this.wt(e,t)}wt(e,t){t.dt(e)}gt(e,t){const n=e.fields||{};this.Tt(t,55);for(const r of Object.keys(n))this.At(r,t),this.Pt(n[r],t)}yt(e,t){const n=e.values||[];this.Tt(t,50);for(const r of n)this.Pt(r,t)}ft(e,t){this.Tt(t,37),ig.fromName(e).path.forEach((e=>{this.Tt(t,60),this.wt(e,t)}))}Tt(e,t){e.Et(t)}Rt(e){e.Et(2)}}function l_(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function c_(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=l_(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}a_.St=new a_;class u_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}bt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Dt(n.value),n=t.next();this.Ct()}vt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ft(n.value),n=t.next();this.Mt()}xt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Dt(e);else if(e<2048)this.Dt(960|e>>>6),this.Dt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Dt(480|e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e);else{const e=t.codePointAt(0);this.Dt(240|e>>>18),this.Dt(128|63&e>>>12),this.Dt(128|63&e>>>6),this.Dt(128|63&e)}}this.Ct()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ft(e);else if(e<2048)this.Ft(960|e>>>6),this.Ft(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ft(480|e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e);else{const e=t.codePointAt(0);this.Ft(240|e>>>18),this.Ft(128|63&e>>>12),this.Ft(128|63&e>>>6),this.Ft(128|63&e)}}this.Mt()}Nt(e){const t=this.Bt(e),n=c_(t);this.Lt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}kt(e){const t=this.Bt(e),n=c_(t);this.Lt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}qt(){this.Qt(255),this.Qt(255)}Kt(){this.$t(255),this.$t(255)}reset(){this.position=0}seed(e){this.Lt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ut(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Dt(e){const t=255&e;0===t?(this.Qt(0),this.Qt(255)):255===t?(this.Qt(255),this.Qt(0)):this.Qt(t)}Ft(e){const t=255&e;0===t?(this.$t(0),this.$t(255)):255===t?(this.$t(255),this.$t(0)):this.$t(e)}Ct(){this.Qt(0),this.Qt(1)}Mt(){this.$t(0),this.$t(1)}Qt(e){this.Lt(1),this.buffer[this.position++]=e}$t(e){this.Lt(1),this.buffer[this.position++]=~e}Lt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class h_{constructor(e){this.Wt=e}Vt(e){this.Wt.bt(e)}dt(e){this.Wt.xt(e)}Et(e){this.Wt.Nt(e)}It(){this.Wt.qt()}}class d_{constructor(e){this.Wt=e}Vt(e){this.Wt.vt(e)}dt(e){this.Wt.Ot(e)}Et(e){this.Wt.kt(e)}It(){this.Wt.Kt()}}class f_{constructor(){this.Wt=new u_,this.Gt=new h_(this.Wt),this.zt=new d_(this.Wt)}seed(e){this.Wt.seed(e)}jt(e){return 0===e?this.Gt:this.zt}Ut(){return this.Wt.Ut()}reset(){this.Wt.reset()}}class p_{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Ht(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new p_(this.indexId,this.documentKey,this.arrayValue,n)}}function m_(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=g_(e.arrayValue,t.arrayValue),0!==n?n:(n=g_(e.directionalValue,t.directionalValue),0!==n?n:ig.comparator(e.documentKey,t.documentKey)))}function g_(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class v_{constructor(e){this.Jt=new pv(((e,t)=>rg.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Yt=e.orderBy,this.Zt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Jt=this.Jt.add(e):this.Zt.push(e)}}get Xt(){return this.Jt.size>1}en(e){if(Om(e.collectionGroup===this.collectionId),this.Xt)return!1;const t=og(e);if(void 0!==t&&!this.tn(t))return!1;const n=ag(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.tn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Jt.size>0){const e=this.Jt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.nn(e,t)||!this.rn(this.Yt[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Yt.length||!this.rn(this.Yt[s++],e))return!1}return!0}sn(){if(this.Xt)return null;let e=new pv(rg.comparator);const t=[];for(const n of this.Zt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new lg(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new lg(n.field,0))}for(const n of this.Yt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new lg(n.field,"asc"===n.dir?0:1)));return new sg(sg.UNKNOWN_ID,this.collectionId,t,cg.empty())}tn(e){for(const t of this.Zt)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}rn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function y_(e){var t,n;if(Om(e instanceof sy||e instanceof oy),e instanceof sy){if(e instanceof by){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>sy.create(e.field,"==",t))))||[];return oy.create(r,"or")}return e}const r=e.filters.map((e=>y_(e)));return oy.create(r,e.op)}function w_(e){if(0===e.getFilters().length)return[];const t=I_(y_(e));return Om(E_(t)),b_(t)||__(t)?[t]:t.getFilters()}function b_(e){return e instanceof sy}function __(e){return e instanceof oy&&cy(e)}function E_(e){return b_(e)||__(e)||function(e){if(e instanceof oy&&ly(e)){for(const t of e.getFilters())if(!b_(t)&&!__(t))return!1;return!0}return!1}(e)}function I_(e){if(Om(e instanceof sy||e instanceof oy),e instanceof sy)return e;if(1===e.filters.length)return I_(e.filters[0]);const t=e.filters.map((e=>I_(e)));let n=oy.create(t,e.op);return n=k_(n),E_(n)?n:(Om(n instanceof oy),Om(ay(n)),Om(n.filters.length>1),n.filters.reduce(((e,t)=>T_(e,t))))}function T_(e,t){let n;return Om(e instanceof sy||e instanceof oy),Om(t instanceof sy||t instanceof oy),n=e instanceof sy?t instanceof sy?function(e,t){return oy.create([e,t],"and")}(e,t):S_(e,t):t instanceof sy?S_(t,e):function(e,t){if(Om(e.filters.length>0&&t.filters.length>0),ay(e)&&ay(t))return fy(e,t.getFilters());const n=ly(e)?e:t,r=ly(e)?t:e,i=n.filters.map((e=>T_(e,r)));return oy.create(i,"or")}(e,t),k_(n)}function S_(e,t){if(ay(t))return fy(t,e.getFilters());{const n=t.filters.map((t=>T_(e,t)));return oy.create(n,"or")}}function k_(e){if(Om(e instanceof sy||e instanceof oy),e instanceof sy)return e;const t=e.getFilters();if(1===t.length)return k_(t[0]);if(uy(e))return e;const n=t.map((e=>k_(e))),r=[];return n.forEach((t=>{t instanceof sy?r.push(t):t instanceof oy&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:oy.create(r,e.op)}class x_{constructor(){this.on=new C_}addToCollectionParentIndex(e,t){return this.on.add(t),vg.resolve()}getCollectionParents(e,t){return vg.resolve(this.on.getEntries(t))}addFieldIndex(e,t){return vg.resolve()}deleteFieldIndex(e,t){return vg.resolve()}deleteAllFieldIndexes(e){return vg.resolve()}createTargetIndexes(e,t){return vg.resolve()}getDocumentsMatchingTarget(e,t){return vg.resolve(null)}getIndexType(e,t){return vg.resolve(0)}getFieldIndexes(e,t){return vg.resolve([])}getNextCollectionGroupToUpdate(e){return vg.resolve(null)}getMinOffset(e,t){return vg.resolve(dg.min())}getMinOffsetFromCollectionGroup(e,t){return vg.resolve(dg.min())}updateCollectionGroup(e,t,n){return vg.resolve()}updateIndexEntries(e,t){return vg.resolve()}}class C_{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new pv(tg.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new pv(tg.comparator)).toArray()}}const A_=new Uint8Array(0);class N_{constructor(e,t){this.user=e,this.databaseId=t,this._n=new C_,this.an=new Qy((e=>Sy(e)),((e,t)=>ky(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this._n.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this._n.add(t)}));const i={collectionId:n,parent:Dg(r)};return R_(e).put(i)}return vg.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Jm(t),""],!1,!0);return R_(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Mg(r.parent))}return n}))}addFieldIndex(e,t){const n=D_(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=O_(e);return i.next((e=>{n.put(t_(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=D_(e),r=O_(e),i=P_(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=D_(e),n=P_(e),r=O_(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return vg.forEach(this.un(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new v_(t).sn();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=P_(e);let r=!0;const i=new Map;return vg.forEach(this.un(t),(t=>this.cn(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=sw();const r=[];return vg.forEach(i,((i,s)=>{Am("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(i)," to execute ").concat(Sy(t)));const o=function(e,t){const n=og(t);if(void 0===n)return null;for(const r of Cy(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),a=function(e,t){const n=new Map;for(const r of ag(t))for(const t of Cy(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of ag(t)){const t=0===i.kind?Ay(e,i.fieldPath,e.startAt):Ny(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Zv(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of ag(t)){const t=0===i.kind?Ny(e,i.fieldPath,e.endAt):Ay(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Zv(n,r)}(s,i),u=this.ln(i,s,l),h=this.ln(i,s,c),d=this.hn(i,s,a),f=this.Pn(i.indexId,o,u,l.inclusive,h,c.inclusive,d);return vg.forEach(f,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=ig.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return vg.resolve(null)}))}un(e){let t=this.an.get(e);return t||(t=0===e.filters.length?[e]:w_(oy.create(e.filters,"and")).map((t=>Ty(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.an.set(e,t),t)}Pn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.In(t[u/l]):A_,h=this.Tn(e,a,n[u%l],r),d=this.En(e,a,i[u%l],s),f=o.map((t=>this.Tn(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}Tn(e,t,n,r){const i=new p_(e,ig.empty(),t,n);return r?i:i.Ht()}En(e,t,n,r){const i=new p_(e,ig.empty(),t,n);return r?i.Ht():i}cn(e,t){const n=new v_(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.en(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.un(t);return vg.forEach(r,(t=>this.cn(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new pv(rg.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}dn(e,t){const n=new f_;for(const r of ag(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.jt(r.kind);a_.St.ht(e,i)}return n.Ut()}In(e){const t=new f_;return a_.St.ht(e,t.jt(0)),t.Ut()}An(e,t){const n=new f_;return a_.St.ht(Uv(this.databaseId,t),n.jt(function(e){const t=ag(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ut()}hn(e,t,n){if(null===n)return[];let r=[];r.push(new f_);let i=0;for(const s of ag(e)){const e=n[i++];for(const n of r)if(this.Rn(t,s.fieldPath)&&zv(e))r=this.Vn(r,s,e);else{const t=n.jt(s.kind);a_.St.ht(e,t)}}return this.mn(r)}ln(e,t,n){return this.hn(e,t,n.position)}mn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ut();return t}Vn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new f_;n.seed(e.Ut()),a_.St.ht(s,n.jt(t.kind)),i.push(n)}return i}Rn(e,t){return!!e.filters.find((e=>e instanceof sy&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=D_(e),r=O_(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return vg.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new cg(t.sequenceNumber,new dg(Qb(t.readTime),new ig(Mg(t.documentKey)),t.largestBatchId)):cg.empty(),r=e.fields.map((e=>{let[t,n]=e;return new lg(rg.fromServerFormat(t),n)}));return new sg(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Ym(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=D_(e),i=O_(e);return this.fn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>vg.forEach(t,(t=>i.put(t_(t.indexId,this.user,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return vg.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?vg.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),vg.forEach(i,(n=>this.gn(e,t,n).next((t=>{const i=this.pn(r,n);return t.isEqual(i)?vg.resolve():this.yn(e,r,n,t,i)})))))))}))}wn(e,t,n,r){return P_(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.An(n,t.key),documentKey:t.key.path.toArray()})}Sn(e,t,n,r){return P_(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.An(n,t.key),t.key.path.toArray()])}gn(e,t,n){const r=P_(e);let i=new pv(m_);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.An(n,t)])},((e,r)=>{i=i.add(new p_(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}pn(e,t){let n=new pv(m_);const r=this.dn(t,e);if(null==r)return n;const i=og(t);if(null!=i){const s=e.data.field(i.fieldPath);if(zv(s))for(const i of s.arrayValue.values||[])n=n.add(new p_(t.indexId,e.key,this.In(i),r))}else n=n.add(new p_(t.indexId,e.key,A_,r));return n}yn(e,t,n,r,i){Am("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=gv(s),l=gv(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const r=n(a,l);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(l),l=gv(o)):t?(i(a),a=gv(s)):(a=gv(s),l=gv(o))}}(r,i,m_,(r=>{s.push(this.wn(e,t,n,r))}),(r=>{s.push(this.Sn(e,t,n,r))})),vg.waitFor(s)}fn(e){let t=1;return O_(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>m_(e,t))).filter(((e,t,n)=>!t||0!==m_(e,n[t-1])));const r=[];r.push(e);for(const s of n){const n=m_(s,e),i=m_(s,t);if(0===n)r[0]=e.Ht();else if(n>0&&i<0)r.push(s),r.push(s.Ht());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.bn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,A_,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,A_,[]];i.push(IDBKeyRange.bound(e,t))}return i}bn(e,t){return m_(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(L_)}getMinOffset(e,t){return vg.mapArray(this.un(t),(t=>this.cn(e,t).next((e=>e||Dm())))).next(L_)}}function R_(e){return av(e,"collectionParents")}function P_(e){return av(e,"indexEntries")}function D_(e){return av(e,"indexConfiguration")}function O_(e){return av(e,"indexState")}function L_(e){Om(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;fg(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new dg(t.readTime,t.documentKey,n)}const M_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class F_{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new F_(e,F_.DEFAULT_COLLECTION_PERCENTILE,F_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function U_(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Om(1===a)})));const c=[];for(const u of n.mutations){const e=Vg(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return vg.waitFor(s).next((()=>c))}function V_(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Dm();t=e.noDocument}return JSON.stringify(t).length}F_.DEFAULT_COLLECTION_PERCENTILE=10,F_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,F_.DEFAULT=new F_(41943040,F_.DEFAULT_COLLECTION_PERCENTILE,F_.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),F_.DISABLED=new F_(-1,0,0);class z_{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Dn={}}static ct(e,t,n,r){Om(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new z_(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return j_(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=q_(e),s=j_(e);return s.add({}).next((o=>{Om("number"==typeof o);const a=new zw(o,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>Ab(e.ut,t))),i=n.mutations.map((t=>Ab(e.ut,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),c=[];let u=new pv(((e,t)=>Ym(e.canonicalString(),t.canonicalString())));for(const e of r){const t=Vg(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,zg))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Dn[o]=a.keys()})),vg.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return j_(e).get(t).next((e=>e?(Om(e.userId===this.userId),Yb(this.serializer,e)):null))}Cn(e,t){return this.Dn[t]?vg.resolve(this.Dn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Dn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return j_(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(Om(t.batchId>=n),i=Yb(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return j_(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return j_(e).W("userMutationsIndex",t).next((e=>e.map((e=>Yb(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Ug(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return q_(e).Y({range:r},((n,r,s)=>{const[o,a,l]=n,c=Mg(a);if(o===this.userId&&t.path.isEqual(c))return j_(e).get(l).next((e=>{if(!e)throw Dm();Om(e.userId===this.userId),i.push(Yb(this.serializer,e))}));s.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new pv(Ym);const r=[];return t.forEach((t=>{const i=Ug(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=q_(e).Y({range:s},((e,r,i)=>{const[s,o,a]=e,l=Mg(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):i.done()}));r.push(o)})),vg.waitFor(r).next((()=>this.vn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Ug(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new pv(Ym);return q_(e).Y({range:s},((e,t,i)=>{const[s,a,l]=e,c=Mg(a);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(o=o.add(l)):i.done()})).next((()=>this.vn(e,o)))}vn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(j_(e).get(t).next((e=>{if(null===e)throw Dm();Om(e.userId===this.userId),n.push(Yb(this.serializer,e))})))})),vg.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return U_(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Fn(t.batchId)})),vg.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Fn(e){delete this.Dn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return vg.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return q_(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Mg(e[1]);r.push(t)}else n.done()})).next((()=>{Om(0===r.length)}))}))}containsKey(e,t){return B_(e,this.userId,t)}Mn(e){return G_(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function B_(e,t,n){const r=Ug(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return q_(e).Y({range:s,J:!0},((e,n,r)=>{const[s,a,l]=e;s===t&&a===i&&(o=!0),r.done()})).next((()=>o))}function j_(e){return av(e,"mutations")}function q_(e){return av(e,"documentMutations")}function G_(e){return av(e,"mutationQueues")}class W_{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new W_(0)}static Nn(){return new W_(-1)}}class K_{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new W_(t.highestTargetId);return t.highestTargetId=n.next(),this.Ln(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>Zm.fromTimestamp(new Xm(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Ln(e,r))))}addTargetData(e,t){return this.kn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.qn(t,n),this.Ln(e,n))))))}updateTargetData(e,t){return this.kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>H_(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Om(t.targetCount>0),t.targetCount-=1,this.Ln(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return H_(e).Y(((s,o)=>{const a=$b(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))})).next((()=>vg.waitFor(i))).next((()=>r))}forEachTarget(e,t){return H_(e).Y(((e,n)=>{const r=$b(n);t(r)}))}Bn(e){return Q_(e).get("targetGlobalKey").next((e=>(Om(null!==e),e)))}Ln(e,t){return Q_(e).put("targetGlobalKey",t)}kn(e,t){return H_(e).put(Jb(this.serializer,t))}qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Sy(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return H_(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const s=$b(n);ky(t,s.target)&&(i=s,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=Y_(e);return t.forEach((t=>{const s=Dg(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))})),vg.waitFor(r)}removeMatchingKeys(e,t,n){const r=Y_(e);return vg.forEach(t,(t=>{const i=Dg(t.path);return vg.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=Y_(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Y_(e);let i=sw();return r.Y({range:n,J:!0},((e,t,n)=>{const r=Mg(e[1]),s=new ig(r);i=i.add(s)})).next((()=>i))}containsKey(e,t){const n=Dg(t.path),r=IDBKeyRange.bound([n],[Jm(n)],!1,!0);let i=0;return Y_(e).Y({index:"documentTargetsIndex",J:!0,range:r},((e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())})).next((()=>i>0))}_t(e,t){return H_(e).get(t).next((e=>e?$b(e):null))}}function H_(e){return av(e,"targets")}function Q_(e){return av(e,"targetGlobal")}function Y_(e){return av(e,"targetDocuments")}function $_(e,t){let[n,r]=e,[i,s]=t;const o=Ym(n,i);return 0===o?Ym(r,s):o}class J_{constructor(e){this.Qn=e,this.buffer=new pv($_),this.Kn=0}$n(){return++this.Kn}Un(e){const t=[e,this.$n()];if(this.buffer.size<this.Qn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();$_(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class X_{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Wn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Gn(6e4)}stop(){this.Wn&&(this.Wn.cancel(),this.Wn=null)}get started(){return null!==this.Wn}Gn(e){Am("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Wn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Wn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Eg(e)?Am("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await gg(e)}await this.Gn(3e5)}))}}class Z_{constructor(e,t){this.zn=e,this.params=t}calculateTargetCount(e,t){return this.zn.jn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return vg.resolve(Ag._e);const n=new J_(t);return this.zn.forEachTarget(e,(e=>n.Un(e.sequenceNumber))).next((()=>this.zn.Hn(e,(e=>n.Un(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Am("LruGarbageCollector","Garbage collection skipped; disabled"),vg.resolve(M_)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Am("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),M_):this.Jn(e,t)))}getCacheSize(e){return this.zn.getCacheSize(e)}Jn(e,t){let n,r,i,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Am("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Cm()<=tr.DEBUG&&Am("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),vg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}function eE(e,t){return new Z_(e,t)}class tE{constructor(e,t){this.db=e,this.garbageCollector=eE(this,t)}jn(e){const t=this.Yn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Yn(e){let t=0;return this.Hn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Hn(e,t){return this.Zn(e,((e,n)=>t(n)))}addReference(e,t,n){return nE(e,n)}removeReference(e,t,n){return nE(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return nE(e,t)}Xn(e,t){return function(e,t){let n=!1;return G_(e).Z((r=>B_(e,r,t).next((e=>(e&&(n=!0),vg.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Zn(e,((s,o)=>{if(o<=t){const t=this.Xn(e,s).next((t=>{if(!t)return i++,n.getEntry(e,s).next((()=>(n.removeEntry(s,Zm.min()),Y_(e).delete(function(e){return[0,Dg(e.path)]}(s)))))}));r.push(t)}})).next((()=>vg.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return nE(e,t)}Zn(e,t){const n=Y_(e);let r,i=Ag._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(i!==Ag._e&&t(new ig(Mg(r)),i),i=l,r=a):i=Ag._e})).next((()=>{i!==Ag._e&&t(new ig(Mg(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function nE(e,t){return Y_(e).put(function(e,t){return{targetId:0,path:Dg(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class rE{constructor(){this.changes=new Qy((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Xv.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?vg.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class iE{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return lE(e).put(n)}removeEntry(e,t,n){return lE(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Kb(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.er(e,n))))}getEntry(e,t){let n=Xv.newInvalidDocument(t);return lE(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(cE(t))},((e,r)=>{n=this.tr(t,r)})).next((()=>n))}nr(e,t){let n={size:0,document:Xv.newInvalidDocument(t)};return lE(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(cE(t))},((e,r)=>{n={document:this.tr(t,r),size:V_(r)}})).next((()=>n))}getEntries(e,t){let n=$y();return this.rr(e,t,((e,t)=>{const r=this.tr(e,t);n=n.insert(e,r)})).next((()=>n))}ir(e,t){let n=$y(),r=new hv(ig.comparator);return this.rr(e,t,((e,t)=>{const i=this.tr(e,t);n=n.insert(e,i),r=r.insert(e,V_(t))})).next((()=>({documents:n,sr:r})))}rr(e,t,n){if(t.isEmpty())return vg.resolve();let r=new pv(hE);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(cE(r.first()),cE(r.last())),s=r.getIterator();let o=s.getNext();return lE(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=ig.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&hE(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.U(cE(o)):r.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),Kb(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lE(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=$y();for(const i of e){const e=this.tr(ig.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Gy(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=$y();const s=uE(t,n),o=uE(t,dg.max());return lE(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.tr(ig.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new oE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return aE(e).get("remoteDocumentGlobalKey").next((e=>(Om(!!e),e)))}er(e,t){return aE(e).put("remoteDocumentGlobalKey",t)}tr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Cb(e.ut,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=ig.fromSegments(t.noDocument.path),r=Qb(t.noDocument.readTime);n=Xv.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Dm();{const e=ig.fromSegments(t.unknownDocument.path),r=Qb(t.unknownDocument.version);n=Xv.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new Xm(e[0],e[1]);return Zm.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(Zm.min()))return e}return Xv.newInvalidDocument(e)}}function sE(e){return new iE(e)}class oE extends rE{constructor(e,t){super(),this._r=e,this.trackRemovals=t,this.ar=new Qy((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new pv(((e,t)=>Ym(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,s)=>{const o=this.ar.get(i);if(t.push(this._r.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Wb(this._r.serializer,s);r=r.add(i.path.popLast());const l=V_(a);n+=l-o.size,t.push(this._r.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Wb(this._r.serializer,s.convertToNoDocument(Zm.min()));t.push(this._r.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this._r.indexManager.addToCollectionParentIndex(e,n))})),t.push(this._r.updateMetadata(e,n)),vg.waitFor(t)}getFromCache(e,t){return this._r.nr(e,t).next((e=>(this.ar.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this._r.ir(e,t).next((e=>{let{documents:t,sr:n}=e;return n.forEach(((e,n)=>{this.ar.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function aE(e){return av(e,"remoteDocumentGlobal")}function lE(e){return av(e,"remoteDocumentsV14")}function cE(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function uE(e,t){const n=t.documentKey.path.toArray();return[e,Kb(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function hE(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Ym(n[s],r[s]),i)return i;return i=Ym(n.length,r.length),i||(i=Ym(n[n.length-2],r[r.length-2]),i||Ym(n[n.length-1],r[r.length-1]))}class dE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fE{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Nw(n.mutation,e,vv.empty(),Xm.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,sw()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sw();const r=ew();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=Xy();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=ew();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,sw())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=$y();const s=nw(),o=nw();return t.forEach(((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Ow)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Nw(o.mutation,t,o.mutation.getFieldMask(),Xm.now())):s.set(t.key,vv.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new dE(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=nw();let r=new hv(((e,t)=>e-t)),i=sw();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||vv.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||sw()).add(e);r=r.insert(i.batchId,a)}))})).next((()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=tw();l.forEach((e=>{if(!i.has(e)){const r=Cw(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return vg.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ig.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ly(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):vg.resolve(ew());let o=-1,a=i;return s.next((t=>vg.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?vg.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,a,t,sw()))).next((e=>({batchId:o,changes:Zy(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ig(t)).next((e=>{let t=Xy();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=Xy();return this.indexManager.getCollectionParents(e,i).next((o=>vg.forEach(o,(o=>{const a=function(e,t){return new Ry(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Xv.newInvalidDocument(r)))}));let n=Xy();return e.forEach(((e,r)=>{const s=i.get(e);void 0!==s&&Nw(s.mutation,r,vv.empty(),Xm.now()),Gy(t,r)&&(n=n.insert(e,r))})),n}))}}class pE{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,t){return vg.resolve(this.ur.get(t))}saveBundleMetadata(e,t){return this.ur.set(t.id,function(e){return{id:e.id,version:e.version,createTime:yb(e.createTime)}}(t)),vg.resolve()}getNamedQuery(e,t){return vg.resolve(this.cr.get(t))}saveNamedQuery(e,t){return this.cr.set(t.name,function(e){return{name:e.name,query:Xb(e.bundledQuery),readTime:yb(e.readTime)}}(t)),vg.resolve()}}class mE{constructor(){this.overlays=new hv(ig.comparator),this.lr=new Map}getOverlay(e,t){return vg.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ew();return vg.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.lt(e,t,r)})),vg.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.lr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.lr.delete(n)),vg.resolve()}getOverlaysForCollection(e,t,n){const r=ew(),i=t.length+1,s=new ig(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return vg.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new hv(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=ew(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=ew(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=r)););return vg.resolve(o)}lt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.lr.get(r.largestBatchId).delete(n.key);this.lr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new jw(t,n));let i=this.lr.get(t);void 0===i&&(i=sw(),this.lr.set(t,i)),this.lr.set(t,i.add(n.key))}}class gE{constructor(){this.hr=new pv(vE.Pr),this.Ir=new pv(vE.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,t){const n=new vE(e,t);this.hr=this.hr.add(n),this.Ir=this.Ir.add(n)}Er(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.dr(new vE(e,t))}Ar(e,t){e.forEach((e=>this.removeReference(e,t)))}Rr(e){const t=new ig(new tg([])),n=new vE(t,e),r=new vE(t,e+1),i=[];return this.Ir.forEachInRange([n,r],(e=>{this.dr(e),i.push(e.key)})),i}Vr(){this.hr.forEach((e=>this.dr(e)))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const t=new ig(new tg([])),n=new vE(t,e),r=new vE(t,e+1);let i=sw();return this.Ir.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new vE(e,0),n=this.hr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class vE{constructor(e,t){this.key=e,this.gr=t}static Pr(e,t){return ig.comparator(e.key,t.key)||Ym(e.gr,t.gr)}static Tr(e,t){return Ym(e.gr,t.gr)||ig.comparator(e.key,t.key)}}class yE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.pr=1,this.yr=new pv(vE.Pr)}checkEmpty(e){return vg.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new zw(i,t,n,r);this.mutationQueue.push(s);for(const o of r)this.yr=this.yr.add(new vE(o.key,i)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return vg.resolve(s)}lookupMutationBatch(e,t){return vg.resolve(this.wr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Sr(n),i=r<0?0:r;return vg.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return vg.resolve(0===this.mutationQueue.length?-1:this.pr-1)}getAllMutationBatches(e){return vg.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new vE(t,0),r=new vE(t,Number.POSITIVE_INFINITY),i=[];return this.yr.forEachInRange([n,r],(e=>{const t=this.wr(e.gr);i.push(t)})),vg.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new pv(Ym);return t.forEach((e=>{const t=new vE(e,0),r=new vE(e,Number.POSITIVE_INFINITY);this.yr.forEachInRange([t,r],(e=>{n=n.add(e.gr)}))})),vg.resolve(this.br(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ig.isDocumentKey(i)||(i=i.child(""));const s=new vE(new ig(i),0);let o=new pv(Ym);return this.yr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.gr)),!0)}),s),vg.resolve(this.br(o))}br(e){const t=[];return e.forEach((e=>{const n=this.wr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Om(0===this.Dr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.yr;return vg.forEach(t.mutations,(r=>{const i=new vE(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.yr=n}))}Fn(e){}containsKey(e,t){const n=new vE(t,0),r=this.yr.firstAfterOrEqual(n);return vg.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,vg.resolve()}Dr(e,t){return this.Sr(e)}Sr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}wr(e){const t=this.Sr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wE{constructor(e){this.Cr=e,this.docs=new hv(ig.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Cr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return vg.resolve(n?n.document.mutableCopy():Xv.newInvalidDocument(t))}getEntries(e,t){let n=$y();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Xv.newInvalidDocument(e))})),vg.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=$y();const s=t.path,o=new ig(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||fg(hg(o),n)<=0||(r.has(o.key)||Gy(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return vg.resolve(i)}getAllFromCollectionGroup(e,t,n,r){Dm()}vr(e,t){return vg.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new bE(this)}getSize(e){return vg.resolve(this.size)}}class bE extends rE{constructor(e){super(),this._r=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this._r.addEntry(e,r)):this._r.removeEntry(n)})),vg.waitFor(t)}getFromCache(e,t){return this._r.getEntry(e,t)}getAllFromCache(e,t){return this._r.getEntries(e,t)}}class _E{constructor(e){this.persistence=e,this.Fr=new Qy((e=>Sy(e)),ky),this.lastRemoteSnapshotVersion=Zm.min(),this.highestTargetId=0,this.Mr=0,this.Or=new gE,this.targetCount=0,this.Nr=W_.On()}forEachTarget(e,t){return this.Fr.forEach(((e,n)=>t(n))),vg.resolve()}getLastRemoteSnapshotVersion(e){return vg.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return vg.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),vg.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Mr&&(this.Mr=t),vg.resolve()}kn(e){this.Fr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Nr=new W_(t),this.highestTargetId=t),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,t){return this.kn(t),this.targetCount+=1,vg.resolve()}updateTargetData(e,t){return this.kn(t),vg.resolve()}removeTargetData(e,t){return this.Fr.delete(t.target),this.Or.Rr(t.targetId),this.targetCount-=1,vg.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Fr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Fr.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)})),vg.waitFor(i).next((()=>r))}getTargetCount(e){return vg.resolve(this.targetCount)}getTargetData(e,t){const n=this.Fr.get(t)||null;return vg.resolve(n)}addMatchingKeys(e,t,n){return this.Or.Er(t,n),vg.resolve()}removeMatchingKeys(e,t,n){this.Or.Ar(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),vg.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Or.Rr(t),vg.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Or.mr(t);return vg.resolve(n)}containsKey(e,t){return vg.resolve(this.Or.containsKey(t))}}class EE{constructor(e,t){this.Br={},this.overlays={},this.Lr=new Ag(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new _E(this),this.indexManager=new x_,this.remoteDocumentCache=function(e){return new wE(e)}((e=>this.referenceDelegate.Qr(e))),this.serializer=new Gb(t),this.Kr=new pE(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mE,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new yE(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,t,n){Am("MemoryPersistence","Starting transaction:",e);const r=new IE(this.Lr.next());return this.referenceDelegate.$r(),n(r).next((e=>this.referenceDelegate.Ur(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Wr(e,t){return vg.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class IE extends mg{constructor(e){super(),this.currentSequenceNumber=e}}class TE{constructor(e){this.persistence=e,this.Gr=new gE,this.zr=null}static jr(e){return new TE(e)}get Hr(){if(this.zr)return this.zr;throw Dm()}addReference(e,t,n){return this.Gr.addReference(n,t),this.Hr.delete(n.toString()),vg.resolve()}removeReference(e,t,n){return this.Gr.removeReference(n,t),this.Hr.add(n.toString()),vg.resolve()}markPotentiallyOrphaned(e,t){return this.Hr.add(t.toString()),vg.resolve()}removeTarget(e,t){this.Gr.Rr(t.targetId).forEach((e=>this.Hr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Hr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}$r(){this.zr=new Set}Ur(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return vg.forEach(this.Hr,(n=>{const r=ig.fromPath(n);return this.Jr(e,r).next((e=>{e||t.removeEntry(r,Zm.min())}))})).next((()=>(this.zr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Jr(e,t).next((e=>{e?this.Hr.delete(t.toString()):this.Hr.add(t.toString())}))}Qr(e){return 0}Jr(e,t){return vg.or([()=>vg.resolve(this.Gr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Wr(e,t)])}}class SE{constructor(e){this.serializer=e}N(e,t,n,r){const i=new yg("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fg,{unique:!0}),e.createObjectStore("documentMutations")}(e),kE(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=vg.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),kE(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Zm.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Fg,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return vg.waitFor(i)}))}(e,i)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(s=s.next((()=>this.Zr(i)))),n<6&&r>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xr(i))))),n<7&&r>=7&&(s=s.next((()=>this.ei(i)))),n<8&&r>=8&&(s=s.next((()=>this.ti(e,i)))),n<9&&r>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(s=s.next((()=>this.ni(i)))),n<11&&r>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:Xg});t.createIndex("collectionPathOverlayIndex",Zg,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ev,{unique:!1})}(e)}))),n<13&&r>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Bg});t.createIndex("documentKeyIndex",jg),t.createIndex("collectionGroupIndex",qg)}(e))).next((()=>this.ri(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(s=s.next((()=>this.ii(e,i)))),n<15&&r>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Qg}).createIndex("sequenceNumberIndex",Yg,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:$g}).createIndex("documentKeyIndex",Jg,{unique:!1})}(e)))),s}Xr(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=V_(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Zr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>vg.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>vg.forEach(n,(n=>{Om(n.userId===t.userId);const r=Yb(this.serializer,n);return U_(e,t.userId,r).next((()=>{}))}))))}))))}ei(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const s=new tg(n),o=function(e){return[0,Dg(e)]}(s);r.push(t.get(o).next((n=>n?vg.resolve():(n=>t.put({targetId:0,path:Dg(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>vg.waitFor(r)))}))}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Hg});const n=t.store("collectionParents"),r=new C_,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Dg(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new tg(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,r,s]=e;const o=Mg(r);return i(o.popLast())}))))}ni(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=$b(n),i=Jb(this.serializer,r);return t.put(i)}))}ri(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new ig(tg.fromString(e.document.name).popFirst(5)):e.noDocument?ig.fromSegments(e.noDocument.path):e.unknownDocument?ig.fromSegments(e.unknownDocument.path):Dm()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((()=>vg.waitFor(r)))}ii(e,t){const n=t.store("mutations"),r=sE(this.serializer),i=new EE(TE.jr,this.serializer.ut);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:sw();Yb(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),vg.forEach(n,((e,n)=>{const s=new Sm(n),o=s_.ct(this.serializer,s),a=i.getIndexManager(s),l=z_.ct(s,this.serializer,a,i.referenceDelegate);return new fE(r,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new ov(t,Ag._e),e).next()}))}))}}function kE(e){e.createObjectStore("targetDocuments",{keyPath:Wg}).createIndex("documentTargetsIndex",Kg,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Gg,{unique:!0}),e.createObjectStore("targetGlobal")}const xE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class CE{constructor(e,t,n,r,i,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.si=i,this.window=s,this.document=o,this.oi=l,this._i=c,this.ai=u,this.Lr=null,this.kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ui=null,this.inForeground=!1,this.ci=null,this.li=null,this.hi=Number.NEGATIVE_INFINITY,this.Pi=e=>Promise.resolve(),!CE.D())throw new Fm(Mm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new tE(this,r),this.Ii=t+"main",this.serializer=new Gb(a),this.Ti=new wg(this.Ii,this.ai,new SE(this.serializer)),this.qr=new K_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sE(this.serializer),this.Kr=new n_,this.window&&this.window.localStorage?this.Ei=this.window.localStorage:(this.Ei=null,!1===c&&Nm("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.di().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fm(Mm.FAILED_PRECONDITION,xE);return this.Ai(),this.Ri(),this.Vi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.qr.getHighestSequenceNumber(e)))})).then((e=>{this.Lr=new Ag(e,this.oi)})).then((()=>{this.kr=!0})).catch((e=>(this.Ti&&this.Ti.close(),Promise.reject(e))))}mi(e){return this.Pi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ti.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.si.enqueueAndForget((async()=>{this.started&&await this.di()})))}di(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>NE(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.fi(e).next((e=>{e||(this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))))}))})).next((()=>this.gi(e))).next((t=>this.isPrimary&&!t?this.pi(e).next((()=>!1)):!!t&&this.yi(e).next((()=>!0)))))).catch((e=>{if(Eg(e))return Am("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Am("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.si.enqueueRetryable((()=>this.Pi(e))),this.isPrimary=e}))}fi(e){return AE(e).get("owner").next((e=>vg.resolve(this.wi(e))))}Si(e){return NE(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Di(this.hi,18e5)){this.hi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=av(e,"clientMetadata");return t.W().next((e=>{const n=this.Ci(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return vg.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.Ei)for(const t of e)this.Ei.removeItem(this.vi(t.clientId))}}Vi(){this.li=this.si.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.di().then((()=>this.bi())).then((()=>this.Vi()))))}wi(e){return!!e&&e.ownerId===this.clientId}gi(e){return this._i?vg.resolve(!0):AE(e).get("owner").next((t=>{if(null!==t&&this.Di(t.leaseTimestampMs,5e3)&&!this.Fi(t.ownerId)){if(this.wi(t)&&this.networkEnabled)return!0;if(!this.wi(t)){if(!t.allowTabSynchronization)throw new Fm(Mm.FAILED_PRECONDITION,xE);return!1}}return!(!this.networkEnabled||!this.inForeground)||NE(e).W().next((e=>void 0===this.Ci(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Am("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.kr=!1,this.Mi(),this.li&&(this.li.cancel(),this.li=null),this.xi(),this.Oi(),await this.Ti.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new ov(e,Ag._e);return this.pi(t).next((()=>this.Si(t)))})),this.Ti.close(),this.Ni()}Ci(e,t){return e.filter((e=>this.Di(e.updateTimeMs,t)&&!this.Fi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>NE(e).W().next((e=>this.Ci(e,18e5).map((e=>e.clientId))))))}get started(){return this.kr}getMutationQueue(e,t){return z_.ct(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new N_(e,this.serializer.ut.databaseId)}getDocumentOverlayCache(e){return s_.ct(this.serializer,e)}getBundleCache(){return this.Kr}runTransaction(e,t,n){Am("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?sv:14===e?iv:13===e?rv:12===e?nv:11===e?tv:void Dm()}(this.ai);let s;return this.Ti.runTransaction(e,r,i,(r=>(s=new ov(r,this.Lr?this.Lr.next():Ag._e),"readwrite-primary"===t?this.fi(s).next((e=>!!e||this.gi(s))).next((t=>{if(!t)throw Nm("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.si.enqueueRetryable((()=>this.Pi(!1))),new Fm(Mm.FAILED_PRECONDITION,pg);return n(s)})).next((e=>this.yi(s).next((()=>e)))):this.Li(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}Li(e){return AE(e).get("owner").next((e=>{if(null!==e&&this.Di(e.leaseTimestampMs,5e3)&&!this.Fi(e.ownerId)&&!this.wi(e)&&!(this._i||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Fm(Mm.FAILED_PRECONDITION,xE)}))}yi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return AE(e).put("owner",t)}static D(){return wg.D()}pi(e){const t=AE(e);return t.get("owner").next((e=>this.wi(e)?(Am("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):vg.resolve()))}Di(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Nm("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ai(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ci=()=>{this.si.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.di())))},this.document.addEventListener("visibilitychange",this.ci),this.inForeground="visible"===this.document.visibilityState)}xi(){this.ci&&(this.document.removeEventListener("visibilitychange",this.ci),this.ci=null)}Ri(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ui=()=>{this.Mi();const e=/(?:Version|Mobile)\/1[456]/;!Rn()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.si.enterRestrictedMode(!0),this.si.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ui))}Oi(){this.ui&&(this.window.removeEventListener("pagehide",this.ui),this.ui=null)}Fi(e){var t;try{const n=null!==(null===(t=this.Ei)||void 0===t?void 0:t.getItem(this.vi(e)));return Am("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Nm("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}Mi(){if(this.Ei)try{this.Ei.setItem(this.vi(this.clientId),String(Date.now()))}catch(MN){Nm("Failed to set zombie client id.",MN)}}Ni(){if(this.Ei)try{this.Ei.removeItem(this.vi(this.clientId))}catch(MN){}}vi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function AE(e){return av(e,"owner")}function NE(e){return av(e,"clientMetadata")}function RE(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class PE{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.ki=n,this.qi=r}static Qi(e,t){let n=sw(),r=sw();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new PE(e,t.fromCache,n,r)}}class DE{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class OE{constructor(){this.Ki=!1,this.$i=!1,this.Ui=100,this.Wi=8}initialize(e,t){this.Gi=e,this.indexManager=t,this.Ki=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.zi(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.ji(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new DE;return this.Hi(e,t,n).next((r=>{if(i.result=r,this.$i)return this.Ji(e,t,n,r.size)}))})).next((()=>i.result))}Ji(e,t,n,r){return n.documentReadCount<this.Ui?(Cm()<=tr.DEBUG&&Am("QueryEngine","SDK will not create cache indexes for query:",qy(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ui,"documents"),vg.resolve()):(Cm()<=tr.DEBUG&&Am("QueryEngine","Query:",qy(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Wi*r?(Cm()<=tr.DEBUG&&Am("QueryEngine","The SDK decides to create cache indexes for query:",qy(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fy(t))):vg.resolve())}zi(e,t){if(Oy(t))return vg.resolve(null);let n=Fy(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=zy(t,null,"F"),n=Fy(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=sw(...r);return this.Gi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Yi(t,r);return this.Zi(t,s,i,n.readTime)?this.zi(e,zy(t,null,"F")):this.Xi(e,s,t,n)}))))})))))}ji(e,t,n,r){return Oy(t)||r.isEqual(Zm.min())?vg.resolve(null):this.Gi.getDocuments(e,n).next((i=>{const s=this.Yi(t,i);return this.Zi(t,s,n,r)?vg.resolve(null):(Cm()<=tr.DEBUG&&Am("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),qy(t)),this.Xi(e,s,t,ug(r,-1)).next((e=>e)))}))}Yi(e,t){let n=new pv(Ky(e));return t.forEach(((t,r)=>{Gy(e,r)&&(n=n.add(r))})),n}Zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Hi(e,t,n){return Cm()<=tr.DEBUG&&Am("QueryEngine","Using full collection scan to execute query:",qy(t)),this.Gi.getDocumentsMatchingQuery(e,t,dg.min(),n)}Xi(e,t,n,r){return this.Gi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class LE{constructor(e,t,n,r){this.persistence=e,this.es=t,this.serializer=r,this.ts=new hv(Ym),this.ns=new Qy((e=>Sy(e)),ky),this.rs=new Map,this.ss=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.os(n)}os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fE(this.ss,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ss.setIndexManager(this.indexManager),this.es.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ts)))}}function ME(e,t,n,r){return new LE(e,t,n,r)}async function FE(e,t){const n=Lm(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n.os(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],s=[];let o=sw();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({_s:e,removedBatchIds:i,addedBatchIds:s})))}))}))}function UE(e){const t=Lm(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.qr.getLastRemoteSnapshotVersion(e)))}function VE(e,t,n){let r=sw(),i=sw();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=$y();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(Zm.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):Am("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{us:r,cs:i}}))}function zE(e,t){const n=Lm(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function BE(e,t){const n=Lm(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.qr.getTargetData(e,t).next((i=>i?(r=i,vg.resolve(r)):n.qr.allocateTargetId(e).next((i=>(r=new qb(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ts.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ts=n.ts.insert(e.targetId,e),n.ns.set(t,e.targetId)),e}))}async function jE(e,t,n){const r=Lm(e),i=r.ts.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!Eg(e))throw e;Am("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.ts=r.ts.remove(t),r.ns.delete(i.target)}function qE(e,t,n){const r=Lm(e);let i=Zm.min(),s=sw();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=Lm(e),i=r.ns.get(n);return void 0!==i?vg.resolve(r.ts.get(i)):r.qr.getTargetData(t,n)}(r,e,Fy(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>r.es.getDocumentsMatchingQuery(e,t,n?i:Zm.min(),n?s:sw()))).next((e=>(KE(r,Wy(t),e),{documents:e,ls:s})))))}function GE(e,t){const n=Lm(e),r=Lm(n.qr),i=n.ts.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function WE(e,t){const n=Lm(e),r=n.rs.get(t)||Zm.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.ss.getAllFromCollectionGroup(e,t,ug(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(KE(n,t,e),e)))}function KE(e,t,n){let r=e.rs.get(t)||Zm.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.rs.set(t,r)}async function HE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:sw();const r=await BE(e,Fy(Xb(t.bundledQuery))),i=Lm(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const s=yb(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Kr.saveNamedQuery(e,t);const o=r.withResumeToken(wv.EMPTY_BYTE_STRING,s);return i.ts=i.ts.insert(o.targetId,o),i.qr.updateTargetData(e,o).next((()=>i.qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.Kr.saveNamedQuery(e,t)))}))}function QE(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function YE(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function $E(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class JE{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ts(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Fm(r.error.code,r.error.message))),s?new JE(e,t,r.state,i):(Nm("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class XE{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ts(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Fm(n.error.code,n.error.message))),i?new XE(e,n.state,r):(Nm("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Es(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ZE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ts(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=aw();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Pg(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new ZE(e,i):(Nm("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class eI{constructor(e,t){this.clientId=e,this.onlineState=t}static Ts(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new eI(t.clientId,t.onlineState):(Nm("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class tI{constructor(){this.activeTargetIds=aw()}ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}As(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Es(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nI{constructor(e,t,n,r,i){this.window=e,this.si=t,this.persistenceKey=n,this.Rs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Vs=this.fs.bind(this),this.gs=new hv(Ym),this.started=!1,this.ps=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ys=QE(this.persistenceKey,this.Rs),this.ws=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.gs=this.gs.insert(this.Rs,new tI),this.Ss=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.bs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Ds=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Cs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.vs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Vs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Rs)continue;const e=this.getItem(QE(this.persistenceKey,n));if(e){const t=ZE.Ts(n,e);t&&(this.gs=this.gs.insert(t.clientId,t))}}this.Fs();const t=this.storage.getItem(this.Cs);if(t){const e=this.Ms(t);e&&this.xs(e)}for(const n of this.ps)this.fs(n);this.ps=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Os(this.gs)}isActiveQueryTarget(e){let t=!1;return this.gs.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ns(e,"pending")}updateMutationState(e,t,n){this.Ns(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem($E(this.persistenceKey,e));if(n){const r=XE.Ts(e,n);r&&(t=r.state)}}return this.Ls.ds(e),this.Fs(),t}removeLocalQueryTarget(e){this.Ls.As(e),this.Fs()}isLocalQueryTarget(e){return this.Ls.activeTargetIds.has(e)}clearQueryState(e){this.removeItem($E(this.persistenceKey,e))}updateQueryState(e,t,n){this.ks(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.qs(e)}notifyBundleLoaded(e){this.Qs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Vs),this.removeItem(this.ys),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Am("SharedClientState","READ",e,t),t}setItem(e,t){Am("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Am("SharedClientState","REMOVE",e),this.storage.removeItem(e)}fs(e){const t=e;if(t.storageArea===this.storage){if(Am("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ys)return void Nm("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.si.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.Ss.test(t.key)){if(null==t.newValue){const e=this.Ks(t.key);return this.$s(e,null)}{const e=this.Us(t.key,t.newValue);if(e)return this.$s(e.clientId,e)}}else if(this.bs.test(t.key)){if(null!==t.newValue){const e=this.Ws(t.key,t.newValue);if(e)return this.Gs(e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.zs(t.key,t.newValue);if(e)return this.js(e)}}else if(t.key===this.Cs){if(null!==t.newValue){const e=this.Ms(t.newValue);if(e)return this.xs(e)}}else if(t.key===this.ws){const e=function(e){let t=Ag._e;if(null!=e)try{const n=JSON.parse(e);Om("number"==typeof n),t=n}catch(e){Nm("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ag._e&&this.sequenceNumberHandler(e)}else if(t.key===this.vs){const e=this.Hs(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Js(e))))}}else this.ps.push(t)}))}}get Ls(){return this.gs.get(this.Rs)}Fs(){this.setItem(this.ys,this.Ls.Es())}Ns(e,t,n){const r=new JE(this.currentUser,e,t,n),i=YE(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Es())}Bs(e){const t=YE(this.persistenceKey,this.currentUser,e);this.removeItem(t)}qs(e){const t={clientId:this.Rs,onlineState:e};this.storage.setItem(this.Cs,JSON.stringify(t))}ks(e,t,n){const r=$E(this.persistenceKey,e),i=new XE(e,t,n);this.setItem(r,i.Es())}Qs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.vs,t)}Ks(e){const t=this.Ss.exec(e);return t?t[1]:null}Us(e,t){const n=this.Ks(e);return ZE.Ts(n,t)}Ws(e,t){const n=this.bs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return JE.Ts(new Sm(i),r,t)}zs(e,t){const n=this.Ds.exec(e),r=Number(n[1]);return XE.Ts(r,t)}Ms(e){return eI.Ts(e)}Hs(e){return JSON.parse(e)}async Gs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Ys(e.batchId,e.state,e.error);Am("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}js(e){return this.syncEngine.Zs(e.targetId,e.state,e.error)}$s(e,t){const n=t?this.gs.insert(e,t):this.gs.remove(e),r=this.Os(this.gs),i=this.Os(n),s=[],o=[];return i.forEach((e=>{r.has(e)||s.push(e)})),r.forEach((e=>{i.has(e)||o.push(e)})),this.syncEngine.Xs(s,o).then((()=>{this.gs=n}))}xs(e){this.gs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Os(e){let t=aw();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class rI{constructor(){this.eo=new tI,this.no={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.eo.ds(e),this.no[e]||"not-current"}updateQueryState(e,t,n){this.no[e]=t}removeLocalQueryTarget(e){this.eo.As(e)}isLocalQueryTarget(e){return this.eo.activeTargetIds.has(e)}clearQueryState(e){delete this.no[e]}getAllActiveQueryTargets(){return this.eo.activeTargetIds}isActiveQueryTarget(e){return this.eo.activeTargetIds.has(e)}start(){return this.eo=new tI,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iI{ro(e){}shutdown(){}}class sI{constructor(){this.io=()=>this.so(),this.oo=()=>this._o(),this.ao=[],this.uo()}ro(e){this.ao.push(e)}shutdown(){window.removeEventListener("online",this.io),window.removeEventListener("offline",this.oo)}uo(){window.addEventListener("online",this.io),window.addEventListener("offline",this.oo)}so(){Am("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ao)e(0)}_o(){Am("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ao)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let oI=null;function aI(){return null===oI?oI=268435456+Math.round(2147483648*Math.random()):oI++,"0x"+oI.toString(16)}const lI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cI{constructor(e){this.co=e.co,this.lo=e.lo}ho(e){this.Po=e}Io(e){this.To=e}onMessage(e){this.Eo=e}close(){this.lo()}send(e){this.co(e)}Ao(){this.Po()}Ro(e){this.To(e)}Vo(e){this.Eo(e)}}const uI="WebChannelConnection";class hI extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.mo=t+"://"+e.host,this.fo="projects/".concat(n,"/databases/").concat(r),this.po="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}get yo(){return!1}wo(e,t,n,r,i){const s=aI(),o=this.So(e,t);Am("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.fo,"x-goog-request-params":this.po};return this.bo(a,r,i),this.Do(e,o,a,n).then((t=>(Am("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Rm("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}Co(e,t,n,r,i,s){return this.wo(e,t,n,r,i)}bo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+km,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}So(e,t){const n=lI[e];return"".concat(this.mo,"/v1/").concat(t,":").concat(n)}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Do(e,t,n,r){const i=aI();return new Promise(((s,o)=>{const a=new _m;a.setWithCredentials(!0),a.listenOnce(vm.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case gm.NO_ERROR:const t=a.getResponseJson();Am(uI,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case gm.TIMEOUT:Am(uI,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Fm(Mm.DEADLINE_EXCEEDED,"Request time out"));break;case gm.HTTP_ERROR:const n=a.getStatus();if(Am(uI,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Mm).indexOf(t)>=0?t:Mm.UNKNOWN}(t.status);o(new Fm(e,t.message))}else o(new Fm(Mm.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Fm(Mm.UNAVAILABLE,"Connection failed."));break;default:Dm()}}finally{Am(uI,"RPC '".concat(e,"' ").concat(i," completed."))}}));const l=JSON.stringify(r);Am(uI,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",l,n,15)}))}vo(e,t,n){const r=aI(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=pm(),o=mm(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.bo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=i.join("");Am(uI,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new cI({co:t=>{d?Am(uI,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(Am(uI,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),Am(uI,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},lo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,bm.EventType.OPEN,(()=>{d||Am(uI,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(u,bm.EventType.CLOSE,(()=>{d||(d=!0,Am(uI,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.Ro())})),p(u,bm.EventType.ERROR,(t=>{d||(d=!0,Rm(uI,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),f.Ro(new Fm(Mm.UNAVAILABLE,"The operation could not be completed")))})),p(u,bm.EventType.MESSAGE,(t=>{var n;if(!d){const i=t.data[0];Om(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Am(uI,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Gw[e];if(void 0!==t)return Hw(t)}(t),i=o.message;void 0===n&&(n=Mm.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),d=!0,f.Ro(new Fm(n,i)),u.close()}else Am(uI,"RPC '".concat(e,"' stream ").concat(r," received:"),i),f.Vo(i)}})),p(o,ym.STAT_EVENT,(t=>{t.stat===wm.PROXY?Am(uI,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===wm.NOPROXY&&Am(uI,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((()=>{f.Ao()}),0),f}}function dI(){return"undefined"!=typeof window?window:null}function fI(){return"undefined"!=typeof document?document:null}function pI(e){return new fb(e,!0)}class mI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.si=e,this.timerId=t,this.Fo=n,this.Mo=r,this.xo=i,this.Oo=0,this.No=null,this.Bo=Date.now(),this.reset()}reset(){this.Oo=0}Lo(){this.Oo=this.xo}ko(e){this.cancel();const t=Math.floor(this.Oo+this.qo()),n=Math.max(0,Date.now()-this.Bo),r=Math.max(0,t-n);r>0&&Am("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Oo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.No=this.si.enqueueAfterDelay(this.timerId,r,(()=>(this.Bo=Date.now(),e()))),this.Oo*=this.Mo,this.Oo<this.Fo&&(this.Oo=this.Fo),this.Oo>this.xo&&(this.Oo=this.xo)}Qo(){null!==this.No&&(this.No.skipDelay(),this.No=null)}cancel(){null!==this.No&&(this.No.cancel(),this.No=null)}qo(){return(Math.random()-.5)*this.Oo}}class gI{constructor(e,t,n,r,i,s,o,a){this.si=e,this.Ko=n,this.$o=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Uo=0,this.Wo=null,this.Go=null,this.stream=null,this.zo=new mI(e,t)}jo(){return 1===this.state||5===this.state||this.Ho()}Ho(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Jo()}async stop(){this.jo()&&await this.close(0)}Yo(){this.state=0,this.zo.reset()}Zo(){this.Ho()&&null===this.Wo&&(this.Wo=this.si.enqueueAfterDelay(this.Ko,6e4,(()=>this.Xo())))}e_(e){this.t_(),this.stream.send(e)}async Xo(){if(this.Ho())return this.close(0)}t_(){this.Wo&&(this.Wo.cancel(),this.Wo=null)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}async close(e,t){this.t_(),this.n_(),this.zo.cancel(),this.Uo++,4!==e?this.zo.reset():t&&t.code===Mm.RESOURCE_EXHAUSTED?(Nm(t.toString()),Nm("Using maximum backoff delay to prevent overloading the backend."),this.zo.Lo()):t&&t.code===Mm.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.r_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Io(t)}r_(){}auth(){this.state=1;const e=this.i_(this.Uo),t=this.Uo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,r]=e;this.Uo===t&&this.s_(n,r)}),(t=>{e((()=>{const e=new Fm(Mm.UNKNOWN,"Fetching auth token failed: "+t.message);return this.o_(e)}))}))}s_(e,t){const n=this.i_(this.Uo);this.stream=this.__(e,t),this.stream.ho((()=>{n((()=>(this.state=2,this.Go=this.si.enqueueAfterDelay(this.$o,1e4,(()=>(this.Ho()&&(this.state=3),Promise.resolve()))),this.listener.ho())))})),this.stream.Io((e=>{n((()=>this.o_(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Jo(){this.state=5,this.zo.ko((async()=>{this.state=0,this.start()}))}o_(e){return Am("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}i_(e){return t=>{this.si.enqueueAndForget((()=>this.Uo===e?t():(Am("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class vI extends gI{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}__(e,t){return this.connection.vo("Listen",e,t)}onMessage(e){this.zo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Dm()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Om(void 0===t||"string"==typeof t),wv.fromBase64String(t||"")):(Om(void 0===t||t instanceof Uint8Array),wv.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Mm.UNKNOWN:Hw(e.code);return new Fm(t,e.message||"")}(o);n=new sb(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Eb(e,r.document.name),s=yb(r.document.updateTime),o=r.document.createTime?yb(r.document.createTime):Zm.min(),a=new $v({mapValue:{fields:r.document.fields}}),l=Xv.newFoundDocument(i,s,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new rb(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Eb(e,r.document),s=r.readTime?yb(r.readTime):Zm.min(),o=Xv.newNoDocument(i,s),a=r.removedTargetIds||[];n=new rb([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Eb(e,r.document),s=r.removedTargetIds||[];n=new rb([],s,i,null)}else{if(!("filter"in t))return Dm();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new qw(r,i),o=e.targetId;n=new ib(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Zm.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Zm.min():t.readTime?yb(t.readTime):Zm.min()}(e);return this.listener.a_(t,n)}u_(e){const t={};t.database=Sb(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=xy(r)?{documents:Rb(e,r)}:{query:Pb(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=gb(e,t.resumeToken);const r=pb(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Zm.min())>0){n.readTime=mb(e,t.snapshotVersion.toTimestamp());const r=pb(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Dm()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.e_(t)}c_(e){const t={};t.database=Sb(this.serializer),t.removeTarget=e,this.e_(t)}}class yI extends gI{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.l_=!1}get h_(){return this.l_}start(){this.l_=!1,this.lastStreamToken=void 0,super.start()}r_(){this.l_&&this.P_([])}__(e,t){return this.connection.vo("Write",e,t)}onMessage(e){if(Om(!!e.streamToken),this.lastStreamToken=e.streamToken,this.l_){this.zo.reset();const t=function(e,t){return e&&e.length>0?(Om(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?yb(e.updateTime):yb(t);return n.isEqual(Zm.min())&&(n=yb(t)),new Tw(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=yb(e.commitTime);return this.listener.I_(n,t)}return Om(!e.writeResults||0===e.writeResults.length),this.l_=!0,this.listener.T_()}E_(){const e={};e.database=Sb(this.serializer),this.e_(e)}P_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Ab(this.serializer,e)))};this.e_(t)}}class wI extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.d_=!1}A_(){if(this.d_)throw new Fm(Mm.FAILED_PRECONDITION,"The client has already been terminated.")}wo(e,t,n){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[i,s]=r;return this.connection.wo(e,t,n,i,s)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Mm.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Fm(Mm.UNKNOWN,e.toString())}))}Co(e,t,n,r){return this.A_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((i=>{let[s,o]=i;return this.connection.Co(e,t,n,s,o,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Mm.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Fm(Mm.UNKNOWN,e.toString())}))}terminate(){this.d_=!0}}class bI{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.V_=0,this.m_=null,this.f_=!0}g_(){0===this.V_&&(this.p_("Unknown"),this.m_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.m_=null,this.y_("Backend didn't respond within 10 seconds."),this.p_("Offline"),Promise.resolve()))))}w_(e){"Online"===this.state?this.p_("Unknown"):(this.V_++,this.V_>=1&&(this.S_(),this.y_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.p_("Offline")))}set(e){this.S_(),this.V_=0,"Online"===e&&(this.f_=!1),this.p_(e)}p_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}y_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.f_?(Nm(t),this.f_=!1):Am("OnlineStateTracker",t)}S_(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}}class _I{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.b_=[],this.D_=new Map,this.C_=new Set,this.v_=[],this.F_=i,this.F_.ro((e=>{n.enqueueAndForget((async()=>{NI(this)&&(Am("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Lm(e);t.C_.add(4),await II(t),t.M_.set("Unknown"),t.C_.delete(4),await EI(t)}(this))}))})),this.M_=new bI(n,r)}}async function EI(e){if(NI(e))for(const t of e.v_)await t(!0)}async function II(e){for(const t of e.v_)await t(!1)}function TI(e,t){const n=Lm(e);n.D_.has(t.targetId)||(n.D_.set(t.targetId,t),AI(n)?CI(n):QI(n).Ho()&&kI(n,t))}function SI(e,t){const n=Lm(e),r=QI(n);n.D_.delete(t),r.Ho()&&xI(n,t),0===n.D_.size&&(r.Ho()?r.Zo():NI(n)&&n.M_.set("Unknown"))}function kI(e,t){if(e.x_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Zm.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}QI(e).u_(t)}function xI(e,t){e.x_.Oe(t),QI(e).c_(t)}function CI(e){e.x_=new ab({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.D_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),QI(e).start(),e.M_.g_()}function AI(e){return NI(e)&&!QI(e).jo()&&e.D_.size>0}function NI(e){return 0===Lm(e).C_.size}function RI(e){e.x_=void 0}async function PI(e){e.D_.forEach(((t,n)=>{kI(e,t)}))}async function DI(e,t){RI(e),AI(e)?(e.M_.w_(t),CI(e)):e.M_.set("Unknown")}async function OI(e,t,n){if(e.M_.set("Online"),t instanceof sb&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.D_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.D_.delete(r),e.x_.removeTarget(r))}(e,t)}catch(n){Am("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await LI(e,n)}else if(t instanceof rb?e.x_.$e(t):t instanceof ib?e.x_.Je(t):e.x_.Ge(t),!n.isEqual(Zm.min()))try{const t=await UE(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.x_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.D_.get(r);i&&e.D_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.D_.get(t);if(!r)return;e.D_.set(t,r.withResumeToken(wv.EMPTY_BYTE_STRING,r.snapshotVersion)),xI(e,t);const i=new qb(r.target,t,n,r.sequenceNumber);kI(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Am("RemoteStore","Failed to raise snapshot:",t),await LI(e,t)}}async function LI(e,t,n){if(!Eg(t))throw t;e.C_.add(1),await II(e),e.M_.set("Offline"),n||(n=()=>UE(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Am("RemoteStore","Retrying IndexedDB access"),await n(),e.C_.delete(1),await EI(e)}))}function MI(e,t){return t().catch((n=>LI(e,n,t)))}async function FI(e){const t=Lm(e),n=YI(t);let r=t.b_.length>0?t.b_[t.b_.length-1].batchId:-1;for(;UI(t);)try{const e=await zE(t.localStore,r);if(null===e){0===t.b_.length&&n.Zo();break}r=e.batchId,VI(t,e)}catch(e){await LI(t,e)}zI(t)&&BI(t)}function UI(e){return NI(e)&&e.b_.length<10}function VI(e,t){e.b_.push(t);const n=YI(e);n.Ho()&&n.h_&&n.P_(t.mutations)}function zI(e){return NI(e)&&!YI(e).jo()&&e.b_.length>0}function BI(e){YI(e).start()}async function jI(e){YI(e).E_()}async function qI(e){const t=YI(e);for(const n of e.b_)t.P_(n.mutations)}async function GI(e,t,n){const r=e.b_.shift(),i=Bw.from(r,t,n);await MI(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await FI(e)}async function WI(e,t){t&&YI(e).h_&&await async function(e,t){if(function(e){return Kw(e)&&e!==Mm.ABORTED}(t.code)){const n=e.b_.shift();YI(e).Yo(),await MI(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await FI(e)}}(e,t),zI(e)&&BI(e)}async function KI(e,t){const n=Lm(e);n.asyncQueue.verifyOperationInProgress(),Am("RemoteStore","RemoteStore received new credentials");const r=NI(n);n.C_.add(3),await II(n),r&&n.M_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.C_.delete(3),await EI(n)}async function HI(e,t){const n=Lm(e);t?(n.C_.delete(2),await EI(n)):t||(n.C_.add(2),await II(n),n.M_.set("Unknown"))}function QI(e){return e.O_||(e.O_=function(e,t,n){const r=Lm(e);return r.A_(),new vI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:PI.bind(null,e),Io:DI.bind(null,e),a_:OI.bind(null,e)}),e.v_.push((async t=>{t?(e.O_.Yo(),AI(e)?CI(e):e.M_.set("Unknown")):(await e.O_.stop(),RI(e))}))),e.O_}function YI(e){return e.N_||(e.N_=function(e,t,n){const r=Lm(e);return r.A_(),new yI(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{ho:jI.bind(null,e),Io:WI.bind(null,e),T_:qI.bind(null,e),I_:GI.bind(null,e)}),e.v_.push((async t=>{t?(e.N_.Yo(),await FI(e)):(await e.N_.stop(),e.b_.length>0&&(Am("RemoteStore","Stopping write stream with ".concat(e.b_.length," pending writes")),e.b_=[]))}))),e.N_}class $I{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Um,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new $I(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fm(Mm.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function JI(e,t){if(Nm("AsyncQueue","".concat(t,": ").concat(e)),Eg(e))return new Fm(Mm.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class XI{constructor(e){this.comparator=e?(t,n)=>e(t,n)||ig.comparator(t.key,n.key):(e,t)=>ig.comparator(e.key,t.key),this.keyedMap=Xy(),this.sortedSet=new hv(this.comparator)}static emptySet(e){return new XI(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof XI))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new XI;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ZI{constructor(){this.B_=new hv(ig.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):Dm():this.B_=this.B_.insert(t,e)}L_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class eT{constructor(e,t,n,r,i,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new eT(e,t,XI.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&By(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class tT{constructor(){this.k_=void 0,this.listeners=[]}}class nT{constructor(){this.queries=new Qy((e=>jy(e)),By),this.onlineState="Unknown",this.q_=new Set}}async function rT(e,t){const n=Lm(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new tT),i)try{s.k_=await n.onListen(r)}catch(e){const n=JI(e,"Initialization of query '".concat(qy(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Q_(n.onlineState),s.k_&&t.K_(s.k_)&&aT(n)}async function iT(e,t){const n=Lm(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function sT(e,t){const n=Lm(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.K_(i)&&(r=!0);t.k_=i}}r&&aT(n)}function oT(e,t,n){const r=Lm(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function aT(e){e.q_.forEach((e=>{e.next()}))}class lT{constructor(e,t,n){this.query=e,this.U_=t,this.W_=!1,this.G_=null,this.onlineState="Unknown",this.options=n||{}}K_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new eT(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.W_?this.z_(e)&&(this.U_.next(e),t=!0):this.j_(e,this.onlineState)&&(this.H_(e),t=!0),this.G_=e,t}onError(e){this.U_.error(e)}Q_(e){this.onlineState=e;let t=!1;return this.G_&&!this.W_&&this.j_(this.G_,e)&&(this.H_(this.G_),t=!0),t}j_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.J_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}z_(e){if(e.docChanges.length>0)return!0;const t=this.G_&&this.G_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}H_(e){e=eT.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.W_=!0,this.U_.next(e)}}class cT{constructor(e,t){this.Y_=e,this.byteLength=t}Z_(){return"metadata"in this.Y_}}class uT{constructor(e){this.serializer=e}hs(e){return Eb(this.serializer,e)}Ps(e){return e.metadata.exists?Cb(this.serializer,e.document,!1):Xv.newNoDocument(this.hs(e.metadata.name),this.Is(e.metadata.readTime))}Is(e){return yb(e)}}class hT{constructor(e,t,n){this.X_=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=dT(e)}ea(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Y_.namedQuery)this.queries.push(e.Y_.namedQuery);else if(e.Y_.documentMetadata){this.documents.push({metadata:e.Y_.documentMetadata}),e.Y_.documentMetadata.exists||++t;const n=tg.fromString(e.Y_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Y_.document&&(this.documents[this.documents.length-1].document=e.Y_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ta(e){const t=new Map,n=new uT(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.hs(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||sw()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Lm(e);let s=sw(),o=$y();for(const c of n){const e=t.hs(c.metadata.name);c.document&&(s=s.add(e));const n=t.Ps(c);n.setReadTime(t.Is(c.metadata.readTime)),o=o.insert(e,n)}const a=i.ss.newChangeBuffer({trackRemovals:!0}),l=await BE(i,function(e){return Fy(Dy(tg.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>VE(e,a,o).next((t=>(a.apply(e),t))).next((t=>i.qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.qr.addMatchingKeys(e,s,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.us,t.cs))).next((()=>t.us))))))}(this.localStore,new uT(this.serializer),this.documents,this.X_.id),t=this.ta(this.documents);for(const n of this.queries)await HE(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,na:this.collectionGroups,ra:e}}}function dT(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class fT{constructor(e){this.key=e}}class pT{constructor(e){this.key=e}}class mT{constructor(e,t){this.query=e,this.ia=t,this.sa=null,this.hasCachedResults=!1,this.current=!1,this.oa=sw(),this.mutatedKeys=sw(),this._a=Ky(e),this.aa=new XI(this._a)}get ua(){return this.ia}ca(e,t){const n=t?t.la:new ZI,r=t?t.aa:this.aa;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const c=r.get(e),u=Gy(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ha(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this._a(u,a)>0||l&&this._a(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{aa:s,la:n,Zi:o,mutatedKeys:i}}ha(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.aa;this.aa=e.aa,this.mutatedKeys=e.mutatedKeys;const s=e.la.L_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Dm()}};return n(e)-n(t)}(e.type,t.type)||this._a(e.doc,t.doc))),this.Pa(n),r=null!=r&&r;const o=t&&!r?this.Ia():[],a=0===this.oa.size&&this.current&&!r?1:0,l=a!==this.sa;return this.sa=a,0!==s.length||l?{snapshot:new eT(this.query,e.aa,i,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ta:o}:{Ta:o}}Q_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({aa:this.aa,la:new ZI,mutatedKeys:this.mutatedKeys,Zi:!1},!1)):{Ta:[]}}Ea(e){return!this.ia.has(e)&&!!this.aa.has(e)&&!this.aa.get(e).hasLocalMutations}Pa(e){e&&(e.addedDocuments.forEach((e=>this.ia=this.ia.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ia=this.ia.delete(e))),this.current=e.current)}Ia(){if(!this.current)return[];const e=this.oa;this.oa=sw(),this.aa.forEach((e=>{this.Ea(e.key)&&(this.oa=this.oa.add(e.key))}));const t=[];return e.forEach((e=>{this.oa.has(e)||t.push(new pT(e))})),this.oa.forEach((n=>{e.has(n)||t.push(new fT(n))})),t}da(e){this.ia=e.ls,this.oa=sw();const t=this.ca(e.documents);return this.applyChanges(t,!0)}Aa(){return eT.fromInitialDocuments(this.query,this.aa,this.mutatedKeys,0===this.sa,this.hasCachedResults)}}class gT{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class vT{constructor(e){this.key=e,this.Ra=!1}}class yT{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Va={},this.ma=new Qy((e=>jy(e)),By),this.fa=new Map,this.ga=new Set,this.pa=new hv(ig.comparator),this.ya=new Map,this.wa=new gE,this.Sa={},this.ba=new Map,this.Da=W_.Nn(),this.onlineState="Unknown",this.Ca=void 0}get isPrimaryClient(){return!0===this.Ca}}async function wT(e,t){const n=WT(e);let r,i;const s=n.ma.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Aa();else{const e=await BE(n.localStore,Fy(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await bT(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&TI(n.remoteStore,e)}return i}async function bT(e,t,n,r,i){e.va=(t,n,r)=>async function(e,t,n,r){let i=t.view.ca(n);i.Zi&&(i=await qE(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.ca(n,i)})));const s=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(i,e.isPrimaryClient,s,o);return RT(e,t.targetId,a.Ta),a.snapshot}(e,t,n,r);const s=await qE(e.localStore,t,!0),o=new mT(t,s.ls),a=o.ca(s.documents),l=nb.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=o.applyChanges(a,e.isPrimaryClient,l);RT(e,n,c.Ta);const u=new gT(t,n,o);return e.ma.set(t,u),e.fa.has(n)?e.fa.get(n).push(t):e.fa.set(n,[t]),c.snapshot}async function _T(e,t){const n=Lm(e),r=n.ma.get(t),i=n.fa.get(r.targetId);if(i.length>1)return n.fa.set(r.targetId,i.filter((e=>!By(e,t)))),void n.ma.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await jE(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),SI(n.remoteStore,r.targetId),AT(n,r.targetId)})).catch(gg)):(AT(n,r.targetId),await jE(n.localStore,r.targetId,!0))}async function ET(e,t){const n=Lm(e);try{const e=await function(e,t){const n=Lm(e),r=t.snapshotVersion;let i=n.ts;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.ss.newChangeBuffer({trackRemovals:!0});i=n.ts;const o=[];t.targetChanges.forEach(((s,a)=>{const l=i.get(a);if(!l)return;o.push(n.qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(wv.EMPTY_BYTE_STRING,Zm.min()).withLastLimboFreeSnapshotVersion(Zm.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.qr.updateTargetData(e,c))}));let a=$y(),l=sw();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(VE(e,s,t.documentUpdates).next((e=>{a=e.us,l=e.cs}))),!r.isEqual(Zm.min())){const t=n.qr.getLastRemoteSnapshotVersion(e).next((t=>n.qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));o.push(t)}return vg.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ts=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.ya.get(t);r&&(Om(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Ra=!0:e.modifiedDocuments.size>0?Om(r.Ra):e.removedDocuments.size>0&&(Om(r.Ra),r.Ra=!1))})),await OT(n,e,t)}catch(e){await gg(e)}}function IT(e,t,n){const r=Lm(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ma.forEach(((n,r)=>{const i=r.view.Q_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=Lm(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.listeners)i.Q_(t)&&(r=!0)})),r&&aT(n)}(r.eventManager,t),e.length&&r.Va.a_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function TT(e,t,n){const r=Lm(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.ya.get(t),s=i&&i.key;if(s){let e=new hv(ig.comparator);e=e.insert(s,Xv.newNoDocument(s,Zm.min()));const n=sw().add(s),i=new tb(Zm.min(),new Map,new hv(Ym),e,n);await ET(r,i),r.pa=r.pa.remove(s),r.ya.delete(t),DT(r)}else await jE(r.localStore,t,!1).then((()=>AT(r,t,n))).catch(gg)}async function ST(e,t){const n=Lm(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Lm(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.ss.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=vg.resolve();return s.forEach((e=>{o=o.next((()=>r.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Om(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=sw();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);CT(n,r,null),xT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await OT(n,e)}catch(e){await gg(e)}}async function kT(e,t,n){const r=Lm(e);try{const e=await function(e,t){const n=Lm(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Om(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);CT(r,t,n),xT(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await OT(r,e)}catch(n){await gg(n)}}function xT(e,t){(e.ba.get(t)||[]).forEach((e=>{e.resolve()})),e.ba.delete(t)}function CT(e,t,n){const r=Lm(e);let i=r.Sa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Sa[r.currentUser.toKey()]=i}}function AT(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.fa.get(t))e.ma.delete(r),n&&e.Va.Fa(r,n);e.fa.delete(t),e.isPrimaryClient&&e.wa.Rr(t).forEach((t=>{e.wa.containsKey(t)||NT(e,t)}))}function NT(e,t){e.ga.delete(t.path.canonicalString());const n=e.pa.get(t);null!==n&&(SI(e.remoteStore,n),e.pa=e.pa.remove(t),e.ya.delete(n),DT(e))}function RT(e,t,n){for(const r of n)r instanceof fT?(e.wa.addReference(r.key,t),PT(e,r)):r instanceof pT?(Am("SyncEngine","Document no longer in limbo: "+r.key),e.wa.removeReference(r.key,t),e.wa.containsKey(r.key)||NT(e,r.key)):Dm()}function PT(e,t){const n=t.key,r=n.path.canonicalString();e.pa.get(n)||e.ga.has(r)||(Am("SyncEngine","New document in limbo: "+n),e.ga.add(r),DT(e))}function DT(e){for(;e.ga.size>0&&e.pa.size<e.maxConcurrentLimboResolutions;){const t=e.ga.values().next().value;e.ga.delete(t);const n=new ig(tg.fromString(t)),r=e.Da.next();e.ya.set(r,new vT(n)),e.pa=e.pa.insert(n,r),TI(e.remoteStore,new qb(Fy(Dy(n.path)),r,"TargetPurposeLimboResolution",Ag._e))}}async function OT(e,t,n){const r=Lm(e),i=[],s=[],o=[];r.ma.isEmpty()||(r.ma.forEach(((e,a)=>{o.push(r.va(a,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=PE.Qi(a.targetId,e);s.push(t)}})))})),await Promise.all(o),r.Va.a_(i),await async function(e,t){const n=Lm(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>vg.forEach(t,(t=>vg.forEach(t.ki,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>vg.forEach(t.qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!Eg(e))throw e;Am("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ts.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ts=n.ts.insert(e,i)}}}(r.localStore,s))}async function LT(e,t){const n=Lm(e);if(!n.currentUser.isEqual(t)){Am("SyncEngine","User change. New user:",t.toKey());const e=await FE(n.localStore,t);n.currentUser=t,function(e,t){e.ba.forEach((e=>{e.forEach((e=>{e.reject(new Fm(Mm.CANCELLED,t))}))})),e.ba.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await OT(n,e._s)}}function MT(e,t){const n=Lm(e),r=n.ya.get(t);if(r&&r.Ra)return sw().add(r.key);{let e=sw();const r=n.fa.get(t);if(!r)return e;for(const t of r){const r=n.ma.get(t);e=e.unionWith(r.view.ua)}return e}}async function FT(e,t){const n=Lm(e),r=await qE(n.localStore,t.query,!0),i=t.view.da(r);return n.isPrimaryClient&&RT(n,t.targetId,i.Ta),i}async function UT(e,t){const n=Lm(e);return WE(n.localStore,t).then((e=>OT(n,e)))}async function VT(e,t,n,r){const i=Lm(e),s=await function(e,t){const n=Lm(e),r=Lm(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.Cn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):vg.resolve(null)))))}(i.localStore,t);null!==s?("pending"===n?await FI(i.remoteStore):"acknowledged"===n||"rejected"===n?(CT(i,t,r||null),xT(i,t),function(e,t){Lm(Lm(e).mutationQueue).Fn(t)}(i.localStore,t)):Dm(),await OT(i,s)):Am("SyncEngine","Cannot apply mutation batch with id: "+t)}async function zT(e,t,n){const r=Lm(e),i=[],s=[];for(const o of t){let e;const t=r.fa.get(o);if(t&&0!==t.length){e=await BE(r.localStore,Fy(t[0]));for(const e of t){const t=r.ma.get(e),n=await FT(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await GE(r.localStore,o);e=await BE(r.localStore,t),await bT(r,BT(t),o,!1,e.resumeToken)}i.push(e)}return r.Va.a_(s),i}function BT(e){return Py(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function jT(e){return function(e){return Lm(Lm(e).persistence).Bi()}(Lm(e).localStore)}async function qT(e,t,n,r){const i=Lm(e);if(i.Ca)return void Am("SyncEngine","Ignoring unexpected query state notification.");const s=i.fa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await WE(i.localStore,Wy(s[0])),r=tb.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,wv.EMPTY_BYTE_STRING);await OT(i,e,r);break}case"rejected":await jE(i.localStore,t,!0),AT(i,t,r);break;default:Dm()}}async function GT(e,t,n){const r=WT(e);if(r.Ca){for(const e of t){if(r.fa.has(e)){Am("SyncEngine","Adding an already active target "+e);continue}const t=await GE(r.localStore,e),n=await BE(r.localStore,t);await bT(r,BT(t),n.targetId,!1,n.resumeToken),TI(r.remoteStore,n)}for(const e of n)r.fa.has(e)&&await jE(r.localStore,e,!1).then((()=>{SI(r.remoteStore,e),AT(r,e)})).catch(gg)}}function WT(e){const t=Lm(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=ET.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=MT.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=TT.bind(null,t),t.Va.a_=sT.bind(null,t.eventManager),t.Va.Fa=oT.bind(null,t.eventManager),t}function KT(e){const t=Lm(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ST.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=kT.bind(null,t),t}class HT{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=pI(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return ME(this.persistence,new OE,e.initialUser,this.serializer)}createPersistence(e){return new EE(TE.jr,this.serializer)}createSharedClientState(e){return new rI}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class QT extends HT{constructor(e,t,n){super(),this.xa=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xa.initialize(this,e),await KT(this.xa.syncEngine),await FI(this.xa.remoteStore),await this.persistence.mi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return ME(this.persistence,new OE,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new X_(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Cg(t,this.persistence);return new xg(e.asyncQueue,n)}createPersistence(e){const t=RE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?F_.withCacheSize(this.cacheSizeBytes):F_.DEFAULT;return new CE(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,dI(),fI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new rI}}class YT extends QT{constructor(e,t){super(e,t,!1),this.xa=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xa.syncEngine;this.sharedClientState instanceof nI&&(this.sharedClientState.syncEngine={Ys:VT.bind(null,t),Zs:qT.bind(null,t),Xs:GT.bind(null,t),Bi:jT.bind(null,t),Js:UT.bind(null,t)},await this.sharedClientState.start()),await this.persistence.mi((async e=>{await async function(e,t){const n=Lm(e);if(WT(n),KT(n),!0===t&&!0!==n.Ca){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await zT(n,e.toArray());n.Ca=!0,await HI(n.remoteStore,!0);for(const r of t)TI(n.remoteStore,r)}else if(!1===t&&!1!==n.Ca){const e=[];let t=Promise.resolve();n.fa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(AT(n,i),jE(n.localStore,i,!0)))),SI(n.remoteStore,i)})),await t,await zT(n,e),function(e){const t=Lm(e);t.ya.forEach(((e,n)=>{SI(t.remoteStore,n)})),t.wa.Vr(),t.ya=new Map,t.pa=new hv(ig.comparator)}(n),n.Ca=!1,await HI(n.remoteStore,!1)}}(this.xa.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=dI();if(!nI.D(t))throw new Fm(Mm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=RE(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new nI(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class $T{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>IT(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=LT.bind(null,this.syncEngine),await HI(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new nT}createDatastore(e){const t=pI(e.databaseInfo.databaseId),n=function(e){return new hI(e)}(e.databaseInfo);return function(e,t,n,r){return new wI(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new _I(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>IT(this.syncEngine,e,0)),sI.D()?new sI:new iI)}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new yT(e,t,n,r,i,s);return o&&(a.Ca=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Lm(e);Am("RemoteStore","RemoteStore shutting down."),t.C_.add(5),await II(t),t.F_.shutdown(),t.M_.set("Unknown")}(this.remoteStore)}}function JT(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class XT{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Oa(this.observer.next,e)}error(e){this.observer.error?this.Oa(this.observer.error,e):Nm("Uncaught Error in snapshot listener:",e.toString())}Na(){this.muted=!0}Oa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class ZT{constructor(e,t){this.Ba=e,this.serializer=t,this.metadata=new Um,this.buffer=new Uint8Array,this.La=new TextDecoder("utf-8"),this.ka().then((e=>{e&&e.Z_()?this.metadata.resolve(e.Y_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Y_))))}),(e=>this.metadata.reject(e)))}close(){return this.Ba.cancel()}async getMetadata(){return this.metadata.promise}async Ma(){return await this.getMetadata(),this.ka()}async ka(){const e=await this.qa();if(null===e)return null;const t=this.La.decode(e),n=Number(t);isNaN(n)&&this.Qa("length string (".concat(t,") is not valid number"));const r=await this.Ka(n);return new cT(JSON.parse(r),e.length+n)}$a(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async qa(){for(;this.$a()<0&&!await this.Ua(););if(0===this.buffer.length)return null;const e=this.$a();e<0&&this.Qa("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ka(e){for(;this.buffer.length<e;)await this.Ua()&&this.Qa("Reached the end of bundle when more is expected.");const t=this.La.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qa(e){throw this.Ba.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ua(){const e=await this.Ba.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class eS{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Fm(Mm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Lm(e),r=Sb(n.serializer)+"/documents",i={documents:t.map((e=>_b(n.serializer,e)))},s=await n.Co("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Om(!!t.found),t.found.name,t.found.updateTime;const n=Eb(e,t.found.name),r=yb(t.found.updateTime),i=t.found.createTime?yb(t.found.createTime):Zm.min(),s=new $v({mapValue:{fields:t.found.fields}});return Xv.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){Om(!!t.missing),Om(!!t.readTime);const n=Eb(e,t.missing),r=yb(t.readTime);return Xv.newNoDocument(n,r)}(e,t):Dm()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());Om(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Uw(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=ig.fromPath(t);this.mutations.push(new Vw(n,this.precondition(n)))})),await async function(e,t){const n=Lm(e),r=Sb(n.serializer)+"/documents",i={writes:t.map((e=>Ab(n.serializer,e)))};await n.wo("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Dm();t=Zm.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Fm(Mm.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Zm.min())?Sw.exists(!1):Sw.updateTime(t):Sw.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Zm.min()))throw new Fm(Mm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Sw.updateTime(t)}return Sw.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class tS{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Wa=n.maxAttempts,this.zo=new mI(this.asyncQueue,"transaction_retry")}run(){this.Wa-=1,this.Ga()}Ga(){this.zo.ko((async()=>{const e=new eS(this.datastore),t=this.za(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.ja(e)}))))})).catch((e=>{this.ja(e)}))}))}za(e){try{const t=this.updateFunction(e);return!Ng(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}ja(e){this.Wa>0&&this.Ha(e)?(this.Wa-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ga(),Promise.resolve())))):this.deferred.reject(e)}Ha(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Kw(t)}return!1}}class nS{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Sm.UNAUTHENTICATED,this.clientId=Qm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Am("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Am("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fm(Mm.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Um;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(xC){const n=JI(xC,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function rS(e,t){e.asyncQueue.verifyOperationInProgress(),Am("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await FE(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function iS(e,t){e.asyncQueue.verifyOperationInProgress();const n=await oS(e);Am("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener((e=>KI(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>KI(t.remoteStore,n))),e._onlineComponents=t}function sS(e){return"FirebaseError"===e.name?e.code===Mm.FAILED_PRECONDITION||e.code===Mm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function oS(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Am("FirestoreClient","Using user provided OfflineComponentProvider");try{await rS(e,e._uninitializedComponentsProvider._offline)}catch(xC){const n=xC;if(!sS(n))throw n;Rm("Error using user provided cache. Falling back to memory cache: "+n),await rS(e,new HT)}}else Am("FirestoreClient","Using default OfflineComponentProvider"),await rS(e,new HT);return e._offlineComponents}async function aS(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Am("FirestoreClient","Using user provided OnlineComponentProvider"),await iS(e,e._uninitializedComponentsProvider._online)):(Am("FirestoreClient","Using default OnlineComponentProvider"),await iS(e,new $T))),e._onlineComponents}function lS(e){return oS(e).then((e=>e.persistence))}function cS(e){return oS(e).then((e=>e.localStore))}function uS(e){return aS(e).then((e=>e.remoteStore))}function hS(e){return aS(e).then((e=>e.syncEngine))}function dS(e){return aS(e).then((e=>e.datastore))}async function fS(e){const t=await aS(e),n=t.eventManager;return n.onListen=wT.bind(null,t.syncEngine),n.onUnlisten=_T.bind(null,t.syncEngine),n}function pS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Um;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new XT({next:s=>{t.enqueueAndForget((()=>iT(e,o)));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Fm(Mm.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Fm(Mm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new lT(Dy(n.path),s,{includeMetadataChanges:!0,J_:!0});return rT(e,o)}(await fS(e),e.asyncQueue,t,n,r))),r.promise}function mS(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Um;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const s=new XT({next:n=>{t.enqueueAndForget((()=>iT(e,o))),n.fromCache&&"server"===r.source?i.reject(new Fm(Mm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new lT(n,s,{includeMetadataChanges:!0,J_:!0});return rT(e,o)}(await fS(e),e.asyncQueue,t,n,r))),r.promise}function gS(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?Yw().encode(e):e,function(e,t){return new ZT(e,t)}(function(e,t){if(e instanceof Uint8Array)return JT(e,t);if(e instanceof ArrayBuffer)return JT(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,pI(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=Lm(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Lm(e),r=yb(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.Kr.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(dT(r));const i=new hT(r,e.localStore,t.serializer);let s=await t.Ma();for(;s;){const e=await i.ea(s);e&&n._updateProgress(e),s=await t.Ma()}const o=await i.complete();return await OT(e,o.ra,void 0),await function(e,t){const n=Lm(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.Kr.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.na)}catch(e){return Rm("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await hS(e),i,r)}))}function vS(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const yS=new Map;function wS(e,t,n){if(!n)throw new Fm(Mm.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function bS(e,t,n,r){if(!0===t&&!0===r)throw new Fm(Mm.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function _S(e){if(!ig.isDocumentKey(e))throw new Fm(Mm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ES(e){if(ig.isDocumentKey(e))throw new Fm(Mm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function IS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Dm()}function TS(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Fm(Mm.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=IS(e);throw new Fm(Mm.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function SS(e,t){if(t<=0)throw new Fm(Mm.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class kS{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Fm(Mm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fm(Mm.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=vS(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Fm(Mm.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Fm(Mm.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Fm(Mm.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xS{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new kS({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fm(Mm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fm(Mm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new kS(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new zm;switch(e.type){case"firstParty":return new Gm(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Fm(Mm.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=yS.get(e);t&&(Am("ComponentProvider","Removing Datastore"),yS.delete(e),t.terminate())}(this),Promise.resolve()}}function CS(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=TS(e,xS))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Rm("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Sm.MOCK_USER;else{t=An(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Fm(Mm.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Sm(s)}e._authCredentials=new Bm(new Vm(t,n))}}class AS{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new AS(this.firestore,e,this._query)}}class NS{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new RS(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new NS(this.firestore,e,this._key)}}class RS extends AS{constructor(e,t,n){super(e,t,Dy(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new NS(this.firestore,null,new ig(e))}withConverter(e){return new RS(this.firestore,e,this._path)}}function PS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Qn(e),wS("collection","path",t),e instanceof xS){const n=tg.fromString(t,...r);return ES(n),new RS(e,null,n)}{if(!(e instanceof NS||e instanceof RS))throw new Fm(Mm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(tg.fromString(t,...r));return ES(n),new RS(e.firestore,null,n)}}function DS(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Qn(e),1===arguments.length&&(t=Qm.newId()),wS("doc","path",t),e instanceof xS){const n=tg.fromString(t,...r);return _S(n),new NS(e,null,new ig(n))}{if(!(e instanceof NS||e instanceof RS))throw new Fm(Mm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(tg.fromString(t,...r));return _S(n),new NS(e.firestore,e instanceof RS?e.converter:null,new ig(n))}}function OS(e,t){return e=Qn(e),t=Qn(t),(e instanceof NS||e instanceof RS)&&(t instanceof NS||t instanceof RS)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function LS(e,t){return e=Qn(e),t=Qn(t),e instanceof AS&&t instanceof AS&&e.firestore===t.firestore&&By(e._query,t._query)&&e.converter===t.converter}class MS{constructor(){this.Ja=Promise.resolve(),this.Ya=[],this.Za=!1,this.Xa=[],this.eu=null,this.tu=!1,this.nu=!1,this.ru=[],this.zo=new mI(this,"async_queue_retry"),this.iu=()=>{const e=fI();e&&Am("AsyncQueue","Visibility state changed to "+e.visibilityState),this.zo.Qo()};const e=fI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.iu)}get isShuttingDown(){return this.Za}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.su(),this.ou(e)}enterRestrictedMode(e){if(!this.Za){this.Za=!0,this.nu=e||!1;const t=fI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.iu)}}enqueue(e){if(this.su(),this.Za)return new Promise((()=>{}));const t=new Um;return this.ou((()=>this.Za&&this.nu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Ya.push(e),this._u())))}async _u(){if(0!==this.Ya.length){try{await this.Ya[0](),this.Ya.shift(),this.zo.reset()}catch(MN){if(!Eg(MN))throw MN;Am("AsyncQueue","Operation failed with retryable error: "+MN)}this.Ya.length>0&&this.zo.ko((()=>this._u()))}}ou(e){const t=this.Ja.then((()=>(this.tu=!0,e().catch((e=>{this.eu=e,this.tu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Nm("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.tu=!1,e))))));return this.Ja=t,t}enqueueAfterDelay(e,t,n){this.su(),this.ru.indexOf(e)>-1&&(t=0);const r=$I.createAndSchedule(this,e,t,n,(e=>this.au(e)));return this.Xa.push(r),r}su(){this.eu&&Dm()}verifyOperationInProgress(){}async uu(){let e;do{e=this.Ja,await e}while(e!==this.Ja)}cu(e){for(const t of this.Xa)if(t.timerId===e)return!0;return!1}lu(e){return this.uu().then((()=>{this.Xa.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.Xa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.uu()}))}hu(e){this.ru.push(e)}au(e){const t=this.Xa.indexOf(e);this.Xa.splice(t,1)}}function FS(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class US{constructor(){this._progressObserver={},this._taskCompletionResolver=new Um,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class VS extends xS{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new MS,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||BS(this),this._firestoreClient.terminate()}}function zS(e){return e._firestoreClient||BS(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function BS(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new xv(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,vS(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new nS(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function jS(e,t,n){const r=new Um;return e.asyncQueue.enqueue((async()=>{try{await rS(e,n),await iS(e,t),r.resolve()}catch(e){const n=e;if(!sS(n))throw n;Rm("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function qS(e){return function(e){const t=new Um;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=Lm(e);NI(n.remoteStore)||Am("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Lm(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.ba.get(e)||[];r.push(t),n.ba.set(e,r)}catch(e){const n=JI(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await hS(e),t))),t.promise}(zS(e=TS(e,VS)))}function GS(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await lS(e),n=await uS(e);return t.setNetworkEnabled(!0),function(e){const t=Lm(e);return t.C_.delete(0),EI(t)}(n)}))}(zS(e=TS(e,VS)))}function WS(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await lS(e),n=await uS(e);return t.setNetworkEnabled(!1),async function(e){const t=Lm(e);t.C_.add(0),await II(t),t.M_.set("Offline")}(n)}))}(zS(e=TS(e,VS)))}function KS(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=Lm(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.Kr.getNamedQuery(e,t)))}(await cS(e),t)))}(zS(e=TS(e,VS)),t).then((t=>t?new AS(e,null,t.query):null))}function HS(e){if(e._initialized||e._terminated)throw new Fm(Mm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class QS{constructor(e){this._byteString=e}static fromBase64String(e){try{return new QS(wv.fromBase64String(e))}catch(e){throw new Fm(Mm.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new QS(wv.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class YS{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Fm(Mm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rg(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $S{constructor(e){this._methodName=e}}class JS{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fm(Mm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fm(Mm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ym(this._lat,e._lat)||Ym(this._long,e._long)}}const XS=/^__.*__$/;class ZS{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Ow(e,this.data,this.fieldMask,t,this.fieldTransforms):new Dw(e,this.data,t,this.fieldTransforms)}}class ek{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Ow(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Dm()}}class nk{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Pu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Iu(){return this.settings.Iu}Tu(e){return new nk(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Eu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Au(e),r}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Tu({path:n,du:!1});return r.Pu(),r}Vu(e){return this.Tu({path:void 0,du:!0})}mu(e){return Ek(e,this.settings.methodName,this.settings.fu||!1,this.path,this.settings.gu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Au(this.path.get(e))}Au(e){if(0===e.length)throw this.mu("Document fields must not be empty");if(tk(this.Iu)&&XS.test(e))throw this.mu('Document fields cannot begin and end with "__"')}}class rk{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||pI(e)}pu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new nk({Iu:e,methodName:t,gu:n,path:rg.emptyPath(),du:!1,fu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ik(e){const t=e._freezeSettings(),n=pI(e._databaseId);return new rk(e._databaseId,!!t.ignoreUndefinedProperties,n)}function sk(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.pu(s.merge||s.mergeFields?2:0,t,n,i);yk("Data must be an object, but it was:",o,r);const a=gk(r,o);let l,c;if(s.merge)l=new vv(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=wk(t,r,n);if(!o.contains(i))throw new Fm(Mm.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));Ik(e,i)||e.push(i)}l=new vv(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new ZS(new $v(a),l,c)}class ok extends $S{_toFieldTransform(e){if(2!==e.Iu)throw 1===e.Iu?e.mu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.mu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ok}}function ak(e,t,n){return new nk({Iu:3,gu:t.settings.gu,methodName:e._methodName,du:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class lk extends $S{_toFieldTransform(e){return new Iw(e.path,new mw)}isEqual(e){return e instanceof lk}}class ck extends $S{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=ak(this,e,!0),n=this.yu.map((e=>mk(e,t))),r=new gw(n);return new Iw(e.path,r)}isEqual(e){return this===e}}class uk extends $S{constructor(e,t){super(e),this.yu=t}_toFieldTransform(e){const t=ak(this,e,!0),n=this.yu.map((e=>mk(e,t))),r=new yw(n);return new Iw(e.path,r)}isEqual(e){return this===e}}class hk extends $S{constructor(e,t){super(e),this.wu=t}_toFieldTransform(e){const t=new bw(e.serializer,uw(e.serializer,this.wu));return new Iw(e.path,t)}isEqual(e){return this===e}}function dk(e,t,n,r){const i=e.pu(1,t,n);yk("Data must be an object, but it was:",i,r);const s=[],o=$v.empty();cv(r,((e,r)=>{const a=_k(t,e,n);r=Qn(r);const l=i.Ru(a);if(r instanceof ok)s.push(a);else{const e=mk(r,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new vv(s);return new ek(o,a,i.fieldTransforms)}function fk(e,t,n,r,i,s){const o=e.pu(1,t,n),a=[wk(t,r,n)],l=[i];if(s.length%2!=0)throw new Fm(Mm.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(wk(t,s[d])),l.push(s[d+1]);const c=[],u=$v.empty();for(let d=a.length-1;d>=0;--d)if(!Ik(c,a[d])){const e=a[d];let t=l[d];t=Qn(t);const n=o.Ru(e);if(t instanceof ok)c.push(e);else{const r=mk(t,n);null!=r&&(c.push(e),u.set(e,r))}}const h=new vv(c);return new ek(u,h,o.fieldTransforms)}function pk(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return mk(n,e.pu(r?4:3,t))}function mk(e,t){if(vk(e=Qn(e)))return yk("Unsupported field value:",t,e),gk(e,t);if(e instanceof $S)return function(e,t){if(!tk(t.Iu))throw t.mu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.mu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.du&&4!==t.Iu)throw t.mu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=mk(i,t.Vu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Qn(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return uw(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Xm.fromDate(e);return{timestampValue:mb(t.serializer,n)}}if(e instanceof Xm){const n=new Xm(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:mb(t.serializer,n)}}if(e instanceof JS)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof QS)return{bytesValue:gb(t.serializer,e._byteString)};if(e instanceof NS){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.mu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:wb(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.mu("Unsupported field value: ".concat(IS(e)))}(e,t)}function gk(e,t){const n={};return uv(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):cv(e,((e,r)=>{const i=mk(r,t.Eu(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function vk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Xm||e instanceof JS||e instanceof QS||e instanceof NS||e instanceof $S)}function yk(e,t,n){if(!vk(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=IS(n);throw"an object"===r?t.mu(e+" a custom object"):t.mu(e+" "+r)}}function wk(e,t,n){if((t=Qn(t))instanceof YS)return t._internalPath;if("string"==typeof t)return _k(e,t);throw Ek("Field path arguments must be of type string or ",e,!1,void 0,n)}const bk=new RegExp("[~\\*/\\[\\]]");function _k(e,t,n){if(t.search(bk)>=0)throw Ek("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new YS(...t.split("."))._internalPath}catch(yh){throw Ek("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Ek(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(r)),o&&(l+=" in document ".concat(i)),l+=")"),new Fm(Mm.INVALID_ARGUMENT,a+e+l)}function Ik(e,t){return e.some((e=>e.isEqual(t)))}class Tk{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new NS(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Sk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Sk extends Tk{data(){return super.data()}}function kk(e,t){return"string"==typeof t?_k(e,t):t instanceof YS?t._internalPath:t._delegate._internalPath}function xk(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Fm(Mm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ck{}class Ak extends Ck{}function Nk(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof Ck&&n.push(t),n=n.concat(i),function(e){const t=e.filter((e=>e instanceof Pk)).length,n=e.filter((e=>e instanceof Rk)).length;if(t>1||t>0&&n>0)throw new Fm(Mm.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Rk extends Ak{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Rk(e,t,n)}_apply(e){const t=this._parse(e);return zk(e._query,t),new AS(e.firestore,e.converter,Vy(e._query,t))}_parse(e){const t=ik(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Fm(Mm.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Vk(o,s);const t=[];for(const n of o)t.push(Uk(r,e,n));a={arrayValue:{values:t}}}else a=Uk(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Vk(o,s),a=pk(n,t,o,"in"===s||"not-in"===s);return sy.create(i,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Pk extends Ck{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Pk(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:oy.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)zk(n,i),n=Vy(n,i)}(e._query,t),new AS(e.firestore,e.converter,Vy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Dk extends Ak{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Dk(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Fm(Mm.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Fm(Mm.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ny(t,n)}(e._query,this._field,this._direction);return new AS(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ry(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Ok extends Ak{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Ok(e,t,n)}_apply(e){return new AS(e.firestore,e.converter,zy(e._query,this._limit,this._limitType))}}class Lk extends Ak{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Lk(e,t,n)}_apply(e){const t=Fk(e,this.type,this._docOrFields,this._inclusive);return new AS(e.firestore,e.converter,function(e,t){return new Ry(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Mk extends Ak{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Mk(e,t,n)}_apply(e){const t=Fk(e,this.type,this._docOrFields,this._inclusive);return new AS(e.firestore,e.converter,function(e,t){return new Ry(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Fk(e,t,n,r){if(n[0]=Qn(n[0]),n[0]instanceof Tk)return function(e,t,n,r,i){if(!r)throw new Fm(Mm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of My(e))if(o.field.isKeyField())s.push(Uv(t,r.key));else{const e=r.data.field(o.field);if(Tv(e))throw new Fm(Mm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Fm(Mm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new Zv(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=ik(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Fm(Mm.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<i.length;l++){const s=i[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new Fm(Mm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Ly(e)&&-1!==s.indexOf("/"))throw new Fm(Mm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(tg.fromString(s));if(!ig.isDocumentKey(n))throw new Fm(Mm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new ig(n);a.push(Uv(t,i))}else{const e=pk(n,r,s);a.push(e)}}return new Zv(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Uk(e,t,n){if("string"==typeof(n=Qn(n))){if(""===n)throw new Fm(Mm.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ly(t)&&-1!==n.indexOf("/"))throw new Fm(Mm.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(tg.fromString(n));if(!ig.isDocumentKey(r))throw new Fm(Mm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Uv(e,new ig(r))}if(n instanceof NS)return Uv(e,n._key);throw new Fm(Mm.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(IS(n),"."))}function Vk(e,t){if(!Array.isArray(e)||0===e.length)throw new Fm(Mm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function zk(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Fm(Mm.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Fm(Mm.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Bk{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Rv(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ev(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Iv(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Dm()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return cv(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new JS(Ev(e.latitude),Ev(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Sv(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(kv(e));default:return null}}convertTimestamp(e){const t=_v(e);return new Xm(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=tg.fromString(e);Om(jb(n));const r=new Cv(n.get(1),n.get(3)),i=new ig(n.popFirst(5));return r.isEqual(t)||Nm("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function jk(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class qk extends Bk{constructor(e){super(),this.firestore=e}convertBytes(e){return new QS(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new NS(this.firestore,null,t)}}class Gk{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wk extends Tk{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Kk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(kk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Kk extends Wk{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Hk{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Gk(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new Kk(this._firestore,this._userDataWriter,n.key,n,new Gk(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Fm(Mm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new Kk(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Gk(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new Kk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Gk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Qk(t.type),doc:r,oldIndex:i,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Qk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Dm()}}function Yk(e,t){return e instanceof Wk&&t instanceof Wk?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Hk&&t instanceof Hk&&e._firestore===t._firestore&&LS(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class $k extends Bk{constructor(e){super(),this.firestore=e}convertBytes(e){return new QS(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new NS(this.firestore,null,t)}}function Jk(e){e=TS(e,NS);const t=TS(e.firestore,VS),n=zS(t),r=new $k(t);return function(e,t){const n=new Um;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=Lm(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Fm(Mm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=JI(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await cS(e),t,n))),n.promise}(n,e._key).then((n=>new Wk(t,r,e._key,n,new Gk(null!==n&&n.hasLocalMutations,!0),e.converter)))}function Xk(e){e=TS(e,AS);const t=TS(e.firestore,VS),n=zS(t),r=new $k(t);return function(e,t){const n=new Um;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await qE(e,t,!0),i=new mT(t,r.ls),s=i.ca(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=JI(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await cS(e),t,n))),n.promise}(n,e._query).then((n=>new Hk(t,r,e,n)))}function Zk(e,t,n){e=TS(e,NS);const r=TS(e.firestore,VS),i=jk(e.converter,t,n);return rx(r,[sk(ik(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Sw.none())])}function ex(e,t,n){e=TS(e,NS);const r=TS(e.firestore,VS),i=ik(r);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=Qn(t))||t instanceof YS?fk(i,"updateDoc",e._key,t,n,a):dk(i,"updateDoc",e._key,t),rx(r,[s.toMutation(e._key,Sw.exists(!0))])}function tx(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,o;e=Qn(e);let a={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||FS(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges};if(FS(n[l])){const e=n[l];n[l]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof NS)h=TS(e.firestore,VS),d=Dy(e._key.path),u={next:t=>{n[l]&&n[l](ix(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=TS(e,AS);h=TS(t.firestore,VS),d=t._query;const r=new $k(h);u={next:e=>{n[l]&&n[l](new Hk(h,r,t,e))},error:n[l+1],complete:n[l+2]},xk(e._query)}return function(e,t,n,r){const i=new XT(r),s=new lT(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>rT(await fS(e),s))),()=>{i.Na(),e.asyncQueue.enqueueAndForget((async()=>iT(await fS(e),s)))}}(zS(h),d,c,u)}function nx(e,t){return function(e,t){const n=new XT(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){Lm(e).q_.add(t),t.next()}(await fS(e),n))),()=>{n.Na(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){Lm(e).q_.delete(t)}(await fS(e),n)))}}(zS(e=TS(e,VS)),FS(t)?t:{next:t})}function rx(e,t){return function(e,t){const n=new Um;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=KT(e);try{const e=await function(e,t){const n=Lm(e),r=Xm.now(),i=t.reduce(((e,t)=>e.add(t.key)),sw());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=$y(),l=sw();return n.ss.getEntries(e,i).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((i=>{s=i;const o=[];for(const e of t){const t=Rw(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Ow(e.key,t,Jv(t.value.mapValue),Sw.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)})).next((t=>{o=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:o.batchId,changes:Zy(s)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Sa[e.currentUser.toKey()];r||(r=new hv(Ym)),r=r.insert(t,n),e.Sa[e.currentUser.toKey()]=r}(r,e.batchId,n),await OT(r,e.changes),await FI(r.remoteStore)}catch(e){const t=JI(e,"Failed to persist write");n.reject(t)}}(await hS(e),t,n))),n.promise}(zS(e),t)}function ix(e,t,n){const r=n.docs.get(t._key),i=new $k(e);return new Wk(e,i,t._key,r,new Gk(n.hasPendingWrites,n.fromCache),t.converter)}const sx={maxAttempts:5};class ox{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ik(e)}set(e,t,n){this._verifyNotCommitted();const r=ax(e,this._firestore),i=jk(r.converter,t,n),s=sk(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Sw.none())),this}update(e,t,n){this._verifyNotCommitted();const r=ax(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Qn(t))||t instanceof YS?fk(this._dataReader,"WriteBatch.update",r._key,t,n,o):dk(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Sw.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=ax(e,this._firestore);return this._mutations=this._mutations.concat(new Uw(t._key,Sw.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fm(Mm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function ax(e,t){if((e=Qn(e)).firestore!==t)throw new Fm(Mm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class lx extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ik(e)}get(e){const t=ax(e,this._firestore),n=new qk(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return Dm();const r=e[0];if(r.isFoundDocument())return new Tk(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Tk(this._firestore,n,t._key,null,t.converter);throw Dm()}))}set(e,t,n){const r=ax(e,this._firestore),i=jk(r.converter,t,n),s=sk(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=ax(e,this._firestore);let i;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return i="string"==typeof(t=Qn(t))||t instanceof YS?fk(this._dataReader,"Transaction.update",r._key,t,n,o):dk(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=ax(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=ax(e,this._firestore),n=new $k(this._firestore);return super.get(e).then((e=>new Wk(this._firestore,n,t._key,e._document,new Gk(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){km=e}(zr),Or(new Yn("firestore",((e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),o=new VS(new jm(e.getProvider("auth-internal")),new Km(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Fm(Mm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cv(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Wr(Tm,"4.4.0",e),Wr(Tm,"4.4.0","esm2017")}();function cx(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Fm("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function ux(){if("undefined"===typeof Uint8Array)throw new Fm("unimplemented","Uint8Arrays are not available in this environment.")}function hx(){if("undefined"==typeof atob)throw new Fm("unimplemented","Blobs are unavailable in Firestore in this environment.")}class dx{constructor(e){this._delegate=e}static fromBase64String(e){return hx(),new dx(QS.fromBase64String(e))}static fromUint8Array(e){return ux(),new dx(QS.fromUint8Array(e))}toBase64(){return hx(),this._delegate.toBase64()}toUint8Array(){return ux(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function fx(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"===typeof n[r])return!0;return!1}(e,["next","error","complete"])}class px{enableIndexedDbPersistence(e,t){return function(e,t){HS(e=TS(e,VS));const n=zS(e);if(n._uninitializedComponentsProvider)throw new Fm(Mm.FAILED_PRECONDITION,"SDK cache is already specified.");Rm("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new $T;return jS(n,i,new QT(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){HS(e=TS(e,VS));const t=zS(e);if(t._uninitializedComponentsProvider)throw new Fm(Mm.FAILED_PRECONDITION,"SDK cache is already specified.");Rm("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new $T;return jS(t,r,new YT(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Fm(Mm.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Um;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!wg.D())return Promise.resolve();const t=e+"main";await wg.delete(t)}(RE(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class mx{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Cv||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Rm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};CS(this._delegate,e,t,n)}enableNetwork(){return GS(this._delegate)}disableNetwork(){return WS(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,bS("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return qS(this._delegate)}onSnapshotsInSync(e){return nx(this._delegate,e)}get app(){if(!this._appCompat)throw new Fm("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ax(this,PS(this._delegate,e))}catch(MN){throw _x(MN,"collection()","Firestore.collection()")}}doc(e){try{return new bx(this,DS(this._delegate,e))}catch(MN){throw _x(MN,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new kx(this,function(e,t){if(e=TS(e,xS),wS("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Fm(Mm.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new AS(e,null,function(e){return new Ry(tg.emptyPath(),e)}(t))}(this._delegate,e))}catch(MN){throw _x(MN,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=TS(e,VS);const r=Object.assign(Object.assign({},sx),n);return function(e){if(e.maxAttempts<1)throw new Fm(Mm.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Um;return e.asyncQueue.enqueueAndForget((async()=>{const i=await dS(e);new tS(e.asyncQueue,i,n,t,r).run()})),r.promise}(zS(e),(n=>t(new lx(e,n))),r)}(this._delegate,(t=>e(new vx(this,t))))}batch(){return zS(this._delegate),new yx(new ox(this._delegate,(e=>rx(this._delegate,e))))}loadBundle(e){return function(e,t){const n=zS(e=TS(e,VS)),r=new US;return gS(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return KS(this._delegate,e).then((e=>e?new kx(this,e):null))}}class gx extends Bk{constructor(e){super(),this.firestore=e}convertBytes(e){return new dx(new QS(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return bx.forKey(t,this.firestore,null)}}class vx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gx(e)}get(e){const t=Nx(e);return this._delegate.get(t).then((e=>new Tx(this._firestore,new Wk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=Nx(e);return n?(cx("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Nx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Nx(e);return this._delegate.delete(t),this}}class yx{constructor(e){this._delegate=e}set(e,t,n){const r=Nx(e);return n?(cx("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),s=3;s<r;s++)i[s-3]=arguments[s];const o=Nx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...i),this}delete(e){const t=Nx(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wx{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Kk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sx(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=wx.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new wx(e,new gx(e),t),r.set(t,i)),i}}wx.INSTANCES=new WeakMap;class bx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gx(e)}static forPath(e,t,n){if(e.length%2!==0)throw new Fm("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new bx(t,new NS(t._delegate,n,new ig(e)))}static forKey(e,t,n){return new bx(t,new NS(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Ax(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ax(this.firestore,PS(this._delegate,e))}catch(MN){throw _x(MN,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Qn(e))instanceof NS&&OS(this._delegate,e)}set(e,t){t=cx("DocumentReference.set",t);try{return t?Zk(this._delegate,e,t):Zk(this._delegate,e)}catch(MN){throw _x(MN,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?ex(this._delegate,e):ex(this._delegate,e,t,...r)}catch(MN){throw _x(MN,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return rx(TS(e.firestore,VS),[new Uw(e._key,Sw.none())])}(this._delegate)}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Ex(t),i=Ix(t,(e=>new Tx(this.firestore,new Wk(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return tx(this._delegate,r,i)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Jk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=TS(e,NS);const t=TS(e.firestore,VS);return pS(zS(t),e._key,{source:"server"}).then((n=>ix(t,e,n)))}(this._delegate):function(e){e=TS(e,NS);const t=TS(e.firestore,VS);return pS(zS(t),e._key).then((n=>ix(t,e,n)))}(this._delegate),t.then((e=>new Tx(this.firestore,new Wk(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new bx(this.firestore,e?this._delegate.withConverter(wx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function _x(e,t,n){return e.message=e.message.replace(t,n),e}function Ex(e){for(const t of e)if("object"===typeof t&&!fx(t))return t;return{}}function Ix(e,t){var n,r;let i;return i=fx(e[0])?e[0]:fx(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Tx{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new bx(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Yk(this._delegate,e._delegate)}}class Sx extends Tx{data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||Dm()}(void 0!==t),t}}class kx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gx(e)}where(e,t,n){try{return new kx(this.firestore,Nk(this._delegate,function(e,t,n){const r=t,i=kk("where",e);return Rk._create(i,r,n)}(e,t,n)))}catch(MN){throw _x(MN,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new kx(this.firestore,Nk(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=kk("orderBy",e);return Dk._create(n,t)}(e,t)))}catch(MN){throw _x(MN,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new kx(this.firestore,Nk(this._delegate,function(e){return SS("limit",e),Ok._create("limit",e,"F")}(e)))}catch(MN){throw _x(MN,"limit()","Query.limit()")}}limitToLast(e){try{return new kx(this.firestore,Nk(this._delegate,function(e){return SS("limitToLast",e),Ok._create("limitToLast",e,"L")}(e)))}catch(MN){throw _x(MN,"limitToLast()","Query.limitToLast()")}}startAt(){try{return new kx(this.firestore,Nk(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Lk._create("startAt",t,!0)}(...arguments)))}catch(MN){throw _x(MN,"startAt()","Query.startAt()")}}startAfter(){try{return new kx(this.firestore,Nk(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Lk._create("startAfter",t,!1)}(...arguments)))}catch(MN){throw _x(MN,"startAfter()","Query.startAfter()")}}endBefore(){try{return new kx(this.firestore,Nk(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Mk._create("endBefore",t,!1)}(...arguments)))}catch(MN){throw _x(MN,"endBefore()","Query.endBefore()")}}endAt(){try{return new kx(this.firestore,Nk(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Mk._create("endAt",t,!0)}(...arguments)))}catch(MN){throw _x(MN,"endAt()","Query.endAt()")}}isEqual(e){return LS(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?Xk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=TS(e,AS);const t=TS(e.firestore,VS),n=zS(t),r=new $k(t);return mS(n,e._query,{source:"server"}).then((n=>new Hk(t,r,e,n)))}(this._delegate):function(e){e=TS(e,AS);const t=TS(e.firestore,VS),n=zS(t),r=new $k(t);return xk(e._query),mS(n,e._query).then((n=>new Hk(t,r,e,n)))}(this._delegate),t.then((e=>new Cx(this.firestore,new Hk(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=Ex(t),i=Ix(t,(e=>new Cx(this.firestore,new Hk(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return tx(this._delegate,r,i)}withConverter(e){return new kx(this.firestore,e?this._delegate.withConverter(wx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class xx{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Sx(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Cx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new kx(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Sx(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new xx(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Sx(this._firestore,n))}))}isEqual(e){return Yk(this._delegate,e._delegate)}}class Ax extends kx{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new bx(this.firestore,e):null}doc(e){try{return new bx(this.firestore,void 0===e?DS(this._delegate):DS(this._delegate,e))}catch(MN){throw _x(MN,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=TS(e.firestore,VS),r=DS(e),i=jk(e.converter,t);return rx(n,[sk(ik(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Sw.exists(!1))]).then((()=>r))}(this._delegate,e).then((e=>new bx(this.firestore,e)))}isEqual(e){return OS(this._delegate,e._delegate)}withConverter(e){return new Ax(this.firestore,e?this._delegate.withConverter(wx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Nx(e){return TS(e,NS)}class Rx{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new YS(...t)}static documentId(){return new Rx(rg.keyField().canonicalString())}isEqual(e){return(e=Qn(e))instanceof YS&&this._delegate._internalPath.isEqual(e._internalPath)}}class Px{constructor(e){this._delegate=e}static serverTimestamp(){const e=new lk("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Px(e)}static delete(){const e=new ok("deleteField");return e._methodName="FieldValue.delete",new Px(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ck("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Px(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new uk("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Px(e)}static increment(e){const t=function(e){return new hk("increment",e)}(e);return t._methodName="FieldValue.increment",new Px(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Dx={Firestore:mx,GeoPoint:JS,Timestamp:Xm,Blob:dx,Transaction:vx,WriteBatch:yx,DocumentReference:bx,DocumentSnapshot:Tx,Query:kx,QueryDocumentSnapshot:Sx,QuerySnapshot:Cx,CollectionReference:Ax,FieldPath:Rx,FieldValue:Px,setLogLevel:function(e){!function(e){xm.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){!function(e,t){e.INTERNAL.registerComponent(new Yn("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Dx)))}(e,((e,t)=>new mx(e,t,new px))),e.registerVersion("@firebase/firestore-compat","0.3.23")}(ui);const Ox={apiKey:"AIzaSyBV2Gy-2ioJyL0xPN01fM1i3NAY5PQ6Qhg",authDomain:"chat-580cf.firebaseapp.com",projectId:"chat-580cf",storageBucket:"chat-580cf.appspot.com",messagingSenderId:{NODE_ENV:"production",PUBLIC_URL:"/app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_KEY:"AIzaSyBV2Gy-2ioJyL0xPN01fM1i3NAY5PQ6Qhg",REACT_APP_AUTH_DOMAIN:"chat-580cf.firebaseapp.com",REACT_APP_PROJECT_ID:"chat-580cf",REACT_APP_STORAGE_BUCKET:"chat-580cf.appspot.com",REACT_APP_MESSAGEING_SENDER_ID:"556518847811",REACT_APP_APP_ID:"1:556518847811:web:fd69272bdce0fadfe22bf6"}.REACT_APP_MESSAGING_SENDER_ID,appId:"1:556518847811:web:fd69272bdce0fadfe22bf6"},Lx=ui.initializeApp(Ox),Mx=Lx.firestore(),Fx=(Lx.auth(),Mx),Ux=async(e,t)=>{try{await ui.auth().signInWithEmailAndPassword(e,t)}catch(n){n instanceof Error&&console.error("\u30ed\u30b0\u30a4\u30f3\u5931\u6557:",n.message)}},Vx=e=>{let t=new Date(e);return"".concat(t.getHours()).padStart(2,"0")+":"+"".concat(t.getMinutes()).padStart(2,"0")};const zx=n.p+"static/media/setting.d9994119bfa4726433f63db634b6fc4c.svg";const Bx=n.p+"static/media/notification.7e0a1b651817c3197a0774f8d4fd3a2f.svg";var jx,qx,Gx,Wx,Kx,Hx,Qx,Yx,$x;const Jx=Ee(jx||(jx=s(["\n  max-width: 600px;\n  margin: 0 auto;\n  padding-top: 30px;\n  padding-left: 18px;\n  padding-right: 18px;\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  min-height: 100vh;\n  position: relative;\n"]))),Xx=Ee(qx||(qx=s(["\n  font-size: 20px;\n  font-weight: bold;\n  margin-bottom: 15px;\n  padding: 10px;\n  color: #333;\n"]))),Zx=Ee(Gx||(Gx=s(["\n  display: flex;\n  gap: 14px;\n"]))),eC=Ee(Wx||(Wx=s([""]))),tC=Ee(Kx||(Kx=s(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  & > button {\n    padding-right: 18px;\n  }\n"]))),nC=Ee(Hx||(Hx=s(["\n  display: flex;\n  align-items: center;\n  gap: 12px;\n"]))),rC=Ee(Qx||(Qx=s(["\n  width: 56px;\n  height: 56px;\n  border-radius: 100%;\n  object-fit: cover;\n  cursor: pointer;\n"]))),iC=Ee(Yx||(Yx=s(["\n  font-size: 18px;\n  margin-bottom: 2px;\n"]))),sC=Ee($x||($x=s(["\n  font-size: 14px;\n  color: #666666;\n"]))),oC=e=>{let{onLogin:n}=e;const[r,i]=(0,t.useState)(""),[s,o]=(0,t.useState)("");return fn("form",{onSubmit:e=>{e.preventDefault(),n(r,s)},children:[dn("input",{type:"email",value:r,onChange:e=>i(e.target.value),placeholder:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"}),dn("input",{type:"password",value:s,onChange:e=>o(e.target.value),placeholder:"\u30d1\u30b9\u30ef\u30fc\u30c9"}),dn("button",{type:"submit",children:"\u30ed\u30b0\u30a4\u30f3"})]})};ui.auth().onAuthStateChanged((e=>{e&&console.log("\u30ed\u30b0\u30a4\u30f3\u30e6\u30fc\u30b6\u30fc:",e)}));const aC=()=>{var e;const[n,r]=(0,t.useState)(!0),i=null===(e=ui.auth().currentUser)||void 0===e?void 0:e.uid,[s,o]=(0,t.useState)(null),[a,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),h=(0,t.useRef)(null);return(0,t.useEffect)((()=>{const e=ui.auth().onAuthStateChanged((async e=>{if(r(!0),e){l(!0);try{const t=await Fx.collection("users").doc(e.uid).get();if(t.exists)o(t.data());else{console.log("\u521d\u56de\u30ed\u30b0\u30a4\u30f3: \u30c7\u30d5\u30a9\u30eb\u30c8\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u3092\u8a2d\u5b9a");const t={name:"\u65b0\u898f\u30e6\u30fc\u30b6\u30fc",comment:"\u30b3\u30e1\u30f3\u30c8\u672a\u8a2d\u5b9a",image:Qt};o(t),await Fx.collection("users").doc(e.uid).set(t)}}catch(t){console.error("\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u306b\u5931\u6557\u3057\u307e\u3057\u305f",t)}}else l(!1),o(null);r(!1)}));return()=>e()}),[]),n?dn("div",{css:Jx,children:"\u30ed\u30fc\u30c7\u30a3\u30f3\u30b0\u4e2d"}):a?s?fn("div",{css:Jx,children:[fn("div",{css:tC,children:[dn("h1",{css:Xx,children:"\u30db\u30fc\u30e0"}),fn("div",{css:Zx,children:[dn("button",{css:eC,children:dn("img",{src:Bx,alt:"\u901a\u77e5",width:18,height:24})}),dn("button",{css:eC,onClick:()=>{u(!0),c&&u(!1)},children:dn("img",{src:zx,alt:"\u8a2d\u5b9a",width:25,height:25})})]})]}),fn("div",{css:nC,children:[dn("button",{onClick:()=>{var e;null===(e=h.current)||void 0===e||e.click()},children:dn("img",{css:rC,src:s.image,alt:s.name,width:56,height:56})}),dn("input",{type:"file",ref:h,style:{display:"none"},onChange:async e=>{if(e.target.files&&e.target.files[0]&&i){const n=e.target.files[0],r=ui.storage().ref().child("images/".concat(i,"/").concat(n.name));try{await r.put(n);const e=await r.getDownloadURL(),t={...s,image:e};await Fx.collection("users").doc(i).set(t,{merge:!0}),o((t=>t?{...t,image:e}:null))}catch(t){console.error("\u753b\u50cf\u306e\u30a2\u30c3\u30d7\u30ed\u30fc\u30c9\u306b\u5931\u6557\u3057\u307e\u3057\u305f",t)}}}}),fn("div",{children:[dn("p",{css:iC,children:s.name}),dn("p",{css:sC,children:s.comment})]})]}),c&&dn(yn,{userProfile:s,onSave:async e=>{try{i&&(await Fx.collection("users").doc(i).set(e,{merge:!0}),console.log("\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u3092\u66f4\u65b0\u3057\u307e\u3057\u305f"))}catch(t){console.error("\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u306b\u5931\u6557\u3057\u307e\u3057\u305f",t)}o(e),u(!1)}})]}):dn("div",{css:Jx,children:fn("div",{css:tC,children:[dn("h1",{css:Xx,children:"\u30db\u30fc\u30e0"}),fn("div",{css:Zx,children:[dn("button",{css:eC,children:dn("img",{src:Bx,alt:"\u901a\u77e5",width:18,height:24})}),dn("button",{css:eC,children:dn("img",{src:zx,alt:"\u8a2d\u5b9a",width:25,height:25})})]}),dn(oC,{onLogin:Ux})]})}):dn("div",{css:Jx,children:dn(oC,{onLogin:Ux})})};function lC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.from(new Set(t.flatMap((e=>"string"==typeof e?e.split(" "):[])))).filter(Boolean).join(" ")}function cC(e,t){if(e in t){let s=t[e];for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return"function"==typeof s?s(...r):s}let s=new Error('Tried to handle "'.concat(e,'" but there is no handler defined. Only defined handlers are: ').concat(Object.keys(t).map((e=>'"'.concat(e,'"'))).join(", "),"."));throw Error.captureStackTrace&&Error.captureStackTrace(s,cC),s}var uC=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(uC||{}),hC=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(hC||{});function dC(e){let{ourProps:t,theirProps:n,slot:r,defaultTag:i,features:s,visible:o=!0,name:a}=e,l=pC(n,t);if(o)return fC(l,r,i,a);let c=null!=s?s:0;if(2&c){let{static:e=!1,...t}=l;if(e)return fC(t,r,i,a)}if(1&c){let{unmount:e=!0,...t}=l;return cC(e?0:1,{0:()=>null,1:()=>fC({...t,hidden:!0,style:{display:"none"}},r,i,a)})}return fC(l,r,i,a)}function fC(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,{as:s=r,children:o,refName:a="ref",...l}=vC(e,["unmount","static"]),c=void 0!==e.ref?{[a]:e.ref}:{},u="function"==typeof o?o(n):o;"className"in l&&l.className&&"function"==typeof l.className&&(l.className=l.className(n));let h={};if(n){let e=!1,t=[];for(let[r,i]of Object.entries(n))"boolean"==typeof i&&(e=!0),!0===i&&t.push(r);e&&(h["data-headlessui-state"]=t.join(" "))}if(s===t.Fragment&&Object.keys(gC(l)).length>0){if(!(0,t.isValidElement)(u)||Array.isArray(u)&&u.length>1)throw new Error(['Passing props on "Fragment"!',"","The current component <".concat(i,' /> is rendering a "Fragment".'),"However we need to passthrough the following props:",Object.keys(l).map((e=>"  - ".concat(e))).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map((e=>"  - ".concat(e))).join("\n")].join("\n"));let e=u.props,n="function"==typeof(null==e?void 0:e.className)?function(){return lC(null==e?void 0:e.className(...arguments),l.className)}:lC(null==e?void 0:e.className,l.className),r=n?{className:n}:{};return(0,t.cloneElement)(u,Object.assign({},pC(u.props,gC(vC(l,["ref"]))),h,c,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return{ref:t.every((e=>null==e))?void 0:e=>{for(let n of t)null!=n&&("function"==typeof n?n(e):n.current=e)}}}(u.ref,c.ref),r))}return(0,t.createElement)(s,Object.assign({},vC(l,["ref"]),s!==t.Fragment&&c,s!==t.Fragment&&h),u)}function pC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return{};if(1===t.length)return t[0];let r={},i={};for(let s of t)for(let e in s)e.startsWith("on")&&"function"==typeof s[e]?(null!=i[e]||(i[e]=[]),i[e].push(s[e])):r[e]=s[e];if(r.disabled||r["aria-disabled"])return Object.assign(r,Object.fromEntries(Object.keys(i).map((e=>[e,void 0]))));for(let s in i)Object.assign(r,{[s](e){let t=i[s];for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];for(let i of t){if((e instanceof Event||(null==e?void 0:e.nativeEvent)instanceof Event)&&e.defaultPrevented)return;i(e,...r)}}});return r}function mC(e){var n;return Object.assign((0,t.forwardRef)(e),{displayName:null!=(n=e.displayName)?n:e.name})}function gC(e){let t=Object.assign({},e);for(let n in t)void 0===t[n]&&delete t[n];return t}function vC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.assign({},e);for(let r of t)r in n&&delete n[r];return n}var yC=Object.defineProperty,wC=(e,t,n)=>(((e,t,n)=>{t in e?yC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!=typeof t?t+"":t,n),n);let bC=new class{constructor(){wC(this,"current",this.detect()),wC(this,"handoffState","pending"),wC(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}handoff(){"pending"===this.handoffState&&(this.handoffState="complete")}get isHandoffComplete(){return"complete"===this.handoffState}},_C=(e,n)=>{bC.isServer?(0,t.useEffect)(e,n):(0,t.useLayoutEffect)(e,n)};function EC(){let e=function(){let e="undefined"==typeof document;return(e=>e.useSyncExternalStore)(r)((()=>()=>{}),(()=>!1),(()=>!e))}(),[n,i]=t.useState(bC.isHandoffComplete);return n&&!1===bC.isHandoffComplete&&i(!1),t.useEffect((()=>{!0!==n&&i(!0)}),[n]),t.useEffect((()=>bC.handoff()),[]),!e&&n}var IC;let TC=null!=(IC=t.useId)?IC:function(){let e=EC(),[n,r]=t.useState(e?()=>bC.nextId():null);return _C((()=>{null===n&&r(bC.nextId())}),[n]),null!=n?""+n:void 0};var SC=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(SC||{});let kC=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map((e=>"".concat(e,":not([tabindex='-1'])"))).join(",");var xC,CC,AC=((CC=AC||{})[CC.First=1]="First",CC[CC.Previous=2]="Previous",CC[CC.Next=4]="Next",CC[CC.Last=8]="Last",CC[CC.WrapAround=16]="WrapAround",CC[CC.NoScroll=32]="NoScroll",CC),NC=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(NC||{}),RC=((xC=RC||{})[xC.Previous=-1]="Previous",xC[xC.Next=1]="Next",xC);function PC(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body;return null==e?[]:Array.from(e.querySelectorAll(kC)).sort(((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER))))}var DC=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(DC||{});var OC=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(OC||{});"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",(e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")}),!0),document.addEventListener("click",(e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")}),!0));let LC=["textarea","input"].join(",");function MC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>e;return e.slice().sort(((e,n)=>{let r=t(e),i=t(n);if(null===r||null===i)return 0;let s=r.compareDocumentPosition(i);return s&Node.DOCUMENT_POSITION_FOLLOWING?-1:s&Node.DOCUMENT_POSITION_PRECEDING?1:0}))}function FC(e,t){let{sorted:n=!0,relativeTo:r=null,skipElements:i=[]}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?MC(e):e:PC(e);i.length>0&&o.length>1&&(o=o.filter((e=>!i.includes(e)))),r=null!=r?r:s.activeElement;let a,l=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,o.indexOf(r))-1;if(4&t)return Math.max(0,o.indexOf(r))+1;if(8&t)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=32&t?{preventScroll:!0}:{},h=0,d=o.length;do{if(h>=d||h+d<=0)return 0;let e=c+h;if(16&t)e=(e+d)%d;else{if(e<0)return 3;if(e>=d)return 1}a=o[e],null==a||a.focus(u),h+=l}while(a!==s.activeElement);return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,LC))&&n}(a)&&a.select(),2}function UC(e){let n=(0,t.useRef)(e);return _C((()=>{n.current=e}),[e]),n}let VC=function(e){let n=UC(e);return t.useCallback((function(){return n.current(...arguments)}),[n])},zC=Symbol();function BC(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let i=(0,t.useRef)(n);(0,t.useEffect)((()=>{i.current=n}),[n]);let s=VC((e=>{for(let t of i.current)null!=t&&("function"==typeof t?t(e):t.current=e)}));return n.every((e=>null==e||(null==e?void 0:e[zC])))?void 0:s}function jC(e){var t;if(e.type)return e.type;let n=null!=(t=e.as)?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function qC(e,n){let[r,i]=(0,t.useState)((()=>jC(e)));return _C((()=>{i(jC(e))}),[e.type,e.as]),_C((()=>{r||n.current&&n.current instanceof HTMLButtonElement&&!n.current.hasAttribute("type")&&i("button")}),[r,n]),r}function GC(){let e=(0,t.useRef)(!1);return _C((()=>(e.current=!0,()=>{e.current=!1})),[]),e}var WC=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(WC||{});let KC=mC((function(e,t){let{features:n=1,...r}=e;return dC({ourProps:{ref:t,"aria-hidden":2===(2&n)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...4===(4&n)&&2!==(2&n)&&{display:"none"}}},theirProps:r,slot:{},defaultTag:"div",name:"Hidden"})}));function HC(e){let{onFocus:n}=e,[r,i]=(0,t.useState)(!0),s=GC();return r?t.createElement(KC,{as:"button",type:"button",features:WC.Focusable,onFocus:e=>{e.preventDefault();let t,r=50;t=requestAnimationFrame((function e(){if(r--<=0)t&&cancelAnimationFrame(t);else if(n()){if(cancelAnimationFrame(t),!s.current)return;i(!1)}else t=requestAnimationFrame(e)}))}}):null}function QC(e){"function"==typeof queueMicrotask?queueMicrotask(e):Promise.resolve().then(e).catch((e=>setTimeout((()=>{throw e}))))}function YC(e){return bC.isServer?null:e instanceof Node?e.ownerDocument:null!=e&&e.hasOwnProperty("current")&&e.current instanceof Node?e.current.ownerDocument:document}const $C=t.createContext(null);function JC(e){let{children:n}=e,r=t.useRef({groups:new Map,get(e,t){var n;let r=this.groups.get(e);r||(r=new Map,this.groups.set(e,r));let i=null!=(n=r.get(t))?n:0;return r.set(t,i+1),[Array.from(r.keys()).indexOf(t),function(){let e=r.get(t);e>1?r.set(t,e-1):r.delete(t)}]}});return t.createElement($C.Provider,{value:r},n)}function XC(e){let n=t.useContext($C);if(!n)throw new Error("You must wrap your component in a <StableCollection>");let r=function(){var e,n,r;let i=null!=(r=null==(n=null==(e=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)?void 0:e.ReactCurrentOwner)?void 0:n.current)?r:null;if(!i)return Symbol();let s=[],o=i;for(;o;)s.push(o.index),o=o.return;return"$."+s.join(".")}(),[i,s]=n.current.get(e,r);return t.useEffect((()=>s),[]),i}var ZC=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(ZC||{}),eA=(e=>(e[e.Less=-1]="Less",e[e.Equal=0]="Equal",e[e.Greater=1]="Greater",e))(eA||{}),tA=(e=>(e[e.SetSelectedIndex=0]="SetSelectedIndex",e[e.RegisterTab=1]="RegisterTab",e[e.UnregisterTab=2]="UnregisterTab",e[e.RegisterPanel=3]="RegisterPanel",e[e.UnregisterPanel=4]="UnregisterPanel",e))(tA||{});let nA={0(e,t){var n;let r=MC(e.tabs,(e=>e.current)),i=MC(e.panels,(e=>e.current)),s=r.filter((e=>{var t;return!(null!=(t=e.current)&&t.hasAttribute("disabled"))})),o={...e,tabs:r,panels:i};if(t.index<0||t.index>r.length-1){let n=cC(Math.sign(t.index-e.selectedIndex),{[-1]:()=>1,0:()=>cC(Math.sign(t.index),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0});if(0===s.length)return o;let i=cC(n,{0:()=>r.indexOf(s[0]),1:()=>r.indexOf(s[s.length-1])});return{...o,selectedIndex:-1===i?e.selectedIndex:i}}let a=r.slice(0,t.index),l=[...r.slice(t.index),...a].find((e=>s.includes(e)));if(!l)return o;let c=null!=(n=r.indexOf(l))?n:e.selectedIndex;return-1===c&&(c=e.selectedIndex),{...o,selectedIndex:c}},1(e,t){var n;if(e.tabs.includes(t.tab))return e;let r=e.tabs[e.selectedIndex],i=MC([...e.tabs,t.tab],(e=>e.current)),s=null!=(n=i.indexOf(r))?n:e.selectedIndex;return-1===s&&(s=e.selectedIndex),{...e,tabs:i,selectedIndex:s}},2:(e,t)=>({...e,tabs:e.tabs.filter((e=>e!==t.tab))}),3:(e,t)=>e.panels.includes(t.panel)?e:{...e,panels:MC([...e.panels,t.panel],(e=>e.current))},4:(e,t)=>({...e,panels:e.panels.filter((e=>e!==t.panel))})},rA=(0,t.createContext)(null);function iA(e){let n=(0,t.useContext)(rA);if(null===n){let t=new Error("<".concat(e," /> is missing a parent <Tab.Group /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,iA),t}return n}rA.displayName="TabsDataContext";let sA=(0,t.createContext)(null);function oA(e){let n=(0,t.useContext)(sA);if(null===n){let t=new Error("<".concat(e," /> is missing a parent <Tab.Group /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,oA),t}return n}function aA(e,t){return cC(t.type,nA,e,t)}sA.displayName="TabsActionsContext";let lA=t.Fragment;let cA=uC.RenderStrategy|uC.Static;let uA=mC((function(e,n){var r,i;let s=TC(),{id:o="headlessui-tabs-tab-".concat(s),...a}=e,{orientation:l,activation:c,selectedIndex:u,tabs:h,panels:d}=iA("Tab"),f=oA("Tab"),p=iA("Tab"),m=(0,t.useRef)(null),g=BC(m,n);_C((()=>f.registerTab(m)),[f,m]);let v=XC("tabs"),y=h.indexOf(m);-1===y&&(y=v);let w=y===u,b=VC((e=>{var t;let n=e();if(n===NC.Success&&"auto"===c){let e=null==(t=YC(m))?void 0:t.activeElement,n=p.tabs.findIndex((t=>t.current===e));-1!==n&&f.change(n)}return n})),_=VC((e=>{let t=h.map((e=>e.current)).filter(Boolean);if(e.key===SC.Space||e.key===SC.Enter)return e.preventDefault(),e.stopPropagation(),void f.change(y);switch(e.key){case SC.Home:case SC.PageUp:return e.preventDefault(),e.stopPropagation(),b((()=>FC(t,AC.First)));case SC.End:case SC.PageDown:return e.preventDefault(),e.stopPropagation(),b((()=>FC(t,AC.Last)))}return b((()=>cC(l,{vertical:()=>e.key===SC.ArrowUp?FC(t,AC.Previous|AC.WrapAround):e.key===SC.ArrowDown?FC(t,AC.Next|AC.WrapAround):NC.Error,horizontal:()=>e.key===SC.ArrowLeft?FC(t,AC.Previous|AC.WrapAround):e.key===SC.ArrowRight?FC(t,AC.Next|AC.WrapAround):NC.Error})))===NC.Success?e.preventDefault():void 0})),E=(0,t.useRef)(!1),I=VC((()=>{var e;E.current||(E.current=!0,null==(e=m.current)||e.focus({preventScroll:!0}),f.change(y),QC((()=>{E.current=!1})))})),T=VC((e=>{e.preventDefault()})),S=(0,t.useMemo)((()=>({selected:w})),[w]);return dC({ourProps:{ref:g,onKeyDown:_,onMouseDown:T,onClick:I,id:o,role:"tab",type:qC(e,m),"aria-controls":null==(i=null==(r=d[y])?void 0:r.current)?void 0:i.id,"aria-selected":w,tabIndex:w?0:-1},theirProps:a,slot:S,defaultTag:"button",name:"Tabs.Tab"})})),hA=mC((function(e,n){let{defaultIndex:r=0,vertical:i=!1,manual:s=!1,onChange:o,selectedIndex:a=null,...l}=e;const c=i?"vertical":"horizontal",u=s?"manual":"auto";let h=null!==a,d=BC(n),[f,p]=(0,t.useReducer)(aA,{selectedIndex:null!=a?a:r,tabs:[],panels:[]}),m=(0,t.useMemo)((()=>({selectedIndex:f.selectedIndex})),[f.selectedIndex]),g=UC(o||(()=>{})),v=UC(f.tabs),y=(0,t.useMemo)((()=>({orientation:c,activation:u,...f})),[c,u,f]),w=VC((e=>(p({type:1,tab:e}),()=>p({type:2,tab:e})))),b=VC((e=>(p({type:3,panel:e}),()=>p({type:4,panel:e})))),_=VC((e=>{E.current!==e&&g.current(e),h||p({type:0,index:e})})),E=UC(h?e.selectedIndex:f.selectedIndex),I=(0,t.useMemo)((()=>({registerTab:w,registerPanel:b,change:_})),[]);_C((()=>{p({type:0,index:null!=a?a:r})}),[a]),_C((()=>{if(void 0===E.current||f.tabs.length<=0)return;let e=MC(f.tabs,(e=>e.current));e.some(((e,t)=>f.tabs[t]!==e))&&_(e.indexOf(f.tabs[E.current]))}));let T={ref:d};return t.createElement(JC,null,t.createElement(sA.Provider,{value:I},t.createElement(rA.Provider,{value:y},y.tabs.length<=0&&t.createElement(HC,{onFocus:()=>{var e,t;for(let n of v.current)if(0===(null==(e=n.current)?void 0:e.tabIndex))return null==(t=n.current)||t.focus(),!0;return!1}}),dC({ourProps:T,theirProps:l,slot:m,defaultTag:lA,name:"Tabs"}))))})),dA=mC((function(e,t){let{orientation:n,selectedIndex:r}=iA("Tab.List");return dC({ourProps:{ref:BC(t),role:"tablist","aria-orientation":n},theirProps:e,slot:{selectedIndex:r},defaultTag:"div",name:"Tabs.List"})})),fA=mC((function(e,n){let{selectedIndex:r}=iA("Tab.Panels");return dC({ourProps:{ref:BC(n)},theirProps:e,slot:(0,t.useMemo)((()=>({selectedIndex:r})),[r]),defaultTag:"div",name:"Tabs.Panels"})})),pA=mC((function(e,n){var r,i,s,o;let a=TC(),{id:l="headlessui-tabs-panel-".concat(a),tabIndex:c=0,...u}=e,{selectedIndex:h,tabs:d,panels:f}=iA("Tab.Panel"),p=oA("Tab.Panel"),m=(0,t.useRef)(null),g=BC(m,n);_C((()=>p.registerPanel(m)),[p,m]);let v=XC("panels"),y=f.indexOf(m);-1===y&&(y=v);let w=y===h,b=(0,t.useMemo)((()=>({selected:w})),[w]),_={ref:g,id:l,role:"tabpanel","aria-labelledby":null==(i=null==(r=d[y])?void 0:r.current)?void 0:i.id,tabIndex:w?c:-1};return w||null!=(s=u.unmount)&&!s||null!=(o=u.static)&&o?dC({ourProps:_,theirProps:u,slot:b,defaultTag:"div",features:cA,visible:w,name:"Tabs.Panel"}):t.createElement(KC,{as:"span",..._})})),mA=Object.assign(uA,{Group:hA,List:dA,Panels:fA,Panel:pA});const gA=n.p+"static/media/plus.96157a559cf3dc8a117aa8c0d538ed26.svg";var vA,yA,wA;const bA=Ee(vA||(vA=s(["\n  /* \u30e2\u30fc\u30c0\u30eb\u306e\u30b9\u30bf\u30a4\u30eb */\n  position: fixed;\n  top: 45%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);\n  z-index: 30;\n  background-color: #fff;\n  height: 70vh;\n  max-width: 500px;\n  width: 80vw;\n  border: 2px solid #333;\n  border-radius: 10px;\n  padding: 30px;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  overflow-y: auto;\n"]))),_A=Ee(yA||(yA=s(["\n  position: absolute;\n  top: 20px;\n  right: 20px;\n"]))),EA=Ee(wA||(wA=s(["\n  padding: 50px 20px;\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n"]))),IA=e=>{let{onClose:t,children:n}=e;return fn("div",{css:bA,children:[dn("button",{css:_A,onClick:t,children:"\u9589\u3058\u308b"}),dn("div",{css:EA,children:n})]})};var TA,SA,kA,xA,CA,AA,NA,RA,PA,DA,OA,LA;const MA=Ee(TA||(TA=s(["\n  max-width: 600px;\n  margin: 0 auto;\n  padding-top: 30px;\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  min-height: 100vh;\n  position: relative;\n"]))),FA=Ee(SA||(SA=s(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  & > button {\n    padding-right: 18px;\n  }\n"]))),UA=Ee(kA||(kA=s(["\n  font-size: 20px;\n  font-weight: bold;\n  padding: 10px 26px;\n  color: #333;\n"]))),VA=Ee(xA||(xA=s(["\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n  gap: 15px;\n"]))),zA=Ee(CA||(CA=s(["\n  background-color: #eee;\n  border-top: 1px solid #333;\n  border-left: 1px solid #333;\n  border-right: 1px solid #333;\n  padding: 10px 60px 6px;\n  position: relative;\n  bottom: 0;\n  border-radius: 6px 6px 0 0;\n  z-index: 0;\n"]))),BA=Ee(AA||(AA=s(['\n  background-color: #fff;\n  top: 4px;\n  padding: 10px 60px;\n  &::after {\n    position: absolute;\n    left: -2px;\n    bottom: -7px;\n    content: "";\n    width: 120%;\n    height: 10px;\n    background-color: #fff;\n  }\n']))),jA=Ee(NA||(NA=s(["\n  background-color: #fff;\n  border-top: 1px solid #333;\n"]))),qA=Ee(RA||(RA=s(["\n  display: grid;\n  grid-template-columns: 56px 1fr;\n  grid-template-rows: 56px;\n  align-items: center;\n  justify-items: flex-start;\n  gap: 16px;\n  padding: 10px;\n  border-radius: 8px;\n  transition: background-color 0.2s;\n  @media (any-hover: hover) {\n    &:hover {\n      background-color: #eee;\n    }\n  }\n"]))),GA=Ee(PA||(PA=s(["\n  text-align: left;\n"]))),WA=Ee(DA||(DA=s(["\n  border-radius: 50%;\n  width: 56px;\n  height: 56px;\n  object-fit: cover;\n"]))),KA=Ee(OA||(OA=s(["\n  font-size: 16px;\n  margin-bottom: 2px;\n"]))),HA=Ee(LA||(LA=s(["\n  font-size: 12px;\n  color: #666666;\n"]))),QA=()=>{var e;const[n,r]=(0,t.useState)(!1),[i,s]=(0,t.useState)([]),o=null===(e=ui.auth().currentUser)||void 0===e?void 0:e.uid,a=gt();(0,t.useEffect)((()=>{(async()=>{const e=(await Fx.collection("users").get()).docs.filter((e=>e.id!==o)).map((e=>({id:e.id,name:e.data().name,image:e.data().image,comment:e.data().comment})));s(e)})()}),[o]);return fn("div",{css:MA,children:[fn("div",{css:FA,children:[dn("h1",{css:UA,children:"\u9023\u7d61"}),dn("button",{onClick:()=>r(!0),children:dn("img",{src:gA,alt:"\u8ffd\u52a0"})})]}),dn(mA.Group,{children:fn(mA.List,{css:VA,children:[dn(mA,{as:Wt,to:"chat",children:e=>{let{selected:t}=e;return dn("div",{css:[zA,t&&BA],children:dn("p",{children:"\u30e1\u30c3\u30bb\u30fc\u30b8"})})}}),dn(mA,{as:Wt,to:"board",children:e=>{let{selected:t}=e;return dn("div",{css:[zA,t&&BA],children:dn("p",{children:"\u63b2\u793a\u677f"})})}})]})}),fn("div",{css:jA,children:[dn(Rt,{context:{isModalOpen:n,setIsModalOpen:r,users:i}}),n&&dn(IA,{onClose:()=>r(!1),children:i.map((e=>fn("button",{css:qA,onClick:()=>{return t=e.id,void a("/contact/chat/".concat(t));var t},children:[dn("img",{src:e.image,css:WA,alt:"",width:56,height:56}),fn("div",{css:GA,children:[dn("p",{css:KA,children:e.name}),dn("p",{css:HA,children:e.comment})]})]},e.id)))})]})]})};const YA=n.p+"static/media/search.0b850d80e65b1109c3b361cf79507b8e.svg",$A=[{value:"\u30e6\u30cb\u30c3\u30c8",color:"#eb8ddd"},{value:"\u5f93\u6765",color:"#235980"},{value:"\u30c7\u30a4\u30b5\u30fc\u30d3\u30b9",color:"#c37100"}],JA=[{value:"1A",color:"#a63c3b"},{value:"1B",color:"#6e8b37"},{value:"2A",color:"#3c75a7"},{value:"2B",color:"#9d499d"}];const XA=n.p+"static/media/close.720b476b9ec20a374ed98f4f7a96f79e.svg";const ZA=n.p+"static/media/eating.842c1929f5c8ef3f78a30c3a26d1e5eb.svg";const eN=n.p+"static/media/drink.e085d721f98df7edc13faf2d0cc17f17.svg";const tN=n.p+"static/media/toilet.c9a012af7f9f5e7e371f2448c4582c1d.svg";const nN=n.p+"static/media/thermometer.f59575320df7b1874a48bd51db973e99.svg";const rN=n.p+"static/media/bath.18b395bc367da88470fce7bc2660eec1.svg";const iN=n.p+"static/media/dentifrice.33cad00f336b3a31b0fcfd9f376981dd.svg";const sN=n.p+"static/media/scale.e0da622d14f85c07fec375b0821f20e0.svg";const oN=n.p+"static/media/contact.b8e413c6b43136f20862702eca5f48e2.svg";const aN=[{label:"eating",value:"\u98df\u4e8b",color:"#6277FE",icon:ZA,selectedIcon:n.p+"static/media/eating-active.7389cdae11c822c422e163583777df4c.svg"},{label:"drinking",value:"\u6c34\u5206",color:"#D88E18",icon:eN,selectedIcon:n.p+"static/media/drink-active.5fcb57f7601eb2fc2d0c5dc7909a6c58.svg"},{label:"excretion",value:"\u6392\u6cc4",color:"#E65CCF",icon:tN,selectedIcon:n.p+"static/media/toilet-active.c7c56a40eb16237784aae55b67a79a6a.svg"},{label:"vital",value:"\u30d0\u30a4\u30bf\u30eb",color:"#30AC51",icon:nN,selectedIcon:n.p+"static/media/thermometer-active.40220802994c7817c754a4491fc9be89.svg"},{label:"bathing",value:"\u5165\u6d74",color:"#C3292F",icon:rN,selectedIcon:n.p+"static/media/bath-active.d9e19ad9108a4afc71f8de41059aeb88.svg"},{label:"oral",value:"\u53e3\u8154",color:"#993BAB",icon:iN,selectedIcon:n.p+"static/media/dentifrice-active.e98f323aadb256b1c6b06c533d7c37de.svg"},{label:"weight",value:"\u4f53\u91cd",color:"#167E56",icon:sN,selectedIcon:n.p+"static/media/scale-active.61b50655ad4923f83ae645c47c1815ca.svg"},{label:"contact",value:"\u9023\u7d61",color:"#DF6F33",icon:oN,selectedIcon:n.p+"static/media/contact-active.b451e6ba00a581754f1434b17395e77c.svg"}];var lN,cN,uN,hN,dN,fN,pN,mN,gN,vN;const yN=Ee(lN||(lN=s(["\n  display: flex;\n  position: relative;\n"]))),wN=Ee(cN||(cN=s(["\n  border-radius: 100px;\n  border: 1px solid #333;\n  padding: 15px 20px;\n  width: 100%;\n  position: relative;\n  z-index: 1;\n  font-size: 15px;\n"]))),bN=Ee(uN||(uN=s(["\n  background-color: #eee;\n"]))),_N=Ee(hN||(hN=s(["\n  position: absolute;\n  z-index: 0;\n  top: 6px;\n  border-radius: 100px;\n  width: 100%;\n  height: 100%;\n  background-color: #333;\n"]))),EN=Ee(dN||(dN=s(["\n  position: absolute;\n  z-index: 1;\n  top: 50%;\n  right: 15px;\n  cursor: pointer;\n  transform: translateY(-50%);\n  padding: 10px;\n"]))),IN=Ee(fN||(fN=s(["\n  position: absolute;\n  z-index: 1;\n  top: 50%;\n  right: 60px;\n  transform: translateY(-50%);\n  display: flex;\n  gap: 4px;\n"]))),TN=Ee(pN||(pN=s(['\n  width: auto;\n  font-size: 12px;\n  color: #fff;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 2px;\n  padding: 5px 16px 5px 10px;\n  border-radius: 100px;\n  border: 1px solid #333;\n  transition: background-color 0.2s ease;\n  // \u9589\u3058\u308b\u30a2\u30a4\u30b3\u30f3\n  &::before {\n    content: "";\n    width: 16px;\n    height: 16px;\n    background-image: url(',');\n    background-size: 16px;\n    font-family: "Zen Maru Gothic", serif;\n  }\n'])),XA),SN=e=>{var t,n,r;let{isDisabled:i,selectedDepartment:o,selectedRoom:a,selectedItem:l,onDepartmentClick:c,onRoomClick:u,onItemClick:h}=e;return fn("div",{css:yN,children:[dn("input",{css:[wN,i&&bN],type:"text",placeholder:"\u691c\u7d22\u3059\u308b",disabled:i}),dn("span",{css:_N}),dn("button",{css:EN,type:"submit",children:dn("img",{src:YA,alt:"\u691c\u7d22\u3059\u308b",width:22,height:22})}),fn("div",{css:[IN],children:[o&&dn("button",{css:[TN,Ee(mN||(mN=s(["\n                background-color: ",";\n              "])),null===(t=$A.find((e=>e.value===o)))||void 0===t?void 0:t.color)],onClick:()=>{c(o)},children:o}),a&&dn("button",{css:[TN,Ee(gN||(gN=s(["\n                background-color: ",";\n              "])),null===(n=JA.find((e=>e.value===a)))||void 0===n?void 0:n.color)],onClick:()=>{u(a)},children:a}),l&&dn("button",{css:[TN,Ee(vN||(vN=s(["\n                background-color: ",";\n              "])),null===(r=aN.find((e=>e.value===l)))||void 0===r?void 0:r.color)],onClick:()=>{h(l)},children:l})]})]})};let kN=(0,t.createContext)(null);function xN(){let e=(0,t.useContext)(kN);if(null===e){let e=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,xN),e}return e}function CN(){let[e,n]=(0,t.useState)([]);return[e.length>0?e.join(" "):void 0,(0,t.useMemo)((()=>function(e){let r=VC((e=>(n((t=>[...t,e])),()=>n((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),i=(0,t.useMemo)((()=>({register:r,slot:e.slot,name:e.name,props:e.props})),[r,e.slot,e.name,e.props]);return t.createElement(kN.Provider,{value:i},e.children)}),[n])]}let AN=mC((function(e,t){let n=TC(),{id:r="headlessui-label-".concat(n),passive:i=!1,...s}=e,o=xN(),a=BC(t);_C((()=>o.register(r)),[r,o.register]);let l={ref:a,...o.props,id:r};return i&&("onClick"in l&&(delete l.htmlFor,delete l.onClick),"onClick"in s&&delete s.onClick),dC({ourProps:l,theirProps:s,slot:o.slot||{},defaultTag:"label",name:o.name||"Label"})})),NN=Object.assign(AN,{}),RN=(0,t.createContext)(null);function PN(){let e=(0,t.useContext)(RN);if(null===e){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,PN),e}return e}function DN(){let[e,n]=(0,t.useState)([]);return[e.length>0?e.join(" "):void 0,(0,t.useMemo)((()=>function(e){let r=VC((e=>(n((t=>[...t,e])),()=>n((t=>{let n=t.slice(),r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}))))),i=(0,t.useMemo)((()=>({register:r,slot:e.slot,name:e.name,props:e.props})),[r,e.slot,e.name,e.props]);return t.createElement(RN.Provider,{value:i},e.children)}),[n])]}let ON=mC((function(e,t){let n=TC(),{id:r="headlessui-description-".concat(n),...i}=e,s=PN(),o=BC(t);return _C((()=>s.register(r)),[r,s.register]),dC({ourProps:{ref:o,...s.props,id:r},theirProps:i,slot:s.slot||{},defaultTag:"p",name:s.name||"Description"})})),LN=Object.assign(ON,{});function MN(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let[r,i]of Object.entries(e))UN(n,FN(t,r),i);return n}function FN(e,t){return e?e+"["+t+"]":t}function UN(e,t,n){if(Array.isArray(n))for(let[r,i]of n.entries())UN(e,FN(t,r.toString()),i);else n instanceof Date?e.push([t,n.toISOString()]):"boolean"==typeof n?e.push([t,n?"1":"0"]):"string"==typeof n?e.push([t,n]):"number"==typeof n?e.push([t,"".concat(n)]):null==n?e.push([t,""]):MN(n,t,e)}function VN(e){let t=e.parentElement,n=null;for(;t&&!(t instanceof HTMLFieldSetElement);)t instanceof HTMLLegendElement&&(n=t),t=t.parentElement;let r=""===(null==t?void 0:t.getAttribute("disabled"));return(!r||!function(e){if(!e)return!1;let t=e.previousElementSibling;for(;null!==t;){if(t instanceof HTMLLegendElement)return!1;t=t.previousElementSibling}return!0}(n))&&r}function zN(){let e=[],t={addEventListener:(e,n,r,i)=>(e.addEventListener(n,r,i),t.add((()=>e.removeEventListener(n,r,i)))),requestAnimationFrame(){let e=requestAnimationFrame(...arguments);return t.add((()=>cancelAnimationFrame(e)))},nextFrame(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return t.requestAnimationFrame((()=>t.requestAnimationFrame(...n)))},setTimeout(){let e=setTimeout(...arguments);return t.add((()=>clearTimeout(e)))},microTask(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let i={current:!0};return QC((()=>{i.current&&n[0]()})),t.add((()=>{i.current=!1}))},style(e,t,n){let r=e.style.getPropertyValue(t);return Object.assign(e.style,{[t]:n}),this.add((()=>{Object.assign(e.style,{[t]:r})}))},group(e){let t=zN();return e(t),this.add((()=>t.dispose()))},add:t=>(e.push(t),()=>{let n=e.indexOf(t);if(n>=0)for(let t of e.splice(n,1))t()}),dispose(){for(let t of e.splice(0))t()}};return t}var BN=(e=>(e[e.RegisterOption=0]="RegisterOption",e[e.UnregisterOption=1]="UnregisterOption",e))(BN||{});let jN={0(e,t){let n=[...e.options,{id:t.id,element:t.element,propsRef:t.propsRef}];return{...e,options:MC(n,(e=>e.element.current))}},1(e,t){let n=e.options.slice(),r=e.options.findIndex((e=>e.id===t.id));return-1===r?e:(n.splice(r,1),{...e,options:n})}},qN=(0,t.createContext)(null);function GN(e){let n=(0,t.useContext)(qN);if(null===n){let t=new Error("<".concat(e," /> is missing a parent <RadioGroup /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,GN),t}return n}qN.displayName="RadioGroupDataContext";let WN=(0,t.createContext)(null);function KN(e){let n=(0,t.useContext)(WN);if(null===n){let t=new Error("<".concat(e," /> is missing a parent <RadioGroup /> component."));throw Error.captureStackTrace&&Error.captureStackTrace(t,KN),t}return n}function HN(e,t){return cC(t.type,jN,e,t)}WN.displayName="RadioGroupActionsContext";var QN=(e=>(e[e.Empty=1]="Empty",e[e.Active=2]="Active",e))(QN||{});let YN=mC((function(e,n){let r=TC(),{id:i="headlessui-radiogroup-".concat(r),value:s,defaultValue:o,form:a,name:l,onChange:c,by:u=((e,t)=>e===t),disabled:h=!1,...d}=e,f=VC("string"==typeof u?(e,t)=>{let n=u;return(null==e?void 0:e[n])===(null==t?void 0:t[n])}:u),[p,m]=(0,t.useReducer)(HN,{options:[]}),g=p.options,[v,y]=CN(),[w,b]=DN(),_=(0,t.useRef)(null),E=BC(_,n),[I,T]=function(e,n,r){let[i,s]=(0,t.useState)(r),o=void 0!==e,a=(0,t.useRef)(o),l=(0,t.useRef)(!1),c=(0,t.useRef)(!1);return!o||a.current||l.current?!o&&a.current&&!c.current&&(c.current=!0,a.current=o,console.error("A component is changing from controlled to uncontrolled. This may be caused by the value changing from a defined value to undefined, which should not happen.")):(l.current=!0,a.current=o,console.error("A component is changing from uncontrolled to controlled. This may be caused by the value changing from undefined to a defined value, which should not happen.")),[o?e:i,VC((e=>(o||s(e),null==n?void 0:n(e))))]}(s,c,o),S=(0,t.useMemo)((()=>g.find((e=>!e.propsRef.current.disabled))),[g]),k=(0,t.useMemo)((()=>g.some((e=>f(e.propsRef.current.value,I)))),[g,I]),x=VC((e=>{var t;if(h||f(e,I))return!1;let n=null==(t=g.find((t=>f(t.propsRef.current.value,e))))?void 0:t.propsRef.current;return(null==n||!n.disabled)&&(null==T||T(e),!0)}));!function(e){let{container:n,accept:r,walk:i,enabled:s=!0}=e,o=(0,t.useRef)(r),a=(0,t.useRef)(i);(0,t.useEffect)((()=>{o.current=r,a.current=i}),[r,i]),_C((()=>{if(!n||!s)return;let e=YC(n);if(!e)return;let t=o.current,r=a.current,i=Object.assign((e=>t(e)),{acceptNode:t}),l=e.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,i,!1);for(;l.nextNode();)r(l.currentNode)}),[n,s,o,a])}({container:_.current,accept:e=>"radio"===e.getAttribute("role")?NodeFilter.FILTER_REJECT:e.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT,walk(e){e.setAttribute("role","none")}});let C=VC((e=>{let t=_.current;if(!t)return;let n=YC(t),r=g.filter((e=>!1===e.propsRef.current.disabled)).map((e=>e.element.current));switch(e.key){case SC.Enter:!function(e){var t,n;let r=null!=(t=null==e?void 0:e.form)?t:e.closest("form");if(r){for(let t of r.elements)if(t!==e&&("INPUT"===t.tagName&&"submit"===t.type||"BUTTON"===t.tagName&&"submit"===t.type||"INPUT"===t.nodeName&&"image"===t.type))return void t.click();null==(n=r.requestSubmit)||n.call(r)}}(e.currentTarget);break;case SC.ArrowLeft:case SC.ArrowUp:if(e.preventDefault(),e.stopPropagation(),FC(r,AC.Previous|AC.WrapAround)===NC.Success){let e=g.find((e=>e.element.current===(null==n?void 0:n.activeElement)));e&&x(e.propsRef.current.value)}break;case SC.ArrowRight:case SC.ArrowDown:if(e.preventDefault(),e.stopPropagation(),FC(r,AC.Next|AC.WrapAround)===NC.Success){let e=g.find((e=>e.element.current===(null==n?void 0:n.activeElement)));e&&x(e.propsRef.current.value)}break;case SC.Space:{e.preventDefault(),e.stopPropagation();let t=g.find((e=>e.element.current===(null==n?void 0:n.activeElement)));t&&x(t.propsRef.current.value)}}})),A=VC((e=>(m({type:0,...e}),()=>m({type:1,id:e.id})))),N=(0,t.useMemo)((()=>({value:I,firstOption:S,containsCheckedOption:k,disabled:h,compare:f,...p})),[I,S,k,h,f,p]),R=(0,t.useMemo)((()=>({registerOption:A,change:x})),[A,x]),P={ref:E,id:i,role:"radiogroup","aria-labelledby":v,"aria-describedby":w,onKeyDown:C},D=(0,t.useMemo)((()=>({value:I})),[I]),O=(0,t.useRef)(null),L=function(){let[e]=(0,t.useState)(zN);return(0,t.useEffect)((()=>()=>e.dispose()),[e]),e}();return(0,t.useEffect)((()=>{O.current&&void 0!==o&&L.addEventListener(O.current,"reset",(()=>{x(o)}))}),[O,x]),t.createElement(b,{name:"RadioGroup.Description"},t.createElement(y,{name:"RadioGroup.Label"},t.createElement(WN.Provider,{value:R},t.createElement(qN.Provider,{value:N},null!=l&&null!=I&&MN({[l]:I}).map(((e,n)=>{let[r,i]=e;return t.createElement(KC,{features:WC.Hidden,ref:0===n?e=>{var t;O.current=null!=(t=null==e?void 0:e.closest("form"))?t:null}:void 0,...gC({key:r,as:"input",type:"radio",checked:null!=i,hidden:!0,readOnly:!0,form:a,name:r,value:i})})})),dC({ourProps:P,theirProps:d,slot:D,defaultTag:"div",name:"RadioGroup"})))))})),$N=mC((function(e,n){var r;let i=TC(),{id:s="headlessui-radiogroup-option-".concat(i),value:o,disabled:a=!1,...l}=e,c=(0,t.useRef)(null),u=BC(c,n),[h,d]=CN(),[f,p]=DN(),{addFlag:m,removeFlag:g,hasFlag:v}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,[n,r]=(0,t.useState)(e),i=GC(),s=(0,t.useCallback)((e=>{i.current&&r((t=>t|e))}),[n,i]),o=(0,t.useCallback)((e=>Boolean(n&e)),[n]),a=(0,t.useCallback)((e=>{i.current&&r((t=>t&~e))}),[r,i]),l=(0,t.useCallback)((e=>{i.current&&r((t=>t^e))}),[r]);return{flags:n,addFlag:s,hasFlag:o,removeFlag:a,toggleFlag:l}}(1),y=UC({value:o,disabled:a}),w=GN("RadioGroup.Option"),b=KN("RadioGroup.Option");_C((()=>b.registerOption({id:s,element:c,propsRef:y})),[s,b,c,e]);let _=VC((e=>{var t;if(VN(e.currentTarget))return e.preventDefault();b.change(o)&&(m(2),null==(t=c.current)||t.focus())})),E=VC((e=>{if(VN(e.currentTarget))return e.preventDefault();m(2)})),I=VC((()=>g(2))),T=(null==(r=w.firstOption)?void 0:r.id)===s,S=w.disabled||a,k=w.compare(w.value,o),x={ref:u,id:s,role:"radio","aria-checked":k?"true":"false","aria-labelledby":h,"aria-describedby":f,"aria-disabled":!!S||void 0,tabIndex:S?-1:k||!w.containsCheckedOption&&T?0:-1,onClick:S?void 0:_,onFocus:S?void 0:E,onBlur:S?void 0:I},C=(0,t.useMemo)((()=>({checked:k,disabled:S,active:v(2)})),[k,S,v]);return t.createElement(p,{name:"RadioGroup.Description"},t.createElement(d,{name:"RadioGroup.Label"},dC({ourProps:x,theirProps:l,slot:C,defaultTag:"div",name:"RadioGroup.Option"})))})),JN=Object.assign(YN,{Option:$N,Label:NN,Description:LN});var XN,ZN,eR,tR,nR,rR,iR;const sR=Ee(XN||(XN=s(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 14px;\n"]))),oR=Ee(ZN||(ZN=s(["\n  display: flex;\n  flex-direction: column;\n  gap: 5px;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n"]))),aR=Ee(eR||(eR=s(["\n  width: 58px;\n  height: 58px;\n  display: grid;\n  place-items: center;\n  border-radius: 10px;\n  border: 1.6px solid #333;\n  transition: background-color 0.2s ease;\n"]))),lR=Ee(tR||(tR=s(["\n  @media (any-hover: hover) {\n    &:hover {\n      background-color: #ddd;\n    }\n  }\n"]))),cR=Ee(nR||(nR=s(["\n  font-size: 11px;\n  width: 100%;\n  text-align: center;\n  padding-top: 2px;\n  padding-bottom: 2px;\n  border: 1.6px solid #333;\n  border-radius: 50px;\n  color: #fff;\n"]))),uR=e=>{let{onClick:t,selectedItem:n}=e;return dn(JN,{css:sR,value:n,onChange:e=>{n!==e&&t(e)},children:aN.map(((e,t)=>e?dn(JN.Option,{css:oR,value:e.value,children:t=>{let{checked:n}=t;return fn(hn,{children:[dn("span",{css:[aR,!n&&lR,n&&Ee(rR||(rR=s(["\n                        background-color: ",";\n                      "])),e.color)],children:dn("img",{alt:e.label,src:n?e.selectedIcon:e.icon})}),dn("span",{css:[cR,Ee(iR||(iR=s(["\n                      background-color: ",";\n                    "])),e.color)],children:e.value})]})}},t):null))})},hR=[{department:"\u30c7\u30a4\u30b5\u30fc\u30d3\u30b9",room:"",name:"\u5c71\u7530\u592a\u90ce"},{department:"\u30c7\u30a4\u30b5\u30fc\u30d3\u30b9",room:"",name:"\u5ca1\u7530 \u8fb0\u592b"},{department:"\u5f93\u6765",room:"",name:"\u53e4\u7530 \u592a\u90ce"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1A",name:"\u5c71\u7530 \u592a\u90ce",records:{eating:{value:"\u98df\u4e8b",time:"2023/12/11 14:10",detail:" \u3068\u308d\u307f 6\u5272",manager:"\u5ca9\u9593 \u65e5\u83dc",managerThumbnail:"iwamahina"},drinking:{value:"\u6c34\u5206",time:"2023/12/11 14:30",detail:"\u304a\u8336 100ml",manager:"\u5ca9\u9593 \u65e5\u83dc",managerThumbnail:"iwamahina"},excretion:{value:"\u6392\u6cc4",time:"2023/12/11 14:10",detail:"\u304a\u8336 100ml",manager:"\u5ca9\u9593 \u65e5\u83dc",managerThumbnail:"iwamahina"}}},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1A",name:"\u9234\u6728 \u4e00\u90ce",records:{eating:{value:"\u98df\u4e8b",time:"2023/12/11 14:20",detail:"\u5168\u7ca5 8\u5272",manager:"\u5ca9\u9593 \u65e5\u83dc",managerThumbnail:"iwamahina"},drinking:{value:"\u6c34\u5206",time:"2023/12/11 13:10",detail:"\u304a\u8336 100ml",manager:"\u5c71\u7530 \u82b1\u5b50",managerThumbnail:"yamadahanako"}}},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1A",name:"\u7530\u4e2d \u82b1\u5b50",records:{excretion:{value:"\u6392\u6cc4",time:"2023/12/11 14:50",detail:"\u5c0f",manager:"\u5c71\u7530 \u82b1\u5b50",managerThumbnail:"yamadahanako"}}},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1A",name:"\u5ca1\u672c \u3088\u3057\u5b50",records:{drinking:{value:"\u6c34\u5206",time:"2023/12/11 14:30",detail:"\u304a\u8336 100ml",manager:"\u5c71\u7530 \u82b1\u5b50",managerThumbnail:"yamadahanako"},excretion:{value:"\u6392\u6cc4",time:"2023/12/11 14:10",detail:"\u304a\u8336 100ml",manager:"\u5ca9\u9593 \u65e5\u83dc",managerThumbnail:"iwamahina"}}},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1A",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1B",name:"\u7530\u4e2d \u82b1\u5b50",records:{eating:{value:"\u98df\u4e8b",time:"2023/12/11 14:10",detail:" \u3068\u308d\u307f 6\u5272",manager:"\u5ca9\u9593 \u65e5\u83dc",managerThumbnail:"iwamahina"}}},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"1B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2A",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2A",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2A",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2A",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2A",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2B",name:"\u7530\u4e2d \u82b1\u5b50"},{department:"\u30e6\u30cb\u30c3\u30c8",room:"2B",name:"\u7530\u4e2d \u82b1\u5b50"}];var dR,fR,pR,mR,gR,vR,yR,wR,bR,_R,ER,IR,TR,SR,kR,xR,CR;const AR=Ee(dR||(dR=s(["\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  flex-wrap: wrap;\n  column-gap: 16px;\n  row-gap: 30px;\n  @media (max-width: 420px) {\n    grid-template-columns: repeat(1, 1fr);\n  }\n"]))),NR=Ee(fR||(fR=s(["\n  display: flex;\n  flex-wrap: wrap;\n  cursor: pointer;\n  position: relative;\n"]))),RR=Ee(pR||(pR=s(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  gap: 10px;\n  min-width: 180px;\n  width: 100%;\n  padding: 30px 20px;\n  border: 1.6px solid #333;\n  position: relative;\n  z-index: 1;\n  border-radius: 10px;\n  background-color: #fff;\n"]))),PR=Ee(mR||(mR=s(["\n  position: absolute;\n  top: 6px;\n  left: 0;\n  background-color: #3c75a7;\n  width: 100%;\n  height: 100%;\n  border-radius: 10px;\n  border: 1.6px solid #333;\n  box-sizing: border-box;\n"]))),DR=Ee(gR||(gR=s(["\n  position: absolute;\n  top: -18px;\n  left: 50%;\n  padding: 8px 24px;\n  font-size: 14px;\n  white-space: nowrap;\n  transform: translateX(-50%);\n  background-color: #3c75a7;\n  border-radius: 40px;\n  border: 1.6px solid #333;\n  color: #fff;\n"]))),OR=Ee(vR||(vR=s(["\n  display: flex;\n  gap: 4px;\n  font-size: 14px;\n  align-items: flex-end;\n  justify-content: center;\n"]))),LR=Ee(yR||(yR=s(["\n  font-size: 24px;\n"]))),MR=Ee(wR||(wR=s(["\n  display: flex;\n  align-items: center;\n  gap: 8px;\n"]))),FR=Ee(bR||(bR=s(["\n  position: relative;\n"]))),UR=Ee(_R||(_R=s(["\n  width: 40px;\n  height: 40px;\n  display: grid;\n  place-items: center;\n  border-radius: 7px;\n  border: 1.6px solid #333;\n"]))),VR=Ee(ER||(ER=s(["\n  border-radius: 50%;\n  width: 30px;\n  height: 30px;\n  position: absolute;\n  top: 35%;\n  left: 45%;\n"]))),zR=Ee(IR||(IR=s(['\n  font-size: 14px;\n  position: relative;\n  display: flex;\n  font-weight: bold;\n  gap: 8px;\n  &::before {\n    content: "\u3010";\n  }\n  &::after {\n    content: "\u3011";\n  }\n']))),BR=e=>{let{selectedDepartment:t,selectedRoom:r,selectedItem:i}=e;return dn("div",{css:AR,children:hR.filter((e=>(!t||e.department===t)&&(!r||e.room===r)&&(!i||e.records&&((e,t)=>void 0!==t&&e&&Object.values(e).some((e=>e&&e.value===t)))(e.records,i)))).map(((e,t)=>{var r,o,a,l,c,u,h,d,f,p,m;return fn("div",{css:NR,children:[fn("div",{css:RR,children:[fn("span",{css:[DR,e.department&&$A.map((t=>e.department===t.value&&Ee(TR||(TR=s(["\n                          background-color: ",";\n                        "])),t.color))),e.room&&JA.map((t=>e.room===t.value&&Ee(SR||(SR=s(["\n                          background-color: ",";\n                        "])),t.color)))],children:[e.department,e.room]}),fn("p",{css:OR,children:[dn("span",{css:LR,children:e.name}),"\u69d8"]}),e.records&&i&&aN.find((e=>e.value===i))&&fn("div",{css:MR,children:[fn("div",{css:FR,children:[dn("span",{css:[UR,Ee(kR||(kR=s(["\n                            background-color: ",";\n                          "])),null===(r=aN.find((e=>e.value===i)))||void 0===r?void 0:r.color)],children:dn("img",{alt:i,src:null===(o=aN.find((e=>e.value===i)))||void 0===o?void 0:o.selectedIcon,width:22,height:22})}),i&&e.records&&dn("img",{src:n(318)("./".concat(null===(a=e.records[null===(l=aN.find((e=>e.value===i)))||void 0===l?void 0:l.label])||void 0===a?void 0:a.managerThumbnail,".jpg")),alt:"\u6700\u7d42\u8a18\u9332\u8005\uff1a".concat(null===(c=e.records[null===(u=aN.find((e=>e.value===i)))||void 0===u?void 0:u.label])||void 0===c?void 0:c.manager),css:VR})]}),dn("div",{children:i&&e.records&&fn(hn,{children:[dn("p",{css:zR,children:(m=(null===(h=e.records[null===(d=aN.find((e=>e.value===i)))||void 0===d?void 0:d.label])||void 0===h?void 0:h.time)||"",new Date(m).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}))}),dn("p",{css:zR,children:(null===(f=e.records[null===(p=aN.find((e=>e.value===i)))||void 0===p?void 0:p.label])||void 0===f?void 0:f.detail)||""})]})})]})]}),dn("div",{css:[PR,e.department&&$A.map((t=>e.department===t.value&&Ee(xR||(xR=s(["\n                        background-color: ",";\n                      "])),t.color))),e.room&&JA.map((t=>e.room===t.value&&Ee(CR||(CR=s(["\n                        background-color: ",";\n                      "])),t.color)))]})]},t)}))})};var jR,qR,GR,WR,KR,HR;const QR=Ee(jR||(jR=s(["\n  display: grid;\n  gap: 12px;\n"]))),YR=Ee(qR||(qR=s(["\n  display: flex;\n  flex-wrap: wrap;\n  gap: 12px;\n"]))),$R=Ee(GR||(GR=s(['\n  display: flex;\n  position: relative;\n  z-index: 1;\n  font-weight: bold;\n  border-radius: 100px;\n  cursor: pointer;\n  &::after {\n    content: "";\n    box-sizing: border-box;\n    position: absolute;\n    z-index: -1;\n    left: 0;\n    top: 4px;\n    border-radius: 100px;\n    width: 100%;\n    height: 100%;\n    border: 1px solid #333;\n  }\n']))),JR=Ee(WR||(WR=s(["\n  color: #fff;\n"]))),XR=Ee(KR||(KR=s(["\n  background-color: #fff;\n  padding: 8px 20px;\n  border-radius: 100px;\n  border: 1px solid #333;\n  transition: background-color 0.2s ease;\n"]))),ZR=Ee(HR||(HR=s(["\n  padding: 4px 20px;\n  font-size: 14px;\n"])));var eP,tP,nP,rP,iP,sP;const oP=e=>{let{onDepartmentClick:t,onRoomClick:n,selectedDepartment:r,selectedRoom:i}=e;return dn(hn,{children:fn("div",{css:QR,children:[dn(JN,{css:YR,value:r,onChange:e=>{t&&t(e)},children:$A.map(((e,t)=>e?dn(JN.Option,{value:e.value,children:t=>{let{checked:n}=t;return dn("div",{css:[$R,Ee(eP||(eP=s(["\n                        color: ",";\n                        &::after {\n                          background-color: ",";\n                        }\n                      "])),e.color,e.color),n&&JR,n&&Ee(tP||(tP=s(["\n                          background-color: ",";\n                        "])),e.color)],children:dn("span",{css:[XR,n&&JR,n&&Ee(nP||(nP=s(["\n                            background-color: ",";\n                          "])),e.color)],children:e.value})})}},t):null))}),"\u30e6\u30cb\u30c3\u30c8"===r&&dn(JN,{css:YR,value:i,onChange:e=>{n&&n(e)},children:JA.map(((e,t)=>e?dn(JN.Option,{value:e.value,children:t=>{let{checked:n}=t;return dn("div",{css:[$R,Ee(rP||(rP=s(["\n                          color: ",";\n                          &::after {\n                            background-color: ",";\n                          }\n                        "])),e.color,e.color),n&&JR,n&&Ee(iP||(iP=s(["\n                            background-color: ",";\n                          "])),e.color)],children:dn("span",{css:[XR,ZR,n&&JR,n&&Ee(sP||(sP=s(["\n                              background-color: ",";\n                            "])),e.color)],children:e.value})})}},t):null))}),"\u5f93\u6765"===r&&dn("div",{}),"\u30c7\u30a4\u30b5\u30fc\u30d3\u30b9"===r&&dn("div",{})]})})};var aP,lP,cP,uP,hP,dP,fP;const pP=Ee(aP||(aP=s(["\n  max-width: 600px;\n  margin: 0 auto;\n  padding: 30px 18px 150px;\n  display: flex;\n  flex-direction: column;\n  background-color: #fff;\n  min-height: 100vh;\n"]))),mP=Ee(lP||(lP=s(["\n  display: flex;\n"]))),gP=Ee(cP||(cP=s(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n"]))),vP=Ee(uP||(uP=s(["\n  font-size: 20px;\n  font-weight: bold;\n  padding: 10px;\n  color: #333;\n"]))),yP=Ee(hP||(hP=s(["\n  &:not(:last-child) {\n    margin-bottom: 15px;\n  }\n"]))),wP=Ee(dP||(dP=s(["\n  font-size: 16px;\n  font-weight: bold;\n  padding: 10px;\n"]))),bP=Ee(fP||(fP=s(["\n  margin-bottom: 18px;\n"]))),_P=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,o]=(0,t.useState)(""),a=()=>{n(""),i("")},l=()=>{o("")};return fn("div",{css:pP,children:[fn("div",{css:gP,children:[dn("h1",{css:vP,children:"\u8a18\u9332"}),dn("button",{children:dn("img",{src:gA,alt:"\u8ffd\u52a0"})})]}),dn("div",{css:yP,children:dn(SN,{selectedDepartment:e,selectedRoom:r,selectedItem:s,onDepartmentClick:a,onRoomClick:()=>{i("")},onItemClick:l,isDisabled:!!e||!!r||!!s})}),fn("div",{css:yP,children:[fn("div",{css:mP,children:[dn("h2",{css:wP,children:"\u25bc \u90e8\u7f72"}),dn("button",{onClick:a,children:"\u89e3\u9664\u3059\u308b"})]}),dn(oP,{onDepartmentClick:e=>{n(e),i("")},onRoomClick:e=>{i(e)},selectedDepartment:e,selectedRoom:r})]}),fn("div",{css:yP,children:[fn("div",{css:mP,children:[dn("h2",{css:wP,children:"\u25bc \u9805\u76ee"}),dn("button",{onClick:l,children:"\u89e3\u9664\u3059\u308b"})]}),dn(uR,{onClick:e=>{o(e)},selectedItem:s})]}),fn("div",{css:yP,children:[dn("h2",{css:[wP,bP],children:"\u25bc \u691c\u7d22\u7d50\u679c"}),dn(BR,{selectedDepartment:e,selectedRoom:r,selectedItem:s})]})]})};const EP=n.p+"static/media/home-active.3a78a90b434beaa89d99c23a04f2c7ed.svg";const IP=n.p+"static/media/home.eb36321b07fe37f7a569abe58ad87489.svg";const TP=n.p+"static/media/pen-active.c83bb6aef3adffb9e1c323f83a66219b.svg";const SP=n.p+"static/media/pen.9042bb06e23bc05c4ba6ba1f75fe2251.svg";const kP=n.p+"static/media/mail-active.492094a42b4b8953733cfe35de81787a.svg";const xP=n.p+"static/media/mail.e659a1abd2bbe3438be345e3e167eb91.svg";const CP=n.p+"static/media/send.2d13d03103edee0f4a432bae599f373d.svg";const AP=n.p+"static/media/back.5e566790522f5e7fe6dcd21b20e4cb85.svg";const NP=n.p+"static/media/chat.f9a66dab3a1f725fc8987d58778a489d.svg";const RP=n.p+"static/media/chat-white.e0d78f6e7cd6cca67a35c1d5417d7cd0.svg";var PP,DP,OP,LP,MP,FP,UP,VP,zP,BP,jP,qP,GP,WP,KP;const HP=Ee(PP||(PP=s(["\n  position: relative;\n  left: 50%;\n  transform: translateX(-50%);\n  max-width: 600px;\n  width: 100%;\n  height: 100vh;\n  background-color: #eee;\n  overflow: hidden;\n"]))),QP=Ee(DP||(DP=s(["\n  width: 100%;\n  bottom: 60px;\n  overflow-y: scroll;\n  position: absolute;\n  padding: 160px 30px 30px;\n  height: 100vh;\n"]))),YP=Ee(OP||(OP=s(['\n  display: flex;\n  justify-content: space-around;\n  align-items: center;\n  width: 100%;\n  background-color: #fff;\n  padding-top: 30px;\n  padding-bottom: 16px;\n  border-bottom: 2px solid #333;\n  position: fixed;\n  top: 0;\n  z-index: 20;\n  & > a {\n    position: relative;\n    &::after {\n      position: absolute;\n      top: 50%;\n      left: 50%;\n      content: "";\n      width: 150%;\n      height: 100%;\n      padding: 10px;\n      transform: translate(-50%, -50%);\n    }\n  }\n']))),$P=Ee(LP||(LP=s(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  gap: 16px;\n  & > p {\n    font-size: 20px;\n  }\n"]))),JP=Ee(MP||(MP=s(["\n  text-align: center;\n  margin-top: 20px;\n  margin-bottom: 50px;\n  color: #3c75a7;\n  font-size: 15px;\n  &:not(:first-child) {\n    margin-top: 100px;\n  }\n"]))),XP=Ee(FP||(FP=s(["\n  margin: 20px 0;\n  display: flex;\n  justify-content: flex-end;\n  align-items: flex-start;\n"]))),ZP=Ee(UP||(UP=s(["\n  justify-content: flex-start;\n"]))),eD=Ee(VP||(VP=s(['\n  max-width: 500px;\n  display: flex;\n  flex-wrap: wrap;\n  position: relative;\n  padding: 8px 14px;\n  border-radius: 12px;\n  background: #333333;\n  box-sizing: border-box;\n  line-height: 1.5;\n  align-items: center;\n  color: #fff;\n  &::after {\n    position: absolute;\n    bottom: -8px;\n    right: -30px;\n    width: 30px;\n    height: 30px;\n    content: "";\n    background-image: url(',");\n    background-repeat: no-repeat;\n  }\n"])),NP),tD=Ee(zP||(zP=s(["\n  background: #fff;\n  border: 2px solid #333;\n  color: #333;\n  &::after {\n    left: -14px;\n    right: auto;\n    background-image: url(",");\n  }\n"])),RP),nD=Ee(BP||(BP=s(["\n  display: flex;\n  gap: 4px;\n  flex-direction: column;\n  align-items: flex-end;\n"]))),rD=Ee(jP||(jP=s(["\n  display: flex;\n  gap: 20px;\n  align-items: flex-end;\n"]))),iD=Ee(qP||(qP=s(["\n  border-radius: 50%;\n  width: 40px;\n  height: 40px;\n  object-fit: cover;\n"]))),sD=Ee(GP||(GP=s(["\n  color: #8a8a8a;\n  font-size: 12px;\n"]))),oD=Ee(WP||(WP=s(["\n  display: flex;\n  padding: 40px 20px;\n  gap: 20px;\n  justify-content: space-around;\n  align-items: center;\n  position: fixed;\n  left: 50%;\n  bottom: 0;\n  max-width: 600px;\n  width: 100%;\n  height: 80px;\n  background-color: #fff;\n  border-top: 2px solid #333;\n  transform: translateX(-50%);\n"]))),aD=Ee(KP||(KP=s(["\n  border-radius: 100px;\n  border: 2px solid #333;\n  padding: 15px 20px;\n  width: 100%;\n  position: relative;\n  z-index: 1;\n  font-size: 15px;\n"]))),lD=e=>{const t=new Date,n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),s=["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"];if(n===t.getFullYear()&&r===t.getMonth()+1&&i===t.getDate()){const t=s[e.getDay()];return"\u4eca\u65e5\uff08".concat(r,"\u6708").concat(i,"\u65e5\uff1a").concat(t,"\uff09")}if(n===t.getFullYear()&&r===t.getMonth()+1&&i===t.getDate()-1){const t=s[e.getDay()];return"\u6628\u65e5\uff08".concat(r,"\u6708").concat(i,"\u65e5\uff1a").concat(t,"\uff09")}return"".concat(r,"\u6708").concat(i,"\u65e5")},cD=()=>{var e;const n=(0,t.useRef)(null),{chatId:r}=function(){let{matches:e}=t.useContext(ht),n=e[e.length-1];return n?n.params:{}}(),[i,s]=(0,t.useState)([]),[o,a]=(0,t.useState)(""),l=null===(e=ui.auth().currentUser)||void 0===e?void 0:e.uid,[c,u]=(0,t.useState)(null),h=async(e,t)=>[e,t].sort().join("-"),[d,f]=(0,t.useState)(null);(0,t.useEffect)((()=>{(async()=>{if(l&&r){const e=await h(l,r),t=Fx.collection("chatroom").doc(e).collection("messages");f(t)}})()}),[l,r]),(0,t.useEffect)((()=>{if(d){const e=tx(d.orderBy("date","asc"),(e=>{const t=e.docs.map((e=>({id:e.id,senderId:e.data().senderId,msg:e.data().msg,date:new Date(e.data().date)})));s(t)}));return()=>{e()}}}),[d]),(0,t.useEffect)((()=>{if(r){(async()=>{const e=await Fx.collection("users").doc(r).get();if(e.exists){const t=e.data();t&&u({id:t.id,name:t.name,image:t.image,comment:t.comment})}})()}}),[r]),(0,t.useEffect)((()=>{let e=()=>{};return(async()=>{if(!l||!r)return;const t=await h(l,r),n=Fx.collection("chatroom").doc(t).collection("messages");e=tx(n.orderBy("date","asc"),(e=>{const t=e.docs.map((e=>({id:e.id,senderId:e.data().senderId,msg:e.data().msg,date:new Date(e.data().date)})));s(t)}))})().catch(console.error),()=>{e()}}),[l,r]);return(0,t.useEffect)((()=>{n.current&&n.current.scrollTo({top:n.current.scrollHeight,behavior:"auto"})}),[i]),fn("div",{css:HP,children:[fn("div",{css:YP,children:[dn(Wt,{to:"/contact/chat",children:dn("img",{src:AP,alt:""})}),fn("div",{css:$P,children:[dn("img",{src:c?null===c||void 0===c?void 0:c.image:void 0,alt:null===c||void 0===c?void 0:c.name,css:iD,width:40,height:40}),dn("p",{children:null===c||void 0===c?void 0:c.name})]}),dn("img",{src:YA})]}),dn("div",{css:QP,ref:n,children:i.map(((e,n)=>{const r=e.senderId===l,s=0===n||e.date.toDateString()!==i[n-1].date.toDateString();return fn(t.Fragment,{children:[s&&dn("p",{css:JP,children:lD(e.date)}),dn("div",{css:[XP,!r&&ZP],children:fn("div",{css:nD,children:[fn("div",{css:rD,children:[!r&&dn("img",{src:c?null===c||void 0===c?void 0:c.image:void 0,alt:null===c||void 0===c?void 0:c.name,width:40,height:40,css:iD}),dn("p",{css:[eD,!r&&tD],children:e.msg})]}),dn("span",{css:sD,children:Vx(e.date)})]})})]},e.id)}))}),fn("form",{onSubmit:async e=>{if(e.preventDefault(),0!==o.length&&l&&r){const e=await h(l,r),t=Fx.collection("chatroom").doc(e).collection("messages");await t.add({msg:o,date:(new Date).getTime(),senderId:l}),a("")}},css:oD,children:[dn("img",{src:gA,alt:"\u30d5\u30a1\u30a4\u30eb\u3092\u8ffd\u52a0"}),dn("input",{type:"text",value:o,onChange:e=>a(e.target.value),css:aD,placeholder:"\u30e1\u30c3\u30bb\u30fc\u30b8\u3092\u5165\u529b"}),dn("input",{type:"image",src:CP,alt:""})]})]})};var uD,hD,dD,fD,pD,mD,gD,vD,yD,wD=n(611);const bD=Ee(uD||(uD=s(["\n  padding-top: 20px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 90px;\n"]))),_D=Ee(hD||(hD=s(["\n  display: flex;\n  position: relative;\n  width: 90%;\n  margin: 0 auto;\n"]))),ED=Ee(dD||(dD=s(["\n  border-radius: 100px;\n  border: 1px solid #333;\n  padding: 12px 20px;\n  width: 100%;\n  position: relative;\n  z-index: 1;\n  font-size: 15px;\n"]))),ID=Ee(fD||(fD=s(["\n  position: absolute;\n  z-index: 0;\n  top: 5px;\n  border-radius: 100px;\n  width: 100%;\n  height: 100%;\n  background-color: #333;\n"]))),TD=Ee(pD||(pD=s(["\n  position: absolute;\n  z-index: 1;\n  top: 50%;\n  right: 15px;\n  cursor: pointer;\n  transform: translateY(-50%);\n  padding: 10px;\n"]))),SD=Ee(mD||(mD=s(["\n  display: flex;\n  flex-direction: column;\n  margin-top: 20px;\n"]))),kD=Ee(gD||(gD=s(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  gap: 12px;\n  padding: 15px 18px;\n  border-top: 1px solid #333;\n  transition: background-color 0.2s ease;\n  & > img {\n    border-radius: 50%;\n  }\n  @media (any-hover: hover) {\n    &:hover {\n      background-color: #eee;\n    }\n  }\n"]))),xD=Ee(vD||(vD=s(["\n  width: 100%;\n  font-size: 13px;\n  display: grid;\n  gap: 3px;\n"]))),CD=Ee(yD||(yD=s(["\n  font-size: 16px;\n"]))),AD=()=>dn(hn,{children:fn("div",{css:bD,children:[fn("div",{css:_D,children:[dn("input",{css:[ED],type:"text",placeholder:"\u691c\u7d22\u3059\u308b"}),dn("span",{css:ID}),dn("button",{css:TD,type:"submit",children:dn("img",{src:YA,alt:"\u691c\u7d22\u3059\u308b",width:22,height:22})})]}),fn("ul",{css:SD,children:[dn("li",{children:fn(Wt,{to:"/contact/chat/chat-01",css:kD,children:[dn("img",{src:wD,alt:"",width:56,height:56}),fn("div",{css:xD,children:[dn("p",{css:CD,children:"\u539f\u7530 \u6dbc\u5b50"}),dn("p",{children:"\u9023\u7d61"})]}),dn("div",{children:dn("span",{children:"13:28"})})]})}),dn("li",{children:fn(Wt,{to:"/contact/chat/chat-01",css:kD,children:[dn("img",{src:wD,alt:"",width:56,height:56}),fn("div",{css:xD,children:[dn("p",{css:CD,children:"\u539f\u7530 \u6dbc\u5b50"}),dn("p",{children:"\u304a\u306f\u3088\u3046\uff01"})]}),dn("div",{children:dn("span",{children:"13:28"})})]})}),dn("li",{children:fn(Wt,{to:"/contact/chat/chat-01",css:kD,children:[dn("img",{src:wD,alt:"",width:56,height:56}),fn("div",{css:xD,children:[dn("p",{css:CD,children:"\u539f\u7530 \u6dbc\u5b50"}),dn("p",{children:"\u304a\u306f\u3088\u3046\uff01"})]}),dn("div",{children:dn("span",{children:"13:28"})})]})}),dn("li",{children:fn(Wt,{to:"/contact/chat/chat-01",css:kD,children:[dn("img",{src:wD,alt:"",width:56,height:56}),fn("div",{css:xD,children:[dn("p",{css:CD,children:"\u539f\u7530 \u6dbc\u5b50"}),dn("p",{children:"\u304a\u306f\u3088\u3046\uff01"})]}),dn("div",{children:dn("span",{children:"13:28"})})]})}),dn("li",{children:fn(Wt,{to:"/contact/chat/chat-01",css:kD,children:[dn("img",{src:wD,alt:"",width:56,height:56}),fn("div",{css:xD,children:[dn("p",{css:CD,children:"\u539f\u7530 \u6dbc\u5b50"}),dn("p",{children:"\u304a\u306f\u3088\u3046\uff01"})]}),dn("div",{children:dn("span",{children:"13:28"})})]})}),dn("li",{children:fn(Wt,{to:"/contact/chat/chat-01",css:kD,children:[dn("img",{src:wD,alt:"",width:56,height:56}),fn("div",{css:xD,children:[dn("p",{css:CD,children:"\u539f\u7530 \u6dbc\u5b50"}),dn("p",{children:"\u304a\u306f\u3088\u3046\uff01"})]}),dn("div",{children:dn("span",{children:"13:28"})})]})}),dn("li",{children:fn(Wt,{to:"/contact/chat/chat-01",css:kD,children:[dn("img",{src:wD,alt:"",width:56,height:56}),fn("div",{css:xD,children:[dn("p",{css:CD,children:"\u539f\u7530 \u6dbc\u5b50"}),dn("p",{children:"\u304a\u306f\u3088\u3046\uff01"})]}),dn("div",{children:dn("span",{children:"13:28"})})]})})]})]})});var ND,RD,PD,DD,OD,LD,MD,FD,UD,VD;const zD=Ee(ND||(ND=s(["\n  padding-top: 20px;\n  display: flex;\n  flex-direction: column;\n  padding-bottom: 90px;\n"]))),BD=Ee(RD||(RD=s(["\n  display: flex;\n  position: relative;\n  width: 90%;\n  margin: 0 auto;\n"]))),jD=Ee(PD||(PD=s(["\n  border-radius: 100px;\n  border: 1px solid #333;\n  padding: 12px 20px;\n  width: 100%;\n  position: relative;\n  z-index: 1;\n  font-size: 15px;\n"]))),qD=Ee(DD||(DD=s(["\n  position: absolute;\n  z-index: 0;\n  top: 5px;\n  border-radius: 100px;\n  width: 100%;\n  height: 100%;\n  background-color: #333;\n"]))),GD=Ee(OD||(OD=s(["\n  position: absolute;\n  z-index: 1;\n  top: 50%;\n  right: 15px;\n  cursor: pointer;\n  transform: translateY(-50%);\n  padding: 10px;\n"]))),WD=Ee(LD||(LD=s(["\n  display: flex;\n  flex-direction: column;\n  margin-top: 20px;\n"]))),KD=Ee(MD||(MD=s(["\n  display: grid;\n  grid-template-columns: 56px 1fr 50px;\n  justify-content: space-between;\n  align-items: center;\n  gap: 12px;\n  padding: 15px 18px;\n  border-top: 1px solid #333;\n  transition: background-color 0.2s ease;\n  & > img {\n    width: 56px;\n    height: 56px;\n    object-fit: cover;\n    border-radius: 50%;\n  }\n  &:last-child {\n    border-bottom: 1px solid #333;\n  }\n  @media (any-hover: hover) {\n    &:hover {\n      background-color: #eee;\n    }\n  }\n"]))),HD=Ee(FD||(FD=s(["\n  width: 100%;\n  display: grid;\n  gap: 3px;\n"]))),QD=Ee(UD||(UD=s(["\n  font-size: 16px;\n"]))),YD=Ee(VD||(VD=s(["\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-size: 14px;\n"]))),$D=()=>{var e;const[n,r]=(0,t.useState)([]),i=null===(e=ui.auth().currentUser)||void 0===e?void 0:e.uid,{users:s}=t.useContext(vt);return(0,t.useEffect)((()=>{s&&(async()=>{const e=s.map((e=>{const t=[i,e.id].sort().join("-");return Fx.collection("chatroom").doc(t).collection("messages").orderBy("date","desc").limit(1).get().then((t=>{const n=t.docs[0];return n?{sessionId:e.id,id:n.id,name:e.name,msg:n.data().msg,imageURL:e.image,date:new Date(n.data().date)}:null}))})),t=await Promise.all(e);r(t.filter((e=>null!==e)))})()}),[i,s]),fn("div",{css:zD,children:[fn("div",{css:BD,children:[dn("input",{css:[jD],type:"text",placeholder:"\u691c\u7d22\u3059\u308b"}),dn("span",{css:qD}),dn("button",{css:GD,type:"submit",children:dn("img",{src:YA,alt:"\u691c\u7d22\u3059\u308b",width:22,height:22})})]}),dn("ul",{css:WD,children:n.filter((e=>e.sessionId!==i)).sort(((e,t)=>t.date.getTime()-e.date.getTime())).map((e=>dn("li",{children:fn(Wt,{to:"/contact/chat/".concat(e.sessionId),css:KD,children:[dn("img",{src:e.imageURL||void 0,alt:e.name,width:56,height:56}),fn("div",{css:HD,children:[dn("p",{css:QD,children:e.name}),dn("p",{css:YD,children:e.msg})]}),dn("span",{children:Vx(e.date)})]})},e.sessionId)))})]})};var JD,XD,ZD,eO,tO,nO,rO;const iO=Ee(JD||(JD=s(["\n  background-color: #333;\n  height: auto;\n"]))),sO=Ee(XD||(XD=s(['\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  align-items: center;\n  justify-items: center;\n  max-width: 600px;\n  width: 100%;\n  height: 85px;\n  background-color: #333;\n  position: fixed;\n  bottom: 0;\n  left: 50%;\n  z-index: 10;\n  transform: translateX(-50%);\n  &::after {\n    position: absolute;\n    left: 0;\n    z-index: -1;\n    content: "";\n    width: 120px;\n    height: 120px;\n    background-color: #333;\n    border-radius: 50%;\n    transition: left 0.3s ease-in-out;\n  }\n']))),oO=Ee(ZD||(ZD=s(['\n  &::after {\n    position: absolute;\n    left: calc(calc(100% / 6) - 60px);\n    z-index: -1;\n    content: "";\n    width: 120px;\n    height: 120px;\n    background-color: #333;\n    border-radius: 50%;\n    transform: translateY(-30px);\n  }\n']))),aO=Ee(eO||(eO=s(['\n  &::after {\n    position: absolute;\n    left: calc(calc(100% / 2) - 60px);\n    z-index: -1;\n    content: "";\n    width: 120px;\n    height: 120px;\n    background-color: #333;\n    border-radius: 50%;\n    transform: translateY(-30px);\n  }\n']))),lO=Ee(tO||(tO=s(['\n  &::after {\n    position: absolute;\n    left: calc(calc(100% / calc(6 / 5)) - 60px);\n    z-index: -1;\n    content: "";\n    width: 120px;\n    height: 120px;\n    background-color: #333;\n    border-radius: 50%;\n    transform: translateY(-30px);\n  }\n']))),cO=Ee(nO||(nO=s(['\n  display: flex;\n  gap: 4px;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  transition: transform 0.3s ease-in-out;\n  border-radius: 50%;\n  color: #fff;\n  position: relative;\n  &::after {\n    content: "";\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    padding: 20px;\n  }\n']))),uO=Ee(rO||(rO=s(["\n  width: 90px;\n  height: 90px;\n  background-color: #fff;\n  transform: translateY(-30px);\n  border: 1px solid #333;\n  color: #333;\n"]))),hO=()=>{const e=pt(),[n,r]=(0,t.useState)(!1);(0,t.useEffect)((()=>{r(e.pathname.includes("/contact/chat/"))}),[e]);const i="/"===(s=e.pathname)?0:s.startsWith("/record")?1:s.startsWith("/contact")?2:0;var s;return fn("div",{css:iO,children:[dn(mA.Group,{defaultIndex:1,selectedIndex:i,children:!n&&fn(mA.List,{css:[sO,0===i&&oO,1===i&&aO,2===i&&lO],children:[dn(mA,{children:e=>{let{selected:t}=e;return fn(Wt,{to:"/",css:[cO,t&&uO],children:[dn("img",{alt:"\u30db\u30fc\u30e0",src:t?EP:IP}),dn("span",{children:"\u30db\u30fc\u30e0"})]})}}),dn(mA,{children:e=>{let{selected:t}=e;return fn(Wt,{to:"record",css:[cO,t&&uO],children:[dn("img",{alt:"\u8a18\u9332",src:t?TP:SP}),dn("span",{children:"\u8a18\u9332"})]})}}),dn(mA,{children:e=>{let{selected:t}=e;return fn(Wt,{to:"contact",css:[cO,t&&uO],children:[dn("img",{alt:"\u9023\u7d61",src:t?kP:xP}),dn("span",{children:"\u9023\u7d61"})]})}})]})}),fn(Ot,{children:[dn(Pt,{path:"/",element:dn(aC,{})}),dn(Pt,{path:"/record",element:dn(_P,{})}),fn(Pt,{path:"/contact",element:dn(QA,{}),children:[dn(Pt,{index:!0,element:dn($D,{})}),dn(Pt,{path:"chat",element:dn($D,{})}),dn(Pt,{path:"board",element:dn(AD,{})})]}),dn(Pt,{path:"/contact/chat/:chatId",element:dn(cD,{})})]})]})},dO=e=>{e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:o}=t;n(e),r(e),i(e),s(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,Yt.jsx)(t.StrictMode,{children:(0,Yt.jsx)(jt,{children:(0,Yt.jsx)(hO,{})})})),dO()})()})();
//# sourceMappingURL=main.0bad0089.js.map